(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function l_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Om={exports:{}},ll={},Lm={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uo=Symbol.for("react.element"),u_=Symbol.for("react.portal"),c_=Symbol.for("react.fragment"),h_=Symbol.for("react.strict_mode"),d_=Symbol.for("react.profiler"),f_=Symbol.for("react.provider"),p_=Symbol.for("react.context"),m_=Symbol.for("react.forward_ref"),g_=Symbol.for("react.suspense"),y_=Symbol.for("react.memo"),v_=Symbol.for("react.lazy"),bf=Symbol.iterator;function __(t){return t===null||typeof t!="object"?null:(t=bf&&t[bf]||t["@@iterator"],typeof t=="function"?t:null)}var Fm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zm=Object.assign,Um={};function js(t,e,n){this.props=t,this.context=e,this.refs=Um,this.updater=n||Fm}js.prototype.isReactComponent={};js.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};js.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Bm(){}Bm.prototype=js.prototype;function ch(t,e,n){this.props=t,this.context=e,this.refs=Um,this.updater=n||Fm}var hh=ch.prototype=new Bm;hh.constructor=ch;zm(hh,js.prototype);hh.isPureReactComponent=!0;var Rf=Array.isArray,$m=Object.prototype.hasOwnProperty,dh={current:null},Gm={key:!0,ref:!0,__self:!0,__source:!0};function qm(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)$m.call(e,r)&&!Gm.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:uo,type:t,key:i,ref:a,props:s,_owner:dh.current}}function x_(t,e){return{$$typeof:uo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function fh(t){return typeof t=="object"&&t!==null&&t.$$typeof===uo}function w_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Pf=/\/+/g;function lu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?w_(""+t.key):e.toString(36)}function la(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case uo:case u_:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+lu(a,0):r,Rf(s)?(n="",t!=null&&(n=t.replace(Pf,"$&/")+"/"),la(s,e,n,"",function(d){return d})):s!=null&&(fh(s)&&(s=x_(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Pf,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Rf(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+lu(i,l);a+=la(i,e,n,u,s)}else if(u=__(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+lu(i,l++),a+=la(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function zo(t,e,n){if(t==null)return t;var r=[],s=0;return la(t,r,"","",function(i){return e.call(n,i,s++)}),r}function E_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mt={current:null},ua={transition:null},T_={ReactCurrentDispatcher:mt,ReactCurrentBatchConfig:ua,ReactCurrentOwner:dh};function Hm(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:zo,forEach:function(t,e,n){zo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return zo(t,function(){e++}),e},toArray:function(t){return zo(t,function(e){return e})||[]},only:function(t){if(!fh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Component=js;ce.Fragment=c_;ce.Profiler=d_;ce.PureComponent=ch;ce.StrictMode=h_;ce.Suspense=g_;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T_;ce.act=Hm;ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=zm({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=dh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)$m.call(e,u)&&!Gm.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:uo,type:t.type,key:s,ref:i,props:r,_owner:a}};ce.createContext=function(t){return t={$$typeof:p_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:f_,_context:t},t.Consumer=t};ce.createElement=qm;ce.createFactory=function(t){var e=qm.bind(null,t);return e.type=t,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:m_,render:t}};ce.isValidElement=fh;ce.lazy=function(t){return{$$typeof:v_,_payload:{_status:-1,_result:t},_init:E_}};ce.memo=function(t,e){return{$$typeof:y_,type:t,compare:e===void 0?null:e}};ce.startTransition=function(t){var e=ua.transition;ua.transition={};try{t()}finally{ua.transition=e}};ce.unstable_act=Hm;ce.useCallback=function(t,e){return mt.current.useCallback(t,e)};ce.useContext=function(t){return mt.current.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t){return mt.current.useDeferredValue(t)};ce.useEffect=function(t,e){return mt.current.useEffect(t,e)};ce.useId=function(){return mt.current.useId()};ce.useImperativeHandle=function(t,e,n){return mt.current.useImperativeHandle(t,e,n)};ce.useInsertionEffect=function(t,e){return mt.current.useInsertionEffect(t,e)};ce.useLayoutEffect=function(t,e){return mt.current.useLayoutEffect(t,e)};ce.useMemo=function(t,e){return mt.current.useMemo(t,e)};ce.useReducer=function(t,e,n){return mt.current.useReducer(t,e,n)};ce.useRef=function(t){return mt.current.useRef(t)};ce.useState=function(t){return mt.current.useState(t)};ce.useSyncExternalStore=function(t,e,n){return mt.current.useSyncExternalStore(t,e,n)};ce.useTransition=function(){return mt.current.useTransition()};ce.version="18.3.1";Lm.exports=ce;var U=Lm.exports;const I_=l_(U);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k_=U,S_=Symbol.for("react.element"),C_=Symbol.for("react.fragment"),N_=Object.prototype.hasOwnProperty,A_=k_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,b_={key:!0,ref:!0,__self:!0,__source:!0};function Wm(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)N_.call(e,r)&&!b_.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:S_,type:t,key:i,ref:a,props:s,_owner:A_.current}}ll.Fragment=C_;ll.jsx=Wm;ll.jsxs=Wm;Om.exports=ll;var c=Om.exports,Hu={},Km={exports:{}},Lt={},Qm={exports:{}},Ym={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,H){var Q=V.length;V.push(H);e:for(;0<Q;){var K=Q-1>>>1,oe=V[K];if(0<s(oe,H))V[K]=H,V[Q]=oe,Q=K;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var H=V[0],Q=V.pop();if(Q!==H){V[0]=Q;e:for(var K=0,oe=V.length,xe=oe>>>1;K<xe;){var yt=2*(K+1)-1,St=V[yt],Ct=yt+1,Nt=V[Ct];if(0>s(St,Q))Ct<oe&&0>s(Nt,St)?(V[K]=Nt,V[Ct]=Q,K=Ct):(V[K]=St,V[yt]=Q,K=yt);else if(Ct<oe&&0>s(Nt,Q))V[K]=Nt,V[Ct]=Q,K=Ct;else break e}}return H}function s(V,H){var Q=V.sortIndex-H.sortIndex;return Q!==0?Q:V.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],d=[],p=1,y=null,v=3,S=!1,A=!1,b=!1,j=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(V){for(var H=n(d);H!==null;){if(H.callback===null)r(d);else if(H.startTime<=V)r(d),H.sortIndex=H.expirationTime,e(u,H);else break;H=n(d)}}function P(V){if(b=!1,k(V),!A)if(n(u)!==null)A=!0,G(O);else{var H=n(d);H!==null&&ue(P,H.startTime-V)}}function O(V,H){A=!1,b&&(b=!1,I(g),g=-1),S=!0;var Q=v;try{for(k(H),y=n(u);y!==null&&(!(y.expirationTime>H)||V&&!C());){var K=y.callback;if(typeof K=="function"){y.callback=null,v=y.priorityLevel;var oe=K(y.expirationTime<=H);H=t.unstable_now(),typeof oe=="function"?y.callback=oe:y===n(u)&&r(u),k(H)}else r(u);y=n(u)}if(y!==null)var xe=!0;else{var yt=n(d);yt!==null&&ue(P,yt.startTime-H),xe=!1}return xe}finally{y=null,v=Q,S=!1}}var M=!1,x=null,g=-1,T=5,E=-1;function C(){return!(t.unstable_now()-E<T)}function N(){if(x!==null){var V=t.unstable_now();E=V;var H=!0;try{H=x(!0,V)}finally{H?_():(M=!1,x=null)}}else M=!1}var _;if(typeof w=="function")_=function(){w(N)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,de=J.port2;J.port1.onmessage=N,_=function(){de.postMessage(null)}}else _=function(){j(N,0)};function G(V){x=V,M||(M=!0,_())}function ue(V,H){g=j(function(){V(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){A||S||(A=!0,G(O))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(V){switch(v){case 1:case 2:case 3:var H=3;break;default:H=v}var Q=v;v=H;try{return V()}finally{v=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,H){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Q=v;v=V;try{return H()}finally{v=Q}},t.unstable_scheduleCallback=function(V,H,Q){var K=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?K+Q:K):Q=K,V){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=Q+oe,V={id:p++,callback:H,priorityLevel:V,startTime:Q,expirationTime:oe,sortIndex:-1},Q>K?(V.sortIndex=Q,e(d,V),n(u)===null&&V===n(d)&&(b?(I(g),g=-1):b=!0,ue(P,Q-K))):(V.sortIndex=oe,e(u,V),A||S||(A=!0,G(O))),V},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(V){var H=v;return function(){var Q=v;v=H;try{return V.apply(this,arguments)}finally{v=Q}}}})(Ym);Qm.exports=Ym;var R_=Qm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P_=U,Ot=R_;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xm=new Set,Mi={};function Fr(t,e){_s(t,e),_s(t+"Capture",e)}function _s(t,e){for(Mi[t]=e,t=0;t<e.length;t++)Xm.add(e[t])}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wu=Object.prototype.hasOwnProperty,j_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jf={},Df={};function D_(t){return Wu.call(Df,t)?!0:Wu.call(jf,t)?!1:j_.test(t)?Df[t]=!0:(jf[t]=!0,!1)}function V_(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function M_(t,e,n,r){if(e===null||typeof e>"u"||V_(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gt(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){tt[t]=new gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];tt[e]=new gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){tt[t]=new gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){tt[t]=new gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){tt[t]=new gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){tt[t]=new gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){tt[t]=new gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){tt[t]=new gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){tt[t]=new gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var ph=/[\-:]([a-z])/g;function mh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ph,mh);tt[e]=new gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ph,mh);tt[e]=new gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ph,mh);tt[e]=new gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){tt[t]=new gt(t,1,!1,t.toLowerCase(),null,!1,!1)});tt.xlinkHref=new gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){tt[t]=new gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function gh(t,e,n,r){var s=tt.hasOwnProperty(e)?tt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(M_(e,n,s,r)&&(n=null),r||s===null?D_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Pn=P_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Uo=Symbol.for("react.element"),Zr=Symbol.for("react.portal"),es=Symbol.for("react.fragment"),yh=Symbol.for("react.strict_mode"),Ku=Symbol.for("react.profiler"),Jm=Symbol.for("react.provider"),Zm=Symbol.for("react.context"),vh=Symbol.for("react.forward_ref"),Qu=Symbol.for("react.suspense"),Yu=Symbol.for("react.suspense_list"),_h=Symbol.for("react.memo"),Fn=Symbol.for("react.lazy"),eg=Symbol.for("react.offscreen"),Vf=Symbol.iterator;function ii(t){return t===null||typeof t!="object"?null:(t=Vf&&t[Vf]||t["@@iterator"],typeof t=="function"?t:null)}var Pe=Object.assign,uu;function pi(t){if(uu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);uu=e&&e[1]||""}return`
`+uu+t}var cu=!1;function hu(t,e){if(!t||cu)return"";cu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{cu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?pi(t):""}function O_(t){switch(t.tag){case 5:return pi(t.type);case 16:return pi("Lazy");case 13:return pi("Suspense");case 19:return pi("SuspenseList");case 0:case 2:case 15:return t=hu(t.type,!1),t;case 11:return t=hu(t.type.render,!1),t;case 1:return t=hu(t.type,!0),t;default:return""}}function Xu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case es:return"Fragment";case Zr:return"Portal";case Ku:return"Profiler";case yh:return"StrictMode";case Qu:return"Suspense";case Yu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Zm:return(t.displayName||"Context")+".Consumer";case Jm:return(t._context.displayName||"Context")+".Provider";case vh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _h:return e=t.displayName||null,e!==null?e:Xu(t.type)||"Memo";case Fn:e=t._payload,t=t._init;try{return Xu(t(e))}catch{}}return null}function L_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xu(e);case 8:return e===yh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function or(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function tg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function F_(t){var e=tg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Bo(t){t._valueTracker||(t._valueTracker=F_(t))}function ng(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=tg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ka(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ju(t,e){var n=e.checked;return Pe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Mf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=or(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function rg(t,e){e=e.checked,e!=null&&gh(t,"checked",e,!1)}function Zu(t,e){rg(t,e);var n=or(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ec(t,e.type,n):e.hasOwnProperty("defaultValue")&&ec(t,e.type,or(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Of(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ec(t,e,n){(e!=="number"||ka(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var mi=Array.isArray;function hs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+or(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function tc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Pe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Lf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(mi(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:or(n)}}function sg(t,e){var n=or(e.value),r=or(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ff(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ig(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ig(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var $o,og=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for($o=$o||document.createElement("div"),$o.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=$o.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Oi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ei={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},z_=["Webkit","ms","Moz","O"];Object.keys(Ei).forEach(function(t){z_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ei[e]=Ei[t]})});function ag(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ei.hasOwnProperty(t)&&Ei[t]?(""+e).trim():e+"px"}function lg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=ag(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var U_=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rc(t,e){if(e){if(U_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function sc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ic=null;function xh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var oc=null,ds=null,fs=null;function zf(t){if(t=fo(t)){if(typeof oc!="function")throw Error($(280));var e=t.stateNode;e&&(e=fl(e),oc(t.stateNode,t.type,e))}}function ug(t){ds?fs?fs.push(t):fs=[t]:ds=t}function cg(){if(ds){var t=ds,e=fs;if(fs=ds=null,zf(t),e)for(t=0;t<e.length;t++)zf(e[t])}}function hg(t,e){return t(e)}function dg(){}var du=!1;function fg(t,e,n){if(du)return t(e,n);du=!0;try{return hg(t,e,n)}finally{du=!1,(ds!==null||fs!==null)&&(dg(),cg())}}function Li(t,e){var n=t.stateNode;if(n===null)return null;var r=fl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var ac=!1;if(kn)try{var oi={};Object.defineProperty(oi,"passive",{get:function(){ac=!0}}),window.addEventListener("test",oi,oi),window.removeEventListener("test",oi,oi)}catch{ac=!1}function B_(t,e,n,r,s,i,a,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(p){this.onError(p)}}var Ti=!1,Sa=null,Ca=!1,lc=null,$_={onError:function(t){Ti=!0,Sa=t}};function G_(t,e,n,r,s,i,a,l,u){Ti=!1,Sa=null,B_.apply($_,arguments)}function q_(t,e,n,r,s,i,a,l,u){if(G_.apply(this,arguments),Ti){if(Ti){var d=Sa;Ti=!1,Sa=null}else throw Error($(198));Ca||(Ca=!0,lc=d)}}function zr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function pg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Uf(t){if(zr(t)!==t)throw Error($(188))}function H_(t){var e=t.alternate;if(!e){if(e=zr(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Uf(s),t;if(i===r)return Uf(s),e;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function mg(t){return t=H_(t),t!==null?gg(t):null}function gg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=gg(t);if(e!==null)return e;t=t.sibling}return null}var yg=Ot.unstable_scheduleCallback,Bf=Ot.unstable_cancelCallback,W_=Ot.unstable_shouldYield,K_=Ot.unstable_requestPaint,Oe=Ot.unstable_now,Q_=Ot.unstable_getCurrentPriorityLevel,wh=Ot.unstable_ImmediatePriority,vg=Ot.unstable_UserBlockingPriority,Na=Ot.unstable_NormalPriority,Y_=Ot.unstable_LowPriority,_g=Ot.unstable_IdlePriority,ul=null,ln=null;function X_(t){if(ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(ul,t,void 0,(t.current.flags&128)===128)}catch{}}var Zt=Math.clz32?Math.clz32:e1,J_=Math.log,Z_=Math.LN2;function e1(t){return t>>>=0,t===0?32:31-(J_(t)/Z_|0)|0}var Go=64,qo=4194304;function gi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Aa(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=gi(l):(i&=a,i!==0&&(r=gi(i)))}else a=n&~s,a!==0?r=gi(a):i!==0&&(r=gi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Zt(e),s=1<<n,r|=t[n],e&=~s;return r}function t1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function n1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Zt(i),l=1<<a,u=s[a];u===-1?(!(l&n)||l&r)&&(s[a]=t1(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function uc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function xg(){var t=Go;return Go<<=1,!(Go&4194240)&&(Go=64),t}function fu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function co(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Zt(e),t[e]=n}function r1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Zt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Eh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Zt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ve=0;function wg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Eg,Th,Tg,Ig,kg,cc=!1,Ho=[],Hn=null,Wn=null,Kn=null,Fi=new Map,zi=new Map,Un=[],s1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $f(t,e){switch(t){case"focusin":case"focusout":Hn=null;break;case"dragenter":case"dragleave":Wn=null;break;case"mouseover":case"mouseout":Kn=null;break;case"pointerover":case"pointerout":Fi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zi.delete(e.pointerId)}}function ai(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=fo(e),e!==null&&Th(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function i1(t,e,n,r,s){switch(e){case"focusin":return Hn=ai(Hn,t,e,n,r,s),!0;case"dragenter":return Wn=ai(Wn,t,e,n,r,s),!0;case"mouseover":return Kn=ai(Kn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Fi.set(i,ai(Fi.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,zi.set(i,ai(zi.get(i)||null,t,e,n,r,s)),!0}return!1}function Sg(t){var e=Er(t.target);if(e!==null){var n=zr(e);if(n!==null){if(e=n.tag,e===13){if(e=pg(n),e!==null){t.blockedOn=e,kg(t.priority,function(){Tg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ca(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=hc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ic=r,n.target.dispatchEvent(r),ic=null}else return e=fo(n),e!==null&&Th(e),t.blockedOn=n,!1;e.shift()}return!0}function Gf(t,e,n){ca(t)&&n.delete(e)}function o1(){cc=!1,Hn!==null&&ca(Hn)&&(Hn=null),Wn!==null&&ca(Wn)&&(Wn=null),Kn!==null&&ca(Kn)&&(Kn=null),Fi.forEach(Gf),zi.forEach(Gf)}function li(t,e){t.blockedOn===e&&(t.blockedOn=null,cc||(cc=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,o1)))}function Ui(t){function e(s){return li(s,t)}if(0<Ho.length){li(Ho[0],t);for(var n=1;n<Ho.length;n++){var r=Ho[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Hn!==null&&li(Hn,t),Wn!==null&&li(Wn,t),Kn!==null&&li(Kn,t),Fi.forEach(e),zi.forEach(e),n=0;n<Un.length;n++)r=Un[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Un.length&&(n=Un[0],n.blockedOn===null);)Sg(n),n.blockedOn===null&&Un.shift()}var ps=Pn.ReactCurrentBatchConfig,ba=!0;function a1(t,e,n,r){var s=ve,i=ps.transition;ps.transition=null;try{ve=1,Ih(t,e,n,r)}finally{ve=s,ps.transition=i}}function l1(t,e,n,r){var s=ve,i=ps.transition;ps.transition=null;try{ve=4,Ih(t,e,n,r)}finally{ve=s,ps.transition=i}}function Ih(t,e,n,r){if(ba){var s=hc(t,e,n,r);if(s===null)Tu(t,e,r,Ra,n),$f(t,r);else if(i1(s,t,e,n,r))r.stopPropagation();else if($f(t,r),e&4&&-1<s1.indexOf(t)){for(;s!==null;){var i=fo(s);if(i!==null&&Eg(i),i=hc(t,e,n,r),i===null&&Tu(t,e,r,Ra,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Tu(t,e,r,null,n)}}var Ra=null;function hc(t,e,n,r){if(Ra=null,t=xh(r),t=Er(t),t!==null)if(e=zr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=pg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ra=t,null}function Cg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Q_()){case wh:return 1;case vg:return 4;case Na:case Y_:return 16;case _g:return 536870912;default:return 16}default:return 16}}var $n=null,kh=null,ha=null;function Ng(){if(ha)return ha;var t,e=kh,n=e.length,r,s="value"in $n?$n.value:$n.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return ha=s.slice(t,1<r?1-r:void 0)}function da(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Wo(){return!0}function qf(){return!1}function Ft(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Wo:qf,this.isPropagationStopped=qf,this}return Pe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wo)},persist:function(){},isPersistent:Wo}),e}var Ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sh=Ft(Ds),ho=Pe({},Ds,{view:0,detail:0}),u1=Ft(ho),pu,mu,ui,cl=Pe({},ho,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ch,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ui&&(ui&&t.type==="mousemove"?(pu=t.screenX-ui.screenX,mu=t.screenY-ui.screenY):mu=pu=0,ui=t),pu)},movementY:function(t){return"movementY"in t?t.movementY:mu}}),Hf=Ft(cl),c1=Pe({},cl,{dataTransfer:0}),h1=Ft(c1),d1=Pe({},ho,{relatedTarget:0}),gu=Ft(d1),f1=Pe({},Ds,{animationName:0,elapsedTime:0,pseudoElement:0}),p1=Ft(f1),m1=Pe({},Ds,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),g1=Ft(m1),y1=Pe({},Ds,{data:0}),Wf=Ft(y1),v1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},x1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function w1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=x1[t])?!!e[t]:!1}function Ch(){return w1}var E1=Pe({},ho,{key:function(t){if(t.key){var e=v1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=da(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ch,charCode:function(t){return t.type==="keypress"?da(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?da(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),T1=Ft(E1),I1=Pe({},cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kf=Ft(I1),k1=Pe({},ho,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ch}),S1=Ft(k1),C1=Pe({},Ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),N1=Ft(C1),A1=Pe({},cl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),b1=Ft(A1),R1=[9,13,27,32],Nh=kn&&"CompositionEvent"in window,Ii=null;kn&&"documentMode"in document&&(Ii=document.documentMode);var P1=kn&&"TextEvent"in window&&!Ii,Ag=kn&&(!Nh||Ii&&8<Ii&&11>=Ii),Qf=" ",Yf=!1;function bg(t,e){switch(t){case"keyup":return R1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ts=!1;function j1(t,e){switch(t){case"compositionend":return Rg(e);case"keypress":return e.which!==32?null:(Yf=!0,Qf);case"textInput":return t=e.data,t===Qf&&Yf?null:t;default:return null}}function D1(t,e){if(ts)return t==="compositionend"||!Nh&&bg(t,e)?(t=Ng(),ha=kh=$n=null,ts=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ag&&e.locale!=="ko"?null:e.data;default:return null}}var V1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!V1[t.type]:e==="textarea"}function Pg(t,e,n,r){ug(r),e=Pa(e,"onChange"),0<e.length&&(n=new Sh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ki=null,Bi=null;function M1(t){$g(t,0)}function hl(t){var e=ss(t);if(ng(e))return t}function O1(t,e){if(t==="change")return e}var jg=!1;if(kn){var yu;if(kn){var vu="oninput"in document;if(!vu){var Jf=document.createElement("div");Jf.setAttribute("oninput","return;"),vu=typeof Jf.oninput=="function"}yu=vu}else yu=!1;jg=yu&&(!document.documentMode||9<document.documentMode)}function Zf(){ki&&(ki.detachEvent("onpropertychange",Dg),Bi=ki=null)}function Dg(t){if(t.propertyName==="value"&&hl(Bi)){var e=[];Pg(e,Bi,t,xh(t)),fg(M1,e)}}function L1(t,e,n){t==="focusin"?(Zf(),ki=e,Bi=n,ki.attachEvent("onpropertychange",Dg)):t==="focusout"&&Zf()}function F1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hl(Bi)}function z1(t,e){if(t==="click")return hl(e)}function U1(t,e){if(t==="input"||t==="change")return hl(e)}function B1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var tn=typeof Object.is=="function"?Object.is:B1;function $i(t,e){if(tn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Wu.call(e,s)||!tn(t[s],e[s]))return!1}return!0}function ep(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function tp(t,e){var n=ep(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ep(n)}}function Vg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Vg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Mg(){for(var t=window,e=ka();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ka(t.document)}return e}function Ah(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function $1(t){var e=Mg(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Vg(n.ownerDocument.documentElement,n)){if(r!==null&&Ah(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=tp(n,i);var a=tp(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var G1=kn&&"documentMode"in document&&11>=document.documentMode,ns=null,dc=null,Si=null,fc=!1;function np(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fc||ns==null||ns!==ka(r)||(r=ns,"selectionStart"in r&&Ah(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Si&&$i(Si,r)||(Si=r,r=Pa(dc,"onSelect"),0<r.length&&(e=new Sh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ns)))}function Ko(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var rs={animationend:Ko("Animation","AnimationEnd"),animationiteration:Ko("Animation","AnimationIteration"),animationstart:Ko("Animation","AnimationStart"),transitionend:Ko("Transition","TransitionEnd")},_u={},Og={};kn&&(Og=document.createElement("div").style,"AnimationEvent"in window||(delete rs.animationend.animation,delete rs.animationiteration.animation,delete rs.animationstart.animation),"TransitionEvent"in window||delete rs.transitionend.transition);function dl(t){if(_u[t])return _u[t];if(!rs[t])return t;var e=rs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Og)return _u[t]=e[n];return t}var Lg=dl("animationend"),Fg=dl("animationiteration"),zg=dl("animationstart"),Ug=dl("transitionend"),Bg=new Map,rp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hr(t,e){Bg.set(t,e),Fr(e,[t])}for(var xu=0;xu<rp.length;xu++){var wu=rp[xu],q1=wu.toLowerCase(),H1=wu[0].toUpperCase()+wu.slice(1);hr(q1,"on"+H1)}hr(Lg,"onAnimationEnd");hr(Fg,"onAnimationIteration");hr(zg,"onAnimationStart");hr("dblclick","onDoubleClick");hr("focusin","onFocus");hr("focusout","onBlur");hr(Ug,"onTransitionEnd");_s("onMouseEnter",["mouseout","mouseover"]);_s("onMouseLeave",["mouseout","mouseover"]);_s("onPointerEnter",["pointerout","pointerover"]);_s("onPointerLeave",["pointerout","pointerover"]);Fr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),W1=new Set("cancel close invalid load scroll toggle".split(" ").concat(yi));function sp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,q_(r,e,void 0,t),t.currentTarget=null}function $g(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;sp(s,l,d),i=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;sp(s,l,d),i=u}}}if(Ca)throw t=lc,Ca=!1,lc=null,t}function ke(t,e){var n=e[vc];n===void 0&&(n=e[vc]=new Set);var r=t+"__bubble";n.has(r)||(Gg(e,t,2,!1),n.add(r))}function Eu(t,e,n){var r=0;e&&(r|=4),Gg(n,t,r,e)}var Qo="_reactListening"+Math.random().toString(36).slice(2);function Gi(t){if(!t[Qo]){t[Qo]=!0,Xm.forEach(function(n){n!=="selectionchange"&&(W1.has(n)||Eu(n,!1,t),Eu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Qo]||(e[Qo]=!0,Eu("selectionchange",!1,e))}}function Gg(t,e,n,r){switch(Cg(e)){case 1:var s=a1;break;case 4:s=l1;break;default:s=Ih}n=s.bind(null,e,n,t),s=void 0,!ac||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Tu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Er(l),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}l=l.parentNode}}r=r.return}fg(function(){var d=i,p=xh(n),y=[];e:{var v=Bg.get(t);if(v!==void 0){var S=Sh,A=t;switch(t){case"keypress":if(da(n)===0)break e;case"keydown":case"keyup":S=T1;break;case"focusin":A="focus",S=gu;break;case"focusout":A="blur",S=gu;break;case"beforeblur":case"afterblur":S=gu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Hf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=h1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=S1;break;case Lg:case Fg:case zg:S=p1;break;case Ug:S=N1;break;case"scroll":S=u1;break;case"wheel":S=b1;break;case"copy":case"cut":case"paste":S=g1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=Kf}var b=(e&4)!==0,j=!b&&t==="scroll",I=b?v!==null?v+"Capture":null:v;b=[];for(var w=d,k;w!==null;){k=w;var P=k.stateNode;if(k.tag===5&&P!==null&&(k=P,I!==null&&(P=Li(w,I),P!=null&&b.push(qi(w,P,k)))),j)break;w=w.return}0<b.length&&(v=new S(v,A,null,n,p),y.push({event:v,listeners:b}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",v&&n!==ic&&(A=n.relatedTarget||n.fromElement)&&(Er(A)||A[Sn]))break e;if((S||v)&&(v=p.window===p?p:(v=p.ownerDocument)?v.defaultView||v.parentWindow:window,S?(A=n.relatedTarget||n.toElement,S=d,A=A?Er(A):null,A!==null&&(j=zr(A),A!==j||A.tag!==5&&A.tag!==6)&&(A=null)):(S=null,A=d),S!==A)){if(b=Hf,P="onMouseLeave",I="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(b=Kf,P="onPointerLeave",I="onPointerEnter",w="pointer"),j=S==null?v:ss(S),k=A==null?v:ss(A),v=new b(P,w+"leave",S,n,p),v.target=j,v.relatedTarget=k,P=null,Er(p)===d&&(b=new b(I,w+"enter",A,n,p),b.target=k,b.relatedTarget=j,P=b),j=P,S&&A)t:{for(b=S,I=A,w=0,k=b;k;k=Qr(k))w++;for(k=0,P=I;P;P=Qr(P))k++;for(;0<w-k;)b=Qr(b),w--;for(;0<k-w;)I=Qr(I),k--;for(;w--;){if(b===I||I!==null&&b===I.alternate)break t;b=Qr(b),I=Qr(I)}b=null}else b=null;S!==null&&ip(y,v,S,b,!1),A!==null&&j!==null&&ip(y,j,A,b,!0)}}e:{if(v=d?ss(d):window,S=v.nodeName&&v.nodeName.toLowerCase(),S==="select"||S==="input"&&v.type==="file")var O=O1;else if(Xf(v))if(jg)O=U1;else{O=F1;var M=L1}else(S=v.nodeName)&&S.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(O=z1);if(O&&(O=O(t,d))){Pg(y,O,n,p);break e}M&&M(t,v,d),t==="focusout"&&(M=v._wrapperState)&&M.controlled&&v.type==="number"&&ec(v,"number",v.value)}switch(M=d?ss(d):window,t){case"focusin":(Xf(M)||M.contentEditable==="true")&&(ns=M,dc=d,Si=null);break;case"focusout":Si=dc=ns=null;break;case"mousedown":fc=!0;break;case"contextmenu":case"mouseup":case"dragend":fc=!1,np(y,n,p);break;case"selectionchange":if(G1)break;case"keydown":case"keyup":np(y,n,p)}var x;if(Nh)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else ts?bg(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(Ag&&n.locale!=="ko"&&(ts||g!=="onCompositionStart"?g==="onCompositionEnd"&&ts&&(x=Ng()):($n=p,kh="value"in $n?$n.value:$n.textContent,ts=!0)),M=Pa(d,g),0<M.length&&(g=new Wf(g,t,null,n,p),y.push({event:g,listeners:M}),x?g.data=x:(x=Rg(n),x!==null&&(g.data=x)))),(x=P1?j1(t,n):D1(t,n))&&(d=Pa(d,"onBeforeInput"),0<d.length&&(p=new Wf("onBeforeInput","beforeinput",null,n,p),y.push({event:p,listeners:d}),p.data=x))}$g(y,e)})}function qi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Pa(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Li(t,n),i!=null&&r.unshift(qi(t,i,s)),i=Li(t,e),i!=null&&r.push(qi(t,i,s))),t=t.return}return r}function Qr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ip(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=Li(n,i),u!=null&&a.unshift(qi(n,u,l))):s||(u=Li(n,i),u!=null&&a.push(qi(n,u,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var K1=/\r\n?/g,Q1=/\u0000|\uFFFD/g;function op(t){return(typeof t=="string"?t:""+t).replace(K1,`
`).replace(Q1,"")}function Yo(t,e,n){if(e=op(e),op(t)!==e&&n)throw Error($(425))}function ja(){}var pc=null,mc=null;function gc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var yc=typeof setTimeout=="function"?setTimeout:void 0,Y1=typeof clearTimeout=="function"?clearTimeout:void 0,ap=typeof Promise=="function"?Promise:void 0,X1=typeof queueMicrotask=="function"?queueMicrotask:typeof ap<"u"?function(t){return ap.resolve(null).then(t).catch(J1)}:yc;function J1(t){setTimeout(function(){throw t})}function Iu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ui(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ui(e)}function Qn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function lp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Vs=Math.random().toString(36).slice(2),an="__reactFiber$"+Vs,Hi="__reactProps$"+Vs,Sn="__reactContainer$"+Vs,vc="__reactEvents$"+Vs,Z1="__reactListeners$"+Vs,ex="__reactHandles$"+Vs;function Er(t){var e=t[an];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Sn]||n[an]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=lp(t);t!==null;){if(n=t[an])return n;t=lp(t)}return e}t=n,n=t.parentNode}return null}function fo(t){return t=t[an]||t[Sn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ss(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function fl(t){return t[Hi]||null}var _c=[],is=-1;function dr(t){return{current:t}}function Se(t){0>is||(t.current=_c[is],_c[is]=null,is--)}function Te(t,e){is++,_c[is]=t.current,t.current=e}var ar={},ht=dr(ar),Et=dr(!1),Ar=ar;function xs(t,e){var n=t.type.contextTypes;if(!n)return ar;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Tt(t){return t=t.childContextTypes,t!=null}function Da(){Se(Et),Se(ht)}function up(t,e,n){if(ht.current!==ar)throw Error($(168));Te(ht,e),Te(Et,n)}function qg(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error($(108,L_(t)||"Unknown",s));return Pe({},n,r)}function Va(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ar,Ar=ht.current,Te(ht,t),Te(Et,Et.current),!0}function cp(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=qg(t,e,Ar),r.__reactInternalMemoizedMergedChildContext=t,Se(Et),Se(ht),Te(ht,t)):Se(Et),Te(Et,n)}var xn=null,pl=!1,ku=!1;function Hg(t){xn===null?xn=[t]:xn.push(t)}function tx(t){pl=!0,Hg(t)}function fr(){if(!ku&&xn!==null){ku=!0;var t=0,e=ve;try{var n=xn;for(ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}xn=null,pl=!1}catch(s){throw xn!==null&&(xn=xn.slice(t+1)),yg(wh,fr),s}finally{ve=e,ku=!1}}return null}var os=[],as=0,Ma=null,Oa=0,zt=[],Ut=0,br=null,En=1,Tn="";function _r(t,e){os[as++]=Oa,os[as++]=Ma,Ma=t,Oa=e}function Wg(t,e,n){zt[Ut++]=En,zt[Ut++]=Tn,zt[Ut++]=br,br=t;var r=En;t=Tn;var s=32-Zt(r)-1;r&=~(1<<s),n+=1;var i=32-Zt(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,En=1<<32-Zt(e)+s|n<<s|r,Tn=i+t}else En=1<<i|n<<s|r,Tn=t}function bh(t){t.return!==null&&(_r(t,1),Wg(t,1,0))}function Rh(t){for(;t===Ma;)Ma=os[--as],os[as]=null,Oa=os[--as],os[as]=null;for(;t===br;)br=zt[--Ut],zt[Ut]=null,Tn=zt[--Ut],zt[Ut]=null,En=zt[--Ut],zt[Ut]=null}var Vt=null,jt=null,Ce=!1,Jt=null;function Kg(t,e){var n=Bt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function hp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Vt=t,jt=Qn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Vt=t,jt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=br!==null?{id:En,overflow:Tn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Bt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Vt=t,jt=null,!0):!1;default:return!1}}function xc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function wc(t){if(Ce){var e=jt;if(e){var n=e;if(!hp(t,e)){if(xc(t))throw Error($(418));e=Qn(n.nextSibling);var r=Vt;e&&hp(t,e)?Kg(r,n):(t.flags=t.flags&-4097|2,Ce=!1,Vt=t)}}else{if(xc(t))throw Error($(418));t.flags=t.flags&-4097|2,Ce=!1,Vt=t}}}function dp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Vt=t}function Xo(t){if(t!==Vt)return!1;if(!Ce)return dp(t),Ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!gc(t.type,t.memoizedProps)),e&&(e=jt)){if(xc(t))throw Qg(),Error($(418));for(;e;)Kg(t,e),e=Qn(e.nextSibling)}if(dp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){jt=Qn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}jt=null}}else jt=Vt?Qn(t.stateNode.nextSibling):null;return!0}function Qg(){for(var t=jt;t;)t=Qn(t.nextSibling)}function ws(){jt=Vt=null,Ce=!1}function Ph(t){Jt===null?Jt=[t]:Jt.push(t)}var nx=Pn.ReactCurrentBatchConfig;function ci(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function Jo(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function fp(t){var e=t._init;return e(t._payload)}function Yg(t){function e(I,w){if(t){var k=I.deletions;k===null?(I.deletions=[w],I.flags|=16):k.push(w)}}function n(I,w){if(!t)return null;for(;w!==null;)e(I,w),w=w.sibling;return null}function r(I,w){for(I=new Map;w!==null;)w.key!==null?I.set(w.key,w):I.set(w.index,w),w=w.sibling;return I}function s(I,w){return I=Zn(I,w),I.index=0,I.sibling=null,I}function i(I,w,k){return I.index=k,t?(k=I.alternate,k!==null?(k=k.index,k<w?(I.flags|=2,w):k):(I.flags|=2,w)):(I.flags|=1048576,w)}function a(I){return t&&I.alternate===null&&(I.flags|=2),I}function l(I,w,k,P){return w===null||w.tag!==6?(w=Pu(k,I.mode,P),w.return=I,w):(w=s(w,k),w.return=I,w)}function u(I,w,k,P){var O=k.type;return O===es?p(I,w,k.props.children,P,k.key):w!==null&&(w.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Fn&&fp(O)===w.type)?(P=s(w,k.props),P.ref=ci(I,w,k),P.return=I,P):(P=_a(k.type,k.key,k.props,null,I.mode,P),P.ref=ci(I,w,k),P.return=I,P)}function d(I,w,k,P){return w===null||w.tag!==4||w.stateNode.containerInfo!==k.containerInfo||w.stateNode.implementation!==k.implementation?(w=ju(k,I.mode,P),w.return=I,w):(w=s(w,k.children||[]),w.return=I,w)}function p(I,w,k,P,O){return w===null||w.tag!==7?(w=Cr(k,I.mode,P,O),w.return=I,w):(w=s(w,k),w.return=I,w)}function y(I,w,k){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Pu(""+w,I.mode,k),w.return=I,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Uo:return k=_a(w.type,w.key,w.props,null,I.mode,k),k.ref=ci(I,null,w),k.return=I,k;case Zr:return w=ju(w,I.mode,k),w.return=I,w;case Fn:var P=w._init;return y(I,P(w._payload),k)}if(mi(w)||ii(w))return w=Cr(w,I.mode,k,null),w.return=I,w;Jo(I,w)}return null}function v(I,w,k,P){var O=w!==null?w.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return O!==null?null:l(I,w,""+k,P);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Uo:return k.key===O?u(I,w,k,P):null;case Zr:return k.key===O?d(I,w,k,P):null;case Fn:return O=k._init,v(I,w,O(k._payload),P)}if(mi(k)||ii(k))return O!==null?null:p(I,w,k,P,null);Jo(I,k)}return null}function S(I,w,k,P,O){if(typeof P=="string"&&P!==""||typeof P=="number")return I=I.get(k)||null,l(w,I,""+P,O);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Uo:return I=I.get(P.key===null?k:P.key)||null,u(w,I,P,O);case Zr:return I=I.get(P.key===null?k:P.key)||null,d(w,I,P,O);case Fn:var M=P._init;return S(I,w,k,M(P._payload),O)}if(mi(P)||ii(P))return I=I.get(k)||null,p(w,I,P,O,null);Jo(w,P)}return null}function A(I,w,k,P){for(var O=null,M=null,x=w,g=w=0,T=null;x!==null&&g<k.length;g++){x.index>g?(T=x,x=null):T=x.sibling;var E=v(I,x,k[g],P);if(E===null){x===null&&(x=T);break}t&&x&&E.alternate===null&&e(I,x),w=i(E,w,g),M===null?O=E:M.sibling=E,M=E,x=T}if(g===k.length)return n(I,x),Ce&&_r(I,g),O;if(x===null){for(;g<k.length;g++)x=y(I,k[g],P),x!==null&&(w=i(x,w,g),M===null?O=x:M.sibling=x,M=x);return Ce&&_r(I,g),O}for(x=r(I,x);g<k.length;g++)T=S(x,I,g,k[g],P),T!==null&&(t&&T.alternate!==null&&x.delete(T.key===null?g:T.key),w=i(T,w,g),M===null?O=T:M.sibling=T,M=T);return t&&x.forEach(function(C){return e(I,C)}),Ce&&_r(I,g),O}function b(I,w,k,P){var O=ii(k);if(typeof O!="function")throw Error($(150));if(k=O.call(k),k==null)throw Error($(151));for(var M=O=null,x=w,g=w=0,T=null,E=k.next();x!==null&&!E.done;g++,E=k.next()){x.index>g?(T=x,x=null):T=x.sibling;var C=v(I,x,E.value,P);if(C===null){x===null&&(x=T);break}t&&x&&C.alternate===null&&e(I,x),w=i(C,w,g),M===null?O=C:M.sibling=C,M=C,x=T}if(E.done)return n(I,x),Ce&&_r(I,g),O;if(x===null){for(;!E.done;g++,E=k.next())E=y(I,E.value,P),E!==null&&(w=i(E,w,g),M===null?O=E:M.sibling=E,M=E);return Ce&&_r(I,g),O}for(x=r(I,x);!E.done;g++,E=k.next())E=S(x,I,g,E.value,P),E!==null&&(t&&E.alternate!==null&&x.delete(E.key===null?g:E.key),w=i(E,w,g),M===null?O=E:M.sibling=E,M=E);return t&&x.forEach(function(N){return e(I,N)}),Ce&&_r(I,g),O}function j(I,w,k,P){if(typeof k=="object"&&k!==null&&k.type===es&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Uo:e:{for(var O=k.key,M=w;M!==null;){if(M.key===O){if(O=k.type,O===es){if(M.tag===7){n(I,M.sibling),w=s(M,k.props.children),w.return=I,I=w;break e}}else if(M.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Fn&&fp(O)===M.type){n(I,M.sibling),w=s(M,k.props),w.ref=ci(I,M,k),w.return=I,I=w;break e}n(I,M);break}else e(I,M);M=M.sibling}k.type===es?(w=Cr(k.props.children,I.mode,P,k.key),w.return=I,I=w):(P=_a(k.type,k.key,k.props,null,I.mode,P),P.ref=ci(I,w,k),P.return=I,I=P)}return a(I);case Zr:e:{for(M=k.key;w!==null;){if(w.key===M)if(w.tag===4&&w.stateNode.containerInfo===k.containerInfo&&w.stateNode.implementation===k.implementation){n(I,w.sibling),w=s(w,k.children||[]),w.return=I,I=w;break e}else{n(I,w);break}else e(I,w);w=w.sibling}w=ju(k,I.mode,P),w.return=I,I=w}return a(I);case Fn:return M=k._init,j(I,w,M(k._payload),P)}if(mi(k))return A(I,w,k,P);if(ii(k))return b(I,w,k,P);Jo(I,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,w!==null&&w.tag===6?(n(I,w.sibling),w=s(w,k),w.return=I,I=w):(n(I,w),w=Pu(k,I.mode,P),w.return=I,I=w),a(I)):n(I,w)}return j}var Es=Yg(!0),Xg=Yg(!1),La=dr(null),Fa=null,ls=null,jh=null;function Dh(){jh=ls=Fa=null}function Vh(t){var e=La.current;Se(La),t._currentValue=e}function Ec(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ms(t,e){Fa=t,jh=ls=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wt=!0),t.firstContext=null)}function Gt(t){var e=t._currentValue;if(jh!==t)if(t={context:t,memoizedValue:e,next:null},ls===null){if(Fa===null)throw Error($(308));ls=t,Fa.dependencies={lanes:0,firstContext:t}}else ls=ls.next=t;return e}var Tr=null;function Mh(t){Tr===null?Tr=[t]:Tr.push(t)}function Jg(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Mh(e)):(n.next=s.next,s.next=n),e.interleaved=n,Cn(t,r)}function Cn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var zn=!1;function Oh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function In(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Yn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Cn(t,n)}return s=r.interleaved,s===null?(e.next=e,Mh(r)):(e.next=s.next,s.next=e),r.interleaved=e,Cn(t,n)}function fa(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Eh(t,n)}}function pp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function za(t,e,n,r){var s=t.updateQueue;zn=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,a===null?i=d:a.next=d,a=u;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==a&&(l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=u))}if(i!==null){var y=s.baseState;a=0,p=d=u=null,l=i;do{var v=l.lane,S=l.eventTime;if((r&v)===v){p!==null&&(p=p.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var A=t,b=l;switch(v=e,S=n,b.tag){case 1:if(A=b.payload,typeof A=="function"){y=A.call(S,y,v);break e}y=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=b.payload,v=typeof A=="function"?A.call(S,y,v):A,v==null)break e;y=Pe({},y,v);break e;case 2:zn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,v=s.effects,v===null?s.effects=[l]:v.push(l))}else S={eventTime:S,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(d=p=S,u=y):p=p.next=S,a|=v;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;v=l,l=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(p===null&&(u=y),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Pr|=a,t.lanes=a,t.memoizedState=y}}function mp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var po={},un=dr(po),Wi=dr(po),Ki=dr(po);function Ir(t){if(t===po)throw Error($(174));return t}function Lh(t,e){switch(Te(Ki,e),Te(Wi,t),Te(un,po),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:nc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=nc(e,t)}Se(un),Te(un,e)}function Ts(){Se(un),Se(Wi),Se(Ki)}function ey(t){Ir(Ki.current);var e=Ir(un.current),n=nc(e,t.type);e!==n&&(Te(Wi,t),Te(un,n))}function Fh(t){Wi.current===t&&(Se(un),Se(Wi))}var be=dr(0);function Ua(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Su=[];function zh(){for(var t=0;t<Su.length;t++)Su[t]._workInProgressVersionPrimary=null;Su.length=0}var pa=Pn.ReactCurrentDispatcher,Cu=Pn.ReactCurrentBatchConfig,Rr=0,Re=null,Ue=null,We=null,Ba=!1,Ci=!1,Qi=0,rx=0;function it(){throw Error($(321))}function Uh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!tn(t[n],e[n]))return!1;return!0}function Bh(t,e,n,r,s,i){if(Rr=i,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,pa.current=t===null||t.memoizedState===null?ax:lx,t=n(r,s),Ci){i=0;do{if(Ci=!1,Qi=0,25<=i)throw Error($(301));i+=1,We=Ue=null,e.updateQueue=null,pa.current=ux,t=n(r,s)}while(Ci)}if(pa.current=$a,e=Ue!==null&&Ue.next!==null,Rr=0,We=Ue=Re=null,Ba=!1,e)throw Error($(300));return t}function $h(){var t=Qi!==0;return Qi=0,t}function on(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return We===null?Re.memoizedState=We=t:We=We.next=t,We}function qt(){if(Ue===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=Ue.next;var e=We===null?Re.memoizedState:We.next;if(e!==null)We=e,Ue=t;else{if(t===null)throw Error($(310));Ue=t,t={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},We===null?Re.memoizedState=We=t:We=We.next=t}return We}function Yi(t,e){return typeof e=="function"?e(t):e}function Nu(t){var e=qt(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=Ue,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,u=null,d=i;do{var p=d.lane;if((Rr&p)===p)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var y={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=y,a=r):u=u.next=y,Re.lanes|=p,Pr|=p}d=d.next}while(d!==null&&d!==i);u===null?a=r:u.next=l,tn(r,e.memoizedState)||(wt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Re.lanes|=i,Pr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Au(t){var e=qt(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);tn(i,e.memoizedState)||(wt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function ty(){}function ny(t,e){var n=Re,r=qt(),s=e(),i=!tn(r.memoizedState,s);if(i&&(r.memoizedState=s,wt=!0),r=r.queue,Gh(iy.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||We!==null&&We.memoizedState.tag&1){if(n.flags|=2048,Xi(9,sy.bind(null,n,r,s,e),void 0,null),Ke===null)throw Error($(349));Rr&30||ry(n,e,s)}return s}function ry(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function sy(t,e,n,r){e.value=n,e.getSnapshot=r,oy(e)&&ay(t)}function iy(t,e,n){return n(function(){oy(e)&&ay(t)})}function oy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!tn(t,n)}catch{return!0}}function ay(t){var e=Cn(t,1);e!==null&&en(e,t,1,-1)}function gp(t){var e=on();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:t},e.queue=t,t=t.dispatch=ox.bind(null,Re,t),[e.memoizedState,t]}function Xi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ly(){return qt().memoizedState}function ma(t,e,n,r){var s=on();Re.flags|=t,s.memoizedState=Xi(1|e,n,void 0,r===void 0?null:r)}function ml(t,e,n,r){var s=qt();r=r===void 0?null:r;var i=void 0;if(Ue!==null){var a=Ue.memoizedState;if(i=a.destroy,r!==null&&Uh(r,a.deps)){s.memoizedState=Xi(e,n,i,r);return}}Re.flags|=t,s.memoizedState=Xi(1|e,n,i,r)}function yp(t,e){return ma(8390656,8,t,e)}function Gh(t,e){return ml(2048,8,t,e)}function uy(t,e){return ml(4,2,t,e)}function cy(t,e){return ml(4,4,t,e)}function hy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function dy(t,e,n){return n=n!=null?n.concat([t]):null,ml(4,4,hy.bind(null,e,t),n)}function qh(){}function fy(t,e){var n=qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Uh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function py(t,e){var n=qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Uh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function my(t,e,n){return Rr&21?(tn(n,e)||(n=xg(),Re.lanes|=n,Pr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wt=!0),t.memoizedState=n)}function sx(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var r=Cu.transition;Cu.transition={};try{t(!1),e()}finally{ve=n,Cu.transition=r}}function gy(){return qt().memoizedState}function ix(t,e,n){var r=Jn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},yy(t))vy(e,n);else if(n=Jg(t,e,n,r),n!==null){var s=pt();en(n,t,r,s),_y(n,e,r)}}function ox(t,e,n){var r=Jn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(yy(t))vy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,tn(l,a)){var u=e.interleaved;u===null?(s.next=s,Mh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Jg(t,e,s,r),n!==null&&(s=pt(),en(n,t,r,s),_y(n,e,r))}}function yy(t){var e=t.alternate;return t===Re||e!==null&&e===Re}function vy(t,e){Ci=Ba=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function _y(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Eh(t,n)}}var $a={readContext:Gt,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useInsertionEffect:it,useLayoutEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useMutableSource:it,useSyncExternalStore:it,useId:it,unstable_isNewReconciler:!1},ax={readContext:Gt,useCallback:function(t,e){return on().memoizedState=[t,e===void 0?null:e],t},useContext:Gt,useEffect:yp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ma(4194308,4,hy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ma(4194308,4,t,e)},useInsertionEffect:function(t,e){return ma(4,2,t,e)},useMemo:function(t,e){var n=on();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=on();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ix.bind(null,Re,t),[r.memoizedState,t]},useRef:function(t){var e=on();return t={current:t},e.memoizedState=t},useState:gp,useDebugValue:qh,useDeferredValue:function(t){return on().memoizedState=t},useTransition:function(){var t=gp(!1),e=t[0];return t=sx.bind(null,t[1]),on().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Re,s=on();if(Ce){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),Ke===null)throw Error($(349));Rr&30||ry(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,yp(iy.bind(null,r,i,t),[t]),r.flags|=2048,Xi(9,sy.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=on(),e=Ke.identifierPrefix;if(Ce){var n=Tn,r=En;n=(r&~(1<<32-Zt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Qi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=rx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},lx={readContext:Gt,useCallback:fy,useContext:Gt,useEffect:Gh,useImperativeHandle:dy,useInsertionEffect:uy,useLayoutEffect:cy,useMemo:py,useReducer:Nu,useRef:ly,useState:function(){return Nu(Yi)},useDebugValue:qh,useDeferredValue:function(t){var e=qt();return my(e,Ue.memoizedState,t)},useTransition:function(){var t=Nu(Yi)[0],e=qt().memoizedState;return[t,e]},useMutableSource:ty,useSyncExternalStore:ny,useId:gy,unstable_isNewReconciler:!1},ux={readContext:Gt,useCallback:fy,useContext:Gt,useEffect:Gh,useImperativeHandle:dy,useInsertionEffect:uy,useLayoutEffect:cy,useMemo:py,useReducer:Au,useRef:ly,useState:function(){return Au(Yi)},useDebugValue:qh,useDeferredValue:function(t){var e=qt();return Ue===null?e.memoizedState=t:my(e,Ue.memoizedState,t)},useTransition:function(){var t=Au(Yi)[0],e=qt().memoizedState;return[t,e]},useMutableSource:ty,useSyncExternalStore:ny,useId:gy,unstable_isNewReconciler:!1};function Yt(t,e){if(t&&t.defaultProps){e=Pe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Tc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Pe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var gl={isMounted:function(t){return(t=t._reactInternals)?zr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=pt(),s=Jn(t),i=In(r,s);i.payload=e,n!=null&&(i.callback=n),e=Yn(t,i,s),e!==null&&(en(e,t,s,r),fa(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=pt(),s=Jn(t),i=In(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Yn(t,i,s),e!==null&&(en(e,t,s,r),fa(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pt(),r=Jn(t),s=In(n,r);s.tag=2,e!=null&&(s.callback=e),e=Yn(t,s,r),e!==null&&(en(e,t,r,n),fa(e,t,r))}};function vp(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!$i(n,r)||!$i(s,i):!0}function xy(t,e,n){var r=!1,s=ar,i=e.contextType;return typeof i=="object"&&i!==null?i=Gt(i):(s=Tt(e)?Ar:ht.current,r=e.contextTypes,i=(r=r!=null)?xs(t,s):ar),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=gl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function _p(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&gl.enqueueReplaceState(e,e.state,null)}function Ic(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Oh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Gt(i):(i=Tt(e)?Ar:ht.current,s.context=xs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Tc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&gl.enqueueReplaceState(s,s.state,null),za(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Is(t,e){try{var n="",r=e;do n+=O_(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function bu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function kc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var cx=typeof WeakMap=="function"?WeakMap:Map;function wy(t,e,n){n=In(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){qa||(qa=!0,Vc=r),kc(t,e)},n}function Ey(t,e,n){n=In(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){kc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){kc(t,e),typeof r!="function"&&(Xn===null?Xn=new Set([this]):Xn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function xp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new cx;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Ix.bind(null,t,e,n),e.then(t,t))}function wp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ep(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=In(-1,1),e.tag=2,Yn(n,e,1))),n.lanes|=1),t)}var hx=Pn.ReactCurrentOwner,wt=!1;function ft(t,e,n,r){e.child=t===null?Xg(e,null,n,r):Es(e,t.child,n,r)}function Tp(t,e,n,r,s){n=n.render;var i=e.ref;return ms(e,s),r=Bh(t,e,n,r,i,s),n=$h(),t!==null&&!wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Nn(t,e,s)):(Ce&&n&&bh(e),e.flags|=1,ft(t,e,r,s),e.child)}function Ip(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Zh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Ty(t,e,i,r,s)):(t=_a(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:$i,n(a,r)&&t.ref===e.ref)return Nn(t,e,s)}return e.flags|=1,t=Zn(i,r),t.ref=e.ref,t.return=e,e.child=t}function Ty(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if($i(i,r)&&t.ref===e.ref)if(wt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(wt=!0);else return e.lanes=t.lanes,Nn(t,e,s)}return Sc(t,e,n,r,s)}function Iy(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(cs,Pt),Pt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(cs,Pt),Pt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te(cs,Pt),Pt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Te(cs,Pt),Pt|=r;return ft(t,e,s,n),e.child}function ky(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Sc(t,e,n,r,s){var i=Tt(n)?Ar:ht.current;return i=xs(e,i),ms(e,s),n=Bh(t,e,n,r,i,s),r=$h(),t!==null&&!wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Nn(t,e,s)):(Ce&&r&&bh(e),e.flags|=1,ft(t,e,n,s),e.child)}function kp(t,e,n,r,s){if(Tt(n)){var i=!0;Va(e)}else i=!1;if(ms(e,s),e.stateNode===null)ga(t,e),xy(e,n,r),Ic(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Gt(d):(d=Tt(n)?Ar:ht.current,d=xs(e,d));var p=n.getDerivedStateFromProps,y=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";y||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==d)&&_p(e,a,r,d),zn=!1;var v=e.memoizedState;a.state=v,za(e,r,a,s),u=e.memoizedState,l!==r||v!==u||Et.current||zn?(typeof p=="function"&&(Tc(e,n,p,r),u=e.memoizedState),(l=zn||vp(e,n,l,r,v,u,d))?(y||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=d,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Zg(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Yt(e.type,l),a.props=d,y=e.pendingProps,v=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Gt(u):(u=Tt(n)?Ar:ht.current,u=xs(e,u));var S=n.getDerivedStateFromProps;(p=typeof S=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==y||v!==u)&&_p(e,a,r,u),zn=!1,v=e.memoizedState,a.state=v,za(e,r,a,s);var A=e.memoizedState;l!==y||v!==A||Et.current||zn?(typeof S=="function"&&(Tc(e,n,S,r),A=e.memoizedState),(d=zn||vp(e,n,d,r,v,A,u)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,A,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,A,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=A),a.props=r,a.state=A,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return Cc(t,e,n,r,i,s)}function Cc(t,e,n,r,s,i){ky(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&cp(e,n,!1),Nn(t,e,i);r=e.stateNode,hx.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Es(e,t.child,null,i),e.child=Es(e,null,l,i)):ft(t,e,l,i),e.memoizedState=r.state,s&&cp(e,n,!0),e.child}function Sy(t){var e=t.stateNode;e.pendingContext?up(t,e.pendingContext,e.pendingContext!==e.context):e.context&&up(t,e.context,!1),Lh(t,e.containerInfo)}function Sp(t,e,n,r,s){return ws(),Ph(s),e.flags|=256,ft(t,e,n,r),e.child}var Nc={dehydrated:null,treeContext:null,retryLane:0};function Ac(t){return{baseLanes:t,cachePool:null,transitions:null}}function Cy(t,e,n){var r=e.pendingProps,s=be.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Te(be,s&1),t===null)return wc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=_l(a,r,0,null),t=Cr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ac(n),e.memoizedState=Nc,t):Hh(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return dx(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Zn(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Zn(l,i):(i=Cr(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Ac(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Nc,r}return i=t.child,t=i.sibling,r=Zn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Hh(t,e){return e=_l({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Zo(t,e,n,r){return r!==null&&Ph(r),Es(e,t.child,null,n),t=Hh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function dx(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=bu(Error($(422))),Zo(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=_l({mode:"visible",children:r.children},s,0,null),i=Cr(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Es(e,t.child,null,a),e.child.memoizedState=Ac(a),e.memoizedState=Nc,i);if(!(e.mode&1))return Zo(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error($(419)),r=bu(i,r,void 0),Zo(t,e,a,r)}if(l=(a&t.childLanes)!==0,wt||l){if(r=Ke,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Cn(t,s),en(r,t,s,-1))}return Jh(),r=bu(Error($(421))),Zo(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=kx.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,jt=Qn(s.nextSibling),Vt=e,Ce=!0,Jt=null,t!==null&&(zt[Ut++]=En,zt[Ut++]=Tn,zt[Ut++]=br,En=t.id,Tn=t.overflow,br=e),e=Hh(e,r.children),e.flags|=4096,e)}function Cp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ec(t.return,e,n)}function Ru(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Ny(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ft(t,e,r.children,n),r=be.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Cp(t,n,e);else if(t.tag===19)Cp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(be,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ua(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Ru(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ua(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Ru(e,!0,n,null,i);break;case"together":Ru(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ga(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Nn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Pr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Zn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Zn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function fx(t,e,n){switch(e.tag){case 3:Sy(e),ws();break;case 5:ey(e);break;case 1:Tt(e.type)&&Va(e);break;case 4:Lh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Te(La,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(be,be.current&1),e.flags|=128,null):n&e.child.childLanes?Cy(t,e,n):(Te(be,be.current&1),t=Nn(t,e,n),t!==null?t.sibling:null);Te(be,be.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Ny(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Te(be,be.current),r)break;return null;case 22:case 23:return e.lanes=0,Iy(t,e,n)}return Nn(t,e,n)}var Ay,bc,by,Ry;Ay=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};bc=function(){};by=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ir(un.current);var i=null;switch(n){case"input":s=Ju(t,s),r=Ju(t,r),i=[];break;case"select":s=Pe({},s,{value:void 0}),r=Pe({},r,{value:void 0}),i=[];break;case"textarea":s=tc(t,s),r=tc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ja)}rc(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Mi.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Mi.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&ke("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Ry=function(t,e,n,r){n!==r&&(e.flags|=4)};function hi(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function px(t,e,n){var r=e.pendingProps;switch(Rh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(e),null;case 1:return Tt(e.type)&&Da(),ot(e),null;case 3:return r=e.stateNode,Ts(),Se(Et),Se(ht),zh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Xo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jt!==null&&(Lc(Jt),Jt=null))),bc(t,e),ot(e),null;case 5:Fh(e);var s=Ir(Ki.current);if(n=e.type,t!==null&&e.stateNode!=null)by(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return ot(e),null}if(t=Ir(un.current),Xo(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[an]=e,r[Hi]=i,t=(e.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(s=0;s<yi.length;s++)ke(yi[s],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":Mf(r,i),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ke("invalid",r);break;case"textarea":Lf(r,i),ke("invalid",r)}rc(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Yo(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Yo(r.textContent,l,t),s=["children",""+l]):Mi.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&ke("scroll",r)}switch(n){case"input":Bo(r),Of(r,i,!0);break;case"textarea":Bo(r),Ff(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ja)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ig(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[an]=e,t[Hi]=r,Ay(t,e,!1,!1),e.stateNode=t;e:{switch(a=sc(n,r),n){case"dialog":ke("cancel",t),ke("close",t),s=r;break;case"iframe":case"object":case"embed":ke("load",t),s=r;break;case"video":case"audio":for(s=0;s<yi.length;s++)ke(yi[s],t);s=r;break;case"source":ke("error",t),s=r;break;case"img":case"image":case"link":ke("error",t),ke("load",t),s=r;break;case"details":ke("toggle",t),s=r;break;case"input":Mf(t,r),s=Ju(t,r),ke("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Pe({},r,{value:void 0}),ke("invalid",t);break;case"textarea":Lf(t,r),s=tc(t,r),ke("invalid",t);break;default:s=r}rc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?lg(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&og(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Oi(t,u):typeof u=="number"&&Oi(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Mi.hasOwnProperty(i)?u!=null&&i==="onScroll"&&ke("scroll",t):u!=null&&gh(t,i,u,a))}switch(n){case"input":Bo(t),Of(t,r,!1);break;case"textarea":Bo(t),Ff(t);break;case"option":r.value!=null&&t.setAttribute("value",""+or(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?hs(t,!!r.multiple,i,!1):r.defaultValue!=null&&hs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ja)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ot(e),null;case 6:if(t&&e.stateNode!=null)Ry(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=Ir(Ki.current),Ir(un.current),Xo(e)){if(r=e.stateNode,n=e.memoizedProps,r[an]=e,(i=r.nodeValue!==n)&&(t=Vt,t!==null))switch(t.tag){case 3:Yo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Yo(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[an]=e,e.stateNode=r}return ot(e),null;case 13:if(Se(be),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ce&&jt!==null&&e.mode&1&&!(e.flags&128))Qg(),ws(),e.flags|=98560,i=!1;else if(i=Xo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error($(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[an]=e}else ws(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ot(e),i=!1}else Jt!==null&&(Lc(Jt),Jt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||be.current&1?$e===0&&($e=3):Jh())),e.updateQueue!==null&&(e.flags|=4),ot(e),null);case 4:return Ts(),bc(t,e),t===null&&Gi(e.stateNode.containerInfo),ot(e),null;case 10:return Vh(e.type._context),ot(e),null;case 17:return Tt(e.type)&&Da(),ot(e),null;case 19:if(Se(be),i=e.memoizedState,i===null)return ot(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)hi(i,!1);else{if($e!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Ua(t),a!==null){for(e.flags|=128,hi(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(be,be.current&1|2),e.child}t=t.sibling}i.tail!==null&&Oe()>ks&&(e.flags|=128,r=!0,hi(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ua(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),hi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ce)return ot(e),null}else 2*Oe()-i.renderingStartTime>ks&&n!==1073741824&&(e.flags|=128,r=!0,hi(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Oe(),e.sibling=null,n=be.current,Te(be,r?n&1|2:n&1),e):(ot(e),null);case 22:case 23:return Xh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Pt&1073741824&&(ot(e),e.subtreeFlags&6&&(e.flags|=8192)):ot(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function mx(t,e){switch(Rh(e),e.tag){case 1:return Tt(e.type)&&Da(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ts(),Se(Et),Se(ht),zh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Fh(e),null;case 13:if(Se(be),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));ws()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Se(be),null;case 4:return Ts(),null;case 10:return Vh(e.type._context),null;case 22:case 23:return Xh(),null;case 24:return null;default:return null}}var ea=!1,ut=!1,gx=typeof WeakSet=="function"?WeakSet:Set,Y=null;function us(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ve(t,e,r)}else n.current=null}function Rc(t,e,n){try{n()}catch(r){Ve(t,e,r)}}var Np=!1;function yx(t,e){if(pc=ba,t=Mg(),Ah(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,d=0,p=0,y=t,v=null;t:for(;;){for(var S;y!==n||s!==0&&y.nodeType!==3||(l=a+s),y!==i||r!==0&&y.nodeType!==3||(u=a+r),y.nodeType===3&&(a+=y.nodeValue.length),(S=y.firstChild)!==null;)v=y,y=S;for(;;){if(y===t)break t;if(v===n&&++d===s&&(l=a),v===i&&++p===r&&(u=a),(S=y.nextSibling)!==null)break;y=v,v=y.parentNode}y=S}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(mc={focusedElem:t,selectionRange:n},ba=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var A=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var b=A.memoizedProps,j=A.memoizedState,I=e.stateNode,w=I.getSnapshotBeforeUpdate(e.elementType===e.type?b:Yt(e.type,b),j);I.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(P){Ve(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return A=Np,Np=!1,A}function Ni(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Rc(e,n,i)}s=s.next}while(s!==r)}}function yl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Pc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Py(t){var e=t.alternate;e!==null&&(t.alternate=null,Py(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[an],delete e[Hi],delete e[vc],delete e[Z1],delete e[ex])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function jy(t){return t.tag===5||t.tag===3||t.tag===4}function Ap(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||jy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ja));else if(r!==4&&(t=t.child,t!==null))for(jc(t,e,n),t=t.sibling;t!==null;)jc(t,e,n),t=t.sibling}function Dc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Dc(t,e,n),t=t.sibling;t!==null;)Dc(t,e,n),t=t.sibling}var Ye=null,Xt=!1;function Ln(t,e,n){for(n=n.child;n!==null;)Dy(t,e,n),n=n.sibling}function Dy(t,e,n){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(ul,n)}catch{}switch(n.tag){case 5:ut||us(n,e);case 6:var r=Ye,s=Xt;Ye=null,Ln(t,e,n),Ye=r,Xt=s,Ye!==null&&(Xt?(t=Ye,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ye.removeChild(n.stateNode));break;case 18:Ye!==null&&(Xt?(t=Ye,n=n.stateNode,t.nodeType===8?Iu(t.parentNode,n):t.nodeType===1&&Iu(t,n),Ui(t)):Iu(Ye,n.stateNode));break;case 4:r=Ye,s=Xt,Ye=n.stateNode.containerInfo,Xt=!0,Ln(t,e,n),Ye=r,Xt=s;break;case 0:case 11:case 14:case 15:if(!ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Rc(n,e,a),s=s.next}while(s!==r)}Ln(t,e,n);break;case 1:if(!ut&&(us(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ve(n,e,l)}Ln(t,e,n);break;case 21:Ln(t,e,n);break;case 22:n.mode&1?(ut=(r=ut)||n.memoizedState!==null,Ln(t,e,n),ut=r):Ln(t,e,n);break;default:Ln(t,e,n)}}function bp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new gx),e.forEach(function(r){var s=Sx.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Qt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Ye=l.stateNode,Xt=!1;break e;case 3:Ye=l.stateNode.containerInfo,Xt=!0;break e;case 4:Ye=l.stateNode.containerInfo,Xt=!0;break e}l=l.return}if(Ye===null)throw Error($(160));Dy(i,a,s),Ye=null,Xt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Ve(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Vy(e,t),e=e.sibling}function Vy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qt(e,t),nn(t),r&4){try{Ni(3,t,t.return),yl(3,t)}catch(b){Ve(t,t.return,b)}try{Ni(5,t,t.return)}catch(b){Ve(t,t.return,b)}}break;case 1:Qt(e,t),nn(t),r&512&&n!==null&&us(n,n.return);break;case 5:if(Qt(e,t),nn(t),r&512&&n!==null&&us(n,n.return),t.flags&32){var s=t.stateNode;try{Oi(s,"")}catch(b){Ve(t,t.return,b)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&rg(s,i),sc(l,a);var d=sc(l,i);for(a=0;a<u.length;a+=2){var p=u[a],y=u[a+1];p==="style"?lg(s,y):p==="dangerouslySetInnerHTML"?og(s,y):p==="children"?Oi(s,y):gh(s,p,y,d)}switch(l){case"input":Zu(s,i);break;case"textarea":sg(s,i);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var S=i.value;S!=null?hs(s,!!i.multiple,S,!1):v!==!!i.multiple&&(i.defaultValue!=null?hs(s,!!i.multiple,i.defaultValue,!0):hs(s,!!i.multiple,i.multiple?[]:"",!1))}s[Hi]=i}catch(b){Ve(t,t.return,b)}}break;case 6:if(Qt(e,t),nn(t),r&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(b){Ve(t,t.return,b)}}break;case 3:if(Qt(e,t),nn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ui(e.containerInfo)}catch(b){Ve(t,t.return,b)}break;case 4:Qt(e,t),nn(t);break;case 13:Qt(e,t),nn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Qh=Oe())),r&4&&bp(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(ut=(d=ut)||p,Qt(e,t),ut=d):Qt(e,t),nn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for(Y=t,p=t.child;p!==null;){for(y=Y=p;Y!==null;){switch(v=Y,S=v.child,v.tag){case 0:case 11:case 14:case 15:Ni(4,v,v.return);break;case 1:us(v,v.return);var A=v.stateNode;if(typeof A.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,A.props=e.memoizedProps,A.state=e.memoizedState,A.componentWillUnmount()}catch(b){Ve(r,n,b)}}break;case 5:us(v,v.return);break;case 22:if(v.memoizedState!==null){Pp(y);continue}}S!==null?(S.return=v,Y=S):Pp(y)}p=p.sibling}e:for(p=null,y=t;;){if(y.tag===5){if(p===null){p=y;try{s=y.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=y.stateNode,u=y.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=ag("display",a))}catch(b){Ve(t,t.return,b)}}}else if(y.tag===6){if(p===null)try{y.stateNode.nodeValue=d?"":y.memoizedProps}catch(b){Ve(t,t.return,b)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;p===y&&(p=null),y=y.return}p===y&&(p=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Qt(e,t),nn(t),r&4&&bp(t);break;case 21:break;default:Qt(e,t),nn(t)}}function nn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(jy(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Oi(s,""),r.flags&=-33);var i=Ap(t);Dc(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Ap(t);jc(t,l,a);break;default:throw Error($(161))}}catch(u){Ve(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function vx(t,e,n){Y=t,My(t)}function My(t,e,n){for(var r=(t.mode&1)!==0;Y!==null;){var s=Y,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||ea;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||ut;l=ea;var d=ut;if(ea=a,(ut=u)&&!d)for(Y=s;Y!==null;)a=Y,u=a.child,a.tag===22&&a.memoizedState!==null?jp(s):u!==null?(u.return=a,Y=u):jp(s);for(;i!==null;)Y=i,My(i),i=i.sibling;Y=s,ea=l,ut=d}Rp(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Y=i):Rp(t)}}function Rp(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ut||yl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ut)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Yt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&mp(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}mp(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var y=p.dehydrated;y!==null&&Ui(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}ut||e.flags&512&&Pc(e)}catch(v){Ve(e,e.return,v)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function Pp(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function jp(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{yl(4,e)}catch(u){Ve(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Ve(e,s,u)}}var i=e.return;try{Pc(e)}catch(u){Ve(e,i,u)}break;case 5:var a=e.return;try{Pc(e)}catch(u){Ve(e,a,u)}}}catch(u){Ve(e,e.return,u)}if(e===t){Y=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Y=l;break}Y=e.return}}var _x=Math.ceil,Ga=Pn.ReactCurrentDispatcher,Wh=Pn.ReactCurrentOwner,$t=Pn.ReactCurrentBatchConfig,me=0,Ke=null,Fe=null,Ze=0,Pt=0,cs=dr(0),$e=0,Ji=null,Pr=0,vl=0,Kh=0,Ai=null,_t=null,Qh=0,ks=1/0,_n=null,qa=!1,Vc=null,Xn=null,ta=!1,Gn=null,Ha=0,bi=0,Mc=null,ya=-1,va=0;function pt(){return me&6?Oe():ya!==-1?ya:ya=Oe()}function Jn(t){return t.mode&1?me&2&&Ze!==0?Ze&-Ze:nx.transition!==null?(va===0&&(va=xg()),va):(t=ve,t!==0||(t=window.event,t=t===void 0?16:Cg(t.type)),t):1}function en(t,e,n,r){if(50<bi)throw bi=0,Mc=null,Error($(185));co(t,n,r),(!(me&2)||t!==Ke)&&(t===Ke&&(!(me&2)&&(vl|=n),$e===4&&Bn(t,Ze)),It(t,r),n===1&&me===0&&!(e.mode&1)&&(ks=Oe()+500,pl&&fr()))}function It(t,e){var n=t.callbackNode;n1(t,e);var r=Aa(t,t===Ke?Ze:0);if(r===0)n!==null&&Bf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Bf(n),e===1)t.tag===0?tx(Dp.bind(null,t)):Hg(Dp.bind(null,t)),X1(function(){!(me&6)&&fr()}),n=null;else{switch(wg(r)){case 1:n=wh;break;case 4:n=vg;break;case 16:n=Na;break;case 536870912:n=_g;break;default:n=Na}n=Gy(n,Oy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Oy(t,e){if(ya=-1,va=0,me&6)throw Error($(327));var n=t.callbackNode;if(gs()&&t.callbackNode!==n)return null;var r=Aa(t,t===Ke?Ze:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Wa(t,r);else{e=r;var s=me;me|=2;var i=Fy();(Ke!==t||Ze!==e)&&(_n=null,ks=Oe()+500,Sr(t,e));do try{Ex();break}catch(l){Ly(t,l)}while(!0);Dh(),Ga.current=i,me=s,Fe!==null?e=0:(Ke=null,Ze=0,e=$e)}if(e!==0){if(e===2&&(s=uc(t),s!==0&&(r=s,e=Oc(t,s))),e===1)throw n=Ji,Sr(t,0),Bn(t,r),It(t,Oe()),n;if(e===6)Bn(t,r);else{if(s=t.current.alternate,!(r&30)&&!xx(s)&&(e=Wa(t,r),e===2&&(i=uc(t),i!==0&&(r=i,e=Oc(t,i))),e===1))throw n=Ji,Sr(t,0),Bn(t,r),It(t,Oe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:xr(t,_t,_n);break;case 3:if(Bn(t,r),(r&130023424)===r&&(e=Qh+500-Oe(),10<e)){if(Aa(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){pt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=yc(xr.bind(null,t,_t,_n),e);break}xr(t,_t,_n);break;case 4:if(Bn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Zt(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Oe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_x(r/1960))-r,10<r){t.timeoutHandle=yc(xr.bind(null,t,_t,_n),r);break}xr(t,_t,_n);break;case 5:xr(t,_t,_n);break;default:throw Error($(329))}}}return It(t,Oe()),t.callbackNode===n?Oy.bind(null,t):null}function Oc(t,e){var n=Ai;return t.current.memoizedState.isDehydrated&&(Sr(t,e).flags|=256),t=Wa(t,e),t!==2&&(e=_t,_t=n,e!==null&&Lc(e)),t}function Lc(t){_t===null?_t=t:_t.push.apply(_t,t)}function xx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!tn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Bn(t,e){for(e&=~Kh,e&=~vl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Zt(e),r=1<<n;t[n]=-1,e&=~r}}function Dp(t){if(me&6)throw Error($(327));gs();var e=Aa(t,0);if(!(e&1))return It(t,Oe()),null;var n=Wa(t,e);if(t.tag!==0&&n===2){var r=uc(t);r!==0&&(e=r,n=Oc(t,r))}if(n===1)throw n=Ji,Sr(t,0),Bn(t,e),It(t,Oe()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xr(t,_t,_n),It(t,Oe()),null}function Yh(t,e){var n=me;me|=1;try{return t(e)}finally{me=n,me===0&&(ks=Oe()+500,pl&&fr())}}function jr(t){Gn!==null&&Gn.tag===0&&!(me&6)&&gs();var e=me;me|=1;var n=$t.transition,r=ve;try{if($t.transition=null,ve=1,t)return t()}finally{ve=r,$t.transition=n,me=e,!(me&6)&&fr()}}function Xh(){Pt=cs.current,Se(cs)}function Sr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Y1(n)),Fe!==null)for(n=Fe.return;n!==null;){var r=n;switch(Rh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Da();break;case 3:Ts(),Se(Et),Se(ht),zh();break;case 5:Fh(r);break;case 4:Ts();break;case 13:Se(be);break;case 19:Se(be);break;case 10:Vh(r.type._context);break;case 22:case 23:Xh()}n=n.return}if(Ke=t,Fe=t=Zn(t.current,null),Ze=Pt=e,$e=0,Ji=null,Kh=vl=Pr=0,_t=Ai=null,Tr!==null){for(e=0;e<Tr.length;e++)if(n=Tr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Tr=null}return t}function Ly(t,e){do{var n=Fe;try{if(Dh(),pa.current=$a,Ba){for(var r=Re.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ba=!1}if(Rr=0,We=Ue=Re=null,Ci=!1,Qi=0,Wh.current=null,n===null||n.return===null){$e=1,Ji=e,Fe=null;break}e:{var i=t,a=n.return,l=n,u=e;if(e=Ze,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,p=l,y=p.tag;if(!(p.mode&1)&&(y===0||y===11||y===15)){var v=p.alternate;v?(p.updateQueue=v.updateQueue,p.memoizedState=v.memoizedState,p.lanes=v.lanes):(p.updateQueue=null,p.memoizedState=null)}var S=wp(a);if(S!==null){S.flags&=-257,Ep(S,a,l,i,e),S.mode&1&&xp(i,d,e),e=S,u=d;var A=e.updateQueue;if(A===null){var b=new Set;b.add(u),e.updateQueue=b}else A.add(u);break e}else{if(!(e&1)){xp(i,d,e),Jh();break e}u=Error($(426))}}else if(Ce&&l.mode&1){var j=wp(a);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Ep(j,a,l,i,e),Ph(Is(u,l));break e}}i=u=Is(u,l),$e!==4&&($e=2),Ai===null?Ai=[i]:Ai.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var I=wy(i,u,e);pp(i,I);break e;case 1:l=u;var w=i.type,k=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Xn===null||!Xn.has(k)))){i.flags|=65536,e&=-e,i.lanes|=e;var P=Ey(i,l,e);pp(i,P);break e}}i=i.return}while(i!==null)}Uy(n)}catch(O){e=O,Fe===n&&n!==null&&(Fe=n=n.return);continue}break}while(!0)}function Fy(){var t=Ga.current;return Ga.current=$a,t===null?$a:t}function Jh(){($e===0||$e===3||$e===2)&&($e=4),Ke===null||!(Pr&268435455)&&!(vl&268435455)||Bn(Ke,Ze)}function Wa(t,e){var n=me;me|=2;var r=Fy();(Ke!==t||Ze!==e)&&(_n=null,Sr(t,e));do try{wx();break}catch(s){Ly(t,s)}while(!0);if(Dh(),me=n,Ga.current=r,Fe!==null)throw Error($(261));return Ke=null,Ze=0,$e}function wx(){for(;Fe!==null;)zy(Fe)}function Ex(){for(;Fe!==null&&!W_();)zy(Fe)}function zy(t){var e=$y(t.alternate,t,Pt);t.memoizedProps=t.pendingProps,e===null?Uy(t):Fe=e,Wh.current=null}function Uy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=mx(n,e),n!==null){n.flags&=32767,Fe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{$e=6,Fe=null;return}}else if(n=px(n,e,Pt),n!==null){Fe=n;return}if(e=e.sibling,e!==null){Fe=e;return}Fe=e=t}while(e!==null);$e===0&&($e=5)}function xr(t,e,n){var r=ve,s=$t.transition;try{$t.transition=null,ve=1,Tx(t,e,n,r)}finally{$t.transition=s,ve=r}return null}function Tx(t,e,n,r){do gs();while(Gn!==null);if(me&6)throw Error($(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(r1(t,i),t===Ke&&(Fe=Ke=null,Ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ta||(ta=!0,Gy(Na,function(){return gs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=$t.transition,$t.transition=null;var a=ve;ve=1;var l=me;me|=4,Wh.current=null,yx(t,n),Vy(n,t),$1(mc),ba=!!pc,mc=pc=null,t.current=n,vx(n),K_(),me=l,ve=a,$t.transition=i}else t.current=n;if(ta&&(ta=!1,Gn=t,Ha=s),i=t.pendingLanes,i===0&&(Xn=null),X_(n.stateNode),It(t,Oe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(qa)throw qa=!1,t=Vc,Vc=null,t;return Ha&1&&t.tag!==0&&gs(),i=t.pendingLanes,i&1?t===Mc?bi++:(bi=0,Mc=t):bi=0,fr(),null}function gs(){if(Gn!==null){var t=wg(Ha),e=$t.transition,n=ve;try{if($t.transition=null,ve=16>t?16:t,Gn===null)var r=!1;else{if(t=Gn,Gn=null,Ha=0,me&6)throw Error($(331));var s=me;for(me|=4,Y=t.current;Y!==null;){var i=Y,a=i.child;if(Y.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(Y=d;Y!==null;){var p=Y;switch(p.tag){case 0:case 11:case 15:Ni(8,p,i)}var y=p.child;if(y!==null)y.return=p,Y=y;else for(;Y!==null;){p=Y;var v=p.sibling,S=p.return;if(Py(p),p===d){Y=null;break}if(v!==null){v.return=S,Y=v;break}Y=S}}}var A=i.alternate;if(A!==null){var b=A.child;if(b!==null){A.child=null;do{var j=b.sibling;b.sibling=null,b=j}while(b!==null)}}Y=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,Y=a;else e:for(;Y!==null;){if(i=Y,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ni(9,i,i.return)}var I=i.sibling;if(I!==null){I.return=i.return,Y=I;break e}Y=i.return}}var w=t.current;for(Y=w;Y!==null;){a=Y;var k=a.child;if(a.subtreeFlags&2064&&k!==null)k.return=a,Y=k;else e:for(a=w;Y!==null;){if(l=Y,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:yl(9,l)}}catch(O){Ve(l,l.return,O)}if(l===a){Y=null;break e}var P=l.sibling;if(P!==null){P.return=l.return,Y=P;break e}Y=l.return}}if(me=s,fr(),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(ul,t)}catch{}r=!0}return r}finally{ve=n,$t.transition=e}}return!1}function Vp(t,e,n){e=Is(n,e),e=wy(t,e,1),t=Yn(t,e,1),e=pt(),t!==null&&(co(t,1,e),It(t,e))}function Ve(t,e,n){if(t.tag===3)Vp(t,t,n);else for(;e!==null;){if(e.tag===3){Vp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xn===null||!Xn.has(r))){t=Is(n,t),t=Ey(e,t,1),e=Yn(e,t,1),t=pt(),e!==null&&(co(e,1,t),It(e,t));break}}e=e.return}}function Ix(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=pt(),t.pingedLanes|=t.suspendedLanes&n,Ke===t&&(Ze&n)===n&&($e===4||$e===3&&(Ze&130023424)===Ze&&500>Oe()-Qh?Sr(t,0):Kh|=n),It(t,e)}function By(t,e){e===0&&(t.mode&1?(e=qo,qo<<=1,!(qo&130023424)&&(qo=4194304)):e=1);var n=pt();t=Cn(t,e),t!==null&&(co(t,e,n),It(t,n))}function kx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),By(t,n)}function Sx(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),By(t,n)}var $y;$y=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Et.current)wt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wt=!1,fx(t,e,n);wt=!!(t.flags&131072)}else wt=!1,Ce&&e.flags&1048576&&Wg(e,Oa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ga(t,e),t=e.pendingProps;var s=xs(e,ht.current);ms(e,n),s=Bh(null,e,r,t,s,n);var i=$h();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Tt(r)?(i=!0,Va(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Oh(e),s.updater=gl,e.stateNode=s,s._reactInternals=e,Ic(e,r,t,n),e=Cc(null,e,r,!0,i,n)):(e.tag=0,Ce&&i&&bh(e),ft(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ga(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Nx(r),t=Yt(r,t),s){case 0:e=Sc(null,e,r,t,n);break e;case 1:e=kp(null,e,r,t,n);break e;case 11:e=Tp(null,e,r,t,n);break e;case 14:e=Ip(null,e,r,Yt(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yt(r,s),Sc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yt(r,s),kp(t,e,r,s,n);case 3:e:{if(Sy(e),t===null)throw Error($(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Zg(t,e),za(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Is(Error($(423)),e),e=Sp(t,e,r,n,s);break e}else if(r!==s){s=Is(Error($(424)),e),e=Sp(t,e,r,n,s);break e}else for(jt=Qn(e.stateNode.containerInfo.firstChild),Vt=e,Ce=!0,Jt=null,n=Xg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ws(),r===s){e=Nn(t,e,n);break e}ft(t,e,r,n)}e=e.child}return e;case 5:return ey(e),t===null&&wc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,gc(r,s)?a=null:i!==null&&gc(r,i)&&(e.flags|=32),ky(t,e),ft(t,e,a,n),e.child;case 6:return t===null&&wc(e),null;case 13:return Cy(t,e,n);case 4:return Lh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Es(e,null,r,n):ft(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yt(r,s),Tp(t,e,r,s,n);case 7:return ft(t,e,e.pendingProps,n),e.child;case 8:return ft(t,e,e.pendingProps.children,n),e.child;case 12:return ft(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Te(La,r._currentValue),r._currentValue=a,i!==null)if(tn(i.value,a)){if(i.children===s.children&&!Et.current){e=Nn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=In(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?u.next=u:(u.next=p.next,p.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Ec(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error($(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Ec(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}ft(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ms(e,n),s=Gt(s),r=r(s),e.flags|=1,ft(t,e,r,n),e.child;case 14:return r=e.type,s=Yt(r,e.pendingProps),s=Yt(r.type,s),Ip(t,e,r,s,n);case 15:return Ty(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yt(r,s),ga(t,e),e.tag=1,Tt(r)?(t=!0,Va(e)):t=!1,ms(e,n),xy(e,r,s),Ic(e,r,s,n),Cc(null,e,r,!0,t,n);case 19:return Ny(t,e,n);case 22:return Iy(t,e,n)}throw Error($(156,e.tag))};function Gy(t,e){return yg(t,e)}function Cx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bt(t,e,n,r){return new Cx(t,e,n,r)}function Zh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Nx(t){if(typeof t=="function")return Zh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===vh)return 11;if(t===_h)return 14}return 2}function Zn(t,e){var n=t.alternate;return n===null?(n=Bt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function _a(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Zh(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case es:return Cr(n.children,s,i,e);case yh:a=8,s|=8;break;case Ku:return t=Bt(12,n,e,s|2),t.elementType=Ku,t.lanes=i,t;case Qu:return t=Bt(13,n,e,s),t.elementType=Qu,t.lanes=i,t;case Yu:return t=Bt(19,n,e,s),t.elementType=Yu,t.lanes=i,t;case eg:return _l(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Jm:a=10;break e;case Zm:a=9;break e;case vh:a=11;break e;case _h:a=14;break e;case Fn:a=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Bt(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Cr(t,e,n,r){return t=Bt(7,t,r,e),t.lanes=n,t}function _l(t,e,n,r){return t=Bt(22,t,r,e),t.elementType=eg,t.lanes=n,t.stateNode={isHidden:!1},t}function Pu(t,e,n){return t=Bt(6,t,null,e),t.lanes=n,t}function ju(t,e,n){return e=Bt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ax(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fu(0),this.expirationTimes=fu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ed(t,e,n,r,s,i,a,l,u){return t=new Ax(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Bt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oh(i),t}function bx(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function qy(t){if(!t)return ar;t=t._reactInternals;e:{if(zr(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Tt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(Tt(n))return qg(t,n,e)}return e}function Hy(t,e,n,r,s,i,a,l,u){return t=ed(n,r,!0,t,s,i,a,l,u),t.context=qy(null),n=t.current,r=pt(),s=Jn(n),i=In(r,s),i.callback=e??null,Yn(n,i,s),t.current.lanes=s,co(t,s,r),It(t,r),t}function xl(t,e,n,r){var s=e.current,i=pt(),a=Jn(s);return n=qy(n),e.context===null?e.context=n:e.pendingContext=n,e=In(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Yn(s,e,a),t!==null&&(en(t,s,a,i),fa(t,s,a)),a}function Ka(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Mp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function td(t,e){Mp(t,e),(t=t.alternate)&&Mp(t,e)}function Rx(){return null}var Wy=typeof reportError=="function"?reportError:function(t){console.error(t)};function nd(t){this._internalRoot=t}wl.prototype.render=nd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));xl(t,e,null,null)};wl.prototype.unmount=nd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;jr(function(){xl(null,t,null,null)}),e[Sn]=null}};function wl(t){this._internalRoot=t}wl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ig();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Un.length&&e!==0&&e<Un[n].priority;n++);Un.splice(n,0,t),n===0&&Sg(t)}};function rd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function El(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Op(){}function Px(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Ka(a);i.call(d)}}var a=Hy(e,r,t,0,null,!1,!1,"",Op);return t._reactRootContainer=a,t[Sn]=a.current,Gi(t.nodeType===8?t.parentNode:t),jr(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Ka(u);l.call(d)}}var u=ed(t,0,!1,null,null,!1,!1,"",Op);return t._reactRootContainer=u,t[Sn]=u.current,Gi(t.nodeType===8?t.parentNode:t),jr(function(){xl(e,u,n,r)}),u}function Tl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var u=Ka(a);l.call(u)}}xl(e,a,t,s)}else a=Px(n,e,t,s,r);return Ka(a)}Eg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=gi(e.pendingLanes);n!==0&&(Eh(e,n|1),It(e,Oe()),!(me&6)&&(ks=Oe()+500,fr()))}break;case 13:jr(function(){var r=Cn(t,1);if(r!==null){var s=pt();en(r,t,1,s)}}),td(t,1)}};Th=function(t){if(t.tag===13){var e=Cn(t,134217728);if(e!==null){var n=pt();en(e,t,134217728,n)}td(t,134217728)}};Tg=function(t){if(t.tag===13){var e=Jn(t),n=Cn(t,e);if(n!==null){var r=pt();en(n,t,e,r)}td(t,e)}};Ig=function(){return ve};kg=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};oc=function(t,e,n){switch(e){case"input":if(Zu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=fl(r);if(!s)throw Error($(90));ng(r),Zu(r,s)}}}break;case"textarea":sg(t,n);break;case"select":e=n.value,e!=null&&hs(t,!!n.multiple,e,!1)}};hg=Yh;dg=jr;var jx={usingClientEntryPoint:!1,Events:[fo,ss,fl,ug,cg,Yh]},di={findFiberByHostInstance:Er,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Dx={bundleType:di.bundleType,version:di.version,rendererPackageName:di.rendererPackageName,rendererConfig:di.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=mg(t),t===null?null:t.stateNode},findFiberByHostInstance:di.findFiberByHostInstance||Rx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var na=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!na.isDisabled&&na.supportsFiber)try{ul=na.inject(Dx),ln=na}catch{}}Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jx;Lt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rd(e))throw Error($(200));return bx(t,e,null,n)};Lt.createRoot=function(t,e){if(!rd(t))throw Error($(299));var n=!1,r="",s=Wy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=ed(t,1,!1,null,null,n,!1,r,s),t[Sn]=e.current,Gi(t.nodeType===8?t.parentNode:t),new nd(e)};Lt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=mg(e),t=t===null?null:t.stateNode,t};Lt.flushSync=function(t){return jr(t)};Lt.hydrate=function(t,e,n){if(!El(e))throw Error($(200));return Tl(null,t,e,!0,n)};Lt.hydrateRoot=function(t,e,n){if(!rd(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=Wy;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Hy(e,null,t,1,n??null,s,!1,i,a),t[Sn]=e.current,Gi(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new wl(e)};Lt.render=function(t,e,n){if(!El(e))throw Error($(200));return Tl(null,t,e,!1,n)};Lt.unmountComponentAtNode=function(t){if(!El(t))throw Error($(40));return t._reactRootContainer?(jr(function(){Tl(null,null,t,!1,function(){t._reactRootContainer=null,t[Sn]=null})}),!0):!1};Lt.unstable_batchedUpdates=Yh;Lt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!El(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Tl(t,e,n,!1,r)};Lt.version="18.3.1-next-f1338f8080-20240426";function Ky(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ky)}catch(t){console.error(t)}}Ky(),Km.exports=Lt;var Vx=Km.exports,Lp=Vx;Hu.createRoot=Lp.createRoot,Hu.hydrateRoot=Lp.hydrateRoot;var ae=(t=>(t.PLAN="PLAN",t.GUIDE="GUIDE",t.RATE="RATE",t.LISTS="LISTS",t.BOOKINGS="BOOKINGS",t))(ae||{});const wn={apiKey:"AIzaSyD-xMOB9D-d-2DqRW64jIvxRpB7BlAmSWM",authDomain:"tokyo-trip-51592.firebaseapp.com",projectId:"tokyo-trip-51592",storageBucket:"tokyo-trip-51592.firebasestorage.app",messagingSenderId:"1008859950162",appId:"1:1008859950162:web:d53c524e1ea5ef0178838b"},Mx="https://cf.bstatic.com/xdata/images/hotel/max1280x900/223709051.jpg?k=330554157147772a39282361730043586326176161623168233388708453&o=&hp=1",Ox="https://cf.bstatic.com/xdata/images/hotel/max1280x900/192534431.jpg?k=069695604111364661858567118181604927237890732801831818507851&o=&hp=1",Lx="https://images.unsplash.com/photo-1558030006-450675393462?auto=format&fit=crop&w=800&q=80",Fx=[{id:"f1",type:"flight",title:"",subTitle:"JX804",date:"2025/12/17",details:{from:"TPE",to:"NRT",departTime:"15:00",arriveTime:"19:00",seat:"24A",gate:"--",terminal:" (T1)",counter:"3, 5, 6",baggage:"--"}},{id:"f2",type:"flight",title:"",subTitle:"IT203",date:"2025/12/22",details:{from:"NRT",to:"TPE",departTime:"18:25",arriveTime:"21:50",seat:"12F",gate:"--",terminal:" (T2)",counter:"T",baggage:"--"}},{id:"h1",type:"hotel",title:"",subTitle:"12/17 - 12/20 (3)",date:"2025/12/17",imageUrl:Mx,details:{checkIn:"14:00",checkOut:"12:00",address:"2-6-21",mapLink:"https://maps.app.goo.gl/bxZNMcPWgM31LXa6A"}},{id:"h2",type:"hotel",title:" Resol ",subTitle:"12/20 - 12/22 (2)",date:"2025/12/20",imageUrl:Ox,details:{checkIn:"15:00",checkOut:"11:00",address:"2-25-12",mapLink:"https://maps.app.goo.gl/qokbXoRbd4B5FiFo8"}},{id:"d1",type:"dining",title:"",subTitle:" Miyuki ",date:"2025/12/20 ()",time:"11:30",imageUrl:Lx,details:{pax:2,mapLink:"https://maps.app.goo.gl/eZArqns8efq52ucZ9",cancelLink:"#"}}],Qy=[{id:"g_tokyo_st_17",date:"12/17",title:"",subtitle:"Tokyo Station",description:"",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1536098561742-ca998e48cbcc?auto=format&fit=crop&w=800&q=80"},{id:"g_disney",date:"12/18",title:"",subtitle:"Tokyo Disneyland",description:" App  40 (Priority Pass)",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1545580124-a28a2a890476?auto=format&fit=crop&w=800&q=80"},{id:"g_kamakura",date:"12/19",title:"",subtitle:"Kamakura",description:"",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1599816075883-93723793df66?auto=format&fit=crop&w=800&q=80",mapEmbedUrl:"https://www.openstreetmap.org/export/embed.html?bbox=139.5300%2C35.3000%2C139.5700%2C35.3400&layer=mapnik"},{id:"g_komachi",date:"12/19",title:" / ",subtitle:"Komachi Dori",description:"",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1572973809226-c2cb74070a27?auto=format&fit=crop&w=800&q=80"},{id:"g3",date:"12/19",title:"",subtitle:"Shichirigahama",description:" Bills",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1549643276-fbc2bd874326?auto=format&fit=crop&w=800&q=80"},{id:"g_enoshima",date:"12/19",title:"",subtitle:"Enoshima",description:" (Sea Candle) 360",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1596350314414-b6c86a34591a?auto=format&fit=crop&w=800&q=80"},{id:"g_yokohama",date:"12/19",title:"",subtitle:"Yokohama",description:"21",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1554797589-7241bb691973?auto=format&fit=crop&w=800&q=80"},{id:"g_redbrick",date:"12/19",title:"",subtitle:"Red Brick Warehouse",description:"",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1606216482167-73b3202970a2?auto=format&fit=crop&w=800&q=80"},{id:"g_chinatown",date:"12/19",title:"",subtitle:"Chinatown",description:"500",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1565551624647-1959828e352d?auto=format&fit=crop&w=800&q=80"},{id:"g_ginza",date:"12/20",title:"",subtitle:"Ginza",description:"",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1565624796338-3c35b8eb8371?auto=format&fit=crop&w=800&q=80"},{id:"g_tokyo_st",date:"12/20",title:"",subtitle:"Tokyo Station",description:"",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1536098561742-ca998e48cbcc?auto=format&fit=crop&w=800&q=80"},{id:"g_akiba",date:"12/20",title:"",subtitle:"Akihabara",description:"(Otaku)",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1569931727787-4340798a44b8?auto=format&fit=crop&w=800&q=80"},{id:"g_skytree",date:"12/20",title:"",subtitle:"Tokyo Skytree",description:"634 (Solamachi)300",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1545389659-1ecf04b20a7d?auto=format&fit=crop&w=800&q=80"},{id:"g1",date:"12/21",title:"",subtitle:"Gotokuji Temple",description:"",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1595856424075-d147814b8a2c?auto=format&fit=crop&w=800&q=80",mapEmbedUrl:"https://www.openstreetmap.org/export/embed.html?bbox=139.6450%2C35.6480%2C139.6490%2C35.6520&layer=mapnik"},{id:"g2",date:"12/21",title:"",subtitle:"Azabudai Hills",description:"2023330HarukasTeamLabJP",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1707228800539-7e452932456e?auto=format&fit=crop&w=800&q=80"},{id:"g_shibuya",date:"12/21",title:"",subtitle:"Shibuya",description:" SHIBUYA SKY 360",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1542931287-023b922fa89b?auto=format&fit=crop&w=800&q=80"},{id:"g_harajuku",date:"12/21",title:"",subtitle:"Harajuku",description:"(Kawaii)",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1551641506-ee5bf4cb95f6?auto=format&fit=crop&w=800&q=80"},{id:"g_shinjuku",date:"12/21",title:"",subtitle:"Shinjuku",description:"",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1570162613388-9d4134986348?auto=format&fit=crop&w=800&q=80"},{id:"g_tsukiji",date:"12/22",title:"",subtitle:"Tsukiji Market",description:"",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1572979261314-884852c08365?auto=format&fit=crop&w=800&q=80"},{id:"g_ueno",date:"12/22",title:"",subtitle:"Ueno",description:"",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1575960088924-f7c60317e307?auto=format&fit=crop&w=800&q=80"}],zx=[{date:"12/17",fullDate:"2025-12-17",dayOfWeek:"",weather:{condition:"sunny",temp:"2C - 12C"},items:[{id:"17-1",time:"15:00",activity:" (JX804)",type:"flight",linkTo:{tab:ae.BOOKINGS,targetId:"f1"}},{id:"17-main-1",time:"21:30",activity:"",type:"activity",location:"",linkTo:{tab:ae.GUIDE,targetId:"g_tokyo_st_17"},subItems:[{id:"17-2",time:"21:30",activity:"Check-in: ",type:"hotel",location:"",linkTo:{tab:ae.BOOKINGS,targetId:"h1"},mapsLink:"https://maps.app.goo.gl/bxZNMcPWgM31LXa6A"}]}]},{date:"12/18",fullDate:"2025-12-18",dayOfWeek:"",weather:{condition:"sunny",temp:"0C - 12C"},items:[{id:"18-2",time:"09:00",activity:"",type:"activity",notes:" App  Priority Pass",location:"",linkTo:{tab:ae.GUIDE,targetId:"g_disney"},subItems:[{id:"18-3",time:"17:45",activity:" + ",type:"activity",notes:" 30 "},{id:"18-4",time:"19:00",activity:"",type:"activity",notes:" Dreamlights"}]}]},{date:"12/19",fullDate:"2025-12-19",dayOfWeek:"",weather:{condition:"sunny",temp:"0C - 12C"},items:[{id:"19-main-1",time:"11:00",activity:"",type:"activity",location:"",linkTo:{tab:ae.GUIDE,targetId:"g_kamakura"},subItems:[{id:"19-s1",time:"11:00",activity:" / ",type:"activity",notes:"",linkTo:{tab:ae.GUIDE,targetId:"g_komachi"}},{id:"19-s2",time:"12:52",activity:"",type:"activity",notes:"Bills",linkTo:{tab:ae.GUIDE,targetId:"g3"}},{id:"19-new-1",time:"13:00",activity:"Espresso D Works",type:"food",notes:""},{id:"19-s3",time:"15:00",activity:"",type:"activity",notes:"",linkTo:{tab:ae.GUIDE,targetId:"g_enoshima"}}]},{id:"19-main-2",time:"18:30",activity:"",type:"activity",location:"",linkTo:{tab:ae.GUIDE,targetId:"g_yokohama"},subItems:[{id:"19-s4",time:"18:30",activity:"",type:"activity",notes:"",linkTo:{tab:ae.GUIDE,targetId:"g_redbrick"}},{id:"19-s5",time:"19:30",activity:"",type:"food",notes:"",linkTo:{tab:ae.GUIDE,targetId:"g_chinatown"}},{id:"19-s6",time:"20:30",activity:"",type:"activity",notes:""}]}]},{date:"12/20",fullDate:"2025-12-20",dayOfWeek:"",weather:{condition:"sunny",temp:"4C - 13C"},items:[{id:"20-main-1",time:"11:00",activity:"",type:"activity",location:"",linkTo:{tab:ae.GUIDE,targetId:"g_ginza"},subItems:[{id:"20-s1",time:"11:30",activity:"",type:"food",notes:"Miyuki ",linkTo:{tab:ae.BOOKINGS,targetId:"d1"}}]},{id:"20-main-2",time:"12:30",activity:"",type:"activity",linkTo:{tab:ae.GUIDE,targetId:"g_tokyo_st"},subItems:[{id:"20-s2",time:"12:30",activity:" ()",type:"activity",notes:""}]},{id:"20-main-3",time:"15:00",activity:"",type:"activity",linkTo:{tab:ae.GUIDE,targetId:"g_akiba"},subItems:[{id:"20-s3",time:"15:00",activity:"Check-in: Resol Hotel",type:"hotel",notes:"/",linkTo:{tab:ae.BOOKINGS,targetId:"h2"}},{id:"20-s4",time:"15:30",activity:"",type:"activity",notes:"Bic Camera, Yodobashi, "}]},{id:"20-main-4",time:"19:30",activity:"",type:"activity",location:"",linkTo:{tab:ae.GUIDE,targetId:"g_skytree"},subItems:[{id:"20-s5",time:"19:30",activity:"",type:"activity",notes:""}]}]},{date:"12/21",fullDate:"2025-12-21",dayOfWeek:"",weather:{condition:"sunny",temp:"5C - 13C"},items:[{id:"21-main-1",time:"10:30",activity:"",type:"activity",location:"",linkTo:{tab:ae.GUIDE,targetId:"g1"},subItems:[{id:"21-s1",time:"10:30",activity:"",type:"activity",notes:""}]},{id:"21-main-2",time:"12:30",activity:"",type:"activity",location:"",linkTo:{tab:ae.GUIDE,targetId:"g_shibuya"},subItems:[{id:"21-s2",time:"12:30",activity:"",type:"food",notes:""}]},{id:"21-main-3",time:"14:40",activity:"",type:"activity",linkTo:{tab:ae.GUIDE,targetId:"g_harajuku"},subItems:[{id:"21-s3",time:"14:40",activity:"3 coins",type:"activity",notes:""}]},{id:"21-main-4",time:"16:10",activity:"",type:"activity",linkTo:{tab:ae.GUIDE,targetId:"g_shinjuku"},subItems:[{id:"21-s4",time:"16:10",activity:"POMME d'AMOUR TOKYO",type:"food",notes:""}]},{id:"21-main-5",time:"19:30",activity:"",type:"activity",location:"",linkTo:{tab:ae.GUIDE,targetId:"g2"},subItems:[{id:"21-s5",time:"19:30",activity:"",type:"activity",notes:""}]}]},{date:"12/22",fullDate:"2025-12-22",dayOfWeek:"",weather:{condition:"cloudy",temp:"6C - 13C"},items:[{id:"22-main-1",time:"11:15",activity:"",type:"activity",linkTo:{tab:ae.GUIDE,targetId:"g_tsukiji"},subItems:[{id:"22-s1",time:"11:15",activity:"",type:"food",notes:", "}]},{id:"22-main-2",time:"15:30",activity:"",type:"activity",linkTo:{tab:ae.GUIDE,targetId:"g_ueno"},subItems:[{id:"22-s2",time:"16:25",activity:" Skyliner",type:"transport",notes:""}]},{id:"22-4",time:"18:25",activity:" (IT203)",type:"flight",linkTo:{tab:ae.BOOKINGS,targetId:"f2"}}]}],Ux=["","","","","Sim / ","","","","",""];/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Bx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),le=(t,e)=>{const n=U.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:u,...d},p)=>U.createElement("svg",{ref:p,...Bx,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${$x(t)}`,l].join(" "),...d},[...e.map(([y,v])=>U.createElement(y,v)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=le("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=le("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=le("BedDouble",[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=le("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=le("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=le("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=le("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fp=le("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=le("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=le("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=le("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=le("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=le("CloudRain",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=le("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=le("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=le("Delete",[["path",{d:"M20 5H9l-7 7 7 7h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2Z",key:"1oy587"}],["line",{x1:"18",x2:"12",y1:"9",y2:"15",key:"1olkx5"}],["line",{x1:"12",x2:"18",y1:"9",y2:"15",key:"1n50pc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xx=le("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=le("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=le("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=le("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=le("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=le("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=le("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=le("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=le("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=le("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=le("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=le("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=le("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0=le("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=le("TrainFront",[["path",{d:"M8 3.1V7a4 4 0 0 0 8 0V3.1",key:"1v71zp"}],["path",{d:"m9 15-1-1",key:"1yrq24"}],["path",{d:"m15 15 1-1",key:"1t0d6s"}],["path",{d:"M9 19c-2.8 0-5-2.2-5-5v-4a8 8 0 0 1 16 0v4c0 2.8-2.2 5-5 5Z",key:"1p0hjs"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m16 19 2 3",key:"xo31yx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=le("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Il=le("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=le("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t0=le("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var Up={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},ow=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},r0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,p=i>>2,y=(i&3)<<4|l>>4;let v=(l&15)<<2|d>>6,S=d&63;u||(S=64,a||(v=64)),r.push(n[p],n[y],n[v],n[S])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(n0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ow(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const y=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||y==null)throw new aw;const v=i<<2|l>>4;if(r.push(v),d!==64){const S=l<<4&240|d>>2;if(r.push(S),y!==64){const A=d<<6&192|y;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class aw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lw=function(t){const e=n0(t);return r0.encodeByteArray(e,!0)},Xa=function(t){return lw(t).replace(/\./g,"")},uw=function(t){try{return r0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw=()=>cw().__FIREBASE_DEFAULTS__,dw=()=>{if(typeof process>"u"||typeof Up>"u")return;const t=Up.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},fw=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&uw(t[1]);return e&&JSON.parse(e)},ad=()=>{try{return hw()||dw()||fw()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},pw=t=>{var e,n;return(n=(e=ad())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},mw=t=>{const e=pw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},s0=()=>{var t;return(t=ad())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Xa(JSON.stringify(n)),Xa(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _w(){var t;const e=(t=ad())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xw(){return!_w()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ww(){try{return typeof indexedDB=="object"}catch{return!1}}function Ew(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw="FirebaseError";class Ms extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Tw,Object.setPrototypeOf(this,Ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,i0.prototype.create)}}class i0{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?Iw(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Ms(s,l,r)}}function Iw(t,e){return t.replace(kw,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const kw=/\{\$([^}]+)}/g;function Bc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(Bp(i)&&Bp(a)){if(!Bc(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Bp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(t){return t&&t._delegate?t._delegate:t}class eo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new gw;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Nw(e))try{this.getOrInitializeService({instanceIdentifier:wr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=wr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wr){return this.instances.has(e)}getOptions(e=wr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Cw(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=wr){return this.component?this.component.multipleInstances?e:wr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Cw(t){return t===wr?void 0:t}function Nw(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Sw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const bw={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},Rw=pe.INFO,Pw={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},jw=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Pw[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class o0{constructor(e){this.name=e,this._logLevel=Rw,this._logHandler=jw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const Dw=(t,e)=>e.some(n=>t instanceof n);let $p,Gp;function Vw(){return $p||($p=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Mw(){return Gp||(Gp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const a0=new WeakMap,$c=new WeakMap,l0=new WeakMap,Du=new WeakMap,ld=new WeakMap;function Ow(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(nr(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&a0.set(n,t)}).catch(()=>{}),ld.set(e,t),e}function Lw(t){if($c.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});$c.set(t,e)}let Gc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return $c.get(t);if(e==="objectStoreNames")return t.objectStoreNames||l0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return nr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Fw(t){Gc=t(Gc)}function zw(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Vu(this),e,...n);return l0.set(r,e.sort?e.sort():[e]),nr(r)}:Mw().includes(t)?function(...e){return t.apply(Vu(this),e),nr(a0.get(this))}:function(...e){return nr(t.apply(Vu(this),e))}}function Uw(t){return typeof t=="function"?zw(t):(t instanceof IDBTransaction&&Lw(t),Dw(t,Vw())?new Proxy(t,Gc):t)}function nr(t){if(t instanceof IDBRequest)return Ow(t);if(Du.has(t))return Du.get(t);const e=Uw(t);return e!==t&&(Du.set(t,e),ld.set(e,t)),e}const Vu=t=>ld.get(t);function Bw(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=nr(a);return r&&a.addEventListener("upgradeneeded",u=>{r(nr(a.result),u.oldVersion,u.newVersion,nr(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const $w=["get","getKey","getAll","getAllKeys","count"],Gw=["put","add","delete","clear"],Mu=new Map;function qp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Mu.get(e))return Mu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Gw.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||$w.includes(n)))return;const i=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return Mu.set(e,i),i}Fw(t=>({...t,get:(e,n,r)=>qp(e,n)||t.get(e,n,r),has:(e,n)=>!!qp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Hw(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Hw(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qc="@firebase/app",Hp="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An=new o0("@firebase/app"),Ww="@firebase/app-compat",Kw="@firebase/analytics-compat",Qw="@firebase/analytics",Yw="@firebase/app-check-compat",Xw="@firebase/app-check",Jw="@firebase/auth",Zw="@firebase/auth-compat",eE="@firebase/database",tE="@firebase/data-connect",nE="@firebase/database-compat",rE="@firebase/functions",sE="@firebase/functions-compat",iE="@firebase/installations",oE="@firebase/installations-compat",aE="@firebase/messaging",lE="@firebase/messaging-compat",uE="@firebase/performance",cE="@firebase/performance-compat",hE="@firebase/remote-config",dE="@firebase/remote-config-compat",fE="@firebase/storage",pE="@firebase/storage-compat",mE="@firebase/firestore",gE="@firebase/vertexai-preview",yE="@firebase/firestore-compat",vE="firebase",_E="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc="[DEFAULT]",xE={[qc]:"fire-core",[Ww]:"fire-core-compat",[Qw]:"fire-analytics",[Kw]:"fire-analytics-compat",[Xw]:"fire-app-check",[Yw]:"fire-app-check-compat",[Jw]:"fire-auth",[Zw]:"fire-auth-compat",[eE]:"fire-rtdb",[tE]:"fire-data-connect",[nE]:"fire-rtdb-compat",[rE]:"fire-fn",[sE]:"fire-fn-compat",[iE]:"fire-iid",[oE]:"fire-iid-compat",[aE]:"fire-fcm",[lE]:"fire-fcm-compat",[uE]:"fire-perf",[cE]:"fire-perf-compat",[hE]:"fire-rc",[dE]:"fire-rc-compat",[fE]:"fire-gcs",[pE]:"fire-gcs-compat",[mE]:"fire-fst",[yE]:"fire-fst-compat",[gE]:"fire-vertex","fire-js":"fire-js",[vE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=new Map,wE=new Map,Wc=new Map;function Wp(t,e){try{t.container.addComponent(e)}catch(n){An.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ja(t){const e=t.name;if(Wc.has(e))return An.debug(`There were multiple attempts to register component ${e}.`),!1;Wc.set(e,t);for(const n of to.values())Wp(n,t);for(const n of wE.values())Wp(n,t);return!0}function EE(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rr=new i0("app","Firebase",TE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new eo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE=_E;function u0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Hc,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw rr.create("bad-app-name",{appName:String(s)});if(n||(n=s0()),!n)throw rr.create("no-options");const i=to.get(s);if(i){if(Bc(n,i.options)&&Bc(r,i.config))return i;throw rr.create("duplicate-app",{appName:s})}const a=new Aw(s);for(const u of Wc.values())a.addComponent(u);const l=new IE(n,r,a);return to.set(s,l),l}function c0(t=Hc){const e=to.get(t);if(!e&&t===Hc&&s0())return u0();if(!e)throw rr.create("no-app",{appName:t});return e}function SE(){return Array.from(to.values())}function ys(t,e,n){var r;let s=(r=xE[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),An.warn(l.join(" "));return}Ja(new eo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="firebase-heartbeat-database",NE=1,no="firebase-heartbeat-store";let Ou=null;function h0(){return Ou||(Ou=Bw(CE,NE,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(no)}catch(n){console.warn(n)}}}}).catch(t=>{throw rr.create("idb-open",{originalErrorMessage:t.message})})),Ou}async function AE(t){try{const n=(await h0()).transaction(no),r=await n.objectStore(no).get(d0(t));return await n.done,r}catch(e){if(e instanceof Ms)An.warn(e.message);else{const n=rr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});An.warn(n.message)}}}async function Kp(t,e){try{const r=(await h0()).transaction(no,"readwrite");await r.objectStore(no).put(e,d0(t)),await r.done}catch(n){if(n instanceof Ms)An.warn(n.message);else{const r=rr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});An.warn(r.message)}}}function d0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE=1024,RE=30*24*60*60*1e3;class PE{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new DE(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Qp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=RE}),this._storage.overwrite(this._heartbeatsCache))}catch(r){An.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Qp(),{heartbeatsToSend:r,unsentEntries:s}=jE(this._heartbeatsCache.heartbeats),i=Xa(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return An.warn(n),""}}}function Qp(){return new Date().toISOString().substring(0,10)}function jE(t,e=bE){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),Yp(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Yp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class DE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ww()?Ew().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await AE(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Kp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Kp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Yp(t){return Xa(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(t){Ja(new eo("platform-logger",e=>new qw(e),"PRIVATE")),Ja(new eo("heartbeat",e=>new PE(e),"PRIVATE")),ys(qc,Hp,t),ys(qc,Hp,"esm2017"),ys("fire-js","")}VE("");var ME="firebase",OE="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ys(ME,OE,"app");var Xp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Nr,f0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,g){function T(){}T.prototype=g.prototype,x.D=g.prototype,x.prototype=new T,x.prototype.constructor=x,x.C=function(E,C,N){for(var _=Array(arguments.length-2),J=2;J<arguments.length;J++)_[J-2]=arguments[J];return g.prototype[C].apply(E,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,g,T){T||(T=0);var E=Array(16);if(typeof g=="string")for(var C=0;16>C;++C)E[C]=g.charCodeAt(T++)|g.charCodeAt(T++)<<8|g.charCodeAt(T++)<<16|g.charCodeAt(T++)<<24;else for(C=0;16>C;++C)E[C]=g[T++]|g[T++]<<8|g[T++]<<16|g[T++]<<24;g=x.g[0],T=x.g[1],C=x.g[2];var N=x.g[3],_=g+(N^T&(C^N))+E[0]+3614090360&4294967295;g=T+(_<<7&4294967295|_>>>25),_=N+(C^g&(T^C))+E[1]+3905402710&4294967295,N=g+(_<<12&4294967295|_>>>20),_=C+(T^N&(g^T))+E[2]+606105819&4294967295,C=N+(_<<17&4294967295|_>>>15),_=T+(g^C&(N^g))+E[3]+3250441966&4294967295,T=C+(_<<22&4294967295|_>>>10),_=g+(N^T&(C^N))+E[4]+4118548399&4294967295,g=T+(_<<7&4294967295|_>>>25),_=N+(C^g&(T^C))+E[5]+1200080426&4294967295,N=g+(_<<12&4294967295|_>>>20),_=C+(T^N&(g^T))+E[6]+2821735955&4294967295,C=N+(_<<17&4294967295|_>>>15),_=T+(g^C&(N^g))+E[7]+4249261313&4294967295,T=C+(_<<22&4294967295|_>>>10),_=g+(N^T&(C^N))+E[8]+1770035416&4294967295,g=T+(_<<7&4294967295|_>>>25),_=N+(C^g&(T^C))+E[9]+2336552879&4294967295,N=g+(_<<12&4294967295|_>>>20),_=C+(T^N&(g^T))+E[10]+4294925233&4294967295,C=N+(_<<17&4294967295|_>>>15),_=T+(g^C&(N^g))+E[11]+2304563134&4294967295,T=C+(_<<22&4294967295|_>>>10),_=g+(N^T&(C^N))+E[12]+1804603682&4294967295,g=T+(_<<7&4294967295|_>>>25),_=N+(C^g&(T^C))+E[13]+4254626195&4294967295,N=g+(_<<12&4294967295|_>>>20),_=C+(T^N&(g^T))+E[14]+2792965006&4294967295,C=N+(_<<17&4294967295|_>>>15),_=T+(g^C&(N^g))+E[15]+1236535329&4294967295,T=C+(_<<22&4294967295|_>>>10),_=g+(C^N&(T^C))+E[1]+4129170786&4294967295,g=T+(_<<5&4294967295|_>>>27),_=N+(T^C&(g^T))+E[6]+3225465664&4294967295,N=g+(_<<9&4294967295|_>>>23),_=C+(g^T&(N^g))+E[11]+643717713&4294967295,C=N+(_<<14&4294967295|_>>>18),_=T+(N^g&(C^N))+E[0]+3921069994&4294967295,T=C+(_<<20&4294967295|_>>>12),_=g+(C^N&(T^C))+E[5]+3593408605&4294967295,g=T+(_<<5&4294967295|_>>>27),_=N+(T^C&(g^T))+E[10]+38016083&4294967295,N=g+(_<<9&4294967295|_>>>23),_=C+(g^T&(N^g))+E[15]+3634488961&4294967295,C=N+(_<<14&4294967295|_>>>18),_=T+(N^g&(C^N))+E[4]+3889429448&4294967295,T=C+(_<<20&4294967295|_>>>12),_=g+(C^N&(T^C))+E[9]+568446438&4294967295,g=T+(_<<5&4294967295|_>>>27),_=N+(T^C&(g^T))+E[14]+3275163606&4294967295,N=g+(_<<9&4294967295|_>>>23),_=C+(g^T&(N^g))+E[3]+4107603335&4294967295,C=N+(_<<14&4294967295|_>>>18),_=T+(N^g&(C^N))+E[8]+1163531501&4294967295,T=C+(_<<20&4294967295|_>>>12),_=g+(C^N&(T^C))+E[13]+2850285829&4294967295,g=T+(_<<5&4294967295|_>>>27),_=N+(T^C&(g^T))+E[2]+4243563512&4294967295,N=g+(_<<9&4294967295|_>>>23),_=C+(g^T&(N^g))+E[7]+1735328473&4294967295,C=N+(_<<14&4294967295|_>>>18),_=T+(N^g&(C^N))+E[12]+2368359562&4294967295,T=C+(_<<20&4294967295|_>>>12),_=g+(T^C^N)+E[5]+4294588738&4294967295,g=T+(_<<4&4294967295|_>>>28),_=N+(g^T^C)+E[8]+2272392833&4294967295,N=g+(_<<11&4294967295|_>>>21),_=C+(N^g^T)+E[11]+1839030562&4294967295,C=N+(_<<16&4294967295|_>>>16),_=T+(C^N^g)+E[14]+4259657740&4294967295,T=C+(_<<23&4294967295|_>>>9),_=g+(T^C^N)+E[1]+2763975236&4294967295,g=T+(_<<4&4294967295|_>>>28),_=N+(g^T^C)+E[4]+1272893353&4294967295,N=g+(_<<11&4294967295|_>>>21),_=C+(N^g^T)+E[7]+4139469664&4294967295,C=N+(_<<16&4294967295|_>>>16),_=T+(C^N^g)+E[10]+3200236656&4294967295,T=C+(_<<23&4294967295|_>>>9),_=g+(T^C^N)+E[13]+681279174&4294967295,g=T+(_<<4&4294967295|_>>>28),_=N+(g^T^C)+E[0]+3936430074&4294967295,N=g+(_<<11&4294967295|_>>>21),_=C+(N^g^T)+E[3]+3572445317&4294967295,C=N+(_<<16&4294967295|_>>>16),_=T+(C^N^g)+E[6]+76029189&4294967295,T=C+(_<<23&4294967295|_>>>9),_=g+(T^C^N)+E[9]+3654602809&4294967295,g=T+(_<<4&4294967295|_>>>28),_=N+(g^T^C)+E[12]+3873151461&4294967295,N=g+(_<<11&4294967295|_>>>21),_=C+(N^g^T)+E[15]+530742520&4294967295,C=N+(_<<16&4294967295|_>>>16),_=T+(C^N^g)+E[2]+3299628645&4294967295,T=C+(_<<23&4294967295|_>>>9),_=g+(C^(T|~N))+E[0]+4096336452&4294967295,g=T+(_<<6&4294967295|_>>>26),_=N+(T^(g|~C))+E[7]+1126891415&4294967295,N=g+(_<<10&4294967295|_>>>22),_=C+(g^(N|~T))+E[14]+2878612391&4294967295,C=N+(_<<15&4294967295|_>>>17),_=T+(N^(C|~g))+E[5]+4237533241&4294967295,T=C+(_<<21&4294967295|_>>>11),_=g+(C^(T|~N))+E[12]+1700485571&4294967295,g=T+(_<<6&4294967295|_>>>26),_=N+(T^(g|~C))+E[3]+2399980690&4294967295,N=g+(_<<10&4294967295|_>>>22),_=C+(g^(N|~T))+E[10]+4293915773&4294967295,C=N+(_<<15&4294967295|_>>>17),_=T+(N^(C|~g))+E[1]+2240044497&4294967295,T=C+(_<<21&4294967295|_>>>11),_=g+(C^(T|~N))+E[8]+1873313359&4294967295,g=T+(_<<6&4294967295|_>>>26),_=N+(T^(g|~C))+E[15]+4264355552&4294967295,N=g+(_<<10&4294967295|_>>>22),_=C+(g^(N|~T))+E[6]+2734768916&4294967295,C=N+(_<<15&4294967295|_>>>17),_=T+(N^(C|~g))+E[13]+1309151649&4294967295,T=C+(_<<21&4294967295|_>>>11),_=g+(C^(T|~N))+E[4]+4149444226&4294967295,g=T+(_<<6&4294967295|_>>>26),_=N+(T^(g|~C))+E[11]+3174756917&4294967295,N=g+(_<<10&4294967295|_>>>22),_=C+(g^(N|~T))+E[2]+718787259&4294967295,C=N+(_<<15&4294967295|_>>>17),_=T+(N^(C|~g))+E[9]+3951481745&4294967295,x.g[0]=x.g[0]+g&4294967295,x.g[1]=x.g[1]+(C+(_<<21&4294967295|_>>>11))&4294967295,x.g[2]=x.g[2]+C&4294967295,x.g[3]=x.g[3]+N&4294967295}r.prototype.u=function(x,g){g===void 0&&(g=x.length);for(var T=g-this.blockSize,E=this.B,C=this.h,N=0;N<g;){if(C==0)for(;N<=T;)s(this,x,N),N+=this.blockSize;if(typeof x=="string"){for(;N<g;)if(E[C++]=x.charCodeAt(N++),C==this.blockSize){s(this,E),C=0;break}}else for(;N<g;)if(E[C++]=x[N++],C==this.blockSize){s(this,E),C=0;break}}this.h=C,this.o+=g},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var g=1;g<x.length-8;++g)x[g]=0;var T=8*this.o;for(g=x.length-8;g<x.length;++g)x[g]=T&255,T/=256;for(this.u(x),x=Array(16),g=T=0;4>g;++g)for(var E=0;32>E;E+=8)x[T++]=this.g[g]>>>E&255;return x};function i(x,g){var T=l;return Object.prototype.hasOwnProperty.call(T,x)?T[x]:T[x]=g(x)}function a(x,g){this.h=g;for(var T=[],E=!0,C=x.length-1;0<=C;C--){var N=x[C]|0;E&&N==g||(T[C]=N,E=!1)}this.g=T}var l={};function u(x){return-128<=x&&128>x?i(x,function(g){return new a([g|0],0>g?-1:0)}):new a([x|0],0>x?-1:0)}function d(x){if(isNaN(x)||!isFinite(x))return y;if(0>x)return j(d(-x));for(var g=[],T=1,E=0;x>=T;E++)g[E]=x/T|0,T*=4294967296;return new a(g,0)}function p(x,g){if(x.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(x.charAt(0)=="-")return j(p(x.substring(1),g));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=d(Math.pow(g,8)),E=y,C=0;C<x.length;C+=8){var N=Math.min(8,x.length-C),_=parseInt(x.substring(C,C+N),g);8>N?(N=d(Math.pow(g,N)),E=E.j(N).add(d(_))):(E=E.j(T),E=E.add(d(_)))}return E}var y=u(0),v=u(1),S=u(16777216);t=a.prototype,t.m=function(){if(b(this))return-j(this).m();for(var x=0,g=1,T=0;T<this.g.length;T++){var E=this.i(T);x+=(0<=E?E:4294967296+E)*g,g*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(A(this))return"0";if(b(this))return"-"+j(this).toString(x);for(var g=d(Math.pow(x,6)),T=this,E="";;){var C=P(T,g).g;T=I(T,C.j(g));var N=((0<T.g.length?T.g[0]:T.h)>>>0).toString(x);if(T=C,A(T))return N+E;for(;6>N.length;)N="0"+N;E=N+E}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function A(x){if(x.h!=0)return!1;for(var g=0;g<x.g.length;g++)if(x.g[g]!=0)return!1;return!0}function b(x){return x.h==-1}t.l=function(x){return x=I(this,x),b(x)?-1:A(x)?0:1};function j(x){for(var g=x.g.length,T=[],E=0;E<g;E++)T[E]=~x.g[E];return new a(T,~x.h).add(v)}t.abs=function(){return b(this)?j(this):this},t.add=function(x){for(var g=Math.max(this.g.length,x.g.length),T=[],E=0,C=0;C<=g;C++){var N=E+(this.i(C)&65535)+(x.i(C)&65535),_=(N>>>16)+(this.i(C)>>>16)+(x.i(C)>>>16);E=_>>>16,N&=65535,_&=65535,T[C]=_<<16|N}return new a(T,T[T.length-1]&-2147483648?-1:0)};function I(x,g){return x.add(j(g))}t.j=function(x){if(A(this)||A(x))return y;if(b(this))return b(x)?j(this).j(j(x)):j(j(this).j(x));if(b(x))return j(this.j(j(x)));if(0>this.l(S)&&0>x.l(S))return d(this.m()*x.m());for(var g=this.g.length+x.g.length,T=[],E=0;E<2*g;E++)T[E]=0;for(E=0;E<this.g.length;E++)for(var C=0;C<x.g.length;C++){var N=this.i(E)>>>16,_=this.i(E)&65535,J=x.i(C)>>>16,de=x.i(C)&65535;T[2*E+2*C]+=_*de,w(T,2*E+2*C),T[2*E+2*C+1]+=N*de,w(T,2*E+2*C+1),T[2*E+2*C+1]+=_*J,w(T,2*E+2*C+1),T[2*E+2*C+2]+=N*J,w(T,2*E+2*C+2)}for(E=0;E<g;E++)T[E]=T[2*E+1]<<16|T[2*E];for(E=g;E<2*g;E++)T[E]=0;return new a(T,0)};function w(x,g){for(;(x[g]&65535)!=x[g];)x[g+1]+=x[g]>>>16,x[g]&=65535,g++}function k(x,g){this.g=x,this.h=g}function P(x,g){if(A(g))throw Error("division by zero");if(A(x))return new k(y,y);if(b(x))return g=P(j(x),g),new k(j(g.g),j(g.h));if(b(g))return g=P(x,j(g)),new k(j(g.g),g.h);if(30<x.g.length){if(b(x)||b(g))throw Error("slowDivide_ only works with positive integers.");for(var T=v,E=g;0>=E.l(x);)T=O(T),E=O(E);var C=M(T,1),N=M(E,1);for(E=M(E,2),T=M(T,2);!A(E);){var _=N.add(E);0>=_.l(x)&&(C=C.add(T),N=_),E=M(E,1),T=M(T,1)}return g=I(x,C.j(g)),new k(C,g)}for(C=y;0<=x.l(g);){for(T=Math.max(1,Math.floor(x.m()/g.m())),E=Math.ceil(Math.log(T)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),N=d(T),_=N.j(g);b(_)||0<_.l(x);)T-=E,N=d(T),_=N.j(g);A(N)&&(N=v),C=C.add(N),x=I(x,_)}return new k(C,x)}t.A=function(x){return P(this,x).h},t.and=function(x){for(var g=Math.max(this.g.length,x.g.length),T=[],E=0;E<g;E++)T[E]=this.i(E)&x.i(E);return new a(T,this.h&x.h)},t.or=function(x){for(var g=Math.max(this.g.length,x.g.length),T=[],E=0;E<g;E++)T[E]=this.i(E)|x.i(E);return new a(T,this.h|x.h)},t.xor=function(x){for(var g=Math.max(this.g.length,x.g.length),T=[],E=0;E<g;E++)T[E]=this.i(E)^x.i(E);return new a(T,this.h^x.h)};function O(x){for(var g=x.g.length+1,T=[],E=0;E<g;E++)T[E]=x.i(E)<<1|x.i(E-1)>>>31;return new a(T,x.h)}function M(x,g){var T=g>>5;g%=32;for(var E=x.g.length-T,C=[],N=0;N<E;N++)C[N]=0<g?x.i(N+T)>>>g|x.i(N+T+1)<<32-g:x.i(N+T);return new a(C,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,f0=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=p,Nr=a}).apply(typeof Xp<"u"?Xp:typeof self<"u"?self:typeof window<"u"?window:{});var ra=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var p0,vi,m0,xa,Kc,g0,y0,v0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,h,f){return o==Array.prototype||o==Object.prototype||(o[h]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof ra=="object"&&ra];for(var h=0;h<o.length;++h){var f=o[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(o,h){if(h)e:{var f=r;o=o.split(".");for(var m=0;m<o.length-1;m++){var R=o[m];if(!(R in f))break e;f=f[R]}o=o[o.length-1],m=f[o],h=h(m),h!=m&&h!=null&&e(f,o,{configurable:!0,writable:!0,value:h})}}function i(o,h){o instanceof String&&(o+="");var f=0,m=!1,R={next:function(){if(!m&&f<o.length){var D=f++;return{value:h(D,o[D]),done:!1}}return m=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}s("Array.prototype.values",function(o){return o||function(){return i(this,function(h,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var h=typeof o;return h=h!="object"?h:o?Array.isArray(o)?"array":h:"null",h=="array"||h=="object"&&typeof o.length=="number"}function d(o){var h=typeof o;return h=="object"&&o!=null||h=="function"}function p(o,h,f){return o.call.apply(o.bind,arguments)}function y(o,h,f){if(!o)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,m),o.apply(h,R)}}return function(){return o.apply(h,arguments)}}function v(o,h,f){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:y,v.apply(null,arguments)}function S(o,h){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),o.apply(this,m)}}function A(o,h){function f(){}f.prototype=h.prototype,o.aa=h.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(m,R,D){for(var W=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)W[Ee-2]=arguments[Ee];return h.prototype[R].apply(m,W)}}function b(o){const h=o.length;if(0<h){const f=Array(h);for(let m=0;m<h;m++)f[m]=o[m];return f}return[]}function j(o,h){for(let f=1;f<arguments.length;f++){const m=arguments[f];if(u(m)){const R=o.length||0,D=m.length||0;o.length=R+D;for(let W=0;W<D;W++)o[R+W]=m[W]}else o.push(m)}}class I{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function w(o){return/^[\s\xa0]*$/.test(o)}function k(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function P(o){return P[" "](o),o}P[" "]=function(){};var O=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function M(o,h,f){for(const m in o)h.call(f,o[m],m,o)}function x(o,h){for(const f in o)h.call(void 0,o[f],f,o)}function g(o){const h={};for(const f in o)h[f]=o[f];return h}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(o,h){let f,m;for(let R=1;R<arguments.length;R++){m=arguments[R];for(f in m)o[f]=m[f];for(let D=0;D<T.length;D++)f=T[D],Object.prototype.hasOwnProperty.call(m,f)&&(o[f]=m[f])}}function C(o){var h=1;o=o.split(":");const f=[];for(;0<h&&o.length;)f.push(o.shift()),h--;return o.length&&f.push(o.join(":")),f}function N(o){l.setTimeout(()=>{throw o},0)}function _(){var o=H;let h=null;return o.g&&(h=o.g,o.g=o.g.next,o.g||(o.h=null),h.next=null),h}class J{constructor(){this.h=this.g=null}add(h,f){const m=de.get();m.set(h,f),this.h?this.h.next=m:this.g=m,this.h=m}}var de=new I(()=>new G,o=>o.reset());class G{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,V=!1,H=new J,Q=()=>{const o=l.Promise.resolve(void 0);ue=()=>{o.then(K)}};var K=()=>{for(var o;o=_();){try{o.h.call(o.g)}catch(f){N(f)}var h=de;h.j(o),100>h.h&&(h.h++,o.next=h.g,h.g=o)}V=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function xe(o,h){this.type=o,this.g=this.target=h,this.defaultPrevented=!1}xe.prototype.h=function(){this.defaultPrevented=!0};var yt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,h=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,h),l.removeEventListener("test",f,h)}catch{}return o}();function St(o,h){if(xe.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,m=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=h,h=o.relatedTarget){if(O){e:{try{P(h.nodeName);var R=!0;break e}catch{}R=!1}R||(h=null)}}else f=="mouseover"?h=o.fromElement:f=="mouseout"&&(h=o.toElement);this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Ct[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&St.aa.h.call(this)}}A(St,xe);var Ct={2:"touch",3:"pen",4:"mouse"};St.prototype.h=function(){St.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Nt="closure_listenable_"+(1e6*Math.random()|0),$r=0;function Gl(o,h,f,m,R){this.listener=o,this.proxy=null,this.src=h,this.type=f,this.capture=!!m,this.ha=R,this.key=++$r,this.da=this.fa=!1}function jn(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Gr(o){this.src=o,this.g={},this.h=0}Gr.prototype.add=function(o,h,f,m,R){var D=o.toString();o=this.g[D],o||(o=this.g[D]=[],this.h++);var W=Us(o,h,m,R);return-1<W?(h=o[W],f||(h.fa=!1)):(h=new Gl(h,this.src,D,!!m,R),h.fa=f,o.push(h)),h};function gn(o,h){var f=h.type;if(f in o.g){var m=o.g[f],R=Array.prototype.indexOf.call(m,h,void 0),D;(D=0<=R)&&Array.prototype.splice.call(m,R,1),D&&(jn(h),o.g[f].length==0&&(delete o.g[f],o.h--))}}function Us(o,h,f,m){for(var R=0;R<o.length;++R){var D=o[R];if(!D.da&&D.listener==h&&D.capture==!!f&&D.ha==m)return R}return-1}var Bs="closure_lm_"+(1e6*Math.random()|0),$s={};function Dn(o,h,f,m,R){if(Array.isArray(h)){for(var D=0;D<h.length;D++)Dn(o,h[D],f,m,R);return null}return f=B(f),o&&o[Nt]?o.K(h,f,d(m)?!!m.capture:!1,R):ql(o,h,f,!1,m,R)}function ql(o,h,f,m,R,D){if(!h)throw Error("Invalid event type");var W=d(R)?!!R.capture:!!R,Ee=qs(o);if(Ee||(o[Bs]=Ee=new Gr(o)),f=Ee.add(h,f,m,W,D),f.proxy)return f;if(m=Hl(),f.proxy=m,m.src=o,m.listener=f,o.addEventListener)yt||(R=W),R===void 0&&(R=!1),o.addEventListener(h.toString(),m,R);else if(o.attachEvent)o.attachEvent(Eo(h.toString()),m);else if(o.addListener&&o.removeListener)o.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Hl(){function o(f){return h.call(o.src,o.listener,f)}const h=Wl;return o}function wo(o,h,f,m,R){if(Array.isArray(h))for(var D=0;D<h.length;D++)wo(o,h[D],f,m,R);else m=d(m)?!!m.capture:!!m,f=B(f),o&&o[Nt]?(o=o.i,h=String(h).toString(),h in o.g&&(D=o.g[h],f=Us(D,f,m,R),-1<f&&(jn(D[f]),Array.prototype.splice.call(D,f,1),D.length==0&&(delete o.g[h],o.h--)))):o&&(o=qs(o))&&(h=o.g[h.toString()],o=-1,h&&(o=Us(h,f,m,R)),(f=-1<o?h[o]:null)&&Gs(f))}function Gs(o){if(typeof o!="number"&&o&&!o.da){var h=o.src;if(h&&h[Nt])gn(h.i,o);else{var f=o.type,m=o.proxy;h.removeEventListener?h.removeEventListener(f,m,o.capture):h.detachEvent?h.detachEvent(Eo(f),m):h.addListener&&h.removeListener&&h.removeListener(m),(f=qs(h))?(gn(f,o),f.h==0&&(f.src=null,h[Bs]=null)):jn(o)}}}function Eo(o){return o in $s?$s[o]:$s[o]="on"+o}function Wl(o,h){if(o.da)o=!0;else{h=new St(h,this);var f=o.listener,m=o.ha||o.src;o.fa&&Gs(o),o=f.call(m,h)}return o}function qs(o){return o=o[Bs],o instanceof Gr?o:null}var L="__closure_events_fn_"+(1e9*Math.random()>>>0);function B(o){return typeof o=="function"?o:(o[L]||(o[L]=function(h){return o.handleEvent(h)}),o[L])}function q(){oe.call(this),this.i=new Gr(this),this.M=this,this.F=null}A(q,oe),q.prototype[Nt]=!0,q.prototype.removeEventListener=function(o,h,f,m){wo(this,o,h,f,m)};function ee(o,h){var f,m=o.F;if(m)for(f=[];m;m=m.F)f.push(m);if(o=o.M,m=h.type||h,typeof h=="string")h=new xe(h,o);else if(h instanceof xe)h.target=h.target||o;else{var R=h;h=new xe(m,o),E(h,R)}if(R=!0,f)for(var D=f.length-1;0<=D;D--){var W=h.g=f[D];R=we(W,m,!0,h)&&R}if(W=h.g=o,R=we(W,m,!0,h)&&R,R=we(W,m,!1,h)&&R,f)for(D=0;D<f.length;D++)W=h.g=f[D],R=we(W,m,!1,h)&&R}q.prototype.N=function(){if(q.aa.N.call(this),this.i){var o=this.i,h;for(h in o.g){for(var f=o.g[h],m=0;m<f.length;m++)jn(f[m]);delete o.g[h],o.h--}}this.F=null},q.prototype.K=function(o,h,f,m){return this.i.add(String(o),h,!1,f,m)},q.prototype.L=function(o,h,f,m){return this.i.add(String(o),h,!0,f,m)};function we(o,h,f,m){if(h=o.i.g[String(h)],!h)return!0;h=h.concat();for(var R=!0,D=0;D<h.length;++D){var W=h[D];if(W&&!W.da&&W.capture==f){var Ee=W.listener,Qe=W.ha||W.src;W.fa&&gn(o.i,W),R=Ee.call(Qe,m)!==!1&&R}}return R&&!m.defaultPrevented}function ze(o,h,f){if(typeof o=="function")f&&(o=v(o,f));else if(o&&typeof o.handleEvent=="function")o=v(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(o,h||0)}function qe(o){o.g=ze(()=>{o.g=null,o.i&&(o.i=!1,qe(o))},o.l);const h=o.h;o.h=null,o.m.apply(null,h)}class At extends oe{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:qe(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ht(o){oe.call(this),this.h=o,this.g={}}A(Ht,oe);var To=[];function Io(o){M(o.g,function(h,f){this.g.hasOwnProperty(f)&&Gs(h)},o),o.g={}}Ht.prototype.N=function(){Ht.aa.N.call(this),Io(this)},Ht.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hs=l.JSON.stringify,vt=l.JSON.parse,Ae=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function bt(){}bt.prototype.h=null;function Wt(o){return o.h||(o.h=o.i())}function Fd(){}var Ws={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kl(){xe.call(this,"d")}A(Kl,xe);function Ql(){xe.call(this,"c")}A(Ql,xe);var mr={},zd=null;function ko(){return zd=zd||new q}mr.La="serverreachability";function Ud(o){xe.call(this,mr.La,o)}A(Ud,xe);function Ks(o){const h=ko();ee(h,new Ud(h))}mr.STAT_EVENT="statevent";function Bd(o,h){xe.call(this,mr.STAT_EVENT,o),this.stat=h}A(Bd,xe);function dt(o){const h=ko();ee(h,new Bd(h,o))}mr.Ma="timingevent";function $d(o,h){xe.call(this,mr.Ma,o),this.size=h}A($d,xe);function Qs(o,h){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},h)}function Ys(){this.g=!0}Ys.prototype.xa=function(){this.g=!1};function Fv(o,h,f,m,R,D){o.info(function(){if(o.g)if(D)for(var W="",Ee=D.split("&"),Qe=0;Qe<Ee.length;Qe++){var ge=Ee[Qe].split("=");if(1<ge.length){var rt=ge[0];ge=ge[1];var st=rt.split("_");W=2<=st.length&&st[1]=="type"?W+(rt+"="+ge+"&"):W+(rt+"=redacted&")}}else W=null;else W=D;return"XMLHTTP REQ ("+m+") [attempt "+R+"]: "+h+`
`+f+`
`+W})}function zv(o,h,f,m,R,D,W){o.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+R+"]: "+h+`
`+f+`
`+D+" "+W})}function qr(o,h,f,m){o.info(function(){return"XMLHTTP TEXT ("+h+"): "+Bv(o,f)+(m?" "+m:"")})}function Uv(o,h){o.info(function(){return"TIMEOUT: "+h})}Ys.prototype.info=function(){};function Bv(o,h){if(!o.g)return h;if(!h)return null;try{var f=JSON.parse(h);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var m=f[o];if(!(2>m.length)){var R=m[1];if(Array.isArray(R)&&!(1>R.length)){var D=R[0];if(D!="noop"&&D!="stop"&&D!="close")for(var W=1;W<R.length;W++)R[W]=""}}}}return Hs(f)}catch{return h}}var So={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yl;function Co(){}A(Co,bt),Co.prototype.g=function(){return new XMLHttpRequest},Co.prototype.i=function(){return{}},Yl=new Co;function Vn(o,h,f,m){this.j=o,this.i=h,this.l=f,this.R=m||1,this.U=new Ht(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new qd}function qd(){this.i=null,this.g="",this.h=!1}var Hd={},Xl={};function Jl(o,h,f){o.L=1,o.v=Ro(yn(h)),o.m=f,o.P=!0,Wd(o,null)}function Wd(o,h){o.F=Date.now(),No(o),o.A=yn(o.v);var f=o.A,m=o.R;Array.isArray(m)||(m=[String(m)]),lf(f.i,"t",m),o.C=0,f=o.j.J,o.h=new qd,o.g=Sf(o.j,f?h:null,!o.m),0<o.O&&(o.M=new At(v(o.Y,o,o.g),o.O)),h=o.U,f=o.g,m=o.ca;var R="readystatechange";Array.isArray(R)||(R&&(To[0]=R.toString()),R=To);for(var D=0;D<R.length;D++){var W=Dn(f,R[D],m||h.handleEvent,!1,h.h||h);if(!W)break;h.g[W.key]=W}h=o.H?g(o.H):{},o.m?(o.u||(o.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,h)):(o.u="GET",o.g.ea(o.A,o.u,null,h)),Ks(),Fv(o.i,o.u,o.A,o.l,o.R,o.m)}Vn.prototype.ca=function(o){o=o.target;const h=this.M;h&&vn(o)==3?h.j():this.Y(o)},Vn.prototype.Y=function(o){try{if(o==this.g)e:{const st=vn(this.g);var h=this.g.Ba();const Kr=this.g.Z();if(!(3>st)&&(st!=3||this.g&&(this.h.h||this.g.oa()||mf(this.g)))){this.J||st!=4||h==7||(h==8||0>=Kr?Ks(3):Ks(2)),Zl(this);var f=this.g.Z();this.X=f;t:if(Kd(this)){var m=mf(this.g);o="";var R=m.length,D=vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gr(this),Xs(this);var W="";break t}this.h.i=new l.TextDecoder}for(h=0;h<R;h++)this.h.h=!0,o+=this.h.i.decode(m[h],{stream:!(D&&h==R-1)});m.length=0,this.h.g+=o,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=f==200,zv(this.i,this.u,this.A,this.l,this.R,st,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,Qe=this.g;if((Ee=Qe.g?Qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Ee)){var ge=Ee;break t}}ge=null}if(f=ge)qr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,eu(this,f);else{this.o=!1,this.s=3,dt(12),gr(this),Xs(this);break e}}if(this.P){f=!0;let Kt;for(;!this.J&&this.C<W.length;)if(Kt=$v(this,W),Kt==Xl){st==4&&(this.s=4,dt(14),f=!1),qr(this.i,this.l,null,"[Incomplete Response]");break}else if(Kt==Hd){this.s=4,dt(15),qr(this.i,this.l,W,"[Invalid Chunk]"),f=!1;break}else qr(this.i,this.l,Kt,null),eu(this,Kt);if(Kd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||W.length!=0||this.h.h||(this.s=1,dt(16),f=!1),this.o=this.o&&f,!f)qr(this.i,this.l,W,"[Invalid Chunked Response]"),gr(this),Xs(this);else if(0<W.length&&!this.W){this.W=!0;var rt=this.j;rt.g==this&&rt.ba&&!rt.M&&(rt.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),ou(rt),rt.M=!0,dt(11))}}else qr(this.i,this.l,W,null),eu(this,W);st==4&&gr(this),this.o&&!this.J&&(st==4?Ef(this.j,this):(this.o=!1,No(this)))}else o_(this.g),f==400&&0<W.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),gr(this),Xs(this)}}}catch{}finally{}};function Kd(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function $v(o,h){var f=o.C,m=h.indexOf(`
`,f);return m==-1?Xl:(f=Number(h.substring(f,m)),isNaN(f)?Hd:(m+=1,m+f>h.length?Xl:(h=h.slice(m,m+f),o.C=m+f,h)))}Vn.prototype.cancel=function(){this.J=!0,gr(this)};function No(o){o.S=Date.now()+o.I,Qd(o,o.I)}function Qd(o,h){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Qs(v(o.ba,o),h)}function Zl(o){o.B&&(l.clearTimeout(o.B),o.B=null)}Vn.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(Uv(this.i,this.A),this.L!=2&&(Ks(),dt(17)),gr(this),this.s=2,Xs(this)):Qd(this,this.S-o)};function Xs(o){o.j.G==0||o.J||Ef(o.j,o)}function gr(o){Zl(o);var h=o.M;h&&typeof h.ma=="function"&&h.ma(),o.M=null,Io(o.U),o.g&&(h=o.g,o.g=null,h.abort(),h.ma())}function eu(o,h){try{var f=o.j;if(f.G!=0&&(f.g==o||tu(f.h,o))){if(!o.K&&tu(f.h,o)&&f.G==3){try{var m=f.Da.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var R=m;if(R[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)Oo(f),Vo(f);else break e;iu(f),dt(18)}}else f.za=R[1],0<f.za-f.T&&37500>R[2]&&f.F&&f.v==0&&!f.C&&(f.C=Qs(v(f.Za,f),6e3));if(1>=Jd(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else vr(f,11)}else if((o.K||f.g==o)&&Oo(f),!w(h))for(R=f.Da.g.parse(h),h=0;h<R.length;h++){let ge=R[h];if(f.T=ge[0],ge=ge[1],f.G==2)if(ge[0]=="c"){f.K=ge[1],f.ia=ge[2];const rt=ge[3];rt!=null&&(f.la=rt,f.j.info("VER="+f.la));const st=ge[4];st!=null&&(f.Aa=st,f.j.info("SVER="+f.Aa));const Kr=ge[5];Kr!=null&&typeof Kr=="number"&&0<Kr&&(m=1.5*Kr,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;const Kt=o.g;if(Kt){const Fo=Kt.g?Kt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fo){var D=m.h;D.g||Fo.indexOf("spdy")==-1&&Fo.indexOf("quic")==-1&&Fo.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(nu(D,D.h),D.h=null))}if(m.D){const au=Kt.g?Kt.g.getResponseHeader("X-HTTP-Session-Id"):null;au&&(m.ya=au,Ie(m.I,m.D,au))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var W=o;if(m.qa=kf(m,m.J?m.ia:null,m.W),W.K){Zd(m.h,W);var Ee=W,Qe=m.L;Qe&&(Ee.I=Qe),Ee.B&&(Zl(Ee),No(Ee)),m.g=W}else xf(m);0<f.i.length&&Mo(f)}else ge[0]!="stop"&&ge[0]!="close"||vr(f,7);else f.G==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?vr(f,7):su(f):ge[0]!="noop"&&f.l&&f.l.ta(ge),f.v=0)}}Ks(4)}catch{}}var Gv=class{constructor(o,h){this.g=o,this.map=h}};function Yd(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xd(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Jd(o){return o.h?1:o.g?o.g.size:0}function tu(o,h){return o.h?o.h==h:o.g?o.g.has(h):!1}function nu(o,h){o.g?o.g.add(h):o.h=h}function Zd(o,h){o.h&&o.h==h?o.h=null:o.g&&o.g.has(h)&&o.g.delete(h)}Yd.prototype.cancel=function(){if(this.i=ef(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function ef(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let h=o.i;for(const f of o.g.values())h=h.concat(f.D);return h}return b(o.i)}function qv(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var h=[],f=o.length,m=0;m<f;m++)h.push(o[m]);return h}h=[],f=0;for(m in o)h[f++]=o[m];return h}function Hv(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var h=[];o=o.length;for(var f=0;f<o;f++)h.push(f);return h}h=[],f=0;for(const m in o)h[f++]=m;return h}}}function tf(o,h){if(o.forEach&&typeof o.forEach=="function")o.forEach(h,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,h,void 0);else for(var f=Hv(o),m=qv(o),R=m.length,D=0;D<R;D++)h.call(void 0,m[D],f&&f[D],o)}var nf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wv(o,h){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var m=o[f].indexOf("="),R=null;if(0<=m){var D=o[f].substring(0,m);R=o[f].substring(m+1)}else D=o[f];h(D,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function yr(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof yr){this.h=o.h,Ao(this,o.j),this.o=o.o,this.g=o.g,bo(this,o.s),this.l=o.l;var h=o.i,f=new ei;f.i=h.i,h.g&&(f.g=new Map(h.g),f.h=h.h),rf(this,f),this.m=o.m}else o&&(h=String(o).match(nf))?(this.h=!1,Ao(this,h[1]||"",!0),this.o=Js(h[2]||""),this.g=Js(h[3]||"",!0),bo(this,h[4]),this.l=Js(h[5]||"",!0),rf(this,h[6]||"",!0),this.m=Js(h[7]||"")):(this.h=!1,this.i=new ei(null,this.h))}yr.prototype.toString=function(){var o=[],h=this.j;h&&o.push(Zs(h,sf,!0),":");var f=this.g;return(f||h=="file")&&(o.push("//"),(h=this.o)&&o.push(Zs(h,sf,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Zs(f,f.charAt(0)=="/"?Yv:Qv,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Zs(f,Jv)),o.join("")};function yn(o){return new yr(o)}function Ao(o,h,f){o.j=f?Js(h,!0):h,o.j&&(o.j=o.j.replace(/:$/,""))}function bo(o,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);o.s=h}else o.s=null}function rf(o,h,f){h instanceof ei?(o.i=h,Zv(o.i,o.h)):(f||(h=Zs(h,Xv)),o.i=new ei(h,o.h))}function Ie(o,h,f){o.i.set(h,f)}function Ro(o){return Ie(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Js(o,h){return o?h?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Zs(o,h,f){return typeof o=="string"?(o=encodeURI(o).replace(h,Kv),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Kv(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var sf=/[#\/\?@]/g,Qv=/[#\?:]/g,Yv=/[#\?]/g,Xv=/[#\?@]/g,Jv=/#/g;function ei(o,h){this.h=this.g=null,this.i=o||null,this.j=!!h}function Mn(o){o.g||(o.g=new Map,o.h=0,o.i&&Wv(o.i,function(h,f){o.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=ei.prototype,t.add=function(o,h){Mn(this),this.i=null,o=Hr(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(h),this.h+=1,this};function of(o,h){Mn(o),h=Hr(o,h),o.g.has(h)&&(o.i=null,o.h-=o.g.get(h).length,o.g.delete(h))}function af(o,h){return Mn(o),h=Hr(o,h),o.g.has(h)}t.forEach=function(o,h){Mn(this),this.g.forEach(function(f,m){f.forEach(function(R){o.call(h,R,m,this)},this)},this)},t.na=function(){Mn(this);const o=Array.from(this.g.values()),h=Array.from(this.g.keys()),f=[];for(let m=0;m<h.length;m++){const R=o[m];for(let D=0;D<R.length;D++)f.push(h[m])}return f},t.V=function(o){Mn(this);let h=[];if(typeof o=="string")af(this,o)&&(h=h.concat(this.g.get(Hr(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)h=h.concat(o[f])}return h},t.set=function(o,h){return Mn(this),this.i=null,o=Hr(this,o),af(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[h]),this.h+=1,this},t.get=function(o,h){return o?(o=this.V(o),0<o.length?String(o[0]):h):h};function lf(o,h,f){of(o,h),0<f.length&&(o.i=null,o.g.set(Hr(o,h),b(f)),o.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],h=Array.from(this.g.keys());for(var f=0;f<h.length;f++){var m=h[f];const D=encodeURIComponent(String(m)),W=this.V(m);for(m=0;m<W.length;m++){var R=D;W[m]!==""&&(R+="="+encodeURIComponent(String(W[m]))),o.push(R)}}return this.i=o.join("&")};function Hr(o,h){return h=String(h),o.j&&(h=h.toLowerCase()),h}function Zv(o,h){h&&!o.j&&(Mn(o),o.i=null,o.g.forEach(function(f,m){var R=m.toLowerCase();m!=R&&(of(this,m),lf(this,R,f))},o)),o.j=h}function e_(o,h){const f=new Ys;if(l.Image){const m=new Image;m.onload=S(On,f,"TestLoadImage: loaded",!0,h,m),m.onerror=S(On,f,"TestLoadImage: error",!1,h,m),m.onabort=S(On,f,"TestLoadImage: abort",!1,h,m),m.ontimeout=S(On,f,"TestLoadImage: timeout",!1,h,m),l.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=o}else h(!1)}function t_(o,h){const f=new Ys,m=new AbortController,R=setTimeout(()=>{m.abort(),On(f,"TestPingServer: timeout",!1,h)},1e4);fetch(o,{signal:m.signal}).then(D=>{clearTimeout(R),D.ok?On(f,"TestPingServer: ok",!0,h):On(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(R),On(f,"TestPingServer: error",!1,h)})}function On(o,h,f,m,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),m(f)}catch{}}function n_(){this.g=new Ae}function r_(o,h,f){const m=f||"";try{tf(o,function(R,D){let W=R;d(R)&&(W=Hs(R)),h.push(m+D+"="+encodeURIComponent(W))})}catch(R){throw h.push(m+"type="+encodeURIComponent("_badmap")),R}}function Po(o){this.l=o.Ub||null,this.j=o.eb||!1}A(Po,bt),Po.prototype.g=function(){return new jo(this.l,this.j)},Po.prototype.i=function(o){return function(){return o}}({});function jo(o,h){q.call(this),this.D=o,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(jo,q),t=jo.prototype,t.open=function(o,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=h,this.readyState=1,ni(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(h.body=o),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ti(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,ni(this)),this.g&&(this.readyState=3,ni(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;uf(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function uf(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var h=o.value?o.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!o.done}))&&(this.response=this.responseText+=h)}o.done?ti(this):ni(this),this.readyState==3&&uf(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,ti(this))},t.Qa=function(o){this.g&&(this.response=o,ti(this))},t.ga=function(){this.g&&ti(this)};function ti(o){o.readyState=4,o.l=null,o.j=null,o.v=null,ni(o)}t.setRequestHeader=function(o,h){this.u.append(o,h)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=h.next();return o.join(`\r
`)};function ni(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(jo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function cf(o){let h="";return M(o,function(f,m){h+=m,h+=":",h+=f,h+=`\r
`}),h}function ru(o,h,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=cf(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):Ie(o,h,f))}function De(o){q.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(De,q);var s_=/^https?$/i,i_=["POST","PUT"];t=De.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,h,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);h=h?h.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yl.g(),this.v=this.o?Wt(this.o):Wt(Yl),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(h,String(o),!0),this.B=!1}catch(D){hf(this,D);return}if(o=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var R in m)f.set(R,m[R]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const D of m.keys())f.set(D,m.get(D));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(D=>D.toLowerCase()=="content-type"),R=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(i_,h,void 0))||m||R||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,W]of f)this.g.setRequestHeader(D,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{pf(this),this.u=!0,this.g.send(o),this.u=!1}catch(D){hf(this,D)}};function hf(o,h){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=h,o.m=5,df(o),Do(o)}function df(o){o.A||(o.A=!0,ee(o,"complete"),ee(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,ee(this,"complete"),ee(this,"abort"),Do(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Do(this,!0)),De.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ff(this):this.bb())},t.bb=function(){ff(this)};function ff(o){if(o.h&&typeof a<"u"&&(!o.v[1]||vn(o)!=4||o.Z()!=2)){if(o.u&&vn(o)==4)ze(o.Ea,0,o);else if(ee(o,"readystatechange"),vn(o)==4){o.h=!1;try{const W=o.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var m;if(m=W===0){var R=String(o.D).match(nf)[1]||null;!R&&l.self&&l.self.location&&(R=l.self.location.protocol.slice(0,-1)),m=!s_.test(R?R.toLowerCase():"")}f=m}if(f)ee(o,"complete"),ee(o,"success");else{o.m=6;try{var D=2<vn(o)?o.g.statusText:""}catch{D=""}o.l=D+" ["+o.Z()+"]",df(o)}}finally{Do(o)}}}}function Do(o,h){if(o.g){pf(o);const f=o.g,m=o.v[0]?()=>{}:null;o.g=null,o.v=null,h||ee(o,"ready");try{f.onreadystatechange=m}catch{}}}function pf(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function vn(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<vn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var h=this.g.responseText;return o&&h.indexOf(o)==0&&(h=h.substring(o.length)),vt(h)}};function mf(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function o_(o){const h={};o=(o.g&&2<=vn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<o.length;m++){if(w(o[m]))continue;var f=C(o[m]);const R=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const D=h[R]||[];h[R]=D,D.push(f)}x(h,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ri(o,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||h}function gf(o){this.Aa=0,this.i=[],this.j=new Ys,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ri("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ri("baseRetryDelayMs",5e3,o),this.cb=ri("retryDelaySeedMs",1e4,o),this.Wa=ri("forwardChannelMaxRetries",2,o),this.wa=ri("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Yd(o&&o.concurrentRequestLimit),this.Da=new n_,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=gf.prototype,t.la=8,t.G=1,t.connect=function(o,h,f,m){dt(0),this.W=o,this.H=h||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=kf(this,null,this.W),Mo(this)};function su(o){if(yf(o),o.G==3){var h=o.U++,f=yn(o.I);if(Ie(f,"SID",o.K),Ie(f,"RID",h),Ie(f,"TYPE","terminate"),si(o,f),h=new Vn(o,o.j,h),h.L=2,h.v=Ro(yn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=h.v,f=!0),f||(h.g=Sf(h.j,null),h.g.ea(h.v)),h.F=Date.now(),No(h)}If(o)}function Vo(o){o.g&&(ou(o),o.g.cancel(),o.g=null)}function yf(o){Vo(o),o.u&&(l.clearTimeout(o.u),o.u=null),Oo(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Mo(o){if(!Xd(o.h)&&!o.s){o.s=!0;var h=o.Ga;ue||Q(),V||(ue(),V=!0),H.add(h,o),o.B=0}}function a_(o,h){return Jd(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=h.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Qs(v(o.Ga,o,h),Tf(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const R=new Vn(this,this.j,o);let D=this.o;if(this.S&&(D?(D=g(D),E(D,this.S)):D=this.S),this.m!==null||this.O||(R.H=D,D=null),this.P)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,4096<h){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=_f(this,R,h),f=yn(this.I),Ie(f,"RID",o),Ie(f,"CVER",22),this.D&&Ie(f,"X-HTTP-Session-Id",this.D),si(this,f),D&&(this.O?h="headers="+encodeURIComponent(String(cf(D)))+"&"+h:this.m&&ru(f,this.m,D)),nu(this.h,R),this.Ua&&Ie(f,"TYPE","init"),this.P?(Ie(f,"$req",h),Ie(f,"SID","null"),R.T=!0,Jl(R,f,null)):Jl(R,f,h),this.G=2}}else this.G==3&&(o?vf(this,o):this.i.length==0||Xd(this.h)||vf(this))};function vf(o,h){var f;h?f=h.l:f=o.U++;const m=yn(o.I);Ie(m,"SID",o.K),Ie(m,"RID",f),Ie(m,"AID",o.T),si(o,m),o.m&&o.o&&ru(m,o.m,o.o),f=new Vn(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),h&&(o.i=h.D.concat(o.i)),h=_f(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),nu(o.h,f),Jl(f,m,h)}function si(o,h){o.H&&M(o.H,function(f,m){Ie(h,m,f)}),o.l&&tf({},function(f,m){Ie(h,m,f)})}function _f(o,h,f){f=Math.min(o.i.length,f);var m=o.l?v(o.l.Na,o.l,o):null;e:{var R=o.i;let D=-1;for(;;){const W=["count="+f];D==-1?0<f?(D=R[0].g,W.push("ofs="+D)):D=0:W.push("ofs="+D);let Ee=!0;for(let Qe=0;Qe<f;Qe++){let ge=R[Qe].g;const rt=R[Qe].map;if(ge-=D,0>ge)D=Math.max(0,R[Qe].g-100),Ee=!1;else try{r_(rt,W,"req"+ge+"_")}catch{m&&m(rt)}}if(Ee){m=W.join("&");break e}}}return o=o.i.splice(0,f),h.D=o,m}function xf(o){if(!o.g&&!o.u){o.Y=1;var h=o.Fa;ue||Q(),V||(ue(),V=!0),H.add(h,o),o.v=0}}function iu(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Qs(v(o.Fa,o),Tf(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,wf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Qs(v(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),Vo(this),wf(this))};function ou(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function wf(o){o.g=new Vn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var h=yn(o.qa);Ie(h,"RID","rpc"),Ie(h,"SID",o.K),Ie(h,"AID",o.T),Ie(h,"CI",o.F?"0":"1"),!o.F&&o.ja&&Ie(h,"TO",o.ja),Ie(h,"TYPE","xmlhttp"),si(o,h),o.m&&o.o&&ru(h,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=Ro(yn(h)),f.m=null,f.P=!0,Wd(f,o)}t.Za=function(){this.C!=null&&(this.C=null,Vo(this),iu(this),dt(19))};function Oo(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Ef(o,h){var f=null;if(o.g==h){Oo(o),ou(o),o.g=null;var m=2}else if(tu(o.h,h))f=h.D,Zd(o.h,h),m=1;else return;if(o.G!=0){if(h.o)if(m==1){f=h.m?h.m.length:0,h=Date.now()-h.F;var R=o.B;m=ko(),ee(m,new $d(m,f)),Mo(o)}else xf(o);else if(R=h.s,R==3||R==0&&0<h.X||!(m==1&&a_(o,h)||m==2&&iu(o)))switch(f&&0<f.length&&(h=o.h,h.i=h.i.concat(f)),R){case 1:vr(o,5);break;case 4:vr(o,10);break;case 3:vr(o,6);break;default:vr(o,2)}}}function Tf(o,h){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*h}function vr(o,h){if(o.j.info("Error code "+h),h==2){var f=v(o.fb,o),m=o.Xa;const R=!m;m=new yr(m||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ao(m,"https"),Ro(m),R?e_(m.toString(),f):t_(m.toString(),f)}else dt(2);o.G=0,o.l&&o.l.sa(h),If(o),yf(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function If(o){if(o.G=0,o.ka=[],o.l){const h=ef(o.h);(h.length!=0||o.i.length!=0)&&(j(o.ka,h),j(o.ka,o.i),o.h.i.length=0,b(o.i),o.i.length=0),o.l.ra()}}function kf(o,h,f){var m=f instanceof yr?yn(f):new yr(f);if(m.g!="")h&&(m.g=h+"."+m.g),bo(m,m.s);else{var R=l.location;m=R.protocol,h=h?h+"."+R.hostname:R.hostname,R=+R.port;var D=new yr(null);m&&Ao(D,m),h&&(D.g=h),R&&bo(D,R),f&&(D.l=f),m=D}return f=o.D,h=o.ya,f&&h&&Ie(m,f,h),Ie(m,"VER",o.la),si(o,m),m}function Sf(o,h,f){if(h&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=o.Ca&&!o.pa?new De(new Po({eb:f})):new De(o.pa),h.Ha(o.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cf(){}t=Cf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Lo(){}Lo.prototype.g=function(o,h){return new Rt(o,h)};function Rt(o,h){q.call(this),this.g=new gf(h),this.l=o,this.h=h&&h.messageUrlParams||null,o=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(o?o["X-WebChannel-Content-Type"]=h.messageContentType:o={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(o?o["X-WebChannel-Client-Profile"]=h.va:o={"X-WebChannel-Client-Profile":h.va}),this.g.S=o,(o=h&&h.Sb)&&!w(o)&&(this.g.m=o),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!w(h)&&(this.g.D=h,o=this.h,o!==null&&h in o&&(o=this.h,h in o&&delete o[h])),this.j=new Wr(this)}A(Rt,q),Rt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rt.prototype.close=function(){su(this.g)},Rt.prototype.o=function(o){var h=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=Hs(o),o=f);h.i.push(new Gv(h.Ya++,o)),h.G==3&&Mo(h)},Rt.prototype.N=function(){this.g.l=null,delete this.j,su(this.g),delete this.g,Rt.aa.N.call(this)};function Nf(o){Kl.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var h=o.__sm__;if(h){e:{for(const f in h){o=f;break e}o=void 0}(this.i=o)&&(o=this.i,h=h!==null&&o in h?h[o]:void 0),this.data=h}else this.data=o}A(Nf,Kl);function Af(){Ql.call(this),this.status=1}A(Af,Ql);function Wr(o){this.g=o}A(Wr,Cf),Wr.prototype.ua=function(){ee(this.g,"a")},Wr.prototype.ta=function(o){ee(this.g,new Nf(o))},Wr.prototype.sa=function(o){ee(this.g,new Af)},Wr.prototype.ra=function(){ee(this.g,"b")},Lo.prototype.createWebChannel=Lo.prototype.g,Rt.prototype.send=Rt.prototype.o,Rt.prototype.open=Rt.prototype.m,Rt.prototype.close=Rt.prototype.close,v0=function(){return new Lo},y0=function(){return ko()},g0=mr,Kc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},So.NO_ERROR=0,So.TIMEOUT=8,So.HTTP_ERROR=6,xa=So,Gd.COMPLETE="complete",m0=Gd,Fd.EventType=Ws,Ws.OPEN="a",Ws.CLOSE="b",Ws.ERROR="c",Ws.MESSAGE="d",q.prototype.listen=q.prototype.K,vi=Fd,De.prototype.listenOnce=De.prototype.L,De.prototype.getLastError=De.prototype.Ka,De.prototype.getLastErrorCode=De.prototype.Ba,De.prototype.getStatus=De.prototype.Z,De.prototype.getResponseJson=De.prototype.Oa,De.prototype.getResponseText=De.prototype.oa,De.prototype.send=De.prototype.ea,De.prototype.setWithCredentials=De.prototype.Ha,p0=De}).apply(typeof ra<"u"?ra:typeof self<"u"?self:typeof window<"u"?window:{});const Jp="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}lt.UNAUTHENTICATED=new lt(null),lt.GOOGLE_CREDENTIALS=new lt("google-credentials-uid"),lt.FIRST_PARTY=new lt("first-party-uid"),lt.MOCK_USER=new lt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Os="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr=new o0("@firebase/firestore");function fi(){return Vr.logLevel}function X(t,...e){if(Vr.logLevel<=pe.DEBUG){const n=e.map(ud);Vr.debug(`Firestore (${Os}): ${t}`,...n)}}function bn(t,...e){if(Vr.logLevel<=pe.ERROR){const n=e.map(ud);Vr.error(`Firestore (${Os}): ${t}`,...n)}}function Ss(t,...e){if(Vr.logLevel<=pe.WARN){const n=e.map(ud);Vr.warn(`Firestore (${Os}): ${t}`,...n)}}function ud(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(t="Unexpected state"){const e=`FIRESTORE (${Os}) INTERNAL ASSERTION FAILED: `+t;throw bn(e),new Error(e)}function _e(t,e){t||re()}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends Ms{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(lt.UNAUTHENTICATED))}shutdown(){}}class FE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class zE{constructor(e){this.t=e,this.currentUser=lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_e(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new sr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new sr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new sr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string"),new _0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string"),new lt(e)}}class UE{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=lt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class BE{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new UE(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $E{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GE{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){_e(this.o===void 0);const r=i=>{i.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,X("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string"),this.R=n.token,new $E(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=qE(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ye(t,e){return t<e?-1:t>e?1:0}function Cs(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ge.fromMillis(Date.now())}static fromDate(e){return Ge.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ge(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.timestamp=e}static fromTimestamp(e){return new se(e)}static min(){return new se(new Ge(0,0))}static max(){return new se(new Ge(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,n,r){n===void 0?n=0:n>e.length&&re(),r===void 0?r=e.length-n:r>e.length-n&&re(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ro.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ro?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),a=n.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ne extends ro{construct(e,n,r){return new Ne(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Z(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ne(n)}static emptyPath(){return new Ne([])}}const HE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Je extends ro{construct(e,n,r){return new Je(e,n,r)}static isValidIdentifier(e){return HE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Je.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Je(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Z(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Z(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Z(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new Z(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Je(n)}static emptyPath(){return new Je([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Ne.fromString(e))}static fromName(e){return new te(Ne.fromString(e).popFirst(5))}static empty(){return new te(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Ne(e.slice()))}}function WE(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=se.fromTimestamp(r===1e9?new Ge(n+1,0):new Ge(n,r));return new lr(s,te.empty(),e)}function KE(t){return new lr(t.readTime,t.key,-1)}class lr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new lr(se.min(),te.empty(),-1)}static max(){return new lr(se.max(),te.empty(),-1)}}function QE(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:ye(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class XE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mo(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==YE)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(s=>s?z.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new z((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(p=>{a[d]=p,++l,l===i&&r(a)},p=>s(p))}})}static doWhile(e,n){return new z((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function JE(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function go(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}cd.oe=-1;function kl(t){return t==null}function Za(t){return t===0&&1/t==-1/0}function ZE(t){return typeof t=="number"&&Number.isInteger(t)&&!Za(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ur(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function w0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e,n){this.comparator=e,this.root=n||Xe.EMPTY}insert(e,n){return new je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xe.BLACK,null,null))}remove(e){return new je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sa(this.root,e,this.comparator,!1)}getReverseIterator(){return new sa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sa(this.root,e,this.comparator,!0)}}class sa{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xe{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Xe.RED,this.left=s??Xe.EMPTY,this.right=i??Xe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Xe(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Xe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Xe.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw re();const e=this.left.check();if(e!==this.right.check())throw re();return e+(this.isRed()?0:1)}}Xe.EMPTY=null,Xe.RED=!0,Xe.BLACK=!1;Xe.EMPTY=new class{constructor(){this.size=0}get key(){throw re()}get value(){throw re()}get color(){throw re()}get left(){throw re()}get right(){throw re()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Xe(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new em(this.data.getIterator())}getIteratorFrom(e){return new em(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new et(this.comparator);return n.data=e,n}}class em{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.fields=e,e.sort(Je.comparator)}static empty(){return new Dt([])}unionWith(e){let n=new et(Je.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Dt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Cs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new E0("Invalid base64 string: "+i):i}}(e);return new nt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nt.EMPTY_BYTE_STRING=new nt("");const e2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ur(t){if(_e(!!t),typeof t=="string"){let e=0;const n=e2.exec(t);if(_e(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Me(t.seconds),nanos:Me(t.nanos)}}function Me(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Mr(t){return typeof t=="string"?nt.fromBase64String(t):nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function dd(t){const e=t.mapValue.fields.__previous_value__;return hd(e)?dd(e):e}function so(t){const e=ur(t.mapValue.fields.__local_write_time__.timestampValue);return new Ge(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e,n,r,s,i,a,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class io{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new io("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof io&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia={mapValue:{}};function Or(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?hd(t)?4:r2(t)?9007199254740991:n2(t)?10:11:re()}function pn(t,e){if(t===e)return!0;const n=Or(t);if(n!==Or(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return so(t).isEqual(so(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=ur(s.timestampValue),l=ur(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Mr(s.bytesValue).isEqual(Mr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Me(s.geoPointValue.latitude)===Me(i.geoPointValue.latitude)&&Me(s.geoPointValue.longitude)===Me(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Me(s.integerValue)===Me(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Me(s.doubleValue),l=Me(i.doubleValue);return a===l?Za(a)===Za(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Cs(t.arrayValue.values||[],e.arrayValue.values||[],pn);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Zp(a)!==Zp(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!pn(a[u],l[u])))return!1;return!0}(t,e);default:return re()}}function oo(t,e){return(t.values||[]).find(n=>pn(n,e))!==void 0}function Ns(t,e){if(t===e)return 0;const n=Or(t),r=Or(e);if(n!==r)return ye(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ye(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Me(i.integerValue||i.doubleValue),u=Me(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return tm(t.timestampValue,e.timestampValue);case 4:return tm(so(t),so(e));case 5:return ye(t.stringValue,e.stringValue);case 6:return function(i,a){const l=Mr(i),u=Mr(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),u=a.split("/");for(let d=0;d<l.length&&d<u.length;d++){const p=ye(l[d],u[d]);if(p!==0)return p}return ye(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=ye(Me(i.latitude),Me(a.latitude));return l!==0?l:ye(Me(i.longitude),Me(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return nm(t.arrayValue,e.arrayValue);case 10:return function(i,a){var l,u,d,p;const y=i.fields||{},v=a.fields||{},S=(l=y.value)===null||l===void 0?void 0:l.arrayValue,A=(u=v.value)===null||u===void 0?void 0:u.arrayValue,b=ye(((d=S==null?void 0:S.values)===null||d===void 0?void 0:d.length)||0,((p=A==null?void 0:A.values)===null||p===void 0?void 0:p.length)||0);return b!==0?b:nm(S,A)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===ia.mapValue&&a===ia.mapValue)return 0;if(i===ia.mapValue)return 1;if(a===ia.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=a.fields||{},p=Object.keys(d);u.sort(),p.sort();for(let y=0;y<u.length&&y<p.length;++y){const v=ye(u[y],p[y]);if(v!==0)return v;const S=Ns(l[u[y]],d[p[y]]);if(S!==0)return S}return ye(u.length,p.length)}(t.mapValue,e.mapValue);default:throw re()}}function tm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ye(t,e);const n=ur(t),r=ur(e),s=ye(n.seconds,r.seconds);return s!==0?s:ye(n.nanos,r.nanos)}function nm(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ns(n[s],r[s]);if(i)return i}return ye(n.length,r.length)}function As(t){return Qc(t)}function Qc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ur(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Mr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Qc(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Qc(n.fields[a])}`;return s+"}"}(t.mapValue):re()}function Yc(t){return!!t&&"integerValue"in t}function fd(t){return!!t&&"arrayValue"in t}function rm(t){return!!t&&"nullValue"in t}function sm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wa(t){return!!t&&"mapValue"in t}function n2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Pi(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ur(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Pi(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Pi(t.arrayValue.values[n]);return e}return Object.assign({},t)}function r2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.value=e}static empty(){return new xt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!wa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pi(n)}setAll(e){let n=Je.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Pi(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());wa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];wa(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ur(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new xt(Pi(this.value))}}function T0(t){const e=[];return Ur(t.fields,(n,r)=>{const s=new Je([n]);if(wa(r)){const i=T0(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new Dt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new ct(e,0,se.min(),se.min(),se.min(),xt.empty(),0)}static newFoundDocument(e,n,r,s){return new ct(e,1,n,se.min(),r,s,0)}static newNoDocument(e,n){return new ct(e,2,n,se.min(),se.min(),xt.empty(),0)}static newUnknownDocument(e,n){return new ct(e,3,n,se.min(),se.min(),xt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ct&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ct(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n){this.position=e,this.inclusive=n}}function im(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=te.comparator(te.fromName(a.referenceValue),n.key):r=Ns(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function om(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n="asc"){this.field=e,this.dir=n}}function s2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{}class Be extends I0{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new o2(e,n,r):n==="array-contains"?new u2(e,r):n==="in"?new c2(e,r):n==="not-in"?new h2(e,r):n==="array-contains-any"?new d2(e,r):new Be(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new a2(e,r):new l2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ns(n,this.value)):n!==null&&Or(this.value)===Or(n)&&this.matchesComparison(Ns(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mn extends I0{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new mn(e,n)}matches(e){return k0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function k0(t){return t.op==="and"}function S0(t){return i2(t)&&k0(t)}function i2(t){for(const e of t.filters)if(e instanceof mn)return!1;return!0}function Xc(t){if(t instanceof Be)return t.field.canonicalString()+t.op.toString()+As(t.value);if(S0(t))return t.filters.map(e=>Xc(e)).join(",");{const e=t.filters.map(n=>Xc(n)).join(",");return`${t.op}(${e})`}}function C0(t,e){return t instanceof Be?function(r,s){return s instanceof Be&&r.op===s.op&&r.field.isEqual(s.field)&&pn(r.value,s.value)}(t,e):t instanceof mn?function(r,s){return s instanceof mn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&C0(a,s.filters[l]),!0):!1}(t,e):void re()}function N0(t){return t instanceof Be?function(n){return`${n.field.canonicalString()} ${n.op} ${As(n.value)}`}(t):t instanceof mn?function(n){return n.op.toString()+" {"+n.getFilters().map(N0).join(" ,")+"}"}(t):"Filter"}class o2 extends Be{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class a2 extends Be{constructor(e,n){super(e,"in",n),this.keys=A0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class l2 extends Be{constructor(e,n){super(e,"not-in",n),this.keys=A0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function A0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class u2 extends Be{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return fd(n)&&oo(n.arrayValue,this.value)}}class c2 extends Be{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&oo(this.value.arrayValue,n)}}class h2 extends Be{constructor(e,n){super(e,"not-in",n)}matches(e){if(oo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!oo(this.value.arrayValue,n)}}class d2 extends Be{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!fd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>oo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.ue=null}}function am(t,e=null,n=[],r=[],s=null,i=null,a=null){return new f2(t,e,n,r,s,i,a)}function pd(t){const e=ie(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Xc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),kl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>As(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>As(r)).join(",")),e.ue=n}return e.ue}function md(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!s2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!C0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!om(t.startAt,e.startAt)&&om(t.endAt,e.endAt)}function Jc(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function p2(t,e,n,r,s,i,a,l){return new Sl(t,e,n,r,s,i,a,l)}function Cl(t){return new Sl(t)}function lm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function m2(t){return t.collectionGroup!==null}function ji(t){const e=ie(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new et(Je.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new tl(i,r))}),n.has(Je.keyField().canonicalString())||e.ce.push(new tl(Je.keyField(),r))}return e.ce}function cn(t){const e=ie(t);return e.le||(e.le=g2(e,ji(t))),e.le}function g2(t,e){if(t.limitType==="F")return am(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new tl(s.field,i)});const n=t.endAt?new el(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new el(t.startAt.position,t.startAt.inclusive):null;return am(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Zc(t,e,n){return new Sl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Nl(t,e){return md(cn(t),cn(e))&&t.limitType===e.limitType}function b0(t){return`${pd(cn(t))}|lt:${t.limitType}`}function Yr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>N0(s)).join(", ")}]`),kl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>As(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>As(s)).join(",")),`Target(${r})`}(cn(t))}; limitType=${t.limitType})`}function Al(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):te.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ji(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,u){const d=im(a,l,u);return a.inclusive?d<=0:d<0}(r.startAt,ji(r),s)||r.endAt&&!function(a,l,u){const d=im(a,l,u);return a.inclusive?d>=0:d>0}(r.endAt,ji(r),s))}(t,e)}function y2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function R0(t){return(e,n)=>{let r=!1;for(const s of ji(t)){const i=v2(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function v2(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(i,a,l){const u=a.data.field(i),d=l.data.field(i);return u!==null&&d!==null?Ns(u,d):re()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ur(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return w0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2=new je(te.comparator);function Rn(){return _2}const P0=new je(te.comparator);function _i(...t){let e=P0;for(const n of t)e=e.insert(n.key,n);return e}function j0(t){let e=P0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function kr(){return Di()}function D0(){return Di()}function Di(){return new Ls(t=>t.toString(),(t,e)=>t.isEqual(e))}const x2=new je(te.comparator),w2=new et(te.comparator);function he(...t){let e=w2;for(const n of t)e=e.add(n);return e}const E2=new et(ye);function T2(){return E2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gd(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Za(e)?"-0":e}}function V0(t){return{integerValue:""+t}}function I2(t,e){return ZE(e)?V0(e):gd(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(){this._=void 0}}function k2(t,e,n){return t instanceof nl?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&hd(i)&&(i=dd(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(n,e):t instanceof ao?O0(t,e):t instanceof lo?L0(t,e):function(s,i){const a=M0(s,i),l=um(a)+um(s.Pe);return Yc(a)&&Yc(s.Pe)?V0(l):gd(s.serializer,l)}(t,e)}function S2(t,e,n){return t instanceof ao?O0(t,e):t instanceof lo?L0(t,e):n}function M0(t,e){return t instanceof rl?function(r){return Yc(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class nl extends bl{}class ao extends bl{constructor(e){super(),this.elements=e}}function O0(t,e){const n=F0(e);for(const r of t.elements)n.some(s=>pn(s,r))||n.push(r);return{arrayValue:{values:n}}}class lo extends bl{constructor(e){super(),this.elements=e}}function L0(t,e){let n=F0(e);for(const r of t.elements)n=n.filter(s=>!pn(s,r));return{arrayValue:{values:n}}}class rl extends bl{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function um(t){return Me(t.integerValue||t.doubleValue)}function F0(t){return fd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function C2(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ao&&s instanceof ao||r instanceof lo&&s instanceof lo?Cs(r.elements,s.elements,pn):r instanceof rl&&s instanceof rl?pn(r.Pe,s.Pe):r instanceof nl&&s instanceof nl}(t.transform,e.transform)}class N2{constructor(e,n){this.version=e,this.transformResults=n}}class Mt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Mt}static exists(e){return new Mt(void 0,e)}static updateTime(e){return new Mt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ea(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Rl{}function z0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Pl(t.key,Mt.none()):new yo(t.key,t.data,Mt.none());{const n=t.data,r=xt.empty();let s=new et(Je.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new pr(t.key,r,new Dt(s.toArray()),Mt.none())}}function A2(t,e,n){t instanceof yo?function(s,i,a){const l=s.value.clone(),u=hm(s.fieldTransforms,i,a.transformResults);l.setAll(u),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof pr?function(s,i,a){if(!Ea(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=hm(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(U0(s)),u.setAll(l),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Vi(t,e,n,r){return t instanceof yo?function(i,a,l,u){if(!Ea(i.precondition,a))return l;const d=i.value.clone(),p=dm(i.fieldTransforms,u,a);return d.setAll(p),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof pr?function(i,a,l,u){if(!Ea(i.precondition,a))return l;const d=dm(i.fieldTransforms,u,a),p=a.data;return p.setAll(U0(i)),p.setAll(d),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(i,a,l){return Ea(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function b2(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=M0(r.transform,s||null);i!=null&&(n===null&&(n=xt.empty()),n.set(r.field,i))}return n||null}function cm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Cs(r,s,(i,a)=>C2(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class yo extends Rl{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class pr extends Rl{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function U0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function hm(t,e,n){const r=new Map;_e(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,S2(a,l,n[s]))}return r}function dm(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,k2(i,a,e))}return r}class Pl extends Rl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class R2 extends Rl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&A2(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Vi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Vi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=D0();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const u=z0(a,l);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&Cs(this.mutations,e.mutations,(n,r)=>cm(n,r))&&Cs(this.baseMutations,e.baseMutations,(n,r)=>cm(n,r))}}class yd{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){_e(e.mutations.length===r.length);let s=function(){return x2}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new yd(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le,fe;function V2(t){switch(t){default:return re();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function B0(t){if(t===void 0)return bn("GRPC error has no .code"),F.UNKNOWN;switch(t){case Le.OK:return F.OK;case Le.CANCELLED:return F.CANCELLED;case Le.UNKNOWN:return F.UNKNOWN;case Le.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Le.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Le.INTERNAL:return F.INTERNAL;case Le.UNAVAILABLE:return F.UNAVAILABLE;case Le.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Le.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Le.NOT_FOUND:return F.NOT_FOUND;case Le.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Le.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Le.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Le.ABORTED:return F.ABORTED;case Le.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Le.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Le.DATA_LOSS:return F.DATA_LOSS;default:return re()}}(fe=Le||(Le={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=new Nr([4294967295,4294967295],0);function fm(t){const e=M2().encode(t),n=new f0;return n.update(e),new Uint8Array(n.digest())}function pm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Nr([n,r],0),new Nr([s,i],0)]}class vd{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new xi(`Invalid padding: ${n}`);if(r<0)throw new xi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new xi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new xi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Nr.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Nr.fromNumber(r)));return s.compare(O2)===1&&(s=new Nr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=fm(e),[r,s]=pm(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);if(!this.de(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new vd(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.Ie===0)return;const n=fm(e),[r,s]=pm(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class xi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,vo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new jl(se.min(),s,new je(ye),Rn(),he())}}class vo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new vo(r,n,he(),he(),he())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class $0{constructor(e,n){this.targetId=e,this.me=n}}class G0{constructor(e,n,r=nt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class mm{constructor(){this.fe=0,this.ge=ym(),this.pe=nt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=he(),n=he(),r=he();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:re()}}),new vo(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=ym()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,_e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class L2{constructor(e){this.Le=e,this.Be=new Map,this.ke=Rn(),this.qe=gm(),this.Qe=new je(ye)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:re()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Jc(i))if(r===0){const a=new te(i.path);this.Ue(n,a,ct.newNoDocument(a,se.min()))}else _e(r===1);else{const a=this.Ye(n);if(a!==r){const l=this.Ze(e),u=l?this.Xe(l,e,a):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Mr(r).toUint8Array()}catch(u){if(u instanceof E0)return Ss("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new vd(a,s,i)}catch(u){return Ss(u instanceof xi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,a)=>{const l=this.Je(a);if(l){if(i.current&&Jc(l.target)){const u=new te(l.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,ct.newNoDocument(u,e))}i.be&&(n.set(a,i.ve()),i.Ce())}});let r=he();this.qe.forEach((i,a)=>{let l=!0;a.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new jl(e,n,this.Qe,this.ke,r);return this.ke=Rn(),this.qe=gm(),this.Qe=new je(ye),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new mm,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new et(ye),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new mm),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function gm(){return new je(te.comparator)}function ym(){return new je(te.comparator)}const F2={asc:"ASCENDING",desc:"DESCENDING"},z2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},U2={and:"AND",or:"OR"};class B2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function eh(t,e){return t.useProto3Json||kl(e)?e:{value:e}}function sl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function q0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function $2(t,e){return sl(t,e.toTimestamp())}function hn(t){return _e(!!t),se.fromTimestamp(function(n){const r=ur(n);return new Ge(r.seconds,r.nanos)}(t))}function _d(t,e){return th(t,e).canonicalString()}function th(t,e){const n=function(s){return new Ne(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function H0(t){const e=Ne.fromString(t);return _e(X0(e)),e}function nh(t,e){return _d(t.databaseId,e.path)}function Lu(t,e){const n=H0(e);if(n.get(1)!==t.databaseId.projectId)throw new Z(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Z(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(K0(n))}function W0(t,e){return _d(t.databaseId,e)}function G2(t){const e=H0(t);return e.length===4?Ne.emptyPath():K0(e)}function rh(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function K0(t){return _e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function vm(t,e,n){return{name:nh(t,e),fields:n.value.mapValue.fields}}function q2(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:re()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,p){return d.useProto3Json?(_e(p===void 0||typeof p=="string"),nt.fromBase64String(p||"")):(_e(p===void 0||p instanceof Buffer||p instanceof Uint8Array),nt.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const p=d.code===void 0?F.UNKNOWN:B0(d.code);return new Z(p,d.message||"")}(a);n=new G0(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Lu(t,r.document.name),i=hn(r.document.updateTime),a=r.document.createTime?hn(r.document.createTime):se.min(),l=new xt({mapValue:{fields:r.document.fields}}),u=ct.newFoundDocument(s,i,a,l),d=r.targetIds||[],p=r.removedTargetIds||[];n=new Ta(d,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Lu(t,r.document),i=r.readTime?hn(r.readTime):se.min(),a=ct.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Ta([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Lu(t,r.document),i=r.removedTargetIds||[];n=new Ta([],i,s,null)}else{if(!("filter"in e))return re();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new D2(s,i),l=r.targetId;n=new $0(l,a)}}return n}function H2(t,e){let n;if(e instanceof yo)n={update:vm(t,e.key,e.value)};else if(e instanceof Pl)n={delete:nh(t,e.key)};else if(e instanceof pr)n={update:vm(t,e.key,e.data),updateMask:tT(e.fieldMask)};else{if(!(e instanceof R2))return re();n={verify:nh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof nl)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ao)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof lo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof rl)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw re()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:$2(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:re()}(t,e.precondition)),n}function W2(t,e){return t&&t.length>0?(_e(e!==void 0),t.map(n=>function(s,i){let a=s.updateTime?hn(s.updateTime):hn(i);return a.isEqual(se.min())&&(a=hn(i)),new N2(a,s.transformResults||[])}(n,e))):[]}function K2(t,e){return{documents:[W0(t,e.path)]}}function Q2(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=W0(t,s);const i=function(d){if(d.length!==0)return Y0(mn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(p=>function(v){return{field:Xr(v.field),direction:J2(v.dir)}}(p))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=eh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function Y2(t){let e=G2(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){_e(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(y){const v=Q0(y);return v instanceof mn&&S0(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=function(y){return y.map(v=>function(A){return new tl(Jr(A.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(v))}(n.orderBy));let l=null;n.limit&&(l=function(y){let v;return v=typeof y=="object"?y.value:y,kl(v)?null:v}(n.limit));let u=null;n.startAt&&(u=function(y){const v=!!y.before,S=y.values||[];return new el(S,v)}(n.startAt));let d=null;return n.endAt&&(d=function(y){const v=!y.before,S=y.values||[];return new el(S,v)}(n.endAt)),p2(e,s,a,i,l,"F",u,d)}function X2(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Q0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Jr(n.unaryFilter.field);return Be.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Jr(n.unaryFilter.field);return Be.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Jr(n.unaryFilter.field);return Be.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Jr(n.unaryFilter.field);return Be.create(a,"!=",{nullValue:"NULL_VALUE"});default:return re()}}(t):t.fieldFilter!==void 0?function(n){return Be.create(Jr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return re()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return mn.create(n.compositeFilter.filters.map(r=>Q0(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return re()}}(n.compositeFilter.op))}(t):re()}function J2(t){return F2[t]}function Z2(t){return z2[t]}function eT(t){return U2[t]}function Xr(t){return{fieldPath:t.canonicalString()}}function Jr(t){return Je.fromServerFormat(t.fieldPath)}function Y0(t){return t instanceof Be?function(n){if(n.op==="=="){if(sm(n.value))return{unaryFilter:{field:Xr(n.field),op:"IS_NAN"}};if(rm(n.value))return{unaryFilter:{field:Xr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(sm(n.value))return{unaryFilter:{field:Xr(n.field),op:"IS_NOT_NAN"}};if(rm(n.value))return{unaryFilter:{field:Xr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xr(n.field),op:Z2(n.op),value:n.value}}}(t):t instanceof mn?function(n){const r=n.getFilters().map(s=>Y0(s));return r.length===1?r[0]:{compositeFilter:{op:eT(n.op),filters:r}}}(t):re()}function tT(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function X0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,n,r,s,i=se.min(),a=se.min(),l=nt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new qn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new qn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e){this.ct=e}}function rT(t){const e=Y2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Zc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(){this.un=new iT}addToCollectionParentIndex(e,n){return this.un.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(lr.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(lr.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class iT{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new et(Ne.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new et(Ne.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new bs(0)}static kn(){return new bs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(){this.changes=new Ls(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ct.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Vi(r.mutation,s,Dt.empty(),Ge.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){const s=kr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=_i();return i.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=kr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=Rn();const a=Di(),l=function(){return Di()}();return n.forEach((u,d)=>{const p=r.get(d.key);s.has(d.key)&&(p===void 0||p.mutation instanceof pr)?i=i.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),Vi(p.mutation,d,p.mutation.getFieldMask(),Ge.now())):a.set(d.key,Dt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,p)=>a.set(d,p)),n.forEach((d,p)=>{var y;return l.set(d,new aT(p,(y=a.get(d))!==null&&y!==void 0?y:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Di();let s=new je((a,l)=>a-l),i=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let p=r.get(u)||Dt.empty();p=l.applyToLocalView(d,p),r.set(u,p);const y=(s.get(l.batchId)||he()).add(u);s=s.insert(l.batchId,y)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,p=u.value,y=D0();p.forEach(v=>{if(!i.has(v)){const S=z0(n.get(v),r.get(v));S!==null&&y.set(v,S),i=i.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,y))}return z.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return te.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):m2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):z.resolve(kr());let l=-1,u=i;return a.next(d=>z.forEach(d,(p,y)=>(l<y.largestBatchId&&(l=y.largestBatchId),i.get(p)?z.resolve():this.remoteDocumentCache.getEntry(e,p).next(v=>{u=u.insert(p,v)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,he())).next(p=>({batchId:l,changes:j0(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let s=_i();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=_i();return this.indexManager.getCollectionParents(e,i).next(l=>z.forEach(l,u=>{const d=function(y,v){return new Sl(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(p=>{p.forEach((y,v)=>{a=a.insert(y,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,d)=>{const p=d.getKey();a.get(p)===null&&(a=a.insert(p,ct.newInvalidDocument(p)))});let l=_i();return a.forEach((u,d)=>{const p=i.get(u);p!==void 0&&Vi(p.mutation,d,Dt.empty(),Ge.now()),Al(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return z.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:hn(s.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:rT(s.bundledQuery),readTime:hn(s.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(){this.overlays=new je(te.comparator),this.Ir=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=kr();return z.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const s=kr(),i=n.length+1,a=new te(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return z.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new je((d,p)=>d-p);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=i.get(d.largestBatchId);p===null&&(p=kr(),i=i.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const l=kr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,p)=>l.set(d,p)),!(l.size()>=s)););return z.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new j2(n,r));let i=this.Ir.get(n);i===void 0&&(i=he(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(){this.sessionToken=nt.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(){this.Tr=new et(He.Er),this.dr=new et(He.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new He(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new He(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new te(new Ne([])),r=new He(n,e),s=new He(n,e+1),i=[];return this.dr.forEachInRange([r,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new te(new Ne([])),r=new He(n,e),s=new He(n,e+1);let i=he();return this.dr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new He(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class He{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return te.comparator(e.key,n.key)||ye(e.wr,n.wr)}static Ar(e,n){return ye(e.wr,n.wr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new et(He.Er)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new P2(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.br=this.br.add(new He(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return z.resolve(a)}lookupMutationBatch(e,n){return z.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return z.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new He(n,0),s=new He(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],a=>{const l=this.Dr(a.wr);i.push(l)}),z.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new et(ye);return n.forEach(s=>{const i=new He(s,0),a=new He(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],l=>{r=r.add(l.wr)})}),z.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;te.isDocumentKey(i)||(i=i.child(""));const a=new He(new te(i),0);let l=new et(ye);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.wr)),!0)},a),z.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){_e(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return z.forEach(n.mutations,s=>{const i=new He(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new He(n,0),s=this.br.firstAfterOrEqual(r);return z.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e){this.Mr=e,this.docs=function(){return new je(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():ct.newInvalidDocument(n))}getEntries(e,n){let r=Rn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ct.newInvalidDocument(s))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Rn();const a=n.path,l=new te(a.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||QE(KE(p),r)<=0||(s.has(p.key)||Al(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return z.resolve(i)}getAllFromCollectionGroup(e,n,r,s){re()}Or(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new pT(this)}getSize(e){return z.resolve(this.size)}}class pT extends oT{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e){this.persistence=e,this.Nr=new Ls(n=>pd(n),md),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.Lr=0,this.Br=new xd,this.targetCount=0,this.kr=bs.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),z.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new bs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Kn(n),z.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),z.waitFor(i).next(()=>s)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),z.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,n){this.qr={},this.overlays={},this.Qr=new cd(0),this.Kr=!1,this.Kr=!0,this.$r=new hT,this.referenceDelegate=e(this),this.Ur=new mT(this),this.indexManager=new sT,this.remoteDocumentCache=function(s){return new fT(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new nT(n),this.Gr=new uT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new cT,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new dT(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const s=new yT(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return z.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class yT extends XE{constructor(e){super(),this.currentSequenceNumber=e}}class wd{constructor(e){this.persistence=e,this.Jr=new xd,this.Yr=null}static Zr(e){return new wd(e)}get Xr(){if(this.Yr)return this.Yr;throw re()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),z.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,r=>{const s=te.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,se.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return z.or([()=>z.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=he(),s=he();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Ed(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return xw()?8:JE(vw())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new vT;return this.Xi(e,n,a).next(l=>{if(i.result=l,this.zi)return this.es(e,n,a,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(fi()<=pe.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",Yr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(fi()<=pe.DEBUG&&X("QueryEngine","Query:",Yr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(fi()<=pe.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",Yr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cn(n))):z.resolve())}Yi(e,n){if(lm(n))return z.resolve(null);let r=cn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Zc(n,null,"F"),r=cn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=he(...i);return this.Ji.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,l);return this.ns(n,d,a,u.readTime)?this.Yi(e,Zc(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return lm(n)||s.isEqual(se.min())?z.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const a=this.ts(n,i);return this.ns(n,a,r,s)?z.resolve(null):(fi()<=pe.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Yr(n)),this.rs(e,a,n,WE(s,-1)).next(l=>l))})}ts(e,n){let r=new et(R0(e));return n.forEach((s,i)=>{Al(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return fi()<=pe.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",Yr(n)),this.Ji.getDocumentsMatchingQuery(e,n,lr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new je(ye),this._s=new Ls(i=>pd(i),md),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lT(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function wT(t,e,n,r){return new xT(t,e,n,r)}async function J0(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let u=he();for(const d of s){a.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}for(const d of i){l.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:a,addedBatchIds:l}))})})}function ET(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,p){const y=d.batch,v=y.keys();let S=z.resolve();return v.forEach(A=>{S=S.next(()=>p.getEntry(u,A)).next(b=>{const j=d.docVersions.get(A);_e(j!==null),b.version.compareTo(j)<0&&(y.applyToRemoteDocument(b,d),b.isValidDocument()&&(b.setReadTime(d.commitVersion),p.addEntry(b)))})}),S.next(()=>l.mutationQueue.removeMutationBatch(u,y))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=he();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Z0(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function TT(t,e){const n=ie(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((p,y)=>{const v=s.get(y);if(!v)return;l.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,y).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,y)));let S=v.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(y)!==null?S=S.withResumeToken(nt.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):p.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(p.resumeToken,r)),s=s.insert(y,S),function(b,j,I){return b.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(v,S,p)&&l.push(n.Ur.updateTargetData(i,S))});let u=Rn(),d=he();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),l.push(IT(i,a,e.documentUpdates).next(p=>{u=p.Ps,d=p.Is})),!r.isEqual(se.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(y=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(p)}return z.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function IT(t,e,n){let r=he(),s=he();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Rn();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(se.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):X("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:a,Is:s}})}function kT(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ST(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,z.resolve(s)):n.Ur.allocateTargetId(r).next(a=>(s=new qn(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function sh(t,e,n){const r=ie(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!go(a))throw a;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function _m(t,e,n){const r=ie(t);let s=se.min(),i=he();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,p){const y=ie(u),v=y._s.get(p);return v!==void 0?z.resolve(y.os.get(v)):y.Ur.getTargetData(d,p)}(r,a,cn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?s:se.min(),n?i:he())).next(l=>(CT(r,y2(e),l),{documents:l,Ts:i})))}function CT(t,e,n){let r=t.us.get(e)||se.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class xm{constructor(){this.activeTargetIds=T2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class NT{constructor(){this.so=new xm,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new xm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oa=null;function Fu(){return oa===null?oa=function(){return 268435456+Math.round(2147483648*Math.random())}():oa++,"0x"+oa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const at="WebChannelConnection";class PT extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,a){const l=Fu(),u=this.xo(n,r.toUriEncodedString());X("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,a),this.No(n,u,d,s).then(p=>(X("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw Ss("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",u,"request:",s),p})}Lo(n,r,s,i,a,l){return this.Mo(n,r,s,i,a)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Os}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>n[a]=i),s&&s.headers.forEach((i,a)=>n[a]=i)}xo(n,r){const s=bT[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Fu();return new Promise((a,l)=>{const u=new p0;u.setWithCredentials(!0),u.listenOnce(m0.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case xa.NO_ERROR:const p=u.getResponseJson();X(at,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),a(p);break;case xa.TIMEOUT:X(at,`RPC '${e}' ${i} timed out`),l(new Z(F.DEADLINE_EXCEEDED,"Request time out"));break;case xa.HTTP_ERROR:const y=u.getStatus();if(X(at,`RPC '${e}' ${i} failed with status:`,y,"response text:",u.getResponseText()),y>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const S=v==null?void 0:v.error;if(S&&S.status&&S.message){const A=function(j){const I=j.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(I)>=0?I:F.UNKNOWN}(S.status);l(new Z(A,S.message))}else l(new Z(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Z(F.UNAVAILABLE,"Connection failed."));break;default:re()}}finally{X(at,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);X(at,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=Fu(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=v0(),l=y0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=i.join("");X(at,`Creating RPC '${e}' stream ${s}: ${p}`,u);const y=a.createWebChannel(p,u);let v=!1,S=!1;const A=new RT({Io:j=>{S?X(at,`Not sending because RPC '${e}' stream ${s} is closed:`,j):(v||(X(at,`Opening RPC '${e}' stream ${s} transport.`),y.open(),v=!0),X(at,`RPC '${e}' stream ${s} sending:`,j),y.send(j))},To:()=>y.close()}),b=(j,I,w)=>{j.listen(I,k=>{try{w(k)}catch(P){setTimeout(()=>{throw P},0)}})};return b(y,vi.EventType.OPEN,()=>{S||(X(at,`RPC '${e}' stream ${s} transport opened.`),A.yo())}),b(y,vi.EventType.CLOSE,()=>{S||(S=!0,X(at,`RPC '${e}' stream ${s} transport closed`),A.So())}),b(y,vi.EventType.ERROR,j=>{S||(S=!0,Ss(at,`RPC '${e}' stream ${s} transport errored:`,j),A.So(new Z(F.UNAVAILABLE,"The operation could not be completed")))}),b(y,vi.EventType.MESSAGE,j=>{var I;if(!S){const w=j.data[0];_e(!!w);const k=w,P=k.error||((I=k[0])===null||I===void 0?void 0:I.error);if(P){X(at,`RPC '${e}' stream ${s} received error:`,P);const O=P.status;let M=function(T){const E=Le[T];if(E!==void 0)return B0(E)}(O),x=P.message;M===void 0&&(M=F.INTERNAL,x="Unknown error status: "+O+" with message "+P.message),S=!0,A.So(new Z(M,x)),y.close()}else X(at,`RPC '${e}' stream ${s} received:`,w),A.bo(w)}}),b(l,g0.STAT_EVENT,j=>{j.stat===Kc.PROXY?X(at,`RPC '${e}' stream ${s} detected buffering proxy`):j.stat===Kc.NOPROXY&&X(at,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{A.wo()},0),A}}function zu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(t){return new B2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e,n,r,s,i,a,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ev(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(bn(n.toString()),bn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Z(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jT extends tv{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=q2(this.serializer,e),r=function(i){if(!("targetChange"in i))return se.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?se.min():a.readTime?hn(a.readTime):se.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=rh(this.serializer),n.addTarget=function(i,a){let l;const u=a.target;if(l=Jc(u)?{documents:K2(i,u)}:{query:Q2(i,u)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=q0(i,a.resumeToken);const d=eh(i,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(se.min())>0){l.readTime=sl(i,a.snapshotVersion.toTimestamp());const d=eh(i,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=X2(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=rh(this.serializer),n.removeTarget=e,this.a_(n)}}class DT extends tv{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return _e(!!e.streamToken),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){_e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=W2(e.writeResults,e.commitTime),r=hn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=rh(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>H2(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Z(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,th(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Z(F.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Lo(e,th(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Z(F.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class MT{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(bn(n),this.D_=!1):X("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{r.enqueueAndForget(async()=>{Br(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=ie(u);d.L_.add(4),await _o(d),d.q_.set("Unknown"),d.L_.delete(4),await Vl(d)}(this))})}),this.q_=new MT(r,s)}}async function Vl(t){if(Br(t))for(const e of t.B_)await e(!0)}async function _o(t){for(const e of t.B_)await e(!1)}function nv(t,e){const n=ie(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Sd(n)?kd(n):Fs(n).r_()&&Id(n,e))}function Td(t,e){const n=ie(t),r=Fs(n);n.N_.delete(e),r.r_()&&rv(n,e),n.N_.size===0&&(r.r_()?r.o_():Br(n)&&n.q_.set("Unknown"))}function Id(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Fs(t).A_(e)}function rv(t,e){t.Q_.xe(e),Fs(t).R_(e)}function kd(t){t.Q_=new L2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Fs(t).start(),t.q_.v_()}function Sd(t){return Br(t)&&!Fs(t).n_()&&t.N_.size>0}function Br(t){return ie(t).L_.size===0}function sv(t){t.Q_=void 0}async function LT(t){t.q_.set("Online")}async function FT(t){t.N_.forEach((e,n)=>{Id(t,e)})}async function zT(t,e){sv(t),Sd(t)?(t.q_.M_(e),kd(t)):t.q_.set("Unknown")}async function UT(t,e,n){if(t.q_.set("Online"),e instanceof G0&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await il(t,r)}else if(e instanceof Ta?t.Q_.Ke(e):e instanceof $0?t.Q_.He(e):t.Q_.We(e),!n.isEqual(se.min()))try{const r=await Z0(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Q_.rt(a);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const p=i.N_.get(d);p&&i.N_.set(d,p.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,d)=>{const p=i.N_.get(u);if(!p)return;i.N_.set(u,p.withResumeToken(nt.EMPTY_BYTE_STRING,p.snapshotVersion)),rv(i,u);const y=new qn(p.target,u,d,p.sequenceNumber);Id(i,y)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){X("RemoteStore","Failed to raise snapshot:",r),await il(t,r)}}async function il(t,e,n){if(!go(e))throw e;t.L_.add(1),await _o(t),t.q_.set("Offline"),n||(n=()=>Z0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Vl(t)})}function iv(t,e){return e().catch(n=>il(t,n,e))}async function Ml(t){const e=ie(t),n=cr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;BT(e);)try{const s=await kT(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,$T(e,s)}catch(s){await il(e,s)}ov(e)&&av(e)}function BT(t){return Br(t)&&t.O_.length<10}function $T(t,e){t.O_.push(e);const n=cr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function ov(t){return Br(t)&&!cr(t).n_()&&t.O_.length>0}function av(t){cr(t).start()}async function GT(t){cr(t).p_()}async function qT(t){const e=cr(t);for(const n of t.O_)e.m_(n.mutations)}async function HT(t,e,n){const r=t.O_.shift(),s=yd.from(r,e,n);await iv(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Ml(t)}async function WT(t,e){e&&cr(t).V_&&await async function(r,s){if(function(a){return V2(a)&&a!==F.ABORTED}(s.code)){const i=r.O_.shift();cr(r).s_(),await iv(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Ml(r)}}(t,e),ov(t)&&av(t)}async function Em(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const r=Br(n);n.L_.add(3),await _o(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Vl(n)}async function KT(t,e){const n=ie(t);e?(n.L_.delete(2),await Vl(n)):e||(n.L_.add(2),await _o(n),n.q_.set("Unknown"))}function Fs(t){return t.K_||(t.K_=function(n,r,s){const i=ie(n);return i.w_(),new jT(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:LT.bind(null,t),Ro:FT.bind(null,t),mo:zT.bind(null,t),d_:UT.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Sd(t)?kd(t):t.q_.set("Unknown")):(await t.K_.stop(),sv(t))})),t.K_}function cr(t){return t.U_||(t.U_=function(n,r,s){const i=ie(n);return i.w_(),new DT(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:GT.bind(null,t),mo:WT.bind(null,t),f_:qT.bind(null,t),g_:HT.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Ml(t)):(await t.U_.stop(),t.O_.length>0&&(X("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new Cd(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nd(t,e){if(bn("AsyncQueue",`${e}: ${t}`),go(t))return new Z(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=_i(),this.sortedSet=new je(this.comparator)}static emptySet(e){return new vs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof vs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new vs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(){this.W_=new je(te.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):re():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Rs{constructor(e,n,r,s,i,a,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Rs(e,n,vs.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class YT{constructor(){this.queries=Im(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ie(n),i=s.queries;s.queries=Im(),i.forEach((a,l)=>{for(const u of l.j_)u.onError(r)})})(this,new Z(F.ABORTED,"Firestore shutting down"))}}function Im(){return new Ls(t=>b0(t),Nl)}async function lv(t,e){const n=ie(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new QT,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=Nd(a,`Initialization of query '${Yr(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Ad(n)}async function uv(t,e){const n=ie(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function XT(t,e){const n=ie(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.j_)l.X_(s)&&(r=!0);a.z_=s}}r&&Ad(n)}function JT(t,e,n){const r=ie(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Ad(t){t.Y_.forEach(e=>{e.next()})}var ih,km;(km=ih||(ih={})).ea="default",km.Cache="cache";class cv{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Rs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Rs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ih.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e){this.key=e}}class dv{constructor(e){this.key=e}}class ZT{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=he(),this.mutatedKeys=he(),this.Aa=R0(e),this.Ra=new vs(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Tm,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,y)=>{const v=s.get(p),S=Al(this.query,y)?y:null,A=!!v&&this.mutatedKeys.has(v.key),b=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let j=!1;v&&S?v.data.isEqual(S.data)?A!==b&&(r.track({type:3,doc:S}),j=!0):this.ga(v,S)||(r.track({type:2,doc:S}),j=!0,(u&&this.Aa(S,u)>0||d&&this.Aa(S,d)<0)&&(l=!0)):!v&&S?(r.track({type:0,doc:S}),j=!0):v&&!S&&(r.track({type:1,doc:v}),j=!0,(u||d)&&(l=!0)),j&&(S?(a=a.add(S),i=b?i.add(p):i.delete(p)):(a=a.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:a,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((p,y)=>function(S,A){const b=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re()}};return b(S)-b(A)}(p.type,y.type)||this.Aa(p.doc,y.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,a.length!==0||d?{snapshot:new Rs(this.query,e.Ra,i,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Tm,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=he(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new dv(r))}),this.da.forEach(r=>{e.has(r)||n.push(new hv(r))}),n}ba(e){this.Ta=e.Ts,this.da=he();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Rs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class eI{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class tI{constructor(e){this.key=e,this.va=!1}}class nI{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Ls(l=>b0(l),Nl),this.Ma=new Map,this.xa=new Set,this.Oa=new je(te.comparator),this.Na=new Map,this.La=new xd,this.Ba={},this.ka=new Map,this.qa=bs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function rI(t,e,n=!0){const r=vv(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await fv(r,e,n,!0),s}async function sI(t,e){const n=vv(t);await fv(n,e,!0,!1)}async function fv(t,e,n,r){const s=await ST(t.localStore,cn(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await iI(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&nv(t.remoteStore,s),l}async function iI(t,e,n,r,s){t.Ka=(y,v,S)=>async function(b,j,I,w){let k=j.view.ma(I);k.ns&&(k=await _m(b.localStore,j.query,!1).then(({documents:x})=>j.view.ma(x,k)));const P=w&&w.targetChanges.get(j.targetId),O=w&&w.targetMismatches.get(j.targetId)!=null,M=j.view.applyChanges(k,b.isPrimaryClient,P,O);return Cm(b,j.targetId,M.wa),M.snapshot}(t,y,v,S);const i=await _m(t.localStore,e,!0),a=new ZT(e,i.Ts),l=a.ma(i.documents),u=vo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(l,t.isPrimaryClient,u);Cm(t,n,d.wa);const p=new eI(e,n,a);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function oI(t,e,n){const r=ie(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(a=>!Nl(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await sh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Td(r.remoteStore,s.targetId),oh(r,s.targetId)}).catch(mo)):(oh(r,s.targetId),await sh(r.localStore,s.targetId,!0))}async function aI(t,e){const n=ie(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Td(n.remoteStore,r.targetId))}async function lI(t,e,n){const r=mI(t);try{const s=await function(a,l){const u=ie(a),d=Ge.now(),p=l.reduce((S,A)=>S.add(A.key),he());let y,v;return u.persistence.runTransaction("Locally write mutations","readwrite",S=>{let A=Rn(),b=he();return u.cs.getEntries(S,p).next(j=>{A=j,A.forEach((I,w)=>{w.isValidDocument()||(b=b.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(S,A)).next(j=>{y=j;const I=[];for(const w of l){const k=b2(w,y.get(w.key).overlayedDocument);k!=null&&I.push(new pr(w.key,k,T0(k.value.mapValue),Mt.exists(!0)))}return u.mutationQueue.addMutationBatch(S,d,I,l)}).next(j=>{v=j;const I=j.applyToLocalDocumentSet(y,b);return u.documentOverlayCache.saveOverlays(S,j.batchId,I)})}).then(()=>({batchId:v.batchId,changes:j0(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let d=a.Ba[a.currentUser.toKey()];d||(d=new je(ye)),d=d.insert(l,u),a.Ba[a.currentUser.toKey()]=d}(r,s.batchId,n),await xo(r,s.changes),await Ml(r.remoteStore)}catch(s){const i=Nd(s,"Failed to persist write");n.reject(i)}}async function pv(t,e){const n=ie(t);try{const r=await TT(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Na.get(i);a&&(_e(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?_e(a.va):s.removedDocuments.size>0&&(_e(a.va),a.va=!1))}),await xo(n,r,e)}catch(r){await mo(r)}}function Sm(t,e,n){const r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,a)=>{const l=a.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=ie(a);u.onlineState=l;let d=!1;u.queries.forEach((p,y)=>{for(const v of y.j_)v.Z_(l)&&(d=!0)}),d&&Ad(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function uI(t,e,n){const r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let a=new je(te.comparator);a=a.insert(i,ct.newNoDocument(i,se.min()));const l=he().add(i),u=new jl(se.min(),new Map,new je(ye),a,l);await pv(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),bd(r)}else await sh(r.localStore,e,!1).then(()=>oh(r,e,n)).catch(mo)}async function cI(t,e){const n=ie(t),r=e.batch.batchId;try{const s=await ET(n.localStore,e);gv(n,r,null),mv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await xo(n,s)}catch(s){await mo(s)}}async function hI(t,e,n){const r=ie(t);try{const s=await function(a,l){const u=ie(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return u.mutationQueue.lookupMutationBatch(d,l).next(y=>(_e(y!==null),p=y.keys(),u.mutationQueue.removeMutationBatch(d,y))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,p,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>u.localDocuments.getDocuments(d,p))})}(r.localStore,e);gv(r,e,n),mv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await xo(r,s)}catch(s){await mo(s)}}function mv(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function gv(t,e,n){const r=ie(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function oh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||yv(t,r)})}function yv(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Td(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),bd(t))}function Cm(t,e,n){for(const r of n)r instanceof hv?(t.La.addReference(r.key,e),dI(t,r)):r instanceof dv?(X("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||yv(t,r.key)):re()}function dI(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(X("SyncEngine","New document in limbo: "+n),t.xa.add(r),bd(t))}function bd(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new te(Ne.fromString(e)),r=t.qa.next();t.Na.set(r,new tI(n)),t.Oa=t.Oa.insert(n,r),nv(t.remoteStore,new qn(cn(Cl(n.path)),r,"TargetPurposeLimboResolution",cd.oe))}}async function xo(t,e,n){const r=ie(t),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{a.push(r.Ka(u,e,n).then(d=>{var p;if((d||n)&&r.isPrimaryClient){const y=d?!d.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,y?"current":"not-current")}if(d){s.push(d);const y=Ed.Wi(u.targetId,d);i.push(y)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(u,d){const p=ie(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>z.forEach(d,v=>z.forEach(v.$i,S=>p.persistence.referenceDelegate.addReference(y,v.targetId,S)).next(()=>z.forEach(v.Ui,S=>p.persistence.referenceDelegate.removeReference(y,v.targetId,S)))))}catch(y){if(!go(y))throw y;X("LocalStore","Failed to update sequence numbers: "+y)}for(const y of d){const v=y.targetId;if(!y.fromCache){const S=p.os.get(v),A=S.snapshotVersion,b=S.withLastLimboFreeSnapshotVersion(A);p.os=p.os.insert(v,b)}}}(r.localStore,i))}async function fI(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());const r=await J0(n.localStore,e);n.currentUser=e,function(i,a){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new Z(F.CANCELLED,a))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xo(n,r.hs)}}function pI(t,e){const n=ie(t),r=n.Na.get(e);if(r&&r.va)return he().add(r.key);{let s=he();const i=n.Ma.get(e);if(!i)return s;for(const a of i){const l=n.Fa.get(a);s=s.unionWith(l.view.Va)}return s}}function vv(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=pv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uI.bind(null,e),e.Ca.d_=XT.bind(null,e.eventManager),e.Ca.$a=JT.bind(null,e.eventManager),e}function mI(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hI.bind(null,e),e}class ol{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Dl(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return wT(this.persistence,new _T,e.initialUser,this.serializer)}Ga(e){return new gT(wd.Zr,this.serializer)}Wa(e){return new NT}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ol.provider={build:()=>new ol};class ah{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Sm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=fI.bind(null,this.syncEngine),await KT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new YT}()}createDatastore(e){const n=Dl(e.databaseInfo.databaseId),r=function(i){return new PT(i)}(e.databaseInfo);return function(i,a,l,u){return new VT(i,a,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new OT(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Sm(this.syncEngine,n,0),function(){return wm.D()?new wm:new AT}())}createSyncEngine(e,n){return function(s,i,a,l,u,d,p){const y=new nI(s,i,a,l,u,d);return p&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ie(s);X("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await _o(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ah.provider={build:()=>new ah};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):bn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=lt.UNAUTHENTICATED,this.clientId=x0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{X("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(X("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Nd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Uu(t,e){t.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await J0(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Nm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await yI(t);X("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Em(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Em(e.remoteStore,s)),t._onlineComponents=e}async function yI(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await Uu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ss("Error using user provided cache. Falling back to memory cache: "+n),await Uu(t,new ol)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await Uu(t,new ol);return t._offlineComponents}async function xv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await Nm(t,t._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await Nm(t,new ah))),t._onlineComponents}function vI(t){return xv(t).then(e=>e.syncEngine)}async function lh(t){const e=await xv(t),n=e.eventManager;return n.onListen=rI.bind(null,e.syncEngine),n.onUnlisten=oI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=sI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=aI.bind(null,e.syncEngine),n}function _I(t,e,n={}){const r=new sr;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,u,d){const p=new _v({next:v=>{p.Za(),a.enqueueAndForget(()=>uv(i,y));const S=v.docs.has(l);!S&&v.fromCache?d.reject(new Z(F.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&v.fromCache&&u&&u.source==="server"?d.reject(new Z(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),y=new cv(Cl(l.path),p,{includeMetadataChanges:!0,_a:!0});return lv(i,y)}(await lh(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(t,e,n){if(!n)throw new Z(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function xI(t,e,n,r){if(e===!0&&r===!0)throw new Z(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function bm(t){if(!te.isDocumentKey(t))throw new Z(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Rm(t){if(te.isDocumentKey(t))throw new Z(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Rd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re()}function dn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Z(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Rd(t);throw new Z(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Z(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Z(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wv((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ol{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Z(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pm(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new LE;switch(r.type){case"firstParty":return new BE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Am.get(n);r&&(X("ComponentProvider","Removing Datastore"),Am.delete(n),r.terminate())}(this),Promise.resolve()}}function wI(t,e,n,r={}){var s;const i=(t=dn(t,Ol))._getSettings(),a=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&Ss("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=lt.MOCK_USER;else{l=yw(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new Z(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new lt(d)}t._authCredentials=new FE(new _0(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ll(this.firestore,e,this._query)}}class kt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ir(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kt(this.firestore,e,this._key)}}class ir extends Ll{constructor(e,n,r){super(e,n,Cl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kt(this.firestore,null,new te(e))}withConverter(e){return new ir(this.firestore,e,this._path)}}function Bu(t,e,...n){if(t=fn(t),Ev("collection","path",e),t instanceof Ol){const r=Ne.fromString(e,...n);return Rm(r),new ir(t,null,r)}{if(!(t instanceof kt||t instanceof ir))throw new Z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return Rm(r),new ir(t.firestore,null,r)}}function rn(t,e,...n){if(t=fn(t),arguments.length===1&&(e=x0.newId()),Ev("doc","path",e),t instanceof Ol){const r=Ne.fromString(e,...n);return bm(r),new kt(t,null,new te(r))}{if(!(t instanceof kt||t instanceof ir))throw new Z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return bm(r),new kt(t.firestore,t instanceof ir?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ev(this,"async_queue_retry"),this.Vu=()=>{const r=zu();r&&X("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=zu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=zu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new sr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!go(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(r);throw bn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Cd.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&re()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Dm(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Lr extends Ol{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new jm,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jm(e),this._firestoreClient=void 0,await e}}}function EI(t,e){const n=typeof t=="object"?t:c0(),r=typeof t=="string"?t:"(default)",s=EE(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=mw("firestore");i&&wI(s,...i)}return s}function Fl(t){if(t._terminated)throw new Z(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||TI(t),t._firestoreClient}function TI(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,d,p){return new t2(l,u,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,wv(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new gI(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ps(nt.fromBase64String(e))}catch(n){throw new Z(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ps(nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Z(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Je(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Z(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Z(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=/^__.*__$/;class kI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new pr(e,this.data,this.fieldMask,n,this.fieldTransforms):new yo(e,this.data,n,this.fieldTransforms)}}class Tv{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new pr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Iv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re()}}class Vd{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Vd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return al(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Iv(this.Cu)&&II.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class SI{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Dl(e)}Qu(e,n,r,s=!1){return new Vd({Cu:e,methodName:n,qu:r,path:Je.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kv(t){const e=t._freezeSettings(),n=Dl(t._databaseId);return new SI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Sv(t,e,n,r,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Md("Data must be an object, but it was:",a,r);const l=Cv(r,a);let u,d;if(i.merge)u=new Dt(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const p=[];for(const y of i.mergeFields){const v=uh(e,y,n);if(!a.contains(v))throw new Z(F.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);Av(p,v)||p.push(v)}u=new Dt(p),d=a.fieldTransforms.filter(y=>u.covers(y.field))}else u=null,d=a.fieldTransforms;return new kI(new xt(l),u,d)}class Ul extends Pd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ul}}function CI(t,e,n,r){const s=t.Qu(1,e,n);Md("Data must be an object, but it was:",s,r);const i=[],a=xt.empty();Ur(r,(u,d)=>{const p=Od(e,u,n);d=fn(d);const y=s.Nu(p);if(d instanceof Ul)i.push(p);else{const v=Bl(d,y);v!=null&&(i.push(p),a.set(p,v))}});const l=new Dt(i);return new Tv(a,l,s.fieldTransforms)}function NI(t,e,n,r,s,i){const a=t.Qu(1,e,n),l=[uh(e,r,n)],u=[s];if(i.length%2!=0)throw new Z(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<i.length;v+=2)l.push(uh(e,i[v])),u.push(i[v+1]);const d=[],p=xt.empty();for(let v=l.length-1;v>=0;--v)if(!Av(d,l[v])){const S=l[v];let A=u[v];A=fn(A);const b=a.Nu(S);if(A instanceof Ul)d.push(S);else{const j=Bl(A,b);j!=null&&(d.push(S),p.set(S,j))}}const y=new Dt(d);return new Tv(p,y,a.fieldTransforms)}function Bl(t,e){if(Nv(t=fn(t)))return Md("Unsupported field value:",e,t),Cv(t,e);if(t instanceof Pd)return function(r,s){if(!Iv(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let u=Bl(l,s.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=fn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return I2(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ge.fromDate(r);return{timestampValue:sl(s.serializer,i)}}if(r instanceof Ge){const i=new Ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:sl(s.serializer,i)}}if(r instanceof jd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ps)return{bytesValue:q0(s.serializer,r._byteString)};if(r instanceof kt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:_d(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Dd)return function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return gd(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Rd(r)}`)}(t,e)}function Cv(t,e){const n={};return w0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ur(t,(r,s)=>{const i=Bl(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Nv(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ge||t instanceof jd||t instanceof Ps||t instanceof kt||t instanceof Pd||t instanceof Dd)}function Md(t,e,n){if(!Nv(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Rd(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function uh(t,e,n){if((e=fn(e))instanceof zl)return e._internalPath;if(typeof e=="string")return Od(t,e);throw al("Field path arguments must be of type string or ",t,!1,void 0,n)}const AI=new RegExp("[~\\*/\\[\\]]");function Od(t,e,n){if(e.search(AI)>=0)throw al(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new zl(...e.split("."))._internalPath}catch{throw al(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function al(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new Z(F.INVALID_ARGUMENT,l+t+u)}function Av(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new bI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Rv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class bI extends bv{data(){return super.data()}}function Rv(t,e){return typeof e=="string"?Od(t,e):e instanceof zl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Z(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class PI{convertValue(e,n="none"){switch(Or(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Mr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw re()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ur(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>Me(a.doubleValue));return new Dd(i)}convertGeoPoint(e){return new jd(Me(e.latitude),Me(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=dd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(so(e));default:return null}}convertTimestamp(e){const n=ur(e);return new Ge(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ne.fromString(e);_e(X0(r));const s=new io(r.get(1),r.get(3)),i=new te(r.popFirst(5));return s.isEqual(n)||bn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jv extends bv{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ia(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Rv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Ia extends jv{data(e={}){return super.data(e)}}class jI{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new wi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ia(this._firestore,this._userDataWriter,r.key,r,new wi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Z(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new Ia(s._firestore,s._userDataWriter,l.doc.key,l.doc,new wi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new Ia(s._firestore,s._userDataWriter,l.doc.key,l.doc,new wi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,p=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),p=a.indexOf(l.doc.key)),{type:DI(l.type),doc:u,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function DI(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(t){t=dn(t,kt);const e=dn(t.firestore,Lr);return _I(Fl(e),t._key).then(n=>Vv(e,t,n))}class Dv extends PI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ps(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,n)}}function Gu(t,e,n){t=dn(t,kt);const r=dn(t.firestore,Lr),s=Pv(t.converter,e,n);return Ld(r,[Sv(kv(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Mt.none())])}function VI(t){return Ld(dn(t.firestore,Lr),[new Pl(t._key,Mt.none())])}function aa(t,...e){var n,r,s;t=fn(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Dm(e[a])||(i=e[a],a++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Dm(e[a])){const y=e[a];e[a]=(n=y.next)===null||n===void 0?void 0:n.bind(y),e[a+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[a+2]=(s=y.complete)===null||s===void 0?void 0:s.bind(y)}let u,d,p;if(t instanceof kt)d=dn(t.firestore,Lr),p=Cl(t._key.path),u={next:y=>{e[a]&&e[a](Vv(d,t,y))},error:e[a+1],complete:e[a+2]};else{const y=dn(t,Ll);d=dn(y.firestore,Lr),p=y._query;const v=new Dv(d);u={next:S=>{e[a]&&e[a](new jI(d,v,y,S))},error:e[a+1],complete:e[a+2]},RI(t._query)}return function(v,S,A,b){const j=new _v(b),I=new cv(S,j,A);return v.asyncQueue.enqueueAndForget(async()=>lv(await lh(v),I)),()=>{j.Za(),v.asyncQueue.enqueueAndForget(async()=>uv(await lh(v),I))}}(Fl(d),p,l,u)}function Ld(t,e){return function(r,s){const i=new sr;return r.asyncQueue.enqueueAndForget(async()=>lI(await vI(r),s,i)),i.promise}(Fl(t),e)}function Vv(t,e,n){const r=n.docs.get(e._key),s=new Dv(t);return new jv(t,s,e._key,r,new wi(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=kv(e)}set(e,n,r){this._verifyNotCommitted();const s=qu(e,this._firestore),i=Pv(s.converter,n,r),a=Sv(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(a.toMutation(s._key,Mt.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=qu(e,this._firestore);let a;return a=typeof(n=fn(n))=="string"||n instanceof zl?NI(this._dataReader,"WriteBatch.update",i._key,n,r,s):CI(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(a.toMutation(i._key,Mt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=qu(e,this._firestore);return this._mutations=this._mutations.concat(new Pl(n._key,Mt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Z(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function qu(t,e){if((t=fn(t)).firestore!==e)throw new Z(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(t){return Fl(t=dn(t,Lr)),new MI(t,e=>Ld(t,e))}(function(e,n=!0){(function(s){Os=s})(kE),Ja(new eo("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new Lr(new zE(r.getProvider("auth-internal")),new GE(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Z(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new io(d.options.projectId,p)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),ys(Jp,"4.7.3",e),ys(Jp,"4.7.3","esm2017")})();const ne={ITINERARY:"trip_itinerary",BOOKINGS:"trip_bookings",GUIDES:"trip_guides",PACKING:"trip_packing_list",MEMO:"trip_memo_list",WISH:"trip_wish_list",PHOTOS:"trip_photos",FIREBASE_CONFIG:"trip_firebase_config"},sn="tokyo_trip_2025_shared",LI="tokyo_trip_2025_bookings",FI="tokyo_trip_2025_photos",zI="tokyo_trip_2025_guides_",UI=["1217","1218","1219","1220","1221","1222","misc"],$l=async t=>new Promise(e=>{const n=new Image;n.src=t,n.onload=()=>{const r=document.createElement("canvas");let s=n.width,i=n.height;const a=1280;s>i?s>a&&(i*=a/s,s=a):i>a&&(s*=a/i,i=a),r.width=s,r.height=i;const l=r.getContext("2d");l==null||l.drawImage(n,0,0,s,i),e(r.toDataURL("image/jpeg",.8))},n.onerror=()=>{e(t)}}),Mv=U.createContext(void 0),BI=({children:t})=>{const[e,n]=U.useState(!0),[r,s]=U.useState(null),[i,a]=U.useState(!1),[l,u]=U.useState(null),[d,p]=U.useState("disconnected"),y=U.useRef(null),v=U.useRef(null),S=U.useRef(null),A=U.useRef(!1),[b,j]=U.useState(zx),[I,w]=U.useState(Fx),[k,P]=U.useState(Qy),[O,M]=U.useState(Ux.map(L=>({id:L,text:L,checked:!1}))),[x,g]=U.useState([]),[T,E]=U.useState([]),[C,N]=U.useState({}),_=L=>JSON.parse(JSON.stringify(L,(B,q)=>q===void 0?null:q)),J=async L=>{console.log("Checking for legacy data migration...");const B=OI(L);let q=!1;try{const ee=rn(L,"trips",LI),we=await $u(ee);if(we.exists()){const ze=we.data();ze.bookings&&Array.isArray(ze.bookings)&&ze.bookings.length>0&&(console.log(`Migrating ${ze.bookings.length} bookings...`),ze.bookings.forEach(qe=>{const At=rn(L,"trips",sn,"bookings",qe.id);B.set(At,qe)}),B.delete(ee),q=!0)}}catch(ee){console.warn("Booking migration check failed",ee)}for(const ee of UI)try{const we=rn(L,"trips",`${zI}${ee}`),ze=await $u(we);if(ze.exists()){const qe=ze.data();qe.guideSpots&&Array.isArray(qe.guideSpots)&&qe.guideSpots.length>0&&(console.log(`Migrating guides from bucket ${ee}...`),qe.guideSpots.forEach(At=>{const Ht=rn(L,"trips",sn,"guides",At.id);B.set(Ht,At)}),B.delete(we),q=!0)}}catch(we){console.warn(`Guide bucket ${ee} migration check failed`,we)}try{const ee=rn(L,"trips",FI),we=await $u(ee);if(we.exists()){const ze=we.data();ze.photos&&(console.log("Migrating photos..."),Object.entries(ze.photos).forEach(([qe,At])=>{const Ht=rn(L,"trips",sn,"memories",qe);B.set(Ht,{id:qe,data:At})}),B.delete(ee),q=!0)}}catch(ee){console.warn("Photo migration check failed",ee)}q?(await B.commit(),console.log("Migration completed successfully.")):console.log("No migration needed.")},de=L=>{console.error("Firebase Error:",L),L.code==="resource-exhausted"?s(""):L.code==="permission-denied"?s(""):s(`: ${L.message}`),p("error")},G=async L=>{if(!(d==="connected"||d==="connecting")){p("connecting"),console.log("Starting Firebase connection (Sub-collection Mode)...");try{let B;try{SE().length===0?B=u0(L):B=c0(),y.current=B}catch(vt){throw new Error(`: ${vt.message}`)}const q=EI(B);v.current=q,await J(q);const ee=[],we=rn(q,"trips",sn),ze=aa(we,vt=>{if(A.current){A.current=!1;return}if(vt.exists()){const Ae=vt.data();Ae.itinerary&&j(Ae.itinerary),Ae.packingList&&M(Ae.packingList),Ae.memoList&&g(Ae.memoList),Ae.wishList&&E(Ae.wishList),s(null)}else Gu(we,{itinerary:_(b),packingList:O,memoList:x,wishList:T},{merge:!0}).catch(console.error);p("connected"),a(!0),u(L),localStorage.setItem(ne.FIREBASE_CONFIG,JSON.stringify(L))},de);ee.push(ze);const qe=Bu(q,"trips",sn,"guides"),At=aa(qe,vt=>{const Ae=[];vt.forEach(bt=>{Ae.push(bt.data())}),Ae.sort((bt,Wt)=>bt.date!==Wt.date?(bt.date||"").localeCompare(Wt.date||""):bt.id.localeCompare(Wt.id)),P(Ae),localStorage.setItem(ne.GUIDES,JSON.stringify(Ae))},de);ee.push(At);const Ht=Bu(q,"trips",sn,"bookings"),To=aa(Ht,vt=>{const Ae=[];vt.forEach(bt=>{Ae.push(bt.data())}),w(Ae),localStorage.setItem(ne.BOOKINGS,JSON.stringify(Ae))},de);ee.push(To);const Io=Bu(q,"trips",sn,"memories"),Hs=aa(Io,vt=>{const Ae={};vt.forEach(bt=>{const Wt=bt.data();Wt.id&&Wt.data&&(Ae[Wt.id]=Wt.data)}),N(Ae),localStorage.setItem(ne.PHOTOS,JSON.stringify(Ae))},de);ee.push(Hs),S.current=()=>{ee.forEach(vt=>vt())}}catch(B){console.error("Firebase Connection Exception:",B),p("error"),s(`: ${B.message}`)}}},ue=()=>{S.current&&(S.current(),S.current=null),p("disconnected"),a(!1)},V=async(L,B,q)=>{if(!(!i||!v.current))try{const ee=rn(v.current,"trips",sn,L,B);await Gu(ee,_(q))}catch(ee){console.error(`Save to ${L} failed:`,ee),ee.code==="resource-exhausted"&&s("")}},H=async(L,B)=>{if(!(!i||!v.current))try{const q=rn(v.current,"trips",sn,L,B);await VI(q)}catch(q){console.error(`Delete from ${L} failed:`,q)}},Q=async(L,B)=>{if(!(!i||!v.current))try{A.current=!0;const q=rn(v.current,"trips",sn);await Gu(q,{[L]:_(B)},{merge:!0})}catch(q){A.current=!1,console.error(`Save main doc ${L} failed:`,q)}},K=L=>{j(L),localStorage.setItem(ne.ITINERARY,JSON.stringify(L)),Q("itinerary",L)},oe=(L,B)=>{const q=[...b];q[L]={...q[L],items:B},K(q)},xe=L=>{w(L),localStorage.setItem(ne.BOOKINGS,JSON.stringify(L))},yt=L=>{const B=[...I,L];w(B),localStorage.setItem(ne.BOOKINGS,JSON.stringify(B)),V("bookings",L.id,L)},St=L=>{const B=I.filter(q=>q.id!==L);w(B),localStorage.setItem(ne.BOOKINGS,JSON.stringify(B)),H("bookings",L)},Ct=(L,B)=>{const q=I.map(we=>we.id===L?{...we,imageUrl:B}:we);w(q),localStorage.setItem(ne.BOOKINGS,JSON.stringify(q));const ee=q.find(we=>we.id===L);ee&&V("bookings",ee.id,ee)},Nt=L=>{const B=[...k,L];P(B),localStorage.setItem(ne.GUIDES,JSON.stringify(B)),V("guides",L.id,L)},$r=L=>{const B=k.filter(q=>q.id!==L);P(B),localStorage.setItem(ne.GUIDES,JSON.stringify(B)),H("guides",L)},Gl=L=>{const B=k.map(q=>q.id===L.id?L:q);P(B),localStorage.setItem(ne.GUIDES,JSON.stringify(B)),V("guides",L.id,L)},jn=L=>{M(L),localStorage.setItem(ne.PACKING,JSON.stringify(L)),Q("packingList",L)},Gr=L=>{const B=O.map(q=>q.id===L?{...q,checked:!q.checked}:q);jn(B)},gn=L=>{g(L),localStorage.setItem(ne.MEMO,JSON.stringify(L)),Q("memoList",L)},Us=L=>{const B=[...x,L];gn(B)},Bs=L=>{const B=x.filter(q=>q.id!==L);gn(B)},$s=L=>{const B=x.map(q=>q.id===L?{...q,checked:!q.checked}:q);gn(B)},Dn=L=>{E(L),localStorage.setItem(ne.WISH,JSON.stringify(L)),Q("wishList",L)},ql=L=>{const B=[...T,L];Dn(B)},Hl=L=>{const B=T.filter(q=>q.id!==L);Dn(B)},wo=L=>{const B=T.map(q=>q.id===L?{...q,checked:!q.checked}:q);Dn(B)},Gs=(L,B)=>{const q={...C,[L]:B};N(q),localStorage.setItem(ne.PHOTOS,JSON.stringify(q)),V("memories",L,{id:L,data:B})},Eo=L=>{const B={...C};delete B[L],N(B),localStorage.setItem(ne.PHOTOS,JSON.stringify(B)),H("memories",L)},Wl=()=>{const L={[ne.ITINERARY]:b,[ne.BOOKINGS]:I,[ne.GUIDES]:k,[ne.PACKING]:O,[ne.MEMO]:x,[ne.WISH]:T,[ne.PHOTOS]:C},B=new Blob([JSON.stringify(L)],{type:"application/json"}),q=URL.createObjectURL(B),ee=document.createElement("a");ee.href=q,ee.download=`tokyo_trip_backup_${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(ee),ee.click(),document.body.removeChild(ee),URL.revokeObjectURL(q)},qs=L=>{try{const B=JSON.parse(L);return B[ne.ITINERARY]&&K(B[ne.ITINERARY]),B[ne.BOOKINGS]&&w(B[ne.BOOKINGS]),B[ne.GUIDES]&&P(B[ne.GUIDES]),B[ne.PHOTOS]&&N(B[ne.PHOTOS]),B[ne.PACKING]&&jn(B[ne.PACKING]),B[ne.MEMO]&&gn(B[ne.MEMO]),B[ne.WISH]&&Dn(B[ne.WISH]),Object.keys(B).forEach(q=>{localStorage.setItem(q,JSON.stringify(B[q]))}),!0}catch(B){return console.error("Import Error:",B),!1}};return U.useEffect(()=>{(async()=>{try{const B=localStorage.getItem(ne.ITINERARY);B&&j(JSON.parse(B));const q=localStorage.getItem(ne.BOOKINGS);q&&w(JSON.parse(q));const ee=localStorage.getItem(ne.GUIDES);ee&&P(JSON.parse(ee));const we=localStorage.getItem(ne.PACKING);we&&M(JSON.parse(we));const ze=localStorage.getItem(ne.MEMO);ze&&g(JSON.parse(ze));const qe=localStorage.getItem(ne.WISH);qe&&E(JSON.parse(qe));const At=localStorage.getItem(ne.PHOTOS);At&&N(JSON.parse(At))}catch(B){console.error("Failed to load local data",B)}if(wn.apiKey&&!wn.apiKey.includes(""))await G(wn);else{const B=localStorage.getItem(ne.FIREBASE_CONFIG);if(B)try{await G(JSON.parse(B))}catch{}}n(!1)})()},[]),c.jsx(Mv.Provider,{value:{itinerary:b,setItinerary:K,updateItineraryItem:oe,bookings:I,setBookings:xe,addBooking:yt,deleteBooking:St,updateBookingPhoto:Ct,guideSpots:k,addGuideSpot:Nt,deleteGuideSpot:$r,updateGuideSpot:Gl,packingList:O,setPackingList:jn,togglePackingItem:Gr,memoList:x,setMemoList:gn,addMemoItem:Us,deleteMemoItem:Bs,toggleMemoItem:$s,wishList:T,setWishList:Dn,addWishItem:ql,deleteWishItem:Hl,toggleWishItem:wo,photos:C,uploadPhoto:Gs,removePhoto:Eo,exportData:Wl,importData:qs,isLoading:e,error:r,isCloudMode:i,cloudConfig:l,connectToCloud:G,disconnectCloud:ue,connectionStatus:d},children:t})},zs=()=>{const t=U.useContext(Mv);if(t===void 0)throw new Error("useTripContext must be used within a TripProvider");return t},$I="0000",GI=t=>{switch(t){case"flight":return c.jsx(Ri,{size:16});case"transport":return c.jsx(sw,{size:16});case"food":return c.jsx(t0,{size:16});case"hotel":return c.jsx(Fc,{size:16});case"important":return c.jsx(Yy,{size:16});case"activity":return c.jsx(Dr,{size:16});default:return c.jsx(Qx,{size:16})}},qI=(t,e=24,n="")=>{switch(t){case"sunny":return c.jsx(rw,{size:e,className:`text-orange-400 ${n}`});case"rainy":return c.jsx(Kx,{size:e,className:`text-blue-400 ${n}`});default:return c.jsx(Ya,{size:e,className:`text-gray-400 ${n}`})}},HI=t=>{switch(t){case"sunny":return"";case"rainy":return"";case"cloudy":return"";default:return""}},Vm=t=>{switch(t){case"flight":return"border-pink-300 bg-pink-50";case"hotel":return"border-blue-200 bg-blue-50";case"food":return"border-yellow-300 bg-yellow-50";default:return"border-stone-200 bg-white"}},WI=()=>{const[t,e]=U.useState({days:0,hours:0}),n=new Date("2025-12-17T00:00:00");U.useEffect(()=>{const s=()=>{const a=new Date,l=n.getTime()-a.getTime();if(l>0){const u=Math.floor(l/864e5),d=Math.floor(l/(1e3*60*60)%24);e({days:u,hours:d})}else e({days:0,hours:0})};s();const i=setInterval(s,6e4);return()=>clearInterval(i)},[]);const r=new Date>=n;return c.jsxs("div",{className:"mx-4 mb-6 bg-stone-800 rounded-3xl p-6 text-white shadow-lg relative overflow-hidden",children:[c.jsxs("div",{className:"relative z-10 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-stone-400 font-bold uppercase tracking-widest mb-1",children:r?"":""}),c.jsx("div",{className:"text-2xl font-bold",children:r?"":""})]}),c.jsx("div",{className:"text-right",children:r?c.jsx("div",{className:"p-2 bg-muji-highlight rounded-full",children:c.jsx(Ri,{size:24,className:"text-white"})}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-4xl font-mono font-bold text-muji-highlight",children:t.days}),c.jsx("div",{className:"text-xs text-stone-400",children:""})]})})]}),c.jsx("div",{className:"absolute -bottom-10 -right-10 w-32 h-32 bg-stone-700 rounded-full opacity-50"})]})},KI=({item:t,dayDate:e,onClose:n,onNavigate:r})=>{var O,M;const{photos:s,uploadPhoto:i,removePhoto:a,itinerary:l,updateItineraryItem:u}=zs(),[d,p]=U.useState(!1),[y,v]=U.useState(t.notes||""),S=`photo_${e}_${t.time}`.replace(/[:.]/g,"-"),A=s[S],b=!t.linkTo&&Qy.find(x=>t.activity.includes(x.title)||x.title.includes(t.activity)),j=!t.linkTo&&(t.type==="hotel"||t.type==="food"),I=async x=>{var T;const g=(T=x.target.files)==null?void 0:T[0];if(g){const E=new FileReader;E.onloadend=async()=>{const C=E.result;try{const N=await $l(C);i(S,N)}catch{alert("")}},E.readAsDataURL(g)}},w=()=>{window.confirm("")&&a(S)},k=()=>{const x=l.findIndex(E=>E.date===e.split("-").slice(1).join("/").replace("-","/").replace("2025/","")),g=l.findIndex(E=>E.fullDate===e||E.date===e),T=x!==-1?x:g;if(T!==-1){const C=l[T].items.map(N=>{if(N.id===t.id)return{...N,notes:y};if(N.subItems){const _=N.subItems.map(J=>J.id===t.id?{...J,notes:y}:J);return{...N,subItems:_}}return N});u(T,C),p(!1)}else console.error("Could not find day to update"),alert("")},P=x=>{switch(x){case"flight":return"";case"transport":return"";case"food":return"";case"hotel":return"";case"important":return"";default:return""}};return c.jsxs("div",{className:"fixed inset-0 z-[60] flex items-end sm:items-center justify-center pointer-events-none",children:[c.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm pointer-events-auto transition-opacity",onClick:n}),c.jsxs("div",{className:"bg-white w-full max-w-md rounded-t-3xl sm:rounded-3xl p-6 relative pointer-events-auto animate-in slide-in-from-bottom duration-300 max-h-[90vh] overflow-y-auto",children:[c.jsx("button",{onClick:n,className:"absolute top-4 right-4 p-2 bg-stone-100 rounded-full text-stone-500 hover:bg-stone-200",children:c.jsx(tr,{size:20})}),c.jsxs("div",{className:"mb-6",children:[c.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-bold bg-stone-100 text-stone-600 mb-2",children:P(t.type)}),c.jsx("h3",{className:"text-2xl font-bold text-stone-800",children:t.activity}),c.jsxs("div",{className:"flex items-center gap-2 text-stone-500 mt-1",children:[c.jsx(sd,{size:16}),c.jsx("span",{className:"font-mono",children:t.time})]}),t.location&&c.jsxs("div",{className:"flex items-center gap-2 text-stone-500 mt-1",children:[c.jsx(Dr,{size:16}),c.jsx("span",{children:t.location})]})]}),(t.linkTo||b||j)&&c.jsxs("div",{className:"mb-6 flex gap-3",children:[(((O=t.linkTo)==null?void 0:O.tab)===ae.GUIDE||b)&&c.jsxs("button",{onClick:()=>{var x;return r(ae.GUIDE,(x=t.linkTo)==null?void 0:x.targetId)},className:"flex-1 py-3 bg-emerald-50 text-emerald-700 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-emerald-100 transition-colors",children:[c.jsx(Xy,{size:18})," "]}),(((M=t.linkTo)==null?void 0:M.tab)===ae.BOOKINGS||j)&&c.jsxs("button",{onClick:()=>{var x;return r(ae.BOOKINGS,(x=t.linkTo)==null?void 0:x.targetId)},className:"flex-1 py-3 bg-orange-50 text-orange-700 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-orange-100 transition-colors",children:[c.jsx(e0,{size:18})," "]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("h4",{className:"text-xs font-bold text-stone-400 uppercase tracking-wide",children:""}),d?c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>{p(!1),v(t.notes||"")},className:"text-stone-400 hover:text-red-500 p-1",children:c.jsx(tr,{size:16})}),c.jsx("button",{onClick:k,className:"text-emerald-500 hover:text-emerald-700 p-1",children:c.jsx(Jy,{size:16})})]}):c.jsx("button",{onClick:()=>p(!0),className:"text-stone-400 hover:text-stone-600 p-1",children:c.jsx(Zy,{size:14})})]}),d?c.jsx("textarea",{value:y,onChange:x=>v(x.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50 focus:outline-none focus:ring-2 focus:ring-stone-200 text-sm min-h-[80px]",placeholder:"..."}):t.notes?c.jsx("div",{className:"bg-yellow-50 p-4 rounded-xl border border-yellow-100",children:c.jsx("p",{className:"text-stone-700 text-sm whitespace-pre-wrap",children:t.notes})}):c.jsx("div",{className:"bg-stone-50 p-4 rounded-xl border border-stone-100 text-center",children:c.jsx("p",{className:"text-stone-400 text-sm italic",children:""})})]}),c.jsx("div",{className:"grid grid-cols-1 gap-3 mb-6",children:(t.location||t.activity)&&c.jsxs("a",{href:t.mapsLink||`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(t.location||t.activity)}`,target:"_blank",rel:"noreferrer",className:"flex items-center justify-center gap-2 w-full py-3 bg-blue-50 text-blue-600 rounded-xl font-bold hover:bg-blue-100 transition-colors",children:[c.jsx(Dr,{size:18}),"  Google Maps"]})}),c.jsxs("div",{className:"border-t border-stone-100 pt-6",children:[c.jsxs("h4",{className:"text-sm font-bold text-stone-800 mb-3 flex items-center gap-2",children:[c.jsx(Zx,{size:18}),"  ()"]}),A?c.jsxs("div",{className:"relative rounded-xl overflow-hidden group",children:[c.jsx("img",{src:A,alt:"Memory",className:"w-full h-48 object-cover"}),c.jsx("button",{onClick:w,className:"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(tr,{size:14})})]}):c.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-stone-300 rounded-xl bg-stone-50 cursor-pointer hover:bg-stone-100 transition-colors",children:[c.jsx(Il,{size:24,className:"text-stone-400 mb-2"}),c.jsx("span",{className:"text-sm text-stone-500 font-medium",children:" ()"}),c.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:I})]})]})]})]})},Mm=({onNavigate:t})=>{const{itinerary:e,updateItineraryItem:n}=zs(),[r,s]=U.useState(0),[i,a]=U.useState(null),[l,u]=U.useState(!1),[d,p]=U.useState(!1),[y,v]=U.useState(""),[S,A]=U.useState(!1),[b,j]=U.useState(null),[I,w]=U.useState(null),[k,P]=U.useState(null),O=e[r],M=U.useRef(null),x=()=>{l?u(!1):(p(!0),v(""))},g=()=>{y===$I?(u(!0),p(!1)):(alert("PIN "),v(""))},T=(_,J)=>{w(_),P(J||null)},E=()=>{if(I){if(k){const _=O.items.find(J=>J.id===k);if(_&&_.subItems){const J=_.subItems.filter(ue=>ue.id!==I),de={..._,subItems:J},G=O.items.map(ue=>ue.id===k?de:ue);n(r,G)}}else{const _=O.items.filter(J=>J.id!==I);n(r,_)}w(null),P(null)}},C=_=>{j(_||null),A(!0)},N=(_,J)=>{if(b){const de=O.items.find(G=>G.id===b);if(de){const ue=[...de.subItems||[],_];ue.sort((Q,K)=>Q.time.localeCompare(K.time));const V={...de,subItems:ue},H=O.items.map(Q=>Q.id===b?V:Q);n(r,H)}}else{const de=J?{..._,subItems:[]}:_,G=[...O.items,de];G.sort((ue,V)=>ue.time.localeCompare(V.time)),n(r,G)}A(!1),j(null)};return c.jsxs("div",{className:"pb-24 pt-4 animate-in fade-in duration-500 relative min-h-screen flex flex-col",children:[c.jsx("div",{className:"px-4 mb-2 flex justify-end",children:c.jsx("button",{onClick:x,className:`p-2 rounded-xl transition-all ${l?"bg-stone-800 text-white shadow-md":"text-stone-300"}`,children:l?c.jsx(od,{size:16}):c.jsx(id,{size:16})})}),c.jsx(WI,{}),c.jsx("div",{className:"sticky top-14 z-30 bg-muji-bg/95 backdrop-blur-sm pb-2 pt-2 border-b border-stone-200/50",children:c.jsxs("div",{ref:M,className:"flex overflow-x-auto no-scrollbar px-4 gap-3 snap-x",children:[e.map((_,J)=>{const de=J===r;return c.jsxs("button",{onClick:()=>s(J),className:`snap-center flex-shrink-0 flex flex-col items-center justify-center w-16 h-20 rounded-2xl transition-all duration-300 border ${de?"bg-stone-800 text-white border-stone-800 shadow-md scale-105":"bg-white text-stone-500 border-stone-200 hover:border-stone-400"}`,children:[c.jsx("span",{className:"text-xs font-medium uppercase",children:_.dayOfWeek}),c.jsx("span",{className:"text-xl font-bold font-mono",children:_.date.split("/")[1]})]},J)}),c.jsx("div",{className:"w-2"})]})}),O&&c.jsxs("div",{className:"flex-1 px-4 pt-6",children:[c.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-stone-100 mb-6 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[qI(O.weather.condition,32),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-lg font-bold text-stone-700",children:HI(O.weather.condition)}),c.jsx("span",{className:"text-xs text-stone-400 font-medium",children:"Tokyo"})]})]}),c.jsx("div",{className:"text-2xl font-mono font-bold text-stone-800 tracking-tight",children:O.weather.temp})]}),c.jsxs("div",{className:"relative pl-4 space-y-6",children:[c.jsx("div",{className:"absolute left-[21px] top-2 bottom-0 w-0.5 bg-stone-200"}),O.items.map(_=>_.subItems?c.jsxs("div",{className:"relative pl-0 mb-8",children:[l&&c.jsx("button",{onClick:J=>{J.stopPropagation(),T(_.id)},className:"absolute -left-2 top-0 bg-red-500 text-white p-1.5 rounded-full shadow-md z-30",children:c.jsx(er,{size:12})}),c.jsx("div",{className:"relative bg-white rounded-3xl overflow-hidden shadow-lg border-2 border-emerald-100 mb-4 cursor-pointer active:scale-98 transition-transform",onClick:()=>a(_),children:c.jsxs("div",{className:"h-28 bg-emerald-50 relative",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-100/50 to-transparent"}),c.jsx(nw,{className:"absolute top-4 right-4 text-emerald-300 opacity-50",size:48}),c.jsxs("div",{className:"absolute bottom-4 left-6",children:[c.jsx("div",{className:"text-xs font-bold text-emerald-600 uppercase tracking-widest mb-1",children:""}),c.jsx("h3",{className:"text-2xl font-bold text-stone-800",children:_.activity}),c.jsxs("div",{className:"flex items-center gap-2 text-stone-600 mt-1",children:[c.jsx(sd,{size:14})," ",c.jsx("span",{className:"font-mono font-bold",children:_.time}),c.jsx("span",{className:"text-stone-300",children:"|"}),c.jsx(Dr,{size:14})," ",c.jsx("span",{children:_.location})]})]}),l&&c.jsxs("button",{onClick:J=>{J.stopPropagation(),C(_.id)},className:"absolute top-2 right-2 bg-emerald-600 text-white px-3 py-1.5 rounded-full text-xs font-bold shadow-md hover:scale-105 transition-transform flex items-center gap-1",children:[c.jsx(Zi,{size:12})," "]})]})}),c.jsxs("div",{className:"pl-4 space-y-3",children:[_.subItems.length===0&&c.jsx("div",{className:"text-xs text-stone-400 italic pl-14",children:""}),_.subItems.map(J=>c.jsxs("div",{className:"flex items-center gap-3 relative group",onClick:()=>a(J),children:[c.jsx("div",{className:"w-14 text-right",children:c.jsx("span",{className:"text-xs font-mono font-bold text-stone-400",children:J.time})}),c.jsxs("div",{className:`flex-1 p-3 rounded-xl border cursor-pointer hover:bg-stone-50 transition-colors flex justify-between items-center ${Vm(J.type)}`,children:[c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-stone-700 text-sm",children:J.activity}),J.notes&&c.jsx("div",{className:"text-xs text-stone-400 mt-0.5",children:J.notes})]}),J.type==="important"&&c.jsx(Yy,{size:14,className:"text-orange-400"})]}),l&&c.jsx("button",{onClick:de=>{de.stopPropagation(),T(J.id,_.id)},className:"absolute -right-2 bg-red-100 text-red-500 p-1.5 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(tr,{size:12})})]},J.id))]})]},_.id):c.jsxs("div",{className:"relative flex gap-4 group",children:[l&&c.jsx("button",{onClick:J=>{J.stopPropagation(),T(_.id)},className:"absolute -left-2 top-0 bg-red-500 text-white p-1.5 rounded-full shadow-md z-30",children:c.jsx(er,{size:12})}),c.jsxs("div",{className:"z-10 flex-shrink-0 w-14 text-right pt-2",onClick:()=>a(_),children:[c.jsx("span",{className:"text-xs font-mono font-bold text-stone-500 bg-muji-bg px-1 relative z-20",children:_.time}),c.jsx("div",{className:`absolute left-[17px] mt-1.5 w-2.5 h-2.5 rounded-full border-2 border-white shadow-sm z-20 ${_.type==="important"?"bg-muji-highlight":"bg-stone-400"}`})]}),c.jsxs("div",{className:`flex-1 p-4 rounded-xl border-l-4 shadow-sm cursor-pointer hover:shadow-md transition-all active:scale-98 ${Vm(_.type)}`,onClick:()=>a(_),children:[c.jsxs("div",{className:"flex justify-between items-start mb-1",children:[c.jsx("h4",{className:"font-bold leading-tight text-stone-800",children:_.activity}),c.jsx("div",{className:"text-stone-400 opacity-50",children:GI(_.type)})]}),_.location&&c.jsxs("div",{className:"flex items-center gap-1 text-xs mt-1 text-stone-500",children:[c.jsx(Dr,{size:10})," ",_.location]})]})]},_.id)),c.jsx("div",{className:"h-12"})]})]}),i&&c.jsx(KI,{item:i,dayDate:(O==null?void 0:O.date)||"",onClose:()=>a(null),onNavigate:t}),l&&c.jsx("button",{onClick:()=>C(),className:"fixed bottom-24 right-6 bg-stone-800 text-white w-14 h-14 rounded-full shadow-xl flex items-center justify-center animate-in zoom-in hover:scale-105 transition-transform z-40",children:c.jsx(Zi,{size:28})}),d&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm px-6",children:c.jsxs("div",{className:"bg-white p-8 rounded-3xl w-full max-w-sm shadow-2xl animate-in zoom-in-95",children:[c.jsx("h3",{className:"text-xl font-bold text-center mb-6 text-stone-800",children:""}),c.jsx("input",{type:"password",value:y,onChange:_=>v(_.target.value),placeholder:" PIN ",maxLength:4,className:"w-full text-center text-4xl font-mono tracking-[0.5em] border-b-2 border-stone-200 focus:border-stone-800 outline-none pb-2 mb-8 bg-transparent",autoFocus:!0}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:()=>p(!1),className:"flex-1 py-3 rounded-xl bg-stone-100 text-stone-500 font-bold",children:""}),c.jsx("button",{onClick:g,className:"flex-1 py-3 rounded-xl bg-stone-800 text-white font-bold",children:""})]})]})}),I&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm px-6",children:c.jsxs("div",{className:"bg-white p-6 rounded-3xl w-full max-w-sm shadow-2xl animate-in zoom-in-95",children:[c.jsx("h3",{className:"text-xl font-bold text-stone-800 mb-4 text-center",children:""}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>w(null),className:"flex-1 py-3 rounded-xl bg-stone-100 text-stone-600 font-bold",children:""}),c.jsx("button",{onClick:E,className:"flex-1 py-3 rounded-xl bg-red-500 text-white font-bold",children:""})]})]})}),S&&c.jsx(QI,{onClose:()=>{A(!1),j(null)},onSave:N,isSubItem:!!b})]})},QI=({onClose:t,onSave:e,isSubItem:n})=>{const[r,s]=U.useState(""),[i,a]=U.useState(""),[l,u]=U.useState(""),[d,p]=U.useState("activity"),[y,v]=U.useState(""),[S,A]=U.useState(!1),[b,j]=U.useState(!1),I=()=>{if(!r||!i)return;if(!b){j(!0);return}const w={id:Date.now().toString(),time:r,activity:i,location:l,type:d,notes:y};e(w,S)};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm px-4",children:c.jsxs("div",{className:"bg-white w-full max-w-md rounded-3xl p-6 shadow-2xl animate-in slide-in-from-bottom-10",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h3",{className:"font-bold text-xl",children:n?"":""}),c.jsx("button",{onClick:t,children:c.jsx(tr,{size:24,className:"text-stone-400"})})]}),b?c.jsxs("div",{className:"text-center py-4",children:[c.jsxs("div",{className:"mb-6 text-stone-600",children:[" ",c.jsx("span",{className:"font-bold text-stone-800",children:i})," "]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>j(!1),className:"flex-1 py-3 bg-stone-100 text-stone-500 font-bold rounded-xl",children:""}),c.jsx("button",{onClick:I,className:"flex-1 py-3 bg-muji-highlight text-white font-bold rounded-xl shadow-md",children:""})]})]}):c.jsxs("div",{className:"space-y-4",children:[!n&&c.jsxs("div",{className:`p-3 rounded-xl border flex items-center gap-3 cursor-pointer transition-all ${S?"bg-emerald-50 border-emerald-300 ring-1 ring-emerald-300":"bg-stone-50 border-stone-200"}`,onClick:()=>A(!S),children:[c.jsx("div",{className:`w-5 h-5 rounded-md flex items-center justify-center border ${S?"bg-emerald-500 border-emerald-500 text-white":"bg-white border-stone-300"}`,children:S&&c.jsx(ew,{size:14})}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-sm text-stone-800",children:""}),c.jsx("div",{className:"text-xs text-stone-500",children:""})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("div",{className:"w-1/3",children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:""}),c.jsx("input",{value:r,onChange:w=>s(w.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:"HH:MM"})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:""}),c.jsx("input",{value:i,onChange:w=>a(w.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:""})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:""}),c.jsx("input",{value:l,onChange:w=>u(w.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:""})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:""}),c.jsxs("select",{value:d,onChange:w=>p(w.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",children:[c.jsx("option",{value:"activity",children:""}),c.jsx("option",{value:"transport",children:""}),c.jsx("option",{value:"food",children:" ()"}),c.jsx("option",{value:"flight",children:""}),c.jsx("option",{value:"hotel",children:""}),c.jsx("option",{value:"important",children:""})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:""}),c.jsx("textarea",{value:y,onChange:w=>v(w.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50 h-20",placeholder:"..."})]}),c.jsx("button",{onClick:I,className:"w-full py-4 bg-stone-800 text-white font-bold rounded-xl mt-2",children:""})]})]})})},YI="0000",XI=({highlightId:t})=>{var ue;const{guideSpots:e,addGuideSpot:n,deleteGuideSpot:r,updateGuideSpot:s,itinerary:i}=zs(),[a,l]=U.useState(!1),[u,d]=U.useState(!1),[p,y]=U.useState(""),[v,S]=U.useState(!1),[A,b]=U.useState(null),[j,I]=U.useState(null),[w,k]=U.useState(0),P=U.useRef(null),O=i.map(V=>({date:V.date,fullDate:V.fullDate,dayOfWeek:V.dayOfWeek})),M=(ue=O[w])==null?void 0:ue.date,x=e.filter(V=>V.date===M),g=Array.from(new Set(x.map(V=>V.title)));U.useEffect(()=>{if(t){const V=e.find(H=>H.id===t);if(V&&V.date){const H=O.findIndex(Q=>Q.date===V.date);H!==-1&&k(H)}setTimeout(()=>{const H=document.getElementById(t);H&&H.scrollIntoView({behavior:"smooth",block:"center"})},300)}},[t,e]);const T=()=>{a?l(!1):(d(!0),y(""))},E=()=>{p===YI?(l(!0),d(!1)):(alert("PIN "),y(""))},C=V=>{const H=x.find(Q=>Q.title===V);if(H){const Q=document.getElementById(H.id);Q==null||Q.scrollIntoView({behavior:"smooth",block:"start"})}},N=V=>{I(V)},_=()=>{j&&(r(j),I(null))},J=()=>{b(null),S(!0)},de=V=>{b(V),S(!0)},G=V=>{A?s(V):n(V),S(!1),b(null)};return c.jsxs("div",{className:"pb-24 pt-4 animate-in fade-in duration-500 min-h-screen flex flex-col",children:[c.jsxs("div",{className:"px-4 mb-4 flex justify-between items-center sticky top-0 z-30 bg-muji-bg pt-2 pb-2",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold tracking-widest text-stone-800",children:""}),c.jsx("div",{className:"w-10 h-1 bg-emerald-300 mt-1 rounded-full"})]}),c.jsx("button",{onClick:T,className:`p-2 rounded-xl transition-all ${a?"bg-stone-800 text-white shadow-md":"text-stone-300"}`,children:a?c.jsx(od,{size:18}):c.jsx(id,{size:18})})]}),c.jsx("div",{className:"sticky top-14 z-20 bg-muji-bg/95 backdrop-blur-sm pb-2 border-b border-stone-200/50",children:c.jsxs("div",{ref:P,className:"flex overflow-x-auto no-scrollbar px-4 gap-3 snap-x",children:[O.map((V,H)=>{const Q=H===w;return c.jsxs("button",{onClick:()=>k(H),className:`snap-center flex-shrink-0 flex flex-col items-center justify-center min-w-[3.5rem] py-2 rounded-2xl transition-all duration-300 border ${Q?"bg-emerald-600 text-white border-emerald-600 shadow-md scale-105":"bg-white text-stone-500 border-stone-200"}`,children:[c.jsx("span",{className:"text-[10px] font-medium uppercase",children:V.dayOfWeek}),c.jsx("span",{className:"text-sm font-bold font-mono",children:V.date})]},H)}),c.jsx("div",{className:"w-2"})]})}),x.length>0&&c.jsx("div",{className:"px-4 py-4 flex flex-wrap gap-2",children:g.map(V=>c.jsx("button",{onClick:()=>C(V),className:"px-3 py-1.5 bg-emerald-50 text-emerald-700 rounded-full text-xs font-bold border border-emerald-100 hover:bg-emerald-100 active:scale-95 transition-all",children:V},V))}),c.jsx("div",{className:"px-4 space-y-8 mt-2",children:x.length===0?c.jsxs("div",{className:"text-center py-20 text-stone-400",children:[c.jsx("p",{children:""}),a&&c.jsx("button",{onClick:J,className:"mt-4 text-emerald-600 font-bold underline",children:""})]}):x.map(V=>c.jsxs("article",{id:V.id,className:`bg-white rounded-3xl overflow-hidden shadow-sm border transition-all duration-500 scroll-mt-32 ${t===V.id?"ring-4 ring-emerald-200 border-emerald-400 scale-[1.02]":"border-stone-100"}`,children:[c.jsxs("div",{className:"relative h-56 bg-stone-200 group",children:[c.jsx("img",{src:V.imageUrl,alt:V.title,className:"w-full h-full object-cover",onError:H=>{H.target.src="https://images.unsplash.com/photo-1493976040374-85c8e12f0c0e?auto=format&fit=crop&w=800&q=80"}}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/10 to-transparent"}),c.jsxs("div",{className:"absolute bottom-4 left-4 text-white",children:[c.jsx("div",{className:"text-xs font-bold opacity-90 tracking-widest uppercase bg-black/20 backdrop-blur-sm px-2 py-1 rounded w-fit mb-1",children:V.subtitle}),c.jsx("h3",{className:"text-2xl font-bold",children:V.title})]}),a&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:H=>{H.stopPropagation(),N(V.id)},className:"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full shadow-lg opacity-90 hover:opacity-100 hover:scale-110 transition-all",children:c.jsx(er,{size:16})}),c.jsx("button",{onClick:H=>{H.stopPropagation(),de(V)},className:"absolute top-2 right-12 bg-stone-800 text-white p-2 rounded-full shadow-lg opacity-90 hover:opacity-100 hover:scale-110 transition-all",children:c.jsx(Zy,{size:16})})]})]}),c.jsxs("div",{className:"p-6",children:[c.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:V.tags.map(H=>c.jsxs("span",{className:"text-[10px] font-bold bg-stone-100 text-stone-500 px-2 py-1 rounded-md",children:["#",H]},H))}),c.jsx("p",{className:"text-stone-600 leading-relaxed text-justify text-sm",children:V.description})]})]},V.id))}),a&&c.jsx("button",{onClick:J,className:"fixed bottom-24 right-6 bg-stone-800 text-white w-14 h-14 rounded-full shadow-xl flex items-center justify-center animate-in zoom-in hover:scale-105 transition-transform z-40",children:c.jsx(Zi,{size:28})}),u&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm px-6",children:c.jsxs("div",{className:"bg-white p-8 rounded-3xl w-full max-w-sm shadow-2xl animate-in zoom-in-95",children:[c.jsx("h3",{className:"text-xl font-bold text-center mb-6 text-stone-800",children:""}),c.jsx("input",{type:"password",value:p,onChange:V=>y(V.target.value),placeholder:" PIN ",maxLength:4,className:"w-full text-center text-4xl font-mono tracking-[0.5em] border-b-2 border-stone-200 focus:border-stone-800 outline-none pb-2 mb-8 bg-transparent",autoFocus:!0}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:()=>d(!1),className:"flex-1 py-3 rounded-xl bg-stone-100 text-stone-500 font-bold",children:""}),c.jsx("button",{onClick:E,className:"flex-1 py-3 rounded-xl bg-stone-800 text-white font-bold",children:""})]})]})}),j&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm px-6",children:c.jsxs("div",{className:"bg-white p-6 rounded-3xl w-full max-w-sm shadow-2xl animate-in zoom-in-95",children:[c.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[c.jsx("div",{className:"bg-red-100 p-4 rounded-full text-red-500 mb-4",children:c.jsx(er,{size:32})}),c.jsx("h3",{className:"text-xl font-bold text-stone-800",children:""}),c.jsx("p",{className:"text-sm text-stone-500 mt-2",children:""})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>I(null),className:"flex-1 py-3 rounded-xl bg-stone-100 text-stone-600 font-bold",children:""}),c.jsx("button",{onClick:_,className:"flex-1 py-3 rounded-xl bg-red-500 text-white font-bold",children:""})]})]})}),v&&c.jsx(JI,{onClose:()=>S(!1),onSave:G,defaultDate:M||"12/17",dates:O.map(V=>V.date),initialData:A})]})},JI=({onClose:t,onSave:e,defaultDate:n,dates:r,initialData:s})=>{const[i,a]=U.useState((s==null?void 0:s.title)||""),[l,u]=U.useState((s==null?void 0:s.subtitle)||""),[d,p]=U.useState((s==null?void 0:s.description)||""),[y,v]=U.useState((s==null?void 0:s.date)||n),[S,A]=U.useState((s==null?void 0:s.tags.join(", "))||""),[b,j]=U.useState((s==null?void 0:s.imageUrl)||""),[I,w]=U.useState(!1),k=U.useRef(null),P=async M=>{var g;const x=(g=M.target.files)==null?void 0:g[0];if(x){const T=new FileReader;T.onloadend=async()=>{try{const E=T.result,C=await $l(E);j(C)}catch{alert("")}},T.readAsDataURL(x)}},O=()=>{if(!(!i||!d)){if(!I){w(!0);return}e({id:(s==null?void 0:s.id)||Date.now().toString(),date:y,title:i,subtitle:l||"Spot",description:d,tags:S.split(",").map(M=>M.trim()).filter(Boolean),imageUrl:b})}};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm px-4",children:c.jsxs("div",{className:"bg-white w-full max-w-md rounded-3xl p-6 shadow-2xl animate-in slide-in-from-bottom-10 max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h3",{className:"font-bold text-xl",children:s?"":""}),c.jsx("button",{onClick:t,children:c.jsx(tr,{size:24,className:"text-stone-400"})})]}),I?c.jsxs("div",{className:"text-center py-6",children:[c.jsxs("div",{className:"mb-6 text-stone-600",children:["",s?"":""," ",c.jsx("span",{className:"font-bold text-stone-800",children:i})," "]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>w(!1),className:"flex-1 py-3 bg-stone-100 text-stone-500 font-bold rounded-xl",children:""}),c.jsxs("button",{onClick:O,className:"flex-1 py-3 bg-muji-highlight text-white font-bold rounded-xl shadow-md",children:["",s?"":""]})]})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:""}),c.jsx("select",{value:y,onChange:M=>v(M.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",children:r.map(M=>c.jsx("option",{value:M,children:M},M))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:""}),c.jsx("input",{value:i,onChange:M=>a(M.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:""})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:""}),c.jsx("input",{value:l,onChange:M=>u(M.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:""})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:""}),c.jsx("textarea",{value:d,onChange:M=>p(M.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50 h-32",placeholder:"..."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:" ()"}),c.jsx("input",{value:S,onChange:M=>A(M.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:", , "})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:" ()"}),c.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border border-dashed border-stone-300 bg-stone-50 cursor-pointer hover:bg-stone-100",children:[c.jsx(Il,{size:20,className:"text-stone-400"}),c.jsx("span",{className:"text-sm text-stone-500 truncate",children:b?"":""}),c.jsx("input",{ref:k,type:"file",accept:"image/*",className:"hidden",onChange:P})]}),b&&c.jsx("img",{src:b,alt:"Preview",className:"h-24 w-full object-cover rounded-lg mt-2 border border-stone-200"})]}),c.jsx("button",{onClick:O,className:"w-full py-4 bg-stone-800 text-white font-bold rounded-xl mt-2",children:""})]})]})})},ZI=.21,ek=()=>{const[t,e]=U.useState(""),[n,r]=U.useState(null),[s]=U.useState(ZI),i=y=>{e(v=>v+y)},a=()=>{e(y=>y.slice(0,-1))},l=()=>{e(""),r(null)},u=()=>{try{if(!/^[0-9+\-*/().\s]+$/.test(t))return;const y=new Function("return "+t)();isFinite(y)&&r(y*s)}catch(y){console.error("Calculation error",y)}};U.useEffect(()=>{if(t.length===0){r(0);return}const y=setTimeout(()=>{try{if(!/^[0-9+\-*/().\s]+$/.test(t))return;const v=new Function("return "+t)();isFinite(v)&&r(v*s)}catch{}},500);return()=>clearTimeout(y)},[t,s]);const d="flex-1 rounded-xl bg-white shadow-sm border border-stone-100 text-lg font-bold text-stone-600 active:bg-stone-100 active:scale-95 transition-all flex items-center justify-center",p="flex-1 rounded-xl bg-stone-100 shadow-sm border border-stone-200 text-lg font-bold text-muji-highlight active:bg-stone-200 active:scale-95 transition-all flex items-center justify-center";return c.jsxs("div",{className:"h-[calc(100vh-140px)] flex flex-col p-4 animate-in zoom-in-95 duration-300",children:[c.jsxs("div",{className:"bg-stone-800 rounded-2xl p-5 text-right mb-4 shadow-md flex-shrink-0",children:[c.jsxs("div",{className:"flex justify-between items-end mb-2",children:[c.jsx("span",{className:"text-stone-400 text-xs",children:" (JPY)"}),c.jsx("div",{className:"text-2xl text-white font-mono break-all",children:t||"0"})]}),c.jsx("div",{className:"h-px bg-stone-600 mb-2"}),c.jsxs("div",{className:"flex justify-between items-end",children:[c.jsx("span",{className:"text-stone-400 text-xs",children:" (TWD)"}),c.jsx("div",{className:"text-3xl text-muji-highlight font-mono font-bold",children:n?Math.round(n).toLocaleString():"0"})]}),c.jsxs("div",{className:"mt-2 text-[10px] text-stone-500 text-right",children:["Rate: ",s]})]}),c.jsxs("div",{className:"grid grid-cols-4 gap-2 flex-1 min-h-0",children:[c.jsx("button",{onClick:l,className:"col-span-1 rounded-xl bg-red-50 text-red-500 font-bold flex items-center justify-center text-lg",children:"AC"}),c.jsx("button",{onClick:a,className:"col-span-1 rounded-xl bg-stone-200 text-stone-600 flex items-center justify-center",children:c.jsx(Yx,{size:20})}),c.jsx("button",{onClick:()=>i("/"),className:p,children:""}),c.jsx("button",{onClick:()=>i("*"),className:p,children:""}),c.jsx("button",{onClick:()=>i("7"),className:d,children:"7"}),c.jsx("button",{onClick:()=>i("8"),className:d,children:"8"}),c.jsx("button",{onClick:()=>i("9"),className:d,children:"9"}),c.jsx("button",{onClick:()=>i("-"),className:p,children:"-"}),c.jsx("button",{onClick:()=>i("4"),className:d,children:"4"}),c.jsx("button",{onClick:()=>i("5"),className:d,children:"5"}),c.jsx("button",{onClick:()=>i("6"),className:d,children:"6"}),c.jsx("button",{onClick:()=>i("+"),className:p,children:"+"}),c.jsx("button",{onClick:()=>i("1"),className:d,children:"1"}),c.jsx("button",{onClick:()=>i("2"),className:d,children:"2"}),c.jsx("button",{onClick:()=>i("3"),className:d,children:"3"}),c.jsx("button",{onClick:u,className:"row-span-2 rounded-xl bg-muji-primary text-white text-xl font-bold flex items-center justify-center shadow-md active:scale-95 transition-transform",children:"="}),c.jsx("button",{onClick:()=>i("0"),className:`${d} col-span-2`,children:"0"}),c.jsx("button",{onClick:()=>i("."),className:d,children:"."})]})]})},tk=()=>{const{packingList:t,togglePackingItem:e,memoList:n,addMemoItem:r,deleteMemoItem:s,toggleMemoItem:i,wishList:a,addWishItem:l,deleteWishItem:u,toggleWishItem:d,exportData:p,importData:y,isCloudMode:v,connectToCloud:S,disconnectCloud:A,connectionStatus:b}=zs(),[j,I]=U.useState("packing"),[w,k]=U.useState(""),[P,O]=U.useState(null),[M,x]=U.useState(!1),g=U.useRef(null),T=wn.apiKey&&!wn.apiKey.includes(""),E=(K,oe)=>{oe==="memo"?i(K):d(K)},C=K=>{K.preventDefault(),w.trim()&&x(!0)},N=()=>{if(!w.trim())return;const K={id:Date.now().toString(),text:w.trim(),checked:!1};j==="memo"?r(K):j==="wish"&&l(K),k(""),x(!1)},_=()=>{x(!1)},J=(K,oe,xe)=>{oe.stopPropagation(),O({id:K,type:xe})},de=()=>{if(!P)return;const{id:K,type:oe}=P;oe==="memo"?s(K):u(K),O(null)},G=K=>{var yt;const oe=(yt=K.target.files)==null?void 0:yt[0];if(!oe)return;if(!window.confirm("")){K.target.value="";return}const xe=new FileReader;xe.onload=St=>{var $r;const Ct=($r=St.target)==null?void 0:$r.result,Nt=y(Ct);alert(Nt?"":"")},xe.readAsText(oe)},ue=async()=>{try{await S(wn)}catch{alert(" Config ")}},V=async()=>{if(wn.apiKey.includes("")||!wn.apiKey){alert(" `constants.ts`  Firebase Config \n\n");return}ue()},H=K=>/^(http|https):\/\/[^ "]+$/.test(K),Q=()=>j==="memo"?n:j==="wish"?a:[];return c.jsxs("div",{className:"pb-24 pt-4 px-4 h-full flex flex-col relative",children:[c.jsxs("div",{className:"flex p-1 bg-stone-200 rounded-2xl mb-6 flex-shrink-0",children:[c.jsx("button",{onClick:()=>I("packing"),className:`flex-1 py-2.5 rounded-xl text-sm font-bold transition-all ${j==="packing"?"bg-white shadow-sm text-stone-800":"text-stone-500"}`,children:""}),c.jsx("button",{onClick:()=>I("memo"),className:`flex-1 py-2.5 rounded-xl text-sm font-bold transition-all ${j==="memo"?"bg-white shadow-sm text-stone-800":"text-stone-500"}`,children:""}),c.jsx("button",{onClick:()=>I("wish"),className:`flex-1 py-2.5 rounded-xl text-sm font-bold transition-all ${j==="wish"?"bg-white shadow-sm text-stone-800":"text-stone-500"}`,children:""})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar pb-20",children:[j==="packing"?c.jsxs("div",{className:"space-y-3 animate-in fade-in duration-300",children:[t.map(K=>c.jsxs("div",{onClick:()=>e(K.id),className:`flex items-center gap-4 p-4 rounded-2xl border transition-all cursor-pointer ${K.checked?"bg-stone-100 border-stone-100 opacity-60":"bg-white border-stone-100 shadow-sm"}`,children:[c.jsx("div",{className:`${K.checked?"text-stone-400":"text-muji-highlight"}`,children:K.checked?c.jsx(zc,{size:24}):c.jsx(zp,{size:24})}),c.jsx("span",{className:`text-lg ${K.checked?"line-through text-stone-400":"text-stone-800"}`,children:K.text})]},K.id)),c.jsxs("div",{className:"text-center text-xs text-stone-400 mt-8",children:["Progress: ",t.filter(K=>K.checked).length," / ",t.length]})]}):c.jsxs("div",{className:"space-y-3 animate-in fade-in duration-300",children:[c.jsxs("form",{onSubmit:C,className:"flex gap-2 mb-6 relative",children:[c.jsx("input",{type:"text",value:w,onChange:K=>k(K.target.value),placeholder:j==="wish"?"...":"...",className:`flex-1 p-4 rounded-2xl border transition-all focus:outline-none focus:ring-2 focus:ring-muji-accent bg-white ${M?"border-muji-highlight":"border-stone-200"}`,disabled:M}),M?c.jsxs("div",{className:"flex gap-2 animate-in slide-in-from-right",children:[c.jsx("button",{type:"button",onClick:_,className:"bg-stone-200 text-stone-600 p-4 rounded-2xl hover:bg-stone-300 transition-colors",children:c.jsx(tr,{size:24})}),c.jsx("button",{type:"button",onClick:N,className:"bg-muji-highlight text-white p-4 rounded-2xl shadow-md hover:bg-amber-600 transition-colors",children:c.jsx(Jy,{size:24})})]}):c.jsx("button",{type:"submit",disabled:!w.trim(),className:"bg-stone-800 text-white p-4 rounded-2xl disabled:opacity-50 disabled:cursor-not-allowed shadow-sm active:scale-95 transition-all",children:c.jsx(Zi,{size:24})})]}),M&&c.jsx("div",{className:"text-center text-xs text-muji-highlight font-bold mb-4 animate-in fade-in",children:""}),Q().length===0&&c.jsx("div",{className:"text-center text-stone-400 py-10",children:c.jsx("p",{children:j==="wish"?"":""})}),Q().map(K=>c.jsxs("div",{onClick:()=>E(K.id,j),className:`relative group flex items-center gap-4 p-4 rounded-2xl border transition-all cursor-pointer ${K.checked?"bg-stone-100 border-stone-100 opacity-60":"bg-white border-stone-100 shadow-sm"}`,children:[c.jsx("div",{className:`${K.checked?"text-stone-400":"text-muji-highlight"} flex-shrink-0`,children:K.checked?c.jsx(zc,{size:24}):c.jsx(zp,{size:24})}),c.jsx("div",{className:`flex-1 overflow-hidden ${K.checked?"line-through text-stone-400":"text-stone-800"}`,children:H(K.text)?c.jsxs("a",{href:K.text,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 text-blue-600 hover:underline truncate w-full",onClick:oe=>oe.stopPropagation(),children:[c.jsx(tw,{size:16}),c.jsx("span",{className:"truncate",children:K.text})]}):c.jsx("span",{className:"break-words",children:K.text})}),c.jsx("button",{onClick:oe=>J(K.id,oe,j),className:"p-2 text-stone-300 hover:text-red-400 transition-colors",children:c.jsx(er,{size:18})})]},K.id))]}),c.jsxs("div",{className:"mt-8 pt-8 border-t border-stone-200",children:[c.jsx("h4",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest mb-4 text-center",children:"Data Management"}),c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("button",{onClick:p,className:"flex-1 py-2 bg-white border border-stone-300 text-stone-600 rounded-xl text-xs font-bold flex items-center justify-center gap-2 active:scale-95 transition-transform",children:[c.jsx(Xx,{size:14})," "]}),c.jsxs("label",{className:"flex-1 py-2 bg-stone-100 text-stone-600 rounded-xl text-xs font-bold flex items-center justify-center gap-2 cursor-pointer active:scale-95 transition-transform hover:bg-stone-200",children:[c.jsx(Il,{size:14})," ",c.jsx("input",{ref:g,type:"file",accept:".json",className:"hidden",onChange:G})]})]}),T?c.jsxs("div",{className:`w-full py-2 border rounded-xl text-xs font-bold flex items-center justify-center gap-2 ${b==="connected"?"bg-sky-50 border-sky-200 text-sky-600":b==="error"?"bg-red-50 border-red-200 text-red-500":"bg-stone-50 border-stone-200 text-stone-400"}`,children:[b==="connecting"?c.jsx(Uc,{className:"animate-spin",size:14}):b==="connected"?c.jsx(Ya,{size:14}):c.jsx(Qa,{size:14}),b==="connecting"?"...":b==="connected"?" (Auto)":c.jsx("button",{onClick:ue,className:"underline hover:text-red-700",children:""})]}):c.jsxs("button",{onClick:V,disabled:b==="connecting",className:`w-full py-2 border rounded-xl text-xs font-bold flex items-center justify-center gap-2 active:scale-95 transition-transform ${v?"bg-sky-50 border-sky-200 text-sky-600":"bg-white border-stone-200 text-stone-400 hover:bg-stone-50 hover:text-stone-600"}`,children:[b==="connecting"?c.jsx(Uc,{className:"animate-spin",size:14}):v?c.jsx(Wx,{size:14}):c.jsx(Ya,{size:14}),b==="connecting"?"...":v?" ()":""]}),v&&T&&c.jsxs("p",{className:"text-[10px] text-sky-400 text-center px-2",children:["",wn.projectId]})]})]})]}),P&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm px-6",children:c.jsxs("div",{className:"bg-white p-6 rounded-3xl w-full max-w-sm shadow-2xl animate-in zoom-in-95",children:[c.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[c.jsx("div",{className:"bg-red-100 p-4 rounded-full text-red-500 mb-4",children:c.jsx(Qa,{size:32})}),c.jsx("h3",{className:"text-xl font-bold text-stone-800",children:""}),c.jsx("p",{className:"text-sm text-stone-500 mt-2",children:""})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>O(null),className:"flex-1 py-3 rounded-xl bg-stone-100 text-stone-600 font-bold hover:bg-stone-200 transition-colors",children:""}),c.jsx("button",{onClick:de,className:"flex-1 py-3 rounded-xl bg-red-500 text-white font-bold hover:bg-red-600 transition-colors shadow-sm",children:""})]})]})})]})},nk="0000",rk=({highlightId:t})=>{const{bookings:e,addBooking:n,deleteBooking:r,updateBookingPhoto:s}=zs(),[i,a]=U.useState(!1),[l,u]=U.useState(!1),[d,p]=U.useState(""),[y,v]=U.useState(!1),[S,A]=U.useState(null),[b,j]=U.useState(null),I=U.useRef(null),w=U.useRef(null),k=U.useRef(null),P=U.useRef(null);U.useEffect(()=>{t&&e.length>0&&setTimeout(()=>{const G=document.getElementById(t);G&&G.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},[t,e]);const O=()=>{i?a(!1):(u(!0),p(""))},M=()=>{d===nk?(a(!0),u(!1)):(alert("PIN "),p(""))},x=G=>{A(G)},g=()=>{S&&(r(S),A(null))},T=G=>{j(G),setTimeout(()=>{var ue;(ue=I.current)==null||ue.click()},0)},E=G=>{var V;const ue=(V=G.target.files)==null?void 0:V[0];if(ue&&b){const H=new FileReader;H.onloadend=async()=>{const Q=H.result;try{const K=await $l(Q);s(b,K),j(null),I.current&&(I.current.value="")}catch{alert("")}},H.readAsDataURL(ue)}},C=G=>{n(G),v(!1)},N=G=>{G.current&&G.current.scrollIntoView({behavior:"smooth",block:"start"})},_=e.filter(G=>G.type==="flight"),J=e.filter(G=>G.type==="hotel"),de=e.filter(G=>G.type==="dining");return c.jsxs("div",{className:"pt-4 px-4 relative animate-in fade-in duration-500 min-h-screen",children:[c.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:I,onChange:E}),c.jsxs("div",{className:"flex justify-between items-center mb-4 px-1 sticky top-0 bg-muji-bg z-30 pt-2 pb-2",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-stone-800 tracking-wider",children:""}),c.jsx("div",{className:"w-10 h-1 bg-muji-highlight mt-1 rounded-full"})]}),c.jsx("button",{onClick:O,className:`p-3 rounded-2xl transition-all ${i?"bg-stone-800 text-white shadow-md":"bg-stone-100 text-stone-500"}`,children:i?c.jsx(od,{size:20}):c.jsx(id,{size:20})})]}),c.jsxs("div",{className:"flex gap-2 mb-6 overflow-x-auto no-scrollbar",children:[c.jsxs("button",{onClick:()=>N(w),className:"flex items-center gap-2 px-4 py-2 bg-white border border-stone-200 rounded-full text-stone-600 font-bold text-sm shadow-sm active:bg-stone-100 whitespace-nowrap",children:[c.jsx(Ri,{size:16})," "]}),c.jsxs("button",{onClick:()=>N(k),className:"flex items-center gap-2 px-4 py-2 bg-white border border-stone-200 rounded-full text-stone-600 font-bold text-sm shadow-sm active:bg-stone-100 whitespace-nowrap",children:[c.jsx(Fc,{size:16})," "]}),c.jsxs("button",{onClick:()=>N(P),className:"flex items-center gap-2 px-4 py-2 bg-white border border-stone-200 rounded-full text-stone-600 font-bold text-sm shadow-sm active:bg-stone-100 whitespace-nowrap",children:[c.jsx(t0,{size:16})," "]})]}),c.jsxs("div",{className:"space-y-10",children:[_.length>0&&c.jsxs("div",{ref:w,children:[c.jsx("h3",{className:"text-sm font-bold text-stone-400 uppercase tracking-widest mb-3 ml-1",children:""}),c.jsx("div",{className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 no-scrollbar",children:_.map(G=>c.jsxs("div",{id:G.id,className:"snap-center min-w-[90vw] sm:min-w-[350px] relative group scroll-m-24",children:[c.jsx("div",{className:`absolute -inset-1 rounded-[2rem] transition-opacity duration-500 bg-gradient-to-r from-orange-200 to-orange-100 -z-10 ${t===G.id?"opacity-100":"opacity-0"}`}),i&&c.jsx("button",{onClick:()=>x(G.id),className:"absolute -top-2 -right-2 z-20 bg-red-500 text-white p-2 rounded-full shadow-lg hover:bg-red-600 transition-colors",children:c.jsx(er,{size:16})}),c.jsxs("div",{className:"bg-white rounded-3xl overflow-hidden shadow-sm border border-stone-200 relative h-full flex flex-col",children:[c.jsx("div",{className:"absolute top-[65%] -left-3 w-6 h-6 bg-muji-bg rounded-full z-10 border-r border-stone-200"}),c.jsx("div",{className:"absolute top-[65%] -right-3 w-6 h-6 bg-muji-bg rounded-full z-10 border-l border-stone-200"}),c.jsxs("div",{className:"p-6 flex-1",children:[c.jsxs("div",{className:"flex justify-between items-start mb-6",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2.5 bg-stone-100 rounded-full text-stone-600",children:c.jsx(Ri,{size:24})}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-xl text-stone-800",children:G.title}),c.jsx("div",{className:"text-xs text-stone-400 font-mono tracking-wider",children:G.date})]})]}),c.jsx("div",{className:"text-2xl font-mono font-bold text-stone-800",children:G.subTitle})]}),c.jsxs("div",{className:"flex justify-between items-center px-2 mb-2",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-4xl font-black text-stone-800 font-mono",children:G.details.from}),G.details.terminal&&c.jsx("div",{className:"text-[10px] font-bold bg-stone-100 text-stone-500 rounded px-1 mt-1 inline-block",children:G.details.terminal}),c.jsx("div",{className:"text-sm font-bold text-stone-500 mt-1",children:G.details.departTime})]}),c.jsx("div",{className:"flex-1 border-b-2 border-dashed border-stone-300 mx-4 relative top-[-10px]",children:c.jsx(Ri,{size:16,className:"absolute -top-[9px] left-1/2 -translate-x-1/2 text-stone-300 rotate-90"})}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-4xl font-black text-stone-800 font-mono",children:G.details.to}),c.jsx("div",{className:"text-sm font-bold text-stone-500 mt-1",children:G.details.arriveTime})]})]})]}),c.jsx("div",{className:"border-b-2 border-dashed border-stone-200 w-full relative"}),c.jsxs("div",{className:"bg-stone-50 p-4 grid grid-cols-3 gap-2 text-center",children:[c.jsxs("div",{className:"border-r border-stone-200 last:border-0",children:[c.jsx("span",{className:"text-[10px] text-stone-400 block uppercase font-bold",children:""}),c.jsx("span",{className:"font-bold font-mono text-lg text-stone-800",children:G.details.counter||"--"})]}),c.jsxs("div",{className:"border-r border-stone-200 last:border-0",children:[c.jsx("span",{className:"text-[10px] text-stone-400 block uppercase font-bold",children:""}),c.jsx("span",{className:"font-bold font-mono text-lg text-muji-highlight",children:G.details.gate||"--"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-[10px] text-stone-400 block uppercase font-bold",children:""}),c.jsx("span",{className:"font-bold font-mono text-lg text-stone-800",children:G.details.baggage||"--"})]})]})]})]},G.id))})]}),J.length>0&&c.jsxs("div",{ref:k,className:"scroll-mt-24",children:[c.jsx("h3",{className:"text-sm font-bold text-stone-400 uppercase tracking-widest mb-3 ml-1",children:""}),c.jsx("div",{className:"space-y-4",children:J.map(G=>c.jsxs("div",{id:G.id,className:`relative group bg-white rounded-3xl overflow-hidden shadow-sm border transition-all duration-500 ${t===G.id?"ring-4 ring-orange-200 border-orange-400 scale-[1.02]":"border-stone-200"}`,children:[i&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>x(G.id),className:"absolute top-2 right-2 z-20 bg-red-500 text-white p-2 rounded-full shadow-lg hover:bg-red-600 transition-colors",children:c.jsx(er,{size:16})}),c.jsx("button",{onClick:()=>T(G.id),className:"absolute top-2 right-12 z-20 bg-stone-800/80 backdrop-blur-sm text-white p-2 rounded-full shadow-lg hover:bg-stone-900 transition-colors",title:"",children:c.jsx(Fp,{size:16})})]}),c.jsxs("div",{className:"relative h-48",children:[c.jsx("img",{src:G.imageUrl||"https://via.placeholder.com/400x200?text=No+Image",alt:G.title,className:"w-full h-full object-cover",onError:ue=>{ue.target.src="https://images.unsplash.com/photo-1566073771259-6a8506099945?auto=format&fit=crop&w=800&q=80"}}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"}),c.jsxs("div",{className:"absolute bottom-4 left-4 text-white",children:[c.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold bg-white/20 backdrop-blur-md px-2 py-1 rounded-md w-fit mb-2",children:[c.jsx(Fc,{size:12})," ",G.subTitle]}),c.jsx("h3",{className:"font-bold text-2xl leading-tight",children:G.title})]})]}),c.jsxs("div",{className:"p-5",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4 pb-4 border-b border-stone-100",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-stone-400 uppercase",children:""}),c.jsx("div",{className:"font-bold text-stone-800 font-mono text-xl",children:G.details.checkIn})]}),c.jsx("div",{className:"text-stone-300 text-2xl font-light",children:"/"}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-xs text-stone-400 uppercase",children:""}),c.jsx("div",{className:"font-bold text-stone-800 font-mono text-xl",children:G.details.checkOut})]})]}),c.jsxs("div",{className:"flex items-center justify-between gap-2",children:[c.jsxs("div",{className:"flex items-start gap-2 text-sm text-stone-600 flex-1",children:[c.jsx(Dr,{size:16,className:"mt-0.5 flex-shrink-0 text-muji-highlight"}),c.jsx("span",{className:"line-clamp-2",children:G.details.address})]}),c.jsx("a",{href:G.details.mapLink||`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(G.title+" "+(G.details.address||""))}`,target:"_blank",rel:"noreferrer",className:"p-3 bg-stone-100 rounded-xl text-stone-600 hover:bg-stone-200 transition-colors",children:c.jsx(Jx,{size:20})})]})]})]},G.id))})]}),de.length>0&&c.jsxs("div",{ref:P,className:"scroll-mt-24",children:[c.jsx("h3",{className:"text-sm font-bold text-stone-400 uppercase tracking-widest mb-3 ml-1",children:""}),c.jsx("div",{className:"space-y-4",children:de.map(G=>c.jsxs("div",{id:G.id,className:`relative group bg-white rounded-3xl overflow-hidden shadow-sm border flex flex-col sm:flex-row transition-all duration-500 ${t===G.id?"ring-4 ring-orange-200 border-orange-400 scale-[1.02]":"border-stone-200"}`,children:[i&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>x(G.id),className:"absolute top-2 right-2 z-20 bg-red-500 text-white p-2 rounded-full shadow-lg hover:bg-red-600 transition-colors",children:c.jsx(er,{size:16})}),c.jsx("button",{onClick:()=>T(G.id),className:"absolute top-2 right-12 z-20 bg-stone-800/80 backdrop-blur-sm text-white p-2 rounded-full shadow-lg hover:bg-stone-900 transition-colors",title:"",children:c.jsx(Fp,{size:16})})]}),c.jsx("div",{className:"w-full sm:w-1/3 h-40 sm:h-auto relative",children:c.jsx("img",{src:G.imageUrl||"https://via.placeholder.com/150x200?text=Food",alt:G.title,className:"w-full h-full object-cover absolute inset-0",onError:ue=>{ue.target.src="https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?auto=format&fit=crop&w=800&q=80"}})}),c.jsxs("div",{className:"flex-1 p-5 flex flex-col justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"flex items-center gap-2 mb-2",children:c.jsx("span",{className:"text-[10px] font-bold bg-orange-100 text-orange-600 px-2 py-0.5 rounded-full uppercase",children:""})}),c.jsx("h3",{className:"font-bold text-xl text-stone-800 leading-tight mb-1",children:G.title}),c.jsx("div",{className:"text-xs text-stone-500 mb-4",children:G.subTitle}),c.jsxs("div",{className:"space-y-2 text-sm text-stone-700 mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Hx,{size:14,className:"text-stone-400"}),c.jsx("span",{className:"font-mono",children:G.date})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(sd,{size:14,className:"text-stone-400"}),c.jsx("span",{className:"font-mono font-bold text-muji-highlight text-lg",children:G.time})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(iw,{size:14,className:"text-stone-400"}),c.jsxs("span",{children:[G.details.pax," "]})]})]})]}),c.jsxs("a",{href:G.details.mapLink||`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(G.title)}`,target:"_blank",rel:"noreferrer",className:"w-full bg-stone-800 hover:bg-stone-700 text-white text-sm font-bold py-3 rounded-xl flex items-center justify-center gap-2 transition-colors",children:[c.jsx(Dr,{size:16})," "]})]})]},G.id))})]}),i&&c.jsx("button",{onClick:()=>v(!0),className:"fixed bottom-24 right-6 bg-stone-800 text-white w-14 h-14 rounded-full shadow-xl flex items-center justify-center animate-in zoom-in hover:scale-105 transition-transform z-40",children:c.jsx(Zi,{size:28})}),c.jsx("div",{className:"h-32 w-full"})]}),S&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm px-6",children:c.jsxs("div",{className:"bg-white p-6 rounded-3xl w-full max-w-sm shadow-2xl animate-in zoom-in-95",children:[c.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[c.jsx("div",{className:"bg-red-100 p-4 rounded-full text-red-500 mb-4",children:c.jsx(Qa,{size:32})}),c.jsx("h3",{className:"text-xl font-bold text-stone-800",children:""}),c.jsx("p",{className:"text-sm text-stone-500 mt-2",children:""})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>A(null),className:"flex-1 py-3 rounded-xl bg-stone-100 text-stone-600 font-bold hover:bg-stone-200 transition-colors",children:""}),c.jsx("button",{onClick:g,className:"flex-1 py-3 rounded-xl bg-red-500 text-white font-bold hover:bg-red-600 transition-colors shadow-sm",children:""})]})]})}),l&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm px-6",children:c.jsxs("div",{className:"bg-white p-8 rounded-3xl w-full max-w-sm shadow-2xl animate-in zoom-in-95",children:[c.jsx("h3",{className:"text-xl font-bold text-center mb-6 text-stone-800",children:""}),c.jsx("input",{type:"password",value:d,onChange:G=>p(G.target.value),placeholder:" PIN ",maxLength:4,className:"w-full text-center text-4xl font-mono tracking-[0.5em] border-b-2 border-stone-200 focus:border-stone-800 outline-none pb-2 mb-8 bg-transparent",autoFocus:!0}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:()=>u(!1),className:"flex-1 py-3 rounded-xl bg-stone-100 text-stone-500 font-bold",children:""}),c.jsx("button",{onClick:M,className:"flex-1 py-3 rounded-xl bg-stone-800 text-white font-bold",children:""})]})]})}),y&&c.jsx(sk,{onClose:()=>v(!1),onSave:C})]})},sk=({onClose:t,onSave:e})=>{const[n,r]=U.useState("dining"),[s,i]=U.useState(""),[a,l]=U.useState(""),[u,d]=U.useState(""),[p,y]=U.useState(""),[v,S]=U.useState(""),[A,b]=U.useState(""),[j,I]=U.useState(""),[w,k]=U.useState(""),[P,O]=U.useState(""),[M,x]=U.useState(!1),g=async E=>{var N;const C=(N=E.target.files)==null?void 0:N[0];if(C){const _=new FileReader;_.onloadend=async()=>{const J=_.result;try{const de=await $l(J);b(de)}catch{alert("")}},_.readAsDataURL(C)}},T=()=>{if(!s||!u)return;if(!M){x(!0);return}const E={id:Date.now().toString(),type:n,title:s,subTitle:a||(n==="flight"?"Flight #":n==="hotel"?"1 Night":"Reservation"),date:u,time:p,imageUrl:A,details:n==="flight"?{from:j||"AAA",to:w||"BBB",departTime:p,arriveTime:"--",gate:P||"--",terminal:"--",counter:"--",baggage:"--"}:n==="hotel"?{checkIn:p,checkOut:"--",address:v||"Tokyo",mapLink:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(v||s)}`}:{pax:2,mapLink:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(v||s)}`}};e(E)};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm px-4",children:c.jsxs("div",{className:"bg-white w-full max-w-md rounded-3xl p-6 shadow-2xl animate-in slide-in-from-bottom-10 max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h3",{className:"font-bold text-xl",children:""}),c.jsx("button",{onClick:t,children:c.jsx(tr,{size:24,className:"text-stone-400"})})]}),M?c.jsxs("div",{className:"text-center py-6",children:[c.jsxs("div",{className:"mb-8 text-stone-600",children:[" ",c.jsx("span",{className:"font-bold text-stone-800",children:s})," "]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>x(!1),className:"flex-1 py-3 bg-stone-100 text-stone-500 font-bold rounded-xl",children:""}),c.jsx("button",{onClick:T,className:"flex-1 py-3 bg-muji-highlight text-white font-bold rounded-xl shadow-md",children:""})]})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-stone-500 mb-1",children:""}),c.jsx("div",{className:"flex gap-2",children:[{id:"flight",label:""},{id:"hotel",label:""},{id:"dining",label:""}].map(E=>c.jsx("button",{onClick:()=>r(E.id),className:`flex-1 py-2 rounded-xl text-sm font-bold border ${n===E.id?"bg-stone-800 text-white border-stone-800":"bg-white text-stone-500 border-stone-200"}`,children:E.label},E.id))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-stone-500 mb-1",children:" ()"}),c.jsx("input",{value:s,onChange:E=>i(E.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:" / "})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-stone-500 mb-1",children:" ()"}),c.jsx("input",{value:a,onChange:E=>l(E.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:"JX804 / 3"})]}),n==="flight"&&c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-xs font-bold text-stone-500 mb-1",children:""}),c.jsx("input",{value:j,onChange:E=>I(E.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50 uppercase",placeholder:"TPE"})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-xs font-bold text-stone-500 mb-1",children:""}),c.jsx("input",{value:w,onChange:E=>k(E.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50 uppercase",placeholder:"NRT"})]})]}),n!=="flight"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-stone-500 mb-1",children:" / "}),c.jsx("input",{value:v,onChange:E=>S(E.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:""})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-xs font-bold text-stone-500 mb-1",children:""}),c.jsx("input",{value:u,onChange:E=>d(E.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:"YYYY/MM/DD"})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-xs font-bold text-stone-500 mb-1",children:""}),c.jsx("input",{value:p,onChange:E=>y(E.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:"HH:MM"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-stone-500 mb-1",children:" ()"}),c.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border border-dashed border-stone-300 bg-stone-50 cursor-pointer hover:bg-stone-100",children:[c.jsx(Il,{size:20,className:"text-stone-400"}),c.jsx("span",{className:"text-sm text-stone-500 truncate",children:A?"":""}),c.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:g})]}),A&&c.jsx("img",{src:A,alt:"Preview",className:"h-20 rounded-lg mt-2 object-cover border border-stone-200"})]}),c.jsx("button",{onClick:T,className:"w-full py-4 bg-stone-800 text-white font-bold rounded-xl mt-4 shadow-md active:scale-95 transition-transform",children:""})]})]})})},ik=({currentTab:t,onTabChange:e})=>{const n=[{id:ae.RATE,label:"",icon:c.jsx(Gx,{size:20})},{id:ae.GUIDE,label:"",icon:c.jsx(Xy,{size:20})},{id:ae.PLAN,label:"",icon:c.jsx(qx,{size:28}),isCenter:!0},{id:ae.BOOKINGS,label:"",icon:c.jsx(e0,{size:20})},{id:ae.LISTS,label:"",icon:c.jsx(zc,{size:20})}];return c.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-md border-t border-stone-200 pb-safe pt-2 px-1 z-50",children:c.jsx("div",{className:"flex justify-around items-end pb-2 relative",children:n.map(r=>{const s=t===r.id;return r.isCenter?c.jsxs("button",{onClick:()=>e(r.id),className:"flex flex-col items-center justify-end -mt-6 transition-all duration-300",children:[c.jsx("div",{className:`p-4 rounded-full shadow-lg transition-all ${s?"bg-stone-800 text-white scale-110":"bg-white text-stone-400 border border-stone-100"}`,children:r.icon}),c.jsx("span",{className:`text-[10px] font-bold tracking-wide mt-1 ${s?"text-stone-800":"text-stone-400"}`,children:r.label})]},r.id):c.jsxs("button",{onClick:()=>e(r.id),className:`flex flex-col items-center gap-1 min-w-[50px] w-full transition-all duration-300 ${s?"text-stone-800 -translate-y-1":"text-stone-400 hover:text-stone-600"}`,children:[c.jsx("div",{className:`p-2 rounded-2xl transition-all ${s?"bg-stone-100 shadow-sm":""}`,children:r.icon}),c.jsx("span",{className:`text-[10px] font-bold tracking-wide ${s?"opacity-100":"opacity-0 h-0 overflow-hidden"}`,children:r.label})]},r.id)})})})};class Ov extends U.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Uncaught error:",e,n)}render(){var e;return this.state.hasError?c.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-6 bg-stone-100 text-stone-600 text-center",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4 text-stone-800",children:""}),c.jsx("p",{className:"mb-4 text-sm",children:""}),c.jsx("pre",{className:"bg-white p-4 rounded-lg text-xs text-left overflow-auto w-full max-w-sm mb-6 border border-red-200 text-red-500",children:(e=this.state.error)==null?void 0:e.toString()}),c.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-stone-800 text-white rounded-xl font-bold",children:""})]}):this.props.children}}const ok=()=>{const{isLoading:t,error:e,isCloudMode:n}=zs(),[r,s]=U.useState(ae.PLAN),[i,a]=U.useState(null);if(t)return c.jsxs("div",{className:"min-h-screen bg-muji-bg flex flex-col items-center justify-center text-stone-400",children:[c.jsx(Uc,{className:"animate-spin mb-2",size:32}),c.jsx("p",{className:"text-sm font-medium tracking-widest",children:"..."})]});const l=(p,y)=>{s(p),y&&a(y)},u=p=>{s(p),a(null)},d=()=>{switch(r){case ae.PLAN:return c.jsx(Mm,{onNavigate:l});case ae.GUIDE:return c.jsx(XI,{highlightId:i});case ae.RATE:return c.jsx(ek,{});case ae.BOOKINGS:return c.jsx(rk,{highlightId:i});case ae.LISTS:return c.jsx(tk,{});default:return c.jsx(Mm,{onNavigate:l})}};return c.jsxs("div",{className:"min-h-screen bg-muji-bg font-sans text-muji-text selection:bg-stone-200",children:[c.jsx("header",{className:"sticky top-0 bg-muji-bg/80 backdrop-blur-sm z-40 px-6 pt-12 pb-2",children:c.jsx("div",{className:"flex justify-between items-center",children:c.jsxs("div",{children:[c.jsxs("h1",{className:"text-xl font-bold tracking-widest text-stone-700 flex items-center gap-2",children:["Tokyo Trip 2025",n&&c.jsx("div",{className:"w-2 h-2 rounded-full bg-sky-500 animate-pulse",title:""})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[n&&c.jsxs("span",{className:"text-[10px] text-sky-600 font-bold bg-sky-100 px-2 py-0.5 rounded flex items-center gap-1",children:[c.jsx(Ya,{size:10})," "]}),e&&c.jsxs("span",{className:"text-[10px] text-red-500 font-bold bg-red-100 px-2 py-0.5 rounded flex items-center gap-1",children:[c.jsx(Qa,{size:10})," "]})]})]})})}),c.jsx("main",{className:"max-w-md mx-auto min-h-screen relative",children:c.jsx(Ov,{children:d()})}),c.jsx(ik,{currentTab:r,onTabChange:u}),c.jsx("div",{className:"h-safe-bottom"})]})},ak=()=>c.jsx(Ov,{children:c.jsx(BI,{children:c.jsx(ok,{})})}),lk=()=>{if(document.getElementById("tailwind-cdn"))return;const t=document.createElement("script");t.innerHTML=`
    const initTailwind = () => {
      if (window.tailwind) {
        window.tailwind.config = {
          theme: {
            extend: {
              fontFamily: {
                sans: ['"Zen Maru Gothic"', 'sans-serif'],
              },
              colors: {
                muji: {
                  bg: '#f9f9f6',
                  card: '#ffffff',
                  text: '#4a4a4a',
                  muted: '#9ca3af',
                  accent: '#78716c',
                  highlight: '#d97706',
                  primary: '#57534e',
                }
              }
            }
          }
        };
      } else {
        setTimeout(initTailwind, 20);
      }
    };
    initTailwind();
  `,document.head.appendChild(t);const e=document.createElement("script");e.id="tailwind-cdn",e.src="https://cdn.tailwindcss.com",document.head.appendChild(e)};lk();const Lv=document.getElementById("root");if(!Lv)throw new Error("Could not find root element to mount to");const uk=Hu.createRoot(Lv);uk.render(c.jsx(I_.StrictMode,{children:c.jsx(ak,{})}));
