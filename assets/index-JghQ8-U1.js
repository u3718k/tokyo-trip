(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Yv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Am={exports:{}},Ya={},bm={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eo=Symbol.for("react.element"),Xv=Symbol.for("react.portal"),Jv=Symbol.for("react.fragment"),Zv=Symbol.for("react.strict_mode"),e_=Symbol.for("react.profiler"),t_=Symbol.for("react.provider"),n_=Symbol.for("react.context"),r_=Symbol.for("react.forward_ref"),s_=Symbol.for("react.suspense"),i_=Symbol.for("react.memo"),o_=Symbol.for("react.lazy"),gf=Symbol.iterator;function a_(t){return t===null||typeof t!="object"?null:(t=gf&&t[gf]||t["@@iterator"],typeof t=="function"?t:null)}var Rm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Pm=Object.assign,jm={};function Ts(t,e,n){this.props=t,this.context=e,this.refs=jm,this.updater=n||Rm}Ts.prototype.isReactComponent={};Ts.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ts.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Vm(){}Vm.prototype=Ts.prototype;function qc(t,e,n){this.props=t,this.context=e,this.refs=jm,this.updater=n||Rm}var Hc=qc.prototype=new Vm;Hc.constructor=qc;Pm(Hc,Ts.prototype);Hc.isPureReactComponent=!0;var yf=Array.isArray,Dm=Object.prototype.hasOwnProperty,Gc={current:null},Mm={key:!0,ref:!0,__self:!0,__source:!0};function Om(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Dm.call(e,r)&&!Mm.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:eo,type:t,key:i,ref:a,props:s,_owner:Gc.current}}function l_(t,e){return{$$typeof:eo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Wc(t){return typeof t=="object"&&t!==null&&t.$$typeof===eo}function u_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var vf=/\/+/g;function Gl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?u_(""+t.key):e.toString(36)}function Yo(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case eo:case Xv:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Gl(a,0):r,yf(s)?(n="",t!=null&&(n=t.replace(vf,"$&/")+"/"),Yo(s,e,n,"",function(d){return d})):s!=null&&(Wc(s)&&(s=l_(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(vf,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",yf(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+Gl(i,l);a+=Yo(i,e,n,u,s)}else if(u=a_(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+Gl(i,l++),a+=Yo(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Ao(t,e,n){if(t==null)return t;var r=[],s=0;return Yo(t,r,"","",function(i){return e.call(n,i,s++)}),r}function c_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var gt={current:null},Xo={transition:null},h_={ReactCurrentDispatcher:gt,ReactCurrentBatchConfig:Xo,ReactCurrentOwner:Gc};function Lm(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:Ao,forEach:function(t,e,n){Ao(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ao(t,function(){e++}),e},toArray:function(t){return Ao(t,function(e){return e})||[]},only:function(t){if(!Wc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=Ts;ue.Fragment=Jv;ue.Profiler=e_;ue.PureComponent=qc;ue.StrictMode=Zv;ue.Suspense=s_;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=h_;ue.act=Lm;ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Pm({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Gc.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Dm.call(e,u)&&!Mm.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:eo,type:t.type,key:s,ref:i,props:r,_owner:a}};ue.createContext=function(t){return t={$$typeof:n_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:t_,_context:t},t.Consumer=t};ue.createElement=Om;ue.createFactory=function(t){var e=Om.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:r_,render:t}};ue.isValidElement=Wc;ue.lazy=function(t){return{$$typeof:o_,_payload:{_status:-1,_result:t},_init:c_}};ue.memo=function(t,e){return{$$typeof:i_,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=Xo.transition;Xo.transition={};try{t()}finally{Xo.transition=e}};ue.unstable_act=Lm;ue.useCallback=function(t,e){return gt.current.useCallback(t,e)};ue.useContext=function(t){return gt.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return gt.current.useDeferredValue(t)};ue.useEffect=function(t,e){return gt.current.useEffect(t,e)};ue.useId=function(){return gt.current.useId()};ue.useImperativeHandle=function(t,e,n){return gt.current.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return gt.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return gt.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return gt.current.useMemo(t,e)};ue.useReducer=function(t,e,n){return gt.current.useReducer(t,e,n)};ue.useRef=function(t){return gt.current.useRef(t)};ue.useState=function(t){return gt.current.useState(t)};ue.useSyncExternalStore=function(t,e,n){return gt.current.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return gt.current.useTransition()};ue.version="18.3.1";bm.exports=ue;var F=bm.exports;const d_=Yv(F);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f_=F,p_=Symbol.for("react.element"),m_=Symbol.for("react.fragment"),g_=Object.prototype.hasOwnProperty,y_=f_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,v_={key:!0,ref:!0,__self:!0,__source:!0};function Fm(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)g_.call(e,r)&&!v_.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:p_,type:t,key:i,ref:a,props:s,_owner:y_.current}}Ya.Fragment=m_;Ya.jsx=Fm;Ya.jsxs=Fm;Am.exports=Ya;var c=Am.exports,Su={},zm={exports:{}},jt={},Um={exports:{}},Bm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,q){var Y=D.length;D.push(q);e:for(;0<Y;){var G=Y-1>>>1,se=D[G];if(0<s(se,q))D[G]=q,D[Y]=se,Y=G;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var q=D[0],Y=D.pop();if(Y!==q){D[0]=Y;e:for(var G=0,se=D.length,_e=se>>>1;G<_e;){var vt=2*(G+1)-1,ht=D[vt],kt=vt+1,He=D[kt];if(0>s(ht,Y))kt<se&&0>s(He,ht)?(D[G]=He,D[kt]=Y,G=kt):(D[G]=ht,D[vt]=Y,G=vt);else if(kt<se&&0>s(He,Y))D[G]=He,D[kt]=Y,G=kt;else break e}}return q}function s(D,q){var Y=D.sortIndex-q.sortIndex;return Y!==0?Y:D.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],d=[],p=1,y=null,v=3,S=!1,A=!1,b=!1,P=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(D){for(var q=n(d);q!==null;){if(q.callback===null)r(d);else if(q.startTime<=D)r(d),q.sortIndex=q.expirationTime,e(u,q);else break;q=n(d)}}function j(D){if(b=!1,k(D),!A)if(n(u)!==null)A=!0,B(O);else{var q=n(d);q!==null&&ie(j,q.startTime-D)}}function O(D,q){A=!1,b&&(b=!1,I(g),g=-1),S=!0;var Y=v;try{for(k(q),y=n(u);y!==null&&(!(y.expirationTime>q)||D&&!C());){var G=y.callback;if(typeof G=="function"){y.callback=null,v=y.priorityLevel;var se=G(y.expirationTime<=q);q=t.unstable_now(),typeof se=="function"?y.callback=se:y===n(u)&&r(u),k(q)}else r(u);y=n(u)}if(y!==null)var _e=!0;else{var vt=n(d);vt!==null&&ie(j,vt.startTime-q),_e=!1}return _e}finally{y=null,v=Y,S=!1}}var M=!1,x=null,g=-1,T=5,E=-1;function C(){return!(t.unstable_now()-E<T)}function N(){if(x!==null){var D=t.unstable_now();E=D;var q=!0;try{q=x(!0,D)}finally{q?_():(M=!1,x=null)}}else M=!1}var _;if(typeof w=="function")_=function(){w(N)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,ge=K.port2;K.port1.onmessage=N,_=function(){ge.postMessage(null)}}else _=function(){P(N,0)};function B(D){x=D,M||(M=!0,_())}function ie(D,q){g=P(function(){D(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){A||S||(A=!0,B(O))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(D){switch(v){case 1:case 2:case 3:var q=3;break;default:q=v}var Y=v;v=q;try{return D()}finally{v=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,q){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var Y=v;v=D;try{return q()}finally{v=Y}},t.unstable_scheduleCallback=function(D,q,Y){var G=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?G+Y:G):Y=G,D){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=Y+se,D={id:p++,callback:q,priorityLevel:D,startTime:Y,expirationTime:se,sortIndex:-1},Y>G?(D.sortIndex=Y,e(d,D),n(u)===null&&D===n(d)&&(b?(I(g),g=-1):b=!0,ie(j,Y-G))):(D.sortIndex=se,e(u,D),A||S||(A=!0,B(O))),D},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(D){var q=v;return function(){var Y=v;v=q;try{return D.apply(this,arguments)}finally{v=Y}}}})(Bm);Um.exports=Bm;var __=Um.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x_=F,Pt=__;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $m=new Set,ki={};function Ar(t,e){us(t,e),us(t+"Capture",e)}function us(t,e){for(ki[t]=e,t=0;t<e.length;t++)$m.add(e[t])}var gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cu=Object.prototype.hasOwnProperty,w_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_f={},xf={};function E_(t){return Cu.call(xf,t)?!0:Cu.call(_f,t)?!1:w_.test(t)?xf[t]=!0:(_f[t]=!0,!1)}function T_(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function I_(t,e,n,r){if(e===null||typeof e>"u"||T_(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function yt(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ze[t]=new yt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ze[e]=new yt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ze[t]=new yt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ze[t]=new yt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ze[t]=new yt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ze[t]=new yt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ze[t]=new yt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ze[t]=new yt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ze[t]=new yt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Kc=/[\-:]([a-z])/g;function Qc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Kc,Qc);Ze[e]=new yt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Kc,Qc);Ze[e]=new yt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Kc,Qc);Ze[e]=new yt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ze[t]=new yt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ze.xlinkHref=new yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ze[t]=new yt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Yc(t,e,n,r){var s=Ze.hasOwnProperty(e)?Ze[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(I_(e,n,s,r)&&(n=null),r||s===null?E_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Tn=x_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bo=Symbol.for("react.element"),$r=Symbol.for("react.portal"),qr=Symbol.for("react.fragment"),Xc=Symbol.for("react.strict_mode"),Nu=Symbol.for("react.profiler"),qm=Symbol.for("react.provider"),Hm=Symbol.for("react.context"),Jc=Symbol.for("react.forward_ref"),Au=Symbol.for("react.suspense"),bu=Symbol.for("react.suspense_list"),Zc=Symbol.for("react.memo"),An=Symbol.for("react.lazy"),Gm=Symbol.for("react.offscreen"),wf=Symbol.iterator;function Ks(t){return t===null||typeof t!="object"?null:(t=wf&&t[wf]||t["@@iterator"],typeof t=="function"?t:null)}var Ae=Object.assign,Wl;function ri(t){if(Wl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Wl=e&&e[1]||""}return`
`+Wl+t}var Kl=!1;function Ql(t,e){if(!t||Kl)return"";Kl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{Kl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ri(t):""}function k_(t){switch(t.tag){case 5:return ri(t.type);case 16:return ri("Lazy");case 13:return ri("Suspense");case 19:return ri("SuspenseList");case 0:case 2:case 15:return t=Ql(t.type,!1),t;case 11:return t=Ql(t.type.render,!1),t;case 1:return t=Ql(t.type,!0),t;default:return""}}function Ru(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case qr:return"Fragment";case $r:return"Portal";case Nu:return"Profiler";case Xc:return"StrictMode";case Au:return"Suspense";case bu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Hm:return(t.displayName||"Context")+".Consumer";case qm:return(t._context.displayName||"Context")+".Provider";case Jc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Zc:return e=t.displayName||null,e!==null?e:Ru(t.type)||"Memo";case An:e=t._payload,t=t._init;try{return Ru(t(e))}catch{}}return null}function S_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ru(e);case 8:return e===Xc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Wm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function C_(t){var e=Wm(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ro(t){t._valueTracker||(t._valueTracker=C_(t))}function Km(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Wm(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function fa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Pu(t,e){var n=e.checked;return Ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ef(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Qn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Qm(t,e){e=e.checked,e!=null&&Yc(t,"checked",e,!1)}function ju(t,e){Qm(t,e);var n=Qn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Vu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Vu(t,e.type,Qn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Tf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Vu(t,e,n){(e!=="number"||fa(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var si=Array.isArray;function ts(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Qn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Du(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function If(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(si(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Qn(n)}}function Ym(t,e){var n=Qn(e.value),r=Qn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function kf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Xm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Xm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Po,Jm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Po=Po||document.createElement("div"),Po.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Po.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Si(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var hi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},N_=["Webkit","ms","Moz","O"];Object.keys(hi).forEach(function(t){N_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),hi[e]=hi[t]})});function Zm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||hi.hasOwnProperty(t)&&hi[t]?(""+e).trim():e+"px"}function eg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Zm(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var A_=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ou(t,e){if(e){if(A_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Lu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fu=null;function eh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zu=null,ns=null,rs=null;function Sf(t){if(t=ro(t)){if(typeof zu!="function")throw Error(U(280));var e=t.stateNode;e&&(e=tl(e),zu(t.stateNode,t.type,e))}}function tg(t){ns?rs?rs.push(t):rs=[t]:ns=t}function ng(){if(ns){var t=ns,e=rs;if(rs=ns=null,Sf(t),e)for(t=0;t<e.length;t++)Sf(e[t])}}function rg(t,e){return t(e)}function sg(){}var Yl=!1;function ig(t,e,n){if(Yl)return t(e,n);Yl=!0;try{return rg(t,e,n)}finally{Yl=!1,(ns!==null||rs!==null)&&(sg(),ng())}}function Ci(t,e){var n=t.stateNode;if(n===null)return null;var r=tl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Uu=!1;if(gn)try{var Qs={};Object.defineProperty(Qs,"passive",{get:function(){Uu=!0}}),window.addEventListener("test",Qs,Qs),window.removeEventListener("test",Qs,Qs)}catch{Uu=!1}function b_(t,e,n,r,s,i,a,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(p){this.onError(p)}}var di=!1,pa=null,ma=!1,Bu=null,R_={onError:function(t){di=!0,pa=t}};function P_(t,e,n,r,s,i,a,l,u){di=!1,pa=null,b_.apply(R_,arguments)}function j_(t,e,n,r,s,i,a,l,u){if(P_.apply(this,arguments),di){if(di){var d=pa;di=!1,pa=null}else throw Error(U(198));ma||(ma=!0,Bu=d)}}function br(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function og(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Cf(t){if(br(t)!==t)throw Error(U(188))}function V_(t){var e=t.alternate;if(!e){if(e=br(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Cf(s),t;if(i===r)return Cf(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function ag(t){return t=V_(t),t!==null?lg(t):null}function lg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=lg(t);if(e!==null)return e;t=t.sibling}return null}var ug=Pt.unstable_scheduleCallback,Nf=Pt.unstable_cancelCallback,D_=Pt.unstable_shouldYield,M_=Pt.unstable_requestPaint,De=Pt.unstable_now,O_=Pt.unstable_getCurrentPriorityLevel,th=Pt.unstable_ImmediatePriority,cg=Pt.unstable_UserBlockingPriority,ga=Pt.unstable_NormalPriority,L_=Pt.unstable_LowPriority,hg=Pt.unstable_IdlePriority,Xa=null,en=null;function F_(t){if(en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(Xa,t,void 0,(t.current.flags&128)===128)}catch{}}var Gt=Math.clz32?Math.clz32:B_,z_=Math.log,U_=Math.LN2;function B_(t){return t>>>=0,t===0?32:31-(z_(t)/U_|0)|0}var jo=64,Vo=4194304;function ii(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ya(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=ii(l):(i&=a,i!==0&&(r=ii(i)))}else a=n&~s,a!==0?r=ii(a):i!==0&&(r=ii(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Gt(e),s=1<<n,r|=t[n],e&=~s;return r}function $_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function q_(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Gt(i),l=1<<a,u=s[a];u===-1?(!(l&n)||l&r)&&(s[a]=$_(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function $u(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function dg(){var t=jo;return jo<<=1,!(jo&4194240)&&(jo=64),t}function Xl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function to(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Gt(e),t[e]=n}function H_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Gt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function nh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Gt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ye=0;function fg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var pg,rh,mg,gg,yg,qu=!1,Do=[],Mn=null,On=null,Ln=null,Ni=new Map,Ai=new Map,Rn=[],G_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Af(t,e){switch(t){case"focusin":case"focusout":Mn=null;break;case"dragenter":case"dragleave":On=null;break;case"mouseover":case"mouseout":Ln=null;break;case"pointerover":case"pointerout":Ni.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ai.delete(e.pointerId)}}function Ys(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ro(e),e!==null&&rh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function W_(t,e,n,r,s){switch(e){case"focusin":return Mn=Ys(Mn,t,e,n,r,s),!0;case"dragenter":return On=Ys(On,t,e,n,r,s),!0;case"mouseover":return Ln=Ys(Ln,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ni.set(i,Ys(Ni.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ai.set(i,Ys(Ai.get(i)||null,t,e,n,r,s)),!0}return!1}function vg(t){var e=dr(t.target);if(e!==null){var n=br(e);if(n!==null){if(e=n.tag,e===13){if(e=og(n),e!==null){t.blockedOn=e,yg(t.priority,function(){mg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Jo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Hu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Fu=r,n.target.dispatchEvent(r),Fu=null}else return e=ro(n),e!==null&&rh(e),t.blockedOn=n,!1;e.shift()}return!0}function bf(t,e,n){Jo(t)&&n.delete(e)}function K_(){qu=!1,Mn!==null&&Jo(Mn)&&(Mn=null),On!==null&&Jo(On)&&(On=null),Ln!==null&&Jo(Ln)&&(Ln=null),Ni.forEach(bf),Ai.forEach(bf)}function Xs(t,e){t.blockedOn===e&&(t.blockedOn=null,qu||(qu=!0,Pt.unstable_scheduleCallback(Pt.unstable_NormalPriority,K_)))}function bi(t){function e(s){return Xs(s,t)}if(0<Do.length){Xs(Do[0],t);for(var n=1;n<Do.length;n++){var r=Do[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Mn!==null&&Xs(Mn,t),On!==null&&Xs(On,t),Ln!==null&&Xs(Ln,t),Ni.forEach(e),Ai.forEach(e),n=0;n<Rn.length;n++)r=Rn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Rn.length&&(n=Rn[0],n.blockedOn===null);)vg(n),n.blockedOn===null&&Rn.shift()}var ss=Tn.ReactCurrentBatchConfig,va=!0;function Q_(t,e,n,r){var s=ye,i=ss.transition;ss.transition=null;try{ye=1,sh(t,e,n,r)}finally{ye=s,ss.transition=i}}function Y_(t,e,n,r){var s=ye,i=ss.transition;ss.transition=null;try{ye=4,sh(t,e,n,r)}finally{ye=s,ss.transition=i}}function sh(t,e,n,r){if(va){var s=Hu(t,e,n,r);if(s===null)au(t,e,r,_a,n),Af(t,r);else if(W_(s,t,e,n,r))r.stopPropagation();else if(Af(t,r),e&4&&-1<G_.indexOf(t)){for(;s!==null;){var i=ro(s);if(i!==null&&pg(i),i=Hu(t,e,n,r),i===null&&au(t,e,r,_a,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else au(t,e,r,null,n)}}var _a=null;function Hu(t,e,n,r){if(_a=null,t=eh(r),t=dr(t),t!==null)if(e=br(t),e===null)t=null;else if(n=e.tag,n===13){if(t=og(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _a=t,null}function _g(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(O_()){case th:return 1;case cg:return 4;case ga:case L_:return 16;case hg:return 536870912;default:return 16}default:return 16}}var jn=null,ih=null,Zo=null;function xg(){if(Zo)return Zo;var t,e=ih,n=e.length,r,s="value"in jn?jn.value:jn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return Zo=s.slice(t,1<r?1-r:void 0)}function ea(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Mo(){return!0}function Rf(){return!1}function Vt(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Mo:Rf,this.isPropagationStopped=Rf,this}return Ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Mo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Mo)},persist:function(){},isPersistent:Mo}),e}var Is={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oh=Vt(Is),no=Ae({},Is,{view:0,detail:0}),X_=Vt(no),Jl,Zl,Js,Ja=Ae({},no,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ah,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Js&&(Js&&t.type==="mousemove"?(Jl=t.screenX-Js.screenX,Zl=t.screenY-Js.screenY):Zl=Jl=0,Js=t),Jl)},movementY:function(t){return"movementY"in t?t.movementY:Zl}}),Pf=Vt(Ja),J_=Ae({},Ja,{dataTransfer:0}),Z_=Vt(J_),e1=Ae({},no,{relatedTarget:0}),eu=Vt(e1),t1=Ae({},Is,{animationName:0,elapsedTime:0,pseudoElement:0}),n1=Vt(t1),r1=Ae({},Is,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),s1=Vt(r1),i1=Ae({},Is,{data:0}),jf=Vt(i1),o1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},l1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function u1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=l1[t])?!!e[t]:!1}function ah(){return u1}var c1=Ae({},no,{key:function(t){if(t.key){var e=o1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ea(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?a1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ah,charCode:function(t){return t.type==="keypress"?ea(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ea(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),h1=Vt(c1),d1=Ae({},Ja,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vf=Vt(d1),f1=Ae({},no,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ah}),p1=Vt(f1),m1=Ae({},Is,{propertyName:0,elapsedTime:0,pseudoElement:0}),g1=Vt(m1),y1=Ae({},Ja,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),v1=Vt(y1),_1=[9,13,27,32],lh=gn&&"CompositionEvent"in window,fi=null;gn&&"documentMode"in document&&(fi=document.documentMode);var x1=gn&&"TextEvent"in window&&!fi,wg=gn&&(!lh||fi&&8<fi&&11>=fi),Df=" ",Mf=!1;function Eg(t,e){switch(t){case"keyup":return _1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hr=!1;function w1(t,e){switch(t){case"compositionend":return Tg(e);case"keypress":return e.which!==32?null:(Mf=!0,Df);case"textInput":return t=e.data,t===Df&&Mf?null:t;default:return null}}function E1(t,e){if(Hr)return t==="compositionend"||!lh&&Eg(t,e)?(t=xg(),Zo=ih=jn=null,Hr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wg&&e.locale!=="ko"?null:e.data;default:return null}}var T1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Of(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!T1[t.type]:e==="textarea"}function Ig(t,e,n,r){tg(r),e=xa(e,"onChange"),0<e.length&&(n=new oh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var pi=null,Ri=null;function I1(t){Dg(t,0)}function Za(t){var e=Kr(t);if(Km(e))return t}function k1(t,e){if(t==="change")return e}var kg=!1;if(gn){var tu;if(gn){var nu="oninput"in document;if(!nu){var Lf=document.createElement("div");Lf.setAttribute("oninput","return;"),nu=typeof Lf.oninput=="function"}tu=nu}else tu=!1;kg=tu&&(!document.documentMode||9<document.documentMode)}function Ff(){pi&&(pi.detachEvent("onpropertychange",Sg),Ri=pi=null)}function Sg(t){if(t.propertyName==="value"&&Za(Ri)){var e=[];Ig(e,Ri,t,eh(t)),ig(I1,e)}}function S1(t,e,n){t==="focusin"?(Ff(),pi=e,Ri=n,pi.attachEvent("onpropertychange",Sg)):t==="focusout"&&Ff()}function C1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Za(Ri)}function N1(t,e){if(t==="click")return Za(e)}function A1(t,e){if(t==="input"||t==="change")return Za(e)}function b1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Kt=typeof Object.is=="function"?Object.is:b1;function Pi(t,e){if(Kt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Cu.call(e,s)||!Kt(t[s],e[s]))return!1}return!0}function zf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Uf(t,e){var n=zf(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=zf(n)}}function Cg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Cg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ng(){for(var t=window,e=fa();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=fa(t.document)}return e}function uh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function R1(t){var e=Ng(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Cg(n.ownerDocument.documentElement,n)){if(r!==null&&uh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Uf(n,i);var a=Uf(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var P1=gn&&"documentMode"in document&&11>=document.documentMode,Gr=null,Gu=null,mi=null,Wu=!1;function Bf(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Wu||Gr==null||Gr!==fa(r)||(r=Gr,"selectionStart"in r&&uh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),mi&&Pi(mi,r)||(mi=r,r=xa(Gu,"onSelect"),0<r.length&&(e=new oh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Gr)))}function Oo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Wr={animationend:Oo("Animation","AnimationEnd"),animationiteration:Oo("Animation","AnimationIteration"),animationstart:Oo("Animation","AnimationStart"),transitionend:Oo("Transition","TransitionEnd")},ru={},Ag={};gn&&(Ag=document.createElement("div").style,"AnimationEvent"in window||(delete Wr.animationend.animation,delete Wr.animationiteration.animation,delete Wr.animationstart.animation),"TransitionEvent"in window||delete Wr.transitionend.transition);function el(t){if(ru[t])return ru[t];if(!Wr[t])return t;var e=Wr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ag)return ru[t]=e[n];return t}var bg=el("animationend"),Rg=el("animationiteration"),Pg=el("animationstart"),jg=el("transitionend"),Vg=new Map,$f="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tr(t,e){Vg.set(t,e),Ar(e,[t])}for(var su=0;su<$f.length;su++){var iu=$f[su],j1=iu.toLowerCase(),V1=iu[0].toUpperCase()+iu.slice(1);tr(j1,"on"+V1)}tr(bg,"onAnimationEnd");tr(Rg,"onAnimationIteration");tr(Pg,"onAnimationStart");tr("dblclick","onDoubleClick");tr("focusin","onFocus");tr("focusout","onBlur");tr(jg,"onTransitionEnd");us("onMouseEnter",["mouseout","mouseover"]);us("onMouseLeave",["mouseout","mouseover"]);us("onPointerEnter",["pointerout","pointerover"]);us("onPointerLeave",["pointerout","pointerover"]);Ar("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ar("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ar("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ar("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ar("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ar("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),D1=new Set("cancel close invalid load scroll toggle".split(" ").concat(oi));function qf(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,j_(r,e,void 0,t),t.currentTarget=null}function Dg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;qf(s,l,d),i=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;qf(s,l,d),i=u}}}if(ma)throw t=Bu,ma=!1,Bu=null,t}function Te(t,e){var n=e[Ju];n===void 0&&(n=e[Ju]=new Set);var r=t+"__bubble";n.has(r)||(Mg(e,t,2,!1),n.add(r))}function ou(t,e,n){var r=0;e&&(r|=4),Mg(n,t,r,e)}var Lo="_reactListening"+Math.random().toString(36).slice(2);function ji(t){if(!t[Lo]){t[Lo]=!0,$m.forEach(function(n){n!=="selectionchange"&&(D1.has(n)||ou(n,!1,t),ou(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Lo]||(e[Lo]=!0,ou("selectionchange",!1,e))}}function Mg(t,e,n,r){switch(_g(e)){case 1:var s=Q_;break;case 4:s=Y_;break;default:s=sh}n=s.bind(null,e,n,t),s=void 0,!Uu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function au(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=dr(l),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}l=l.parentNode}}r=r.return}ig(function(){var d=i,p=eh(n),y=[];e:{var v=Vg.get(t);if(v!==void 0){var S=oh,A=t;switch(t){case"keypress":if(ea(n)===0)break e;case"keydown":case"keyup":S=h1;break;case"focusin":A="focus",S=eu;break;case"focusout":A="blur",S=eu;break;case"beforeblur":case"afterblur":S=eu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Pf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=Z_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=p1;break;case bg:case Rg:case Pg:S=n1;break;case jg:S=g1;break;case"scroll":S=X_;break;case"wheel":S=v1;break;case"copy":case"cut":case"paste":S=s1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=Vf}var b=(e&4)!==0,P=!b&&t==="scroll",I=b?v!==null?v+"Capture":null:v;b=[];for(var w=d,k;w!==null;){k=w;var j=k.stateNode;if(k.tag===5&&j!==null&&(k=j,I!==null&&(j=Ci(w,I),j!=null&&b.push(Vi(w,j,k)))),P)break;w=w.return}0<b.length&&(v=new S(v,A,null,n,p),y.push({event:v,listeners:b}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",v&&n!==Fu&&(A=n.relatedTarget||n.fromElement)&&(dr(A)||A[yn]))break e;if((S||v)&&(v=p.window===p?p:(v=p.ownerDocument)?v.defaultView||v.parentWindow:window,S?(A=n.relatedTarget||n.toElement,S=d,A=A?dr(A):null,A!==null&&(P=br(A),A!==P||A.tag!==5&&A.tag!==6)&&(A=null)):(S=null,A=d),S!==A)){if(b=Pf,j="onMouseLeave",I="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(b=Vf,j="onPointerLeave",I="onPointerEnter",w="pointer"),P=S==null?v:Kr(S),k=A==null?v:Kr(A),v=new b(j,w+"leave",S,n,p),v.target=P,v.relatedTarget=k,j=null,dr(p)===d&&(b=new b(I,w+"enter",A,n,p),b.target=k,b.relatedTarget=P,j=b),P=j,S&&A)t:{for(b=S,I=A,w=0,k=b;k;k=Fr(k))w++;for(k=0,j=I;j;j=Fr(j))k++;for(;0<w-k;)b=Fr(b),w--;for(;0<k-w;)I=Fr(I),k--;for(;w--;){if(b===I||I!==null&&b===I.alternate)break t;b=Fr(b),I=Fr(I)}b=null}else b=null;S!==null&&Hf(y,v,S,b,!1),A!==null&&P!==null&&Hf(y,P,A,b,!0)}}e:{if(v=d?Kr(d):window,S=v.nodeName&&v.nodeName.toLowerCase(),S==="select"||S==="input"&&v.type==="file")var O=k1;else if(Of(v))if(kg)O=A1;else{O=C1;var M=S1}else(S=v.nodeName)&&S.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(O=N1);if(O&&(O=O(t,d))){Ig(y,O,n,p);break e}M&&M(t,v,d),t==="focusout"&&(M=v._wrapperState)&&M.controlled&&v.type==="number"&&Vu(v,"number",v.value)}switch(M=d?Kr(d):window,t){case"focusin":(Of(M)||M.contentEditable==="true")&&(Gr=M,Gu=d,mi=null);break;case"focusout":mi=Gu=Gr=null;break;case"mousedown":Wu=!0;break;case"contextmenu":case"mouseup":case"dragend":Wu=!1,Bf(y,n,p);break;case"selectionchange":if(P1)break;case"keydown":case"keyup":Bf(y,n,p)}var x;if(lh)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else Hr?Eg(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(wg&&n.locale!=="ko"&&(Hr||g!=="onCompositionStart"?g==="onCompositionEnd"&&Hr&&(x=xg()):(jn=p,ih="value"in jn?jn.value:jn.textContent,Hr=!0)),M=xa(d,g),0<M.length&&(g=new jf(g,t,null,n,p),y.push({event:g,listeners:M}),x?g.data=x:(x=Tg(n),x!==null&&(g.data=x)))),(x=x1?w1(t,n):E1(t,n))&&(d=xa(d,"onBeforeInput"),0<d.length&&(p=new jf("onBeforeInput","beforeinput",null,n,p),y.push({event:p,listeners:d}),p.data=x))}Dg(y,e)})}function Vi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function xa(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ci(t,n),i!=null&&r.unshift(Vi(t,i,s)),i=Ci(t,e),i!=null&&r.push(Vi(t,i,s))),t=t.return}return r}function Fr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Hf(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=Ci(n,i),u!=null&&a.unshift(Vi(n,u,l))):s||(u=Ci(n,i),u!=null&&a.push(Vi(n,u,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var M1=/\r\n?/g,O1=/\u0000|\uFFFD/g;function Gf(t){return(typeof t=="string"?t:""+t).replace(M1,`
`).replace(O1,"")}function Fo(t,e,n){if(e=Gf(e),Gf(t)!==e&&n)throw Error(U(425))}function wa(){}var Ku=null,Qu=null;function Yu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xu=typeof setTimeout=="function"?setTimeout:void 0,L1=typeof clearTimeout=="function"?clearTimeout:void 0,Wf=typeof Promise=="function"?Promise:void 0,F1=typeof queueMicrotask=="function"?queueMicrotask:typeof Wf<"u"?function(t){return Wf.resolve(null).then(t).catch(z1)}:Xu;function z1(t){setTimeout(function(){throw t})}function lu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),bi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);bi(e)}function Fn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Kf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ks=Math.random().toString(36).slice(2),Zt="__reactFiber$"+ks,Di="__reactProps$"+ks,yn="__reactContainer$"+ks,Ju="__reactEvents$"+ks,U1="__reactListeners$"+ks,B1="__reactHandles$"+ks;function dr(t){var e=t[Zt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[yn]||n[Zt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Kf(t);t!==null;){if(n=t[Zt])return n;t=Kf(t)}return e}t=n,n=t.parentNode}return null}function ro(t){return t=t[Zt]||t[yn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Kr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function tl(t){return t[Di]||null}var Zu=[],Qr=-1;function nr(t){return{current:t}}function Ie(t){0>Qr||(t.current=Zu[Qr],Zu[Qr]=null,Qr--)}function we(t,e){Qr++,Zu[Qr]=t.current,t.current=e}var Yn={},ct=nr(Yn),Et=nr(!1),xr=Yn;function cs(t,e){var n=t.type.contextTypes;if(!n)return Yn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Tt(t){return t=t.childContextTypes,t!=null}function Ea(){Ie(Et),Ie(ct)}function Qf(t,e,n){if(ct.current!==Yn)throw Error(U(168));we(ct,e),we(Et,n)}function Og(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,S_(t)||"Unknown",s));return Ae({},n,r)}function Ta(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Yn,xr=ct.current,we(ct,t),we(Et,Et.current),!0}function Yf(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=Og(t,e,xr),r.__reactInternalMemoizedMergedChildContext=t,Ie(Et),Ie(ct),we(ct,t)):Ie(Et),we(Et,n)}var hn=null,nl=!1,uu=!1;function Lg(t){hn===null?hn=[t]:hn.push(t)}function $1(t){nl=!0,Lg(t)}function rr(){if(!uu&&hn!==null){uu=!0;var t=0,e=ye;try{var n=hn;for(ye=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}hn=null,nl=!1}catch(s){throw hn!==null&&(hn=hn.slice(t+1)),ug(th,rr),s}finally{ye=e,uu=!1}}return null}var Yr=[],Xr=0,Ia=null,ka=0,Dt=[],Mt=0,wr=null,fn=1,pn="";function ur(t,e){Yr[Xr++]=ka,Yr[Xr++]=Ia,Ia=t,ka=e}function Fg(t,e,n){Dt[Mt++]=fn,Dt[Mt++]=pn,Dt[Mt++]=wr,wr=t;var r=fn;t=pn;var s=32-Gt(r)-1;r&=~(1<<s),n+=1;var i=32-Gt(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,fn=1<<32-Gt(e)+s|n<<s|r,pn=i+t}else fn=1<<i|n<<s|r,pn=t}function ch(t){t.return!==null&&(ur(t,1),Fg(t,1,0))}function hh(t){for(;t===Ia;)Ia=Yr[--Xr],Yr[Xr]=null,ka=Yr[--Xr],Yr[Xr]=null;for(;t===wr;)wr=Dt[--Mt],Dt[Mt]=null,pn=Dt[--Mt],Dt[Mt]=null,fn=Dt[--Mt],Dt[Mt]=null}var bt=null,Nt=null,ke=!1,Ht=null;function zg(t,e){var n=Ot(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Xf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bt=t,Nt=Fn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bt=t,Nt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=wr!==null?{id:fn,overflow:pn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ot(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,bt=t,Nt=null,!0):!1;default:return!1}}function ec(t){return(t.mode&1)!==0&&(t.flags&128)===0}function tc(t){if(ke){var e=Nt;if(e){var n=e;if(!Xf(t,e)){if(ec(t))throw Error(U(418));e=Fn(n.nextSibling);var r=bt;e&&Xf(t,e)?zg(r,n):(t.flags=t.flags&-4097|2,ke=!1,bt=t)}}else{if(ec(t))throw Error(U(418));t.flags=t.flags&-4097|2,ke=!1,bt=t}}}function Jf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bt=t}function zo(t){if(t!==bt)return!1;if(!ke)return Jf(t),ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yu(t.type,t.memoizedProps)),e&&(e=Nt)){if(ec(t))throw Ug(),Error(U(418));for(;e;)zg(t,e),e=Fn(e.nextSibling)}if(Jf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Nt=Fn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Nt=null}}else Nt=bt?Fn(t.stateNode.nextSibling):null;return!0}function Ug(){for(var t=Nt;t;)t=Fn(t.nextSibling)}function hs(){Nt=bt=null,ke=!1}function dh(t){Ht===null?Ht=[t]:Ht.push(t)}var q1=Tn.ReactCurrentBatchConfig;function Zs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Uo(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Zf(t){var e=t._init;return e(t._payload)}function Bg(t){function e(I,w){if(t){var k=I.deletions;k===null?(I.deletions=[w],I.flags|=16):k.push(w)}}function n(I,w){if(!t)return null;for(;w!==null;)e(I,w),w=w.sibling;return null}function r(I,w){for(I=new Map;w!==null;)w.key!==null?I.set(w.key,w):I.set(w.index,w),w=w.sibling;return I}function s(I,w){return I=$n(I,w),I.index=0,I.sibling=null,I}function i(I,w,k){return I.index=k,t?(k=I.alternate,k!==null?(k=k.index,k<w?(I.flags|=2,w):k):(I.flags|=2,w)):(I.flags|=1048576,w)}function a(I){return t&&I.alternate===null&&(I.flags|=2),I}function l(I,w,k,j){return w===null||w.tag!==6?(w=gu(k,I.mode,j),w.return=I,w):(w=s(w,k),w.return=I,w)}function u(I,w,k,j){var O=k.type;return O===qr?p(I,w,k.props.children,j,k.key):w!==null&&(w.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===An&&Zf(O)===w.type)?(j=s(w,k.props),j.ref=Zs(I,w,k),j.return=I,j):(j=aa(k.type,k.key,k.props,null,I.mode,j),j.ref=Zs(I,w,k),j.return=I,j)}function d(I,w,k,j){return w===null||w.tag!==4||w.stateNode.containerInfo!==k.containerInfo||w.stateNode.implementation!==k.implementation?(w=yu(k,I.mode,j),w.return=I,w):(w=s(w,k.children||[]),w.return=I,w)}function p(I,w,k,j,O){return w===null||w.tag!==7?(w=yr(k,I.mode,j,O),w.return=I,w):(w=s(w,k),w.return=I,w)}function y(I,w,k){if(typeof w=="string"&&w!==""||typeof w=="number")return w=gu(""+w,I.mode,k),w.return=I,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case bo:return k=aa(w.type,w.key,w.props,null,I.mode,k),k.ref=Zs(I,null,w),k.return=I,k;case $r:return w=yu(w,I.mode,k),w.return=I,w;case An:var j=w._init;return y(I,j(w._payload),k)}if(si(w)||Ks(w))return w=yr(w,I.mode,k,null),w.return=I,w;Uo(I,w)}return null}function v(I,w,k,j){var O=w!==null?w.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return O!==null?null:l(I,w,""+k,j);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case bo:return k.key===O?u(I,w,k,j):null;case $r:return k.key===O?d(I,w,k,j):null;case An:return O=k._init,v(I,w,O(k._payload),j)}if(si(k)||Ks(k))return O!==null?null:p(I,w,k,j,null);Uo(I,k)}return null}function S(I,w,k,j,O){if(typeof j=="string"&&j!==""||typeof j=="number")return I=I.get(k)||null,l(w,I,""+j,O);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case bo:return I=I.get(j.key===null?k:j.key)||null,u(w,I,j,O);case $r:return I=I.get(j.key===null?k:j.key)||null,d(w,I,j,O);case An:var M=j._init;return S(I,w,k,M(j._payload),O)}if(si(j)||Ks(j))return I=I.get(k)||null,p(w,I,j,O,null);Uo(w,j)}return null}function A(I,w,k,j){for(var O=null,M=null,x=w,g=w=0,T=null;x!==null&&g<k.length;g++){x.index>g?(T=x,x=null):T=x.sibling;var E=v(I,x,k[g],j);if(E===null){x===null&&(x=T);break}t&&x&&E.alternate===null&&e(I,x),w=i(E,w,g),M===null?O=E:M.sibling=E,M=E,x=T}if(g===k.length)return n(I,x),ke&&ur(I,g),O;if(x===null){for(;g<k.length;g++)x=y(I,k[g],j),x!==null&&(w=i(x,w,g),M===null?O=x:M.sibling=x,M=x);return ke&&ur(I,g),O}for(x=r(I,x);g<k.length;g++)T=S(x,I,g,k[g],j),T!==null&&(t&&T.alternate!==null&&x.delete(T.key===null?g:T.key),w=i(T,w,g),M===null?O=T:M.sibling=T,M=T);return t&&x.forEach(function(C){return e(I,C)}),ke&&ur(I,g),O}function b(I,w,k,j){var O=Ks(k);if(typeof O!="function")throw Error(U(150));if(k=O.call(k),k==null)throw Error(U(151));for(var M=O=null,x=w,g=w=0,T=null,E=k.next();x!==null&&!E.done;g++,E=k.next()){x.index>g?(T=x,x=null):T=x.sibling;var C=v(I,x,E.value,j);if(C===null){x===null&&(x=T);break}t&&x&&C.alternate===null&&e(I,x),w=i(C,w,g),M===null?O=C:M.sibling=C,M=C,x=T}if(E.done)return n(I,x),ke&&ur(I,g),O;if(x===null){for(;!E.done;g++,E=k.next())E=y(I,E.value,j),E!==null&&(w=i(E,w,g),M===null?O=E:M.sibling=E,M=E);return ke&&ur(I,g),O}for(x=r(I,x);!E.done;g++,E=k.next())E=S(x,I,g,E.value,j),E!==null&&(t&&E.alternate!==null&&x.delete(E.key===null?g:E.key),w=i(E,w,g),M===null?O=E:M.sibling=E,M=E);return t&&x.forEach(function(N){return e(I,N)}),ke&&ur(I,g),O}function P(I,w,k,j){if(typeof k=="object"&&k!==null&&k.type===qr&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case bo:e:{for(var O=k.key,M=w;M!==null;){if(M.key===O){if(O=k.type,O===qr){if(M.tag===7){n(I,M.sibling),w=s(M,k.props.children),w.return=I,I=w;break e}}else if(M.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===An&&Zf(O)===M.type){n(I,M.sibling),w=s(M,k.props),w.ref=Zs(I,M,k),w.return=I,I=w;break e}n(I,M);break}else e(I,M);M=M.sibling}k.type===qr?(w=yr(k.props.children,I.mode,j,k.key),w.return=I,I=w):(j=aa(k.type,k.key,k.props,null,I.mode,j),j.ref=Zs(I,w,k),j.return=I,I=j)}return a(I);case $r:e:{for(M=k.key;w!==null;){if(w.key===M)if(w.tag===4&&w.stateNode.containerInfo===k.containerInfo&&w.stateNode.implementation===k.implementation){n(I,w.sibling),w=s(w,k.children||[]),w.return=I,I=w;break e}else{n(I,w);break}else e(I,w);w=w.sibling}w=yu(k,I.mode,j),w.return=I,I=w}return a(I);case An:return M=k._init,P(I,w,M(k._payload),j)}if(si(k))return A(I,w,k,j);if(Ks(k))return b(I,w,k,j);Uo(I,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,w!==null&&w.tag===6?(n(I,w.sibling),w=s(w,k),w.return=I,I=w):(n(I,w),w=gu(k,I.mode,j),w.return=I,I=w),a(I)):n(I,w)}return P}var ds=Bg(!0),$g=Bg(!1),Sa=nr(null),Ca=null,Jr=null,fh=null;function ph(){fh=Jr=Ca=null}function mh(t){var e=Sa.current;Ie(Sa),t._currentValue=e}function nc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function is(t,e){Ca=t,fh=Jr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wt=!0),t.firstContext=null)}function Ft(t){var e=t._currentValue;if(fh!==t)if(t={context:t,memoizedValue:e,next:null},Jr===null){if(Ca===null)throw Error(U(308));Jr=t,Ca.dependencies={lanes:0,firstContext:t}}else Jr=Jr.next=t;return e}var fr=null;function gh(t){fr===null?fr=[t]:fr.push(t)}function qg(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,gh(e)):(n.next=s.next,s.next=n),e.interleaved=n,vn(t,r)}function vn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var bn=!1;function yh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function mn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function zn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,vn(t,n)}return s=r.interleaved,s===null?(e.next=e,gh(r)):(e.next=s.next,s.next=e),r.interleaved=e,vn(t,n)}function ta(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,nh(t,n)}}function ep(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Na(t,e,n,r){var s=t.updateQueue;bn=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,a===null?i=d:a.next=d,a=u;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==a&&(l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=u))}if(i!==null){var y=s.baseState;a=0,p=d=u=null,l=i;do{var v=l.lane,S=l.eventTime;if((r&v)===v){p!==null&&(p=p.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var A=t,b=l;switch(v=e,S=n,b.tag){case 1:if(A=b.payload,typeof A=="function"){y=A.call(S,y,v);break e}y=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=b.payload,v=typeof A=="function"?A.call(S,y,v):A,v==null)break e;y=Ae({},y,v);break e;case 2:bn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,v=s.effects,v===null?s.effects=[l]:v.push(l))}else S={eventTime:S,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(d=p=S,u=y):p=p.next=S,a|=v;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;v=l,l=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(p===null&&(u=y),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Tr|=a,t.lanes=a,t.memoizedState=y}}function tp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var so={},tn=nr(so),Mi=nr(so),Oi=nr(so);function pr(t){if(t===so)throw Error(U(174));return t}function vh(t,e){switch(we(Oi,e),we(Mi,t),we(tn,so),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Mu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Mu(e,t)}Ie(tn),we(tn,e)}function fs(){Ie(tn),Ie(Mi),Ie(Oi)}function Gg(t){pr(Oi.current);var e=pr(tn.current),n=Mu(e,t.type);e!==n&&(we(Mi,t),we(tn,n))}function _h(t){Mi.current===t&&(Ie(tn),Ie(Mi))}var Ce=nr(0);function Aa(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var cu=[];function xh(){for(var t=0;t<cu.length;t++)cu[t]._workInProgressVersionPrimary=null;cu.length=0}var na=Tn.ReactCurrentDispatcher,hu=Tn.ReactCurrentBatchConfig,Er=0,Ne=null,Le=null,$e=null,ba=!1,gi=!1,Li=0,H1=0;function st(){throw Error(U(321))}function wh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Kt(t[n],e[n]))return!1;return!0}function Eh(t,e,n,r,s,i){if(Er=i,Ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,na.current=t===null||t.memoizedState===null?Q1:Y1,t=n(r,s),gi){i=0;do{if(gi=!1,Li=0,25<=i)throw Error(U(301));i+=1,$e=Le=null,e.updateQueue=null,na.current=X1,t=n(r,s)}while(gi)}if(na.current=Ra,e=Le!==null&&Le.next!==null,Er=0,$e=Le=Ne=null,ba=!1,e)throw Error(U(300));return t}function Th(){var t=Li!==0;return Li=0,t}function Jt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?Ne.memoizedState=$e=t:$e=$e.next=t,$e}function zt(){if(Le===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=Le.next;var e=$e===null?Ne.memoizedState:$e.next;if(e!==null)$e=e,Le=t;else{if(t===null)throw Error(U(310));Le=t,t={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},$e===null?Ne.memoizedState=$e=t:$e=$e.next=t}return $e}function Fi(t,e){return typeof e=="function"?e(t):e}function du(t){var e=zt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Le,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,u=null,d=i;do{var p=d.lane;if((Er&p)===p)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var y={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=y,a=r):u=u.next=y,Ne.lanes|=p,Tr|=p}d=d.next}while(d!==null&&d!==i);u===null?a=r:u.next=l,Kt(r,e.memoizedState)||(wt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ne.lanes|=i,Tr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function fu(t){var e=zt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Kt(i,e.memoizedState)||(wt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Wg(){}function Kg(t,e){var n=Ne,r=zt(),s=e(),i=!Kt(r.memoizedState,s);if(i&&(r.memoizedState=s,wt=!0),r=r.queue,Ih(Xg.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||$e!==null&&$e.memoizedState.tag&1){if(n.flags|=2048,zi(9,Yg.bind(null,n,r,s,e),void 0,null),qe===null)throw Error(U(349));Er&30||Qg(n,e,s)}return s}function Qg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Yg(t,e,n,r){e.value=n,e.getSnapshot=r,Jg(e)&&Zg(t)}function Xg(t,e,n){return n(function(){Jg(e)&&Zg(t)})}function Jg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Kt(t,n)}catch{return!0}}function Zg(t){var e=vn(t,1);e!==null&&Wt(e,t,1,-1)}function np(t){var e=Jt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:t},e.queue=t,t=t.dispatch=K1.bind(null,Ne,t),[e.memoizedState,t]}function zi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ey(){return zt().memoizedState}function ra(t,e,n,r){var s=Jt();Ne.flags|=t,s.memoizedState=zi(1|e,n,void 0,r===void 0?null:r)}function rl(t,e,n,r){var s=zt();r=r===void 0?null:r;var i=void 0;if(Le!==null){var a=Le.memoizedState;if(i=a.destroy,r!==null&&wh(r,a.deps)){s.memoizedState=zi(e,n,i,r);return}}Ne.flags|=t,s.memoizedState=zi(1|e,n,i,r)}function rp(t,e){return ra(8390656,8,t,e)}function Ih(t,e){return rl(2048,8,t,e)}function ty(t,e){return rl(4,2,t,e)}function ny(t,e){return rl(4,4,t,e)}function ry(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function sy(t,e,n){return n=n!=null?n.concat([t]):null,rl(4,4,ry.bind(null,e,t),n)}function kh(){}function iy(t,e){var n=zt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function oy(t,e){var n=zt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ay(t,e,n){return Er&21?(Kt(n,e)||(n=dg(),Ne.lanes|=n,Tr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wt=!0),t.memoizedState=n)}function G1(t,e){var n=ye;ye=n!==0&&4>n?n:4,t(!0);var r=hu.transition;hu.transition={};try{t(!1),e()}finally{ye=n,hu.transition=r}}function ly(){return zt().memoizedState}function W1(t,e,n){var r=Bn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},uy(t))cy(e,n);else if(n=qg(t,e,n,r),n!==null){var s=mt();Wt(n,t,r,s),hy(n,e,r)}}function K1(t,e,n){var r=Bn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(uy(t))cy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Kt(l,a)){var u=e.interleaved;u===null?(s.next=s,gh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=qg(t,e,s,r),n!==null&&(s=mt(),Wt(n,t,r,s),hy(n,e,r))}}function uy(t){var e=t.alternate;return t===Ne||e!==null&&e===Ne}function cy(t,e){gi=ba=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function hy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,nh(t,n)}}var Ra={readContext:Ft,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useInsertionEffect:st,useLayoutEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useMutableSource:st,useSyncExternalStore:st,useId:st,unstable_isNewReconciler:!1},Q1={readContext:Ft,useCallback:function(t,e){return Jt().memoizedState=[t,e===void 0?null:e],t},useContext:Ft,useEffect:rp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ra(4194308,4,ry.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ra(4194308,4,t,e)},useInsertionEffect:function(t,e){return ra(4,2,t,e)},useMemo:function(t,e){var n=Jt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Jt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=W1.bind(null,Ne,t),[r.memoizedState,t]},useRef:function(t){var e=Jt();return t={current:t},e.memoizedState=t},useState:np,useDebugValue:kh,useDeferredValue:function(t){return Jt().memoizedState=t},useTransition:function(){var t=np(!1),e=t[0];return t=G1.bind(null,t[1]),Jt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ne,s=Jt();if(ke){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),qe===null)throw Error(U(349));Er&30||Qg(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,rp(Xg.bind(null,r,i,t),[t]),r.flags|=2048,zi(9,Yg.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Jt(),e=qe.identifierPrefix;if(ke){var n=pn,r=fn;n=(r&~(1<<32-Gt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Li++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=H1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Y1={readContext:Ft,useCallback:iy,useContext:Ft,useEffect:Ih,useImperativeHandle:sy,useInsertionEffect:ty,useLayoutEffect:ny,useMemo:oy,useReducer:du,useRef:ey,useState:function(){return du(Fi)},useDebugValue:kh,useDeferredValue:function(t){var e=zt();return ay(e,Le.memoizedState,t)},useTransition:function(){var t=du(Fi)[0],e=zt().memoizedState;return[t,e]},useMutableSource:Wg,useSyncExternalStore:Kg,useId:ly,unstable_isNewReconciler:!1},X1={readContext:Ft,useCallback:iy,useContext:Ft,useEffect:Ih,useImperativeHandle:sy,useInsertionEffect:ty,useLayoutEffect:ny,useMemo:oy,useReducer:fu,useRef:ey,useState:function(){return fu(Fi)},useDebugValue:kh,useDeferredValue:function(t){var e=zt();return Le===null?e.memoizedState=t:ay(e,Le.memoizedState,t)},useTransition:function(){var t=fu(Fi)[0],e=zt().memoizedState;return[t,e]},useMutableSource:Wg,useSyncExternalStore:Kg,useId:ly,unstable_isNewReconciler:!1};function $t(t,e){if(t&&t.defaultProps){e=Ae({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function rc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ae({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var sl={isMounted:function(t){return(t=t._reactInternals)?br(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=mt(),s=Bn(t),i=mn(r,s);i.payload=e,n!=null&&(i.callback=n),e=zn(t,i,s),e!==null&&(Wt(e,t,s,r),ta(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=mt(),s=Bn(t),i=mn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=zn(t,i,s),e!==null&&(Wt(e,t,s,r),ta(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=mt(),r=Bn(t),s=mn(n,r);s.tag=2,e!=null&&(s.callback=e),e=zn(t,s,r),e!==null&&(Wt(e,t,r,n),ta(e,t,r))}};function sp(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Pi(n,r)||!Pi(s,i):!0}function dy(t,e,n){var r=!1,s=Yn,i=e.contextType;return typeof i=="object"&&i!==null?i=Ft(i):(s=Tt(e)?xr:ct.current,r=e.contextTypes,i=(r=r!=null)?cs(t,s):Yn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=sl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function ip(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&sl.enqueueReplaceState(e,e.state,null)}function sc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},yh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ft(i):(i=Tt(e)?xr:ct.current,s.context=cs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(rc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&sl.enqueueReplaceState(s,s.state,null),Na(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ps(t,e){try{var n="",r=e;do n+=k_(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function pu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ic(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var J1=typeof WeakMap=="function"?WeakMap:Map;function fy(t,e,n){n=mn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ja||(ja=!0,mc=r),ic(t,e)},n}function py(t,e,n){n=mn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){ic(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ic(t,e),typeof r!="function"&&(Un===null?Un=new Set([this]):Un.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function op(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new J1;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=dx.bind(null,t,e,n),e.then(t,t))}function ap(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function lp(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=mn(-1,1),e.tag=2,zn(n,e,1))),n.lanes|=1),t)}var Z1=Tn.ReactCurrentOwner,wt=!1;function pt(t,e,n,r){e.child=t===null?$g(e,null,n,r):ds(e,t.child,n,r)}function up(t,e,n,r,s){n=n.render;var i=e.ref;return is(e,s),r=Eh(t,e,n,r,i,s),n=Th(),t!==null&&!wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,_n(t,e,s)):(ke&&n&&ch(e),e.flags|=1,pt(t,e,r,s),e.child)}function cp(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!jh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,my(t,e,i,r,s)):(t=aa(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Pi,n(a,r)&&t.ref===e.ref)return _n(t,e,s)}return e.flags|=1,t=$n(i,r),t.ref=e.ref,t.return=e,e.child=t}function my(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Pi(i,r)&&t.ref===e.ref)if(wt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(wt=!0);else return e.lanes=t.lanes,_n(t,e,s)}return oc(t,e,n,r,s)}function gy(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(es,Ct),Ct|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,we(es,Ct),Ct|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,we(es,Ct),Ct|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,we(es,Ct),Ct|=r;return pt(t,e,s,n),e.child}function yy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function oc(t,e,n,r,s){var i=Tt(n)?xr:ct.current;return i=cs(e,i),is(e,s),n=Eh(t,e,n,r,i,s),r=Th(),t!==null&&!wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,_n(t,e,s)):(ke&&r&&ch(e),e.flags|=1,pt(t,e,n,s),e.child)}function hp(t,e,n,r,s){if(Tt(n)){var i=!0;Ta(e)}else i=!1;if(is(e,s),e.stateNode===null)sa(t,e),dy(e,n,r),sc(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Ft(d):(d=Tt(n)?xr:ct.current,d=cs(e,d));var p=n.getDerivedStateFromProps,y=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";y||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==d)&&ip(e,a,r,d),bn=!1;var v=e.memoizedState;a.state=v,Na(e,r,a,s),u=e.memoizedState,l!==r||v!==u||Et.current||bn?(typeof p=="function"&&(rc(e,n,p,r),u=e.memoizedState),(l=bn||sp(e,n,l,r,v,u,d))?(y||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=d,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Hg(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:$t(e.type,l),a.props=d,y=e.pendingProps,v=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ft(u):(u=Tt(n)?xr:ct.current,u=cs(e,u));var S=n.getDerivedStateFromProps;(p=typeof S=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==y||v!==u)&&ip(e,a,r,u),bn=!1,v=e.memoizedState,a.state=v,Na(e,r,a,s);var A=e.memoizedState;l!==y||v!==A||Et.current||bn?(typeof S=="function"&&(rc(e,n,S,r),A=e.memoizedState),(d=bn||sp(e,n,d,r,v,A,u)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,A,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,A,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=A),a.props=r,a.state=A,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return ac(t,e,n,r,i,s)}function ac(t,e,n,r,s,i){yy(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Yf(e,n,!1),_n(t,e,i);r=e.stateNode,Z1.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=ds(e,t.child,null,i),e.child=ds(e,null,l,i)):pt(t,e,l,i),e.memoizedState=r.state,s&&Yf(e,n,!0),e.child}function vy(t){var e=t.stateNode;e.pendingContext?Qf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Qf(t,e.context,!1),vh(t,e.containerInfo)}function dp(t,e,n,r,s){return hs(),dh(s),e.flags|=256,pt(t,e,n,r),e.child}var lc={dehydrated:null,treeContext:null,retryLane:0};function uc(t){return{baseLanes:t,cachePool:null,transitions:null}}function _y(t,e,n){var r=e.pendingProps,s=Ce.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),we(Ce,s&1),t===null)return tc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=al(a,r,0,null),t=yr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=uc(n),e.memoizedState=lc,t):Sh(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return ex(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=$n(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=$n(l,i):(i=yr(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?uc(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=lc,r}return i=t.child,t=i.sibling,r=$n(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Sh(t,e){return e=al({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Bo(t,e,n,r){return r!==null&&dh(r),ds(e,t.child,null,n),t=Sh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ex(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=pu(Error(U(422))),Bo(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=al({mode:"visible",children:r.children},s,0,null),i=yr(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ds(e,t.child,null,a),e.child.memoizedState=uc(a),e.memoizedState=lc,i);if(!(e.mode&1))return Bo(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(U(419)),r=pu(i,r,void 0),Bo(t,e,a,r)}if(l=(a&t.childLanes)!==0,wt||l){if(r=qe,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,vn(t,s),Wt(r,t,s,-1))}return Ph(),r=pu(Error(U(421))),Bo(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=fx.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Nt=Fn(s.nextSibling),bt=e,ke=!0,Ht=null,t!==null&&(Dt[Mt++]=fn,Dt[Mt++]=pn,Dt[Mt++]=wr,fn=t.id,pn=t.overflow,wr=e),e=Sh(e,r.children),e.flags|=4096,e)}function fp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),nc(t.return,e,n)}function mu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function xy(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(pt(t,e,r.children,n),r=Ce.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fp(t,n,e);else if(t.tag===19)fp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(we(Ce,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Aa(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),mu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Aa(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}mu(e,!0,n,null,i);break;case"together":mu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function sa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function _n(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Tr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=$n(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=$n(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function tx(t,e,n){switch(e.tag){case 3:vy(e),hs();break;case 5:Gg(e);break;case 1:Tt(e.type)&&Ta(e);break;case 4:vh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;we(Sa,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(we(Ce,Ce.current&1),e.flags|=128,null):n&e.child.childLanes?_y(t,e,n):(we(Ce,Ce.current&1),t=_n(t,e,n),t!==null?t.sibling:null);we(Ce,Ce.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return xy(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),we(Ce,Ce.current),r)break;return null;case 22:case 23:return e.lanes=0,gy(t,e,n)}return _n(t,e,n)}var wy,cc,Ey,Ty;wy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};cc=function(){};Ey=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,pr(tn.current);var i=null;switch(n){case"input":s=Pu(t,s),r=Pu(t,r),i=[];break;case"select":s=Ae({},s,{value:void 0}),r=Ae({},r,{value:void 0}),i=[];break;case"textarea":s=Du(t,s),r=Du(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=wa)}Ou(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ki.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ki.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Te("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Ty=function(t,e,n,r){n!==r&&(e.flags|=4)};function ei(t,e){if(!ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function it(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function nx(t,e,n){var r=e.pendingProps;switch(hh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(e),null;case 1:return Tt(e.type)&&Ea(),it(e),null;case 3:return r=e.stateNode,fs(),Ie(Et),Ie(ct),xh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(zo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ht!==null&&(vc(Ht),Ht=null))),cc(t,e),it(e),null;case 5:_h(e);var s=pr(Oi.current);if(n=e.type,t!==null&&e.stateNode!=null)Ey(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return it(e),null}if(t=pr(tn.current),zo(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Zt]=e,r[Di]=i,t=(e.mode&1)!==0,n){case"dialog":Te("cancel",r),Te("close",r);break;case"iframe":case"object":case"embed":Te("load",r);break;case"video":case"audio":for(s=0;s<oi.length;s++)Te(oi[s],r);break;case"source":Te("error",r);break;case"img":case"image":case"link":Te("error",r),Te("load",r);break;case"details":Te("toggle",r);break;case"input":Ef(r,i),Te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Te("invalid",r);break;case"textarea":If(r,i),Te("invalid",r)}Ou(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Fo(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Fo(r.textContent,l,t),s=["children",""+l]):ki.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Te("scroll",r)}switch(n){case"input":Ro(r),Tf(r,i,!0);break;case"textarea":Ro(r),kf(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=wa)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Xm(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Zt]=e,t[Di]=r,wy(t,e,!1,!1),e.stateNode=t;e:{switch(a=Lu(n,r),n){case"dialog":Te("cancel",t),Te("close",t),s=r;break;case"iframe":case"object":case"embed":Te("load",t),s=r;break;case"video":case"audio":for(s=0;s<oi.length;s++)Te(oi[s],t);s=r;break;case"source":Te("error",t),s=r;break;case"img":case"image":case"link":Te("error",t),Te("load",t),s=r;break;case"details":Te("toggle",t),s=r;break;case"input":Ef(t,r),s=Pu(t,r),Te("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ae({},r,{value:void 0}),Te("invalid",t);break;case"textarea":If(t,r),s=Du(t,r),Te("invalid",t);break;default:s=r}Ou(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?eg(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Jm(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Si(t,u):typeof u=="number"&&Si(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ki.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Te("scroll",t):u!=null&&Yc(t,i,u,a))}switch(n){case"input":Ro(t),Tf(t,r,!1);break;case"textarea":Ro(t),kf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Qn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ts(t,!!r.multiple,i,!1):r.defaultValue!=null&&ts(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=wa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return it(e),null;case 6:if(t&&e.stateNode!=null)Ty(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=pr(Oi.current),pr(tn.current),zo(e)){if(r=e.stateNode,n=e.memoizedProps,r[Zt]=e,(i=r.nodeValue!==n)&&(t=bt,t!==null))switch(t.tag){case 3:Fo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fo(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Zt]=e,e.stateNode=r}return it(e),null;case 13:if(Ie(Ce),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ke&&Nt!==null&&e.mode&1&&!(e.flags&128))Ug(),hs(),e.flags|=98560,i=!1;else if(i=zo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[Zt]=e}else hs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;it(e),i=!1}else Ht!==null&&(vc(Ht),Ht=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ce.current&1?ze===0&&(ze=3):Ph())),e.updateQueue!==null&&(e.flags|=4),it(e),null);case 4:return fs(),cc(t,e),t===null&&ji(e.stateNode.containerInfo),it(e),null;case 10:return mh(e.type._context),it(e),null;case 17:return Tt(e.type)&&Ea(),it(e),null;case 19:if(Ie(Ce),i=e.memoizedState,i===null)return it(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)ei(i,!1);else{if(ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Aa(t),a!==null){for(e.flags|=128,ei(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return we(Ce,Ce.current&1|2),e.child}t=t.sibling}i.tail!==null&&De()>ms&&(e.flags|=128,r=!0,ei(i,!1),e.lanes=4194304)}else{if(!r)if(t=Aa(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ei(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!ke)return it(e),null}else 2*De()-i.renderingStartTime>ms&&n!==1073741824&&(e.flags|=128,r=!0,ei(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=De(),e.sibling=null,n=Ce.current,we(Ce,r?n&1|2:n&1),e):(it(e),null);case 22:case 23:return Rh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ct&1073741824&&(it(e),e.subtreeFlags&6&&(e.flags|=8192)):it(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function rx(t,e){switch(hh(e),e.tag){case 1:return Tt(e.type)&&Ea(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return fs(),Ie(Et),Ie(ct),xh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return _h(e),null;case 13:if(Ie(Ce),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));hs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ie(Ce),null;case 4:return fs(),null;case 10:return mh(e.type._context),null;case 22:case 23:return Rh(),null;case 24:return null;default:return null}}var $o=!1,lt=!1,sx=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Zr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pe(t,e,r)}else n.current=null}function hc(t,e,n){try{n()}catch(r){Pe(t,e,r)}}var pp=!1;function ix(t,e){if(Ku=va,t=Ng(),uh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,d=0,p=0,y=t,v=null;t:for(;;){for(var S;y!==n||s!==0&&y.nodeType!==3||(l=a+s),y!==i||r!==0&&y.nodeType!==3||(u=a+r),y.nodeType===3&&(a+=y.nodeValue.length),(S=y.firstChild)!==null;)v=y,y=S;for(;;){if(y===t)break t;if(v===n&&++d===s&&(l=a),v===i&&++p===r&&(u=a),(S=y.nextSibling)!==null)break;y=v,v=y.parentNode}y=S}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qu={focusedElem:t,selectionRange:n},va=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var A=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var b=A.memoizedProps,P=A.memoizedState,I=e.stateNode,w=I.getSnapshotBeforeUpdate(e.elementType===e.type?b:$t(e.type,b),P);I.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(j){Pe(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return A=pp,pp=!1,A}function yi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&hc(e,n,i)}s=s.next}while(s!==r)}}function il(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function dc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Iy(t){var e=t.alternate;e!==null&&(t.alternate=null,Iy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Zt],delete e[Di],delete e[Ju],delete e[U1],delete e[B1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ky(t){return t.tag===5||t.tag===3||t.tag===4}function mp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ky(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=wa));else if(r!==4&&(t=t.child,t!==null))for(fc(t,e,n),t=t.sibling;t!==null;)fc(t,e,n),t=t.sibling}function pc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(pc(t,e,n),t=t.sibling;t!==null;)pc(t,e,n),t=t.sibling}var Ke=null,qt=!1;function Nn(t,e,n){for(n=n.child;n!==null;)Sy(t,e,n),n=n.sibling}function Sy(t,e,n){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(Xa,n)}catch{}switch(n.tag){case 5:lt||Zr(n,e);case 6:var r=Ke,s=qt;Ke=null,Nn(t,e,n),Ke=r,qt=s,Ke!==null&&(qt?(t=Ke,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ke.removeChild(n.stateNode));break;case 18:Ke!==null&&(qt?(t=Ke,n=n.stateNode,t.nodeType===8?lu(t.parentNode,n):t.nodeType===1&&lu(t,n),bi(t)):lu(Ke,n.stateNode));break;case 4:r=Ke,s=qt,Ke=n.stateNode.containerInfo,qt=!0,Nn(t,e,n),Ke=r,qt=s;break;case 0:case 11:case 14:case 15:if(!lt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&hc(n,e,a),s=s.next}while(s!==r)}Nn(t,e,n);break;case 1:if(!lt&&(Zr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Pe(n,e,l)}Nn(t,e,n);break;case 21:Nn(t,e,n);break;case 22:n.mode&1?(lt=(r=lt)||n.memoizedState!==null,Nn(t,e,n),lt=r):Nn(t,e,n);break;default:Nn(t,e,n)}}function gp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new sx),e.forEach(function(r){var s=px.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Bt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Ke=l.stateNode,qt=!1;break e;case 3:Ke=l.stateNode.containerInfo,qt=!0;break e;case 4:Ke=l.stateNode.containerInfo,qt=!0;break e}l=l.return}if(Ke===null)throw Error(U(160));Sy(i,a,s),Ke=null,qt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Pe(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Cy(e,t),e=e.sibling}function Cy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Bt(e,t),Xt(t),r&4){try{yi(3,t,t.return),il(3,t)}catch(b){Pe(t,t.return,b)}try{yi(5,t,t.return)}catch(b){Pe(t,t.return,b)}}break;case 1:Bt(e,t),Xt(t),r&512&&n!==null&&Zr(n,n.return);break;case 5:if(Bt(e,t),Xt(t),r&512&&n!==null&&Zr(n,n.return),t.flags&32){var s=t.stateNode;try{Si(s,"")}catch(b){Pe(t,t.return,b)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Qm(s,i),Lu(l,a);var d=Lu(l,i);for(a=0;a<u.length;a+=2){var p=u[a],y=u[a+1];p==="style"?eg(s,y):p==="dangerouslySetInnerHTML"?Jm(s,y):p==="children"?Si(s,y):Yc(s,p,y,d)}switch(l){case"input":ju(s,i);break;case"textarea":Ym(s,i);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var S=i.value;S!=null?ts(s,!!i.multiple,S,!1):v!==!!i.multiple&&(i.defaultValue!=null?ts(s,!!i.multiple,i.defaultValue,!0):ts(s,!!i.multiple,i.multiple?[]:"",!1))}s[Di]=i}catch(b){Pe(t,t.return,b)}}break;case 6:if(Bt(e,t),Xt(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(b){Pe(t,t.return,b)}}break;case 3:if(Bt(e,t),Xt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{bi(e.containerInfo)}catch(b){Pe(t,t.return,b)}break;case 4:Bt(e,t),Xt(t);break;case 13:Bt(e,t),Xt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Ah=De())),r&4&&gp(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(lt=(d=lt)||p,Bt(e,t),lt=d):Bt(e,t),Xt(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for(Q=t,p=t.child;p!==null;){for(y=Q=p;Q!==null;){switch(v=Q,S=v.child,v.tag){case 0:case 11:case 14:case 15:yi(4,v,v.return);break;case 1:Zr(v,v.return);var A=v.stateNode;if(typeof A.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,A.props=e.memoizedProps,A.state=e.memoizedState,A.componentWillUnmount()}catch(b){Pe(r,n,b)}}break;case 5:Zr(v,v.return);break;case 22:if(v.memoizedState!==null){vp(y);continue}}S!==null?(S.return=v,Q=S):vp(y)}p=p.sibling}e:for(p=null,y=t;;){if(y.tag===5){if(p===null){p=y;try{s=y.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=y.stateNode,u=y.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Zm("display",a))}catch(b){Pe(t,t.return,b)}}}else if(y.tag===6){if(p===null)try{y.stateNode.nodeValue=d?"":y.memoizedProps}catch(b){Pe(t,t.return,b)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;p===y&&(p=null),y=y.return}p===y&&(p=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Bt(e,t),Xt(t),r&4&&gp(t);break;case 21:break;default:Bt(e,t),Xt(t)}}function Xt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ky(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Si(s,""),r.flags&=-33);var i=mp(t);pc(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=mp(t);fc(t,l,a);break;default:throw Error(U(161))}}catch(u){Pe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ox(t,e,n){Q=t,Ny(t)}function Ny(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var s=Q,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||$o;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||lt;l=$o;var d=lt;if($o=a,(lt=u)&&!d)for(Q=s;Q!==null;)a=Q,u=a.child,a.tag===22&&a.memoizedState!==null?_p(s):u!==null?(u.return=a,Q=u):_p(s);for(;i!==null;)Q=i,Ny(i),i=i.sibling;Q=s,$o=l,lt=d}yp(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Q=i):yp(t)}}function yp(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:lt||il(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!lt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:$t(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&tp(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}tp(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var y=p.dehydrated;y!==null&&bi(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}lt||e.flags&512&&dc(e)}catch(v){Pe(e,e.return,v)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function vp(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function _p(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{il(4,e)}catch(u){Pe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Pe(e,s,u)}}var i=e.return;try{dc(e)}catch(u){Pe(e,i,u)}break;case 5:var a=e.return;try{dc(e)}catch(u){Pe(e,a,u)}}}catch(u){Pe(e,e.return,u)}if(e===t){Q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Q=l;break}Q=e.return}}var ax=Math.ceil,Pa=Tn.ReactCurrentDispatcher,Ch=Tn.ReactCurrentOwner,Lt=Tn.ReactCurrentBatchConfig,fe=0,qe=null,Oe=null,Xe=0,Ct=0,es=nr(0),ze=0,Ui=null,Tr=0,ol=0,Nh=0,vi=null,_t=null,Ah=0,ms=1/0,cn=null,ja=!1,mc=null,Un=null,qo=!1,Vn=null,Va=0,_i=0,gc=null,ia=-1,oa=0;function mt(){return fe&6?De():ia!==-1?ia:ia=De()}function Bn(t){return t.mode&1?fe&2&&Xe!==0?Xe&-Xe:q1.transition!==null?(oa===0&&(oa=dg()),oa):(t=ye,t!==0||(t=window.event,t=t===void 0?16:_g(t.type)),t):1}function Wt(t,e,n,r){if(50<_i)throw _i=0,gc=null,Error(U(185));to(t,n,r),(!(fe&2)||t!==qe)&&(t===qe&&(!(fe&2)&&(ol|=n),ze===4&&Pn(t,Xe)),It(t,r),n===1&&fe===0&&!(e.mode&1)&&(ms=De()+500,nl&&rr()))}function It(t,e){var n=t.callbackNode;q_(t,e);var r=ya(t,t===qe?Xe:0);if(r===0)n!==null&&Nf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Nf(n),e===1)t.tag===0?$1(xp.bind(null,t)):Lg(xp.bind(null,t)),F1(function(){!(fe&6)&&rr()}),n=null;else{switch(fg(r)){case 1:n=th;break;case 4:n=cg;break;case 16:n=ga;break;case 536870912:n=hg;break;default:n=ga}n=My(n,Ay.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ay(t,e){if(ia=-1,oa=0,fe&6)throw Error(U(327));var n=t.callbackNode;if(os()&&t.callbackNode!==n)return null;var r=ya(t,t===qe?Xe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Da(t,r);else{e=r;var s=fe;fe|=2;var i=Ry();(qe!==t||Xe!==e)&&(cn=null,ms=De()+500,gr(t,e));do try{cx();break}catch(l){by(t,l)}while(!0);ph(),Pa.current=i,fe=s,Oe!==null?e=0:(qe=null,Xe=0,e=ze)}if(e!==0){if(e===2&&(s=$u(t),s!==0&&(r=s,e=yc(t,s))),e===1)throw n=Ui,gr(t,0),Pn(t,r),It(t,De()),n;if(e===6)Pn(t,r);else{if(s=t.current.alternate,!(r&30)&&!lx(s)&&(e=Da(t,r),e===2&&(i=$u(t),i!==0&&(r=i,e=yc(t,i))),e===1))throw n=Ui,gr(t,0),Pn(t,r),It(t,De()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:cr(t,_t,cn);break;case 3:if(Pn(t,r),(r&130023424)===r&&(e=Ah+500-De(),10<e)){if(ya(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){mt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Xu(cr.bind(null,t,_t,cn),e);break}cr(t,_t,cn);break;case 4:if(Pn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Gt(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=De()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ax(r/1960))-r,10<r){t.timeoutHandle=Xu(cr.bind(null,t,_t,cn),r);break}cr(t,_t,cn);break;case 5:cr(t,_t,cn);break;default:throw Error(U(329))}}}return It(t,De()),t.callbackNode===n?Ay.bind(null,t):null}function yc(t,e){var n=vi;return t.current.memoizedState.isDehydrated&&(gr(t,e).flags|=256),t=Da(t,e),t!==2&&(e=_t,_t=n,e!==null&&vc(e)),t}function vc(t){_t===null?_t=t:_t.push.apply(_t,t)}function lx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Kt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Pn(t,e){for(e&=~Nh,e&=~ol,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Gt(e),r=1<<n;t[n]=-1,e&=~r}}function xp(t){if(fe&6)throw Error(U(327));os();var e=ya(t,0);if(!(e&1))return It(t,De()),null;var n=Da(t,e);if(t.tag!==0&&n===2){var r=$u(t);r!==0&&(e=r,n=yc(t,r))}if(n===1)throw n=Ui,gr(t,0),Pn(t,e),It(t,De()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,cr(t,_t,cn),It(t,De()),null}function bh(t,e){var n=fe;fe|=1;try{return t(e)}finally{fe=n,fe===0&&(ms=De()+500,nl&&rr())}}function Ir(t){Vn!==null&&Vn.tag===0&&!(fe&6)&&os();var e=fe;fe|=1;var n=Lt.transition,r=ye;try{if(Lt.transition=null,ye=1,t)return t()}finally{ye=r,Lt.transition=n,fe=e,!(fe&6)&&rr()}}function Rh(){Ct=es.current,Ie(es)}function gr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,L1(n)),Oe!==null)for(n=Oe.return;n!==null;){var r=n;switch(hh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ea();break;case 3:fs(),Ie(Et),Ie(ct),xh();break;case 5:_h(r);break;case 4:fs();break;case 13:Ie(Ce);break;case 19:Ie(Ce);break;case 10:mh(r.type._context);break;case 22:case 23:Rh()}n=n.return}if(qe=t,Oe=t=$n(t.current,null),Xe=Ct=e,ze=0,Ui=null,Nh=ol=Tr=0,_t=vi=null,fr!==null){for(e=0;e<fr.length;e++)if(n=fr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}fr=null}return t}function by(t,e){do{var n=Oe;try{if(ph(),na.current=Ra,ba){for(var r=Ne.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ba=!1}if(Er=0,$e=Le=Ne=null,gi=!1,Li=0,Ch.current=null,n===null||n.return===null){ze=1,Ui=e,Oe=null;break}e:{var i=t,a=n.return,l=n,u=e;if(e=Xe,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,p=l,y=p.tag;if(!(p.mode&1)&&(y===0||y===11||y===15)){var v=p.alternate;v?(p.updateQueue=v.updateQueue,p.memoizedState=v.memoizedState,p.lanes=v.lanes):(p.updateQueue=null,p.memoizedState=null)}var S=ap(a);if(S!==null){S.flags&=-257,lp(S,a,l,i,e),S.mode&1&&op(i,d,e),e=S,u=d;var A=e.updateQueue;if(A===null){var b=new Set;b.add(u),e.updateQueue=b}else A.add(u);break e}else{if(!(e&1)){op(i,d,e),Ph();break e}u=Error(U(426))}}else if(ke&&l.mode&1){var P=ap(a);if(P!==null){!(P.flags&65536)&&(P.flags|=256),lp(P,a,l,i,e),dh(ps(u,l));break e}}i=u=ps(u,l),ze!==4&&(ze=2),vi===null?vi=[i]:vi.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var I=fy(i,u,e);ep(i,I);break e;case 1:l=u;var w=i.type,k=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Un===null||!Un.has(k)))){i.flags|=65536,e&=-e,i.lanes|=e;var j=py(i,l,e);ep(i,j);break e}}i=i.return}while(i!==null)}jy(n)}catch(O){e=O,Oe===n&&n!==null&&(Oe=n=n.return);continue}break}while(!0)}function Ry(){var t=Pa.current;return Pa.current=Ra,t===null?Ra:t}function Ph(){(ze===0||ze===3||ze===2)&&(ze=4),qe===null||!(Tr&268435455)&&!(ol&268435455)||Pn(qe,Xe)}function Da(t,e){var n=fe;fe|=2;var r=Ry();(qe!==t||Xe!==e)&&(cn=null,gr(t,e));do try{ux();break}catch(s){by(t,s)}while(!0);if(ph(),fe=n,Pa.current=r,Oe!==null)throw Error(U(261));return qe=null,Xe=0,ze}function ux(){for(;Oe!==null;)Py(Oe)}function cx(){for(;Oe!==null&&!D_();)Py(Oe)}function Py(t){var e=Dy(t.alternate,t,Ct);t.memoizedProps=t.pendingProps,e===null?jy(t):Oe=e,Ch.current=null}function jy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=rx(n,e),n!==null){n.flags&=32767,Oe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ze=6,Oe=null;return}}else if(n=nx(n,e,Ct),n!==null){Oe=n;return}if(e=e.sibling,e!==null){Oe=e;return}Oe=e=t}while(e!==null);ze===0&&(ze=5)}function cr(t,e,n){var r=ye,s=Lt.transition;try{Lt.transition=null,ye=1,hx(t,e,n,r)}finally{Lt.transition=s,ye=r}return null}function hx(t,e,n,r){do os();while(Vn!==null);if(fe&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(H_(t,i),t===qe&&(Oe=qe=null,Xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||qo||(qo=!0,My(ga,function(){return os(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Lt.transition,Lt.transition=null;var a=ye;ye=1;var l=fe;fe|=4,Ch.current=null,ix(t,n),Cy(n,t),R1(Qu),va=!!Ku,Qu=Ku=null,t.current=n,ox(n),M_(),fe=l,ye=a,Lt.transition=i}else t.current=n;if(qo&&(qo=!1,Vn=t,Va=s),i=t.pendingLanes,i===0&&(Un=null),F_(n.stateNode),It(t,De()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ja)throw ja=!1,t=mc,mc=null,t;return Va&1&&t.tag!==0&&os(),i=t.pendingLanes,i&1?t===gc?_i++:(_i=0,gc=t):_i=0,rr(),null}function os(){if(Vn!==null){var t=fg(Va),e=Lt.transition,n=ye;try{if(Lt.transition=null,ye=16>t?16:t,Vn===null)var r=!1;else{if(t=Vn,Vn=null,Va=0,fe&6)throw Error(U(331));var s=fe;for(fe|=4,Q=t.current;Q!==null;){var i=Q,a=i.child;if(Q.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(Q=d;Q!==null;){var p=Q;switch(p.tag){case 0:case 11:case 15:yi(8,p,i)}var y=p.child;if(y!==null)y.return=p,Q=y;else for(;Q!==null;){p=Q;var v=p.sibling,S=p.return;if(Iy(p),p===d){Q=null;break}if(v!==null){v.return=S,Q=v;break}Q=S}}}var A=i.alternate;if(A!==null){var b=A.child;if(b!==null){A.child=null;do{var P=b.sibling;b.sibling=null,b=P}while(b!==null)}}Q=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,Q=a;else e:for(;Q!==null;){if(i=Q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:yi(9,i,i.return)}var I=i.sibling;if(I!==null){I.return=i.return,Q=I;break e}Q=i.return}}var w=t.current;for(Q=w;Q!==null;){a=Q;var k=a.child;if(a.subtreeFlags&2064&&k!==null)k.return=a,Q=k;else e:for(a=w;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(O){Pe(l,l.return,O)}if(l===a){Q=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,Q=j;break e}Q=l.return}}if(fe=s,rr(),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(Xa,t)}catch{}r=!0}return r}finally{ye=n,Lt.transition=e}}return!1}function wp(t,e,n){e=ps(n,e),e=fy(t,e,1),t=zn(t,e,1),e=mt(),t!==null&&(to(t,1,e),It(t,e))}function Pe(t,e,n){if(t.tag===3)wp(t,t,n);else for(;e!==null;){if(e.tag===3){wp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Un===null||!Un.has(r))){t=ps(n,t),t=py(e,t,1),e=zn(e,t,1),t=mt(),e!==null&&(to(e,1,t),It(e,t));break}}e=e.return}}function dx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=mt(),t.pingedLanes|=t.suspendedLanes&n,qe===t&&(Xe&n)===n&&(ze===4||ze===3&&(Xe&130023424)===Xe&&500>De()-Ah?gr(t,0):Nh|=n),It(t,e)}function Vy(t,e){e===0&&(t.mode&1?(e=Vo,Vo<<=1,!(Vo&130023424)&&(Vo=4194304)):e=1);var n=mt();t=vn(t,e),t!==null&&(to(t,e,n),It(t,n))}function fx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Vy(t,n)}function px(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),Vy(t,n)}var Dy;Dy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Et.current)wt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wt=!1,tx(t,e,n);wt=!!(t.flags&131072)}else wt=!1,ke&&e.flags&1048576&&Fg(e,ka,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;sa(t,e),t=e.pendingProps;var s=cs(e,ct.current);is(e,n),s=Eh(null,e,r,t,s,n);var i=Th();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Tt(r)?(i=!0,Ta(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,yh(e),s.updater=sl,e.stateNode=s,s._reactInternals=e,sc(e,r,t,n),e=ac(null,e,r,!0,i,n)):(e.tag=0,ke&&i&&ch(e),pt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(sa(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=gx(r),t=$t(r,t),s){case 0:e=oc(null,e,r,t,n);break e;case 1:e=hp(null,e,r,t,n);break e;case 11:e=up(null,e,r,t,n);break e;case 14:e=cp(null,e,r,$t(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$t(r,s),oc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$t(r,s),hp(t,e,r,s,n);case 3:e:{if(vy(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Hg(t,e),Na(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ps(Error(U(423)),e),e=dp(t,e,r,n,s);break e}else if(r!==s){s=ps(Error(U(424)),e),e=dp(t,e,r,n,s);break e}else for(Nt=Fn(e.stateNode.containerInfo.firstChild),bt=e,ke=!0,Ht=null,n=$g(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hs(),r===s){e=_n(t,e,n);break e}pt(t,e,r,n)}e=e.child}return e;case 5:return Gg(e),t===null&&tc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,Yu(r,s)?a=null:i!==null&&Yu(r,i)&&(e.flags|=32),yy(t,e),pt(t,e,a,n),e.child;case 6:return t===null&&tc(e),null;case 13:return _y(t,e,n);case 4:return vh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ds(e,null,r,n):pt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$t(r,s),up(t,e,r,s,n);case 7:return pt(t,e,e.pendingProps,n),e.child;case 8:return pt(t,e,e.pendingProps.children,n),e.child;case 12:return pt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,we(Sa,r._currentValue),r._currentValue=a,i!==null)if(Kt(i.value,a)){if(i.children===s.children&&!Et.current){e=_n(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=mn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?u.next=u:(u.next=p.next,p.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),nc(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(U(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),nc(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}pt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,is(e,n),s=Ft(s),r=r(s),e.flags|=1,pt(t,e,r,n),e.child;case 14:return r=e.type,s=$t(r,e.pendingProps),s=$t(r.type,s),cp(t,e,r,s,n);case 15:return my(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$t(r,s),sa(t,e),e.tag=1,Tt(r)?(t=!0,Ta(e)):t=!1,is(e,n),dy(e,r,s),sc(e,r,s,n),ac(null,e,r,!0,t,n);case 19:return xy(t,e,n);case 22:return gy(t,e,n)}throw Error(U(156,e.tag))};function My(t,e){return ug(t,e)}function mx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ot(t,e,n,r){return new mx(t,e,n,r)}function jh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function gx(t){if(typeof t=="function")return jh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Jc)return 11;if(t===Zc)return 14}return 2}function $n(t,e){var n=t.alternate;return n===null?(n=Ot(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function aa(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")jh(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case qr:return yr(n.children,s,i,e);case Xc:a=8,s|=8;break;case Nu:return t=Ot(12,n,e,s|2),t.elementType=Nu,t.lanes=i,t;case Au:return t=Ot(13,n,e,s),t.elementType=Au,t.lanes=i,t;case bu:return t=Ot(19,n,e,s),t.elementType=bu,t.lanes=i,t;case Gm:return al(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case qm:a=10;break e;case Hm:a=9;break e;case Jc:a=11;break e;case Zc:a=14;break e;case An:a=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Ot(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function yr(t,e,n,r){return t=Ot(7,t,r,e),t.lanes=n,t}function al(t,e,n,r){return t=Ot(22,t,r,e),t.elementType=Gm,t.lanes=n,t.stateNode={isHidden:!1},t}function gu(t,e,n){return t=Ot(6,t,null,e),t.lanes=n,t}function yu(t,e,n){return e=Ot(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function yx(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xl(0),this.expirationTimes=Xl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xl(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Vh(t,e,n,r,s,i,a,l,u){return t=new yx(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ot(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},yh(i),t}function vx(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$r,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Oy(t){if(!t)return Yn;t=t._reactInternals;e:{if(br(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Tt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Tt(n))return Og(t,n,e)}return e}function Ly(t,e,n,r,s,i,a,l,u){return t=Vh(n,r,!0,t,s,i,a,l,u),t.context=Oy(null),n=t.current,r=mt(),s=Bn(n),i=mn(r,s),i.callback=e??null,zn(n,i,s),t.current.lanes=s,to(t,s,r),It(t,r),t}function ll(t,e,n,r){var s=e.current,i=mt(),a=Bn(s);return n=Oy(n),e.context===null?e.context=n:e.pendingContext=n,e=mn(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=zn(s,e,a),t!==null&&(Wt(t,s,a,i),ta(t,s,a)),a}function Ma(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ep(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Dh(t,e){Ep(t,e),(t=t.alternate)&&Ep(t,e)}function _x(){return null}var Fy=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mh(t){this._internalRoot=t}ul.prototype.render=Mh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));ll(t,e,null,null)};ul.prototype.unmount=Mh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ir(function(){ll(null,t,null,null)}),e[yn]=null}};function ul(t){this._internalRoot=t}ul.prototype.unstable_scheduleHydration=function(t){if(t){var e=gg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Rn.length&&e!==0&&e<Rn[n].priority;n++);Rn.splice(n,0,t),n===0&&vg(t)}};function Oh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function cl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Tp(){}function xx(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Ma(a);i.call(d)}}var a=Ly(e,r,t,0,null,!1,!1,"",Tp);return t._reactRootContainer=a,t[yn]=a.current,ji(t.nodeType===8?t.parentNode:t),Ir(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Ma(u);l.call(d)}}var u=Vh(t,0,!1,null,null,!1,!1,"",Tp);return t._reactRootContainer=u,t[yn]=u.current,ji(t.nodeType===8?t.parentNode:t),Ir(function(){ll(e,u,n,r)}),u}function hl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var u=Ma(a);l.call(u)}}ll(e,a,t,s)}else a=xx(n,e,t,s,r);return Ma(a)}pg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ii(e.pendingLanes);n!==0&&(nh(e,n|1),It(e,De()),!(fe&6)&&(ms=De()+500,rr()))}break;case 13:Ir(function(){var r=vn(t,1);if(r!==null){var s=mt();Wt(r,t,1,s)}}),Dh(t,1)}};rh=function(t){if(t.tag===13){var e=vn(t,134217728);if(e!==null){var n=mt();Wt(e,t,134217728,n)}Dh(t,134217728)}};mg=function(t){if(t.tag===13){var e=Bn(t),n=vn(t,e);if(n!==null){var r=mt();Wt(n,t,e,r)}Dh(t,e)}};gg=function(){return ye};yg=function(t,e){var n=ye;try{return ye=t,e()}finally{ye=n}};zu=function(t,e,n){switch(e){case"input":if(ju(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=tl(r);if(!s)throw Error(U(90));Km(r),ju(r,s)}}}break;case"textarea":Ym(t,n);break;case"select":e=n.value,e!=null&&ts(t,!!n.multiple,e,!1)}};rg=bh;sg=Ir;var wx={usingClientEntryPoint:!1,Events:[ro,Kr,tl,tg,ng,bh]},ti={findFiberByHostInstance:dr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ex={bundleType:ti.bundleType,version:ti.version,rendererPackageName:ti.rendererPackageName,rendererConfig:ti.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Tn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ag(t),t===null?null:t.stateNode},findFiberByHostInstance:ti.findFiberByHostInstance||_x,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ho=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ho.isDisabled&&Ho.supportsFiber)try{Xa=Ho.inject(Ex),en=Ho}catch{}}jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wx;jt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Oh(e))throw Error(U(200));return vx(t,e,null,n)};jt.createRoot=function(t,e){if(!Oh(t))throw Error(U(299));var n=!1,r="",s=Fy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Vh(t,1,!1,null,null,n,!1,r,s),t[yn]=e.current,ji(t.nodeType===8?t.parentNode:t),new Mh(e)};jt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=ag(e),t=t===null?null:t.stateNode,t};jt.flushSync=function(t){return Ir(t)};jt.hydrate=function(t,e,n){if(!cl(e))throw Error(U(200));return hl(null,t,e,!0,n)};jt.hydrateRoot=function(t,e,n){if(!Oh(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=Fy;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Ly(e,null,t,1,n??null,s,!1,i,a),t[yn]=e.current,ji(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ul(e)};jt.render=function(t,e,n){if(!cl(e))throw Error(U(200));return hl(null,t,e,!1,n)};jt.unmountComponentAtNode=function(t){if(!cl(t))throw Error(U(40));return t._reactRootContainer?(Ir(function(){hl(null,null,t,!1,function(){t._reactRootContainer=null,t[yn]=null})}),!0):!1};jt.unstable_batchedUpdates=bh;jt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!cl(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return hl(t,e,n,!1,r)};jt.version="18.3.1-next-f1338f8080-20240426";function zy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zy)}catch(t){console.error(t)}}zy(),zm.exports=jt;var Tx=zm.exports,Ip=Tx;Su.createRoot=Ip.createRoot,Su.hydrateRoot=Ip.hydrateRoot;var ae=(t=>(t.PLAN="PLAN",t.GUIDE="GUIDE",t.RATE="RATE",t.LISTS="LISTS",t.BOOKINGS="BOOKINGS",t))(ae||{});const dn={apiKey:"AIzaSyD-xMOB9D-d-2DqRW64jIvxRpB7BlAmSWM",authDomain:"tokyo-trip-51592.firebaseapp.com",projectId:"tokyo-trip-51592",storageBucket:"tokyo-trip-51592.firebasestorage.app",messagingSenderId:"1008859950162",appId:"1:1008859950162:web:d53c524e1ea5ef0178838b"},Ix="https://cf.bstatic.com/xdata/images/hotel/max1280x900/223709051.jpg?k=330554157147772a39282361730043586326176161623168233388708453&o=&hp=1",kx="https://cf.bstatic.com/xdata/images/hotel/max1280x900/192534431.jpg?k=069695604111364661858567118181604927237890732801831818507851&o=&hp=1",Sx="https://images.unsplash.com/photo-1558030006-450675393462?auto=format&fit=crop&w=800&q=80",kp=[{id:"f1",type:"flight",title:"",subTitle:"JX804",date:"2025/12/17",details:{from:"TPE",to:"NRT",departTime:"15:00",arriveTime:"19:00",seat:"24A",gate:"--",terminal:" (T1)",counter:"3, 5, 6",baggage:"--"}},{id:"f2",type:"flight",title:"",subTitle:"IT203",date:"2025/12/22",details:{from:"NRT",to:"TPE",departTime:"18:25",arriveTime:"21:50",seat:"12F",gate:"--",terminal:" (T2)",counter:"T",baggage:"--"}},{id:"h1",type:"hotel",title:"",subTitle:"12/17 - 12/20 (3)",date:"2025/12/17",imageUrl:Ix,details:{checkIn:"14:00",checkOut:"12:00",address:"2-6-21",mapLink:"https://maps.app.goo.gl/bxZNMcPWgM31LXa6A"}},{id:"h2",type:"hotel",title:" Resol ",subTitle:"12/20 - 12/22 (2)",date:"2025/12/20",imageUrl:kx,details:{checkIn:"15:00",checkOut:"11:00",address:"2-25-12",mapLink:"https://maps.app.goo.gl/qokbXoRbd4B5FiFo8"}},{id:"d1",type:"dining",title:"",subTitle:" Miyuki ",date:"2025/12/20 ()",time:"11:30",imageUrl:Sx,details:{pax:2,mapLink:"https://maps.app.goo.gl/eZArqns8efq52ucZ9",cancelLink:"#"}}],_c=[{id:"g_tokyo_st_17",date:"12/17",title:"",subtitle:"Tokyo Station",description:"",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1536098561742-ca998e48cbcc?auto=format&fit=crop&w=800&q=80"},{id:"g_disney",date:"12/18",title:"",subtitle:"Tokyo Disneyland",description:" App  40 (Priority Pass)",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1545580124-a28a2a890476?auto=format&fit=crop&w=800&q=80"},{id:"g_kamakura",date:"12/19",title:"",subtitle:"Kamakura",description:"",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1599816075883-93723793df66?auto=format&fit=crop&w=800&q=80",mapEmbedUrl:"https://www.openstreetmap.org/export/embed.html?bbox=139.5300%2C35.3000%2C139.5700%2C35.3400&layer=mapnik"},{id:"g_komachi",date:"12/19",title:" / ",subtitle:"Komachi Dori",description:"",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1572973809226-c2cb74070a27?auto=format&fit=crop&w=800&q=80"},{id:"g3",date:"12/19",title:"",subtitle:"Shichirigahama",description:" Bills",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1549643276-fbc2bd874326?auto=format&fit=crop&w=800&q=80"},{id:"g_enoshima",date:"12/19",title:"",subtitle:"Enoshima",description:" (Sea Candle) 360",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1596350314414-b6c86a34591a?auto=format&fit=crop&w=800&q=80"},{id:"g_yokohama",date:"12/19",title:"",subtitle:"Yokohama",description:"21",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1554797589-7241bb691973?auto=format&fit=crop&w=800&q=80"},{id:"g_redbrick",date:"12/19",title:"",subtitle:"Red Brick Warehouse",description:"",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1606216482167-73b3202970a2?auto=format&fit=crop&w=800&q=80"},{id:"g_chinatown",date:"12/19",title:"",subtitle:"Chinatown",description:"500",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1565551624647-1959828e352d?auto=format&fit=crop&w=800&q=80"},{id:"g_ginza",date:"12/20",title:"",subtitle:"Ginza",description:"",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1565624796338-3c35b8eb8371?auto=format&fit=crop&w=800&q=80"},{id:"g_tokyo_st",date:"12/20",title:"",subtitle:"Tokyo Station",description:"",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1536098561742-ca998e48cbcc?auto=format&fit=crop&w=800&q=80"},{id:"g_akiba",date:"12/20",title:"",subtitle:"Akihabara",description:"(Otaku)",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1569931727787-4340798a44b8?auto=format&fit=crop&w=800&q=80"},{id:"g_skytree",date:"12/20",title:"",subtitle:"Tokyo Skytree",description:"634 (Solamachi)300",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1545389659-1ecf04b20a7d?auto=format&fit=crop&w=800&q=80"},{id:"g1",date:"12/21",title:"",subtitle:"Gotokuji Temple",description:"",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1595856424075-d147814b8a2c?auto=format&fit=crop&w=800&q=80",mapEmbedUrl:"https://www.openstreetmap.org/export/embed.html?bbox=139.6450%2C35.6480%2C139.6490%2C35.6520&layer=mapnik"},{id:"g2",date:"12/21",title:"",subtitle:"Azabudai Hills",description:"2023330HarukasTeamLabJP",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1707228800539-7e452932456e?auto=format&fit=crop&w=800&q=80"},{id:"g_shibuya",date:"12/21",title:"",subtitle:"Shibuya",description:" SHIBUYA SKY 360",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1542931287-023b922fa89b?auto=format&fit=crop&w=800&q=80"},{id:"g_harajuku",date:"12/21",title:"",subtitle:"Harajuku",description:"(Kawaii)",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1551641506-ee5bf4cb95f6?auto=format&fit=crop&w=800&q=80"},{id:"g_shinjuku",date:"12/21",title:"",subtitle:"Shinjuku",description:"",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1570162613388-9d4134986348?auto=format&fit=crop&w=800&q=80"},{id:"g_tsukiji",date:"12/22",title:"",subtitle:"Tsukiji Market",description:"",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1572979261314-884852c08365?auto=format&fit=crop&w=800&q=80"},{id:"g_ueno",date:"12/22",title:"",subtitle:"Ueno",description:"",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1575960088924-f7c60317e307?auto=format&fit=crop&w=800&q=80"}],Sp=[{date:"12/17",fullDate:"2025-12-17",dayOfWeek:"",weather:{condition:"sunny",temp:"2C - 12C"},items:[{id:"17-1",time:"15:00",activity:" (JX804)",type:"flight",linkTo:{tab:ae.BOOKINGS,targetId:"f1"}},{id:"17-main-1",time:"21:30",activity:"",type:"activity",location:"",linkTo:{tab:ae.GUIDE,targetId:"g_tokyo_st_17"},subItems:[{id:"17-2",time:"21:30",activity:"Check-in: ",type:"hotel",location:"",linkTo:{tab:ae.BOOKINGS,targetId:"h1"},mapsLink:"https://maps.app.goo.gl/bxZNMcPWgM31LXa6A"}]}]},{date:"12/18",fullDate:"2025-12-18",dayOfWeek:"",weather:{condition:"sunny",temp:"0C - 12C"},items:[{id:"18-2",time:"09:00",activity:"",type:"activity",notes:" App  Priority Pass",location:"",linkTo:{tab:ae.GUIDE,targetId:"g_disney"},subItems:[{id:"18-3",time:"17:45",activity:" + ",type:"activity",notes:" 30 "},{id:"18-4",time:"19:00",activity:"",type:"activity",notes:" Dreamlights"}]}]},{date:"12/19",fullDate:"2025-12-19",dayOfWeek:"",weather:{condition:"sunny",temp:"0C - 12C"},items:[{id:"19-main-1",time:"11:00",activity:"",type:"activity",location:"",linkTo:{tab:ae.GUIDE,targetId:"g_kamakura"},subItems:[{id:"19-s1",time:"11:00",activity:" / ",type:"activity",notes:"",linkTo:{tab:ae.GUIDE,targetId:"g_komachi"}},{id:"19-s2",time:"12:52",activity:"",type:"activity",notes:"Bills",linkTo:{tab:ae.GUIDE,targetId:"g3"}},{id:"19-new-1",time:"13:00",activity:"Espresso D Works",type:"food",notes:""},{id:"19-s3",time:"15:00",activity:"",type:"activity",notes:"",linkTo:{tab:ae.GUIDE,targetId:"g_enoshima"}}]},{id:"19-main-2",time:"18:30",activity:"",type:"activity",location:"",linkTo:{tab:ae.GUIDE,targetId:"g_yokohama"},subItems:[{id:"19-s4",time:"18:30",activity:"",type:"activity",notes:"",linkTo:{tab:ae.GUIDE,targetId:"g_redbrick"}},{id:"19-s5",time:"19:30",activity:"",type:"food",notes:"",linkTo:{tab:ae.GUIDE,targetId:"g_chinatown"}},{id:"19-s6",time:"20:30",activity:"",type:"activity",notes:""}]}]},{date:"12/20",fullDate:"2025-12-20",dayOfWeek:"",weather:{condition:"sunny",temp:"4C - 13C"},items:[{id:"20-main-1",time:"11:00",activity:"",type:"activity",location:"",linkTo:{tab:ae.GUIDE,targetId:"g_ginza"},subItems:[{id:"20-s1",time:"11:30",activity:"",type:"food",notes:"Miyuki ",linkTo:{tab:ae.BOOKINGS,targetId:"d1"}}]},{id:"20-main-2",time:"12:30",activity:"",type:"activity",linkTo:{tab:ae.GUIDE,targetId:"g_tokyo_st"},subItems:[{id:"20-s2",time:"12:30",activity:" ()",type:"activity",notes:""}]},{id:"20-main-3",time:"15:00",activity:"",type:"activity",linkTo:{tab:ae.GUIDE,targetId:"g_akiba"},subItems:[{id:"20-s3",time:"15:00",activity:"Check-in: Resol Hotel",type:"hotel",notes:"/",linkTo:{tab:ae.BOOKINGS,targetId:"h2"}},{id:"20-s4",time:"15:30",activity:"",type:"activity",notes:"Bic Camera, Yodobashi, "}]},{id:"20-main-4",time:"19:30",activity:"",type:"activity",location:"",linkTo:{tab:ae.GUIDE,targetId:"g_skytree"},subItems:[{id:"20-s5",time:"19:30",activity:"",type:"activity",notes:""}]}]},{date:"12/21",fullDate:"2025-12-21",dayOfWeek:"",weather:{condition:"sunny",temp:"5C - 13C"},items:[{id:"21-main-1",time:"10:30",activity:"",type:"activity",location:"",linkTo:{tab:ae.GUIDE,targetId:"g1"},subItems:[{id:"21-s1",time:"10:30",activity:"",type:"activity",notes:""}]},{id:"21-main-2",time:"12:30",activity:"",type:"activity",location:"",linkTo:{tab:ae.GUIDE,targetId:"g_shibuya"},subItems:[{id:"21-s2",time:"12:30",activity:"",type:"food",notes:""}]},{id:"21-main-3",time:"14:40",activity:"",type:"activity",linkTo:{tab:ae.GUIDE,targetId:"g_harajuku"},subItems:[{id:"21-s3",time:"14:40",activity:"3 coins",type:"activity",notes:""}]},{id:"21-main-4",time:"16:10",activity:"",type:"activity",linkTo:{tab:ae.GUIDE,targetId:"g_shinjuku"},subItems:[{id:"21-s4",time:"16:10",activity:"POMME d'AMOUR TOKYO",type:"food",notes:""}]},{id:"21-main-5",time:"19:30",activity:"",type:"activity",location:"",linkTo:{tab:ae.GUIDE,targetId:"g2"},subItems:[{id:"21-s5",time:"19:30",activity:"",type:"activity",notes:""}]}]},{date:"12/22",fullDate:"2025-12-22",dayOfWeek:"",weather:{condition:"cloudy",temp:"6C - 13C"},items:[{id:"22-main-1",time:"11:15",activity:"",type:"activity",linkTo:{tab:ae.GUIDE,targetId:"g_tsukiji"},subItems:[{id:"22-s1",time:"11:15",activity:"",type:"food",notes:", "}]},{id:"22-main-2",time:"15:30",activity:"",type:"activity",linkTo:{tab:ae.GUIDE,targetId:"g_ueno"},subItems:[{id:"22-s2",time:"16:25",activity:" Skyliner",type:"transport",notes:""}]},{id:"22-4",time:"18:25",activity:" (IT203)",type:"flight",linkTo:{tab:ae.BOOKINGS,targetId:"f2"}}]}],Cp=["","","","","Sim / ","","","","",""];/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Cx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),le=(t,e)=>{const n=F.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:u,...d},p)=>F.createElement("svg",{ref:p,...Cx,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${Nx(t)}`,l].join(" "),...d},[...e.map(([y,v])=>F.createElement(y,v)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=le("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=le("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=le("BedDouble",[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=le("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=le("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=le("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=le("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Np=le("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=le("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=le("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=le("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=le("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=le("CloudRain",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=le("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=le("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=le("Delete",[["path",{d:"M20 5H9l-7 7 7 7h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2Z",key:"1oy587"}],["line",{x1:"18",x2:"12",y1:"9",y2:"15",key:"1olkx5"}],["line",{x1:"12",x2:"18",y1:"9",y2:"15",key:"1n50pc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=le("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=le("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=le("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=le("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=le("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=le("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=le("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=le("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=le("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=le("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bi=le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=le("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ap=le("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=le("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=le("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=le("TrainFront",[["path",{d:"M8 3.1V7a4 4 0 0 0 8 0V3.1",key:"1v71zp"}],["path",{d:"m9 15-1-1",key:"1yrq24"}],["path",{d:"m15 15 1-1",key:"1t0d6s"}],["path",{d:"M9 19c-2.8 0-5-2.2-5-5v-4a8 8 0 0 1 16 0v4c0 2.8-2.2 5-5 5Z",key:"1p0hjs"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m16 19 2 3",key:"xo31yx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=le("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=le("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=le("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=le("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var bp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Hx=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},Ky={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,p=i>>2,y=(i&3)<<4|l>>4;let v=(l&15)<<2|d>>6,S=d&63;u||(S=64,a||(v=64)),r.push(n[p],n[y],n[v],n[S])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Wy(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Hx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const y=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||y==null)throw new Gx;const v=i<<2|l>>4;if(r.push(v),d!==64){const S=l<<4&240|d>>2;if(r.push(S),y!==64){const A=d<<6&192|y;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Gx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Wx=function(t){const e=Wy(t);return Ky.encodeByteArray(e,!0)},Fa=function(t){return Wx(t).replace(/\./g,"")},Kx=function(t){try{return Ky.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=()=>Qx().__FIREBASE_DEFAULTS__,Xx=()=>{if(typeof process>"u"||typeof bp>"u")return;const t=bp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Jx=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Kx(t[1]);return e&&JSON.parse(e)},Uh=()=>{try{return Yx()||Xx()||Jx()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Zx=t=>{var e,n;return(n=(e=Uh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ew=t=>{const e=Zx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Qy=()=>{var t;return(t=Uh())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Fa(JSON.stringify(n)),Fa(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sw(){var t;const e=(t=Uh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iw(){return!sw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ow(){try{return typeof indexedDB=="object"}catch{return!1}}function aw(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw="FirebaseError";class Ss extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=lw,Object.setPrototypeOf(this,Ss.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yy.prototype.create)}}class Yy{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?uw(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Ss(s,l,r)}}function uw(t,e){return t.replace(cw,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const cw=/\{\$([^}]+)}/g;function Tc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(Rp(i)&&Rp(a)){if(!Tc(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Rp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(t){return t&&t._delegate?t._delegate:t}class $i{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new tw;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fw(e))try{this.getOrInitializeService({instanceIdentifier:hr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=hr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hr){return this.instances.has(e)}getOptions(e=hr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dw(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=hr){return this.component?this.component.multipleInstances?e:hr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dw(t){return t===hr?void 0:t}function fw(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new hw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const mw={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},gw=de.INFO,yw={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},vw=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=yw[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xy{constructor(e){this.name=e,this._logLevel=gw,this._logHandler=vw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}const _w=(t,e)=>e.some(n=>t instanceof n);let Pp,jp;function xw(){return Pp||(Pp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ww(){return jp||(jp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Jy=new WeakMap,Ic=new WeakMap,Zy=new WeakMap,vu=new WeakMap,Bh=new WeakMap;function Ew(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Gn(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Jy.set(n,t)}).catch(()=>{}),Bh.set(e,t),e}function Tw(t){if(Ic.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Ic.set(t,e)}let kc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ic.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Zy.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Iw(t){kc=t(kc)}function kw(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(_u(this),e,...n);return Zy.set(r,e.sort?e.sort():[e]),Gn(r)}:ww().includes(t)?function(...e){return t.apply(_u(this),e),Gn(Jy.get(this))}:function(...e){return Gn(t.apply(_u(this),e))}}function Sw(t){return typeof t=="function"?kw(t):(t instanceof IDBTransaction&&Tw(t),_w(t,xw())?new Proxy(t,kc):t)}function Gn(t){if(t instanceof IDBRequest)return Ew(t);if(vu.has(t))return vu.get(t);const e=Sw(t);return e!==t&&(vu.set(t,e),Bh.set(e,t)),e}const _u=t=>Bh.get(t);function Cw(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=Gn(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Gn(a.result),u.oldVersion,u.newVersion,Gn(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const Nw=["get","getKey","getAll","getAllKeys","count"],Aw=["put","add","delete","clear"],xu=new Map;function Vp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xu.get(e))return xu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Aw.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Nw.includes(n)))return;const i=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return xu.set(e,i),i}Iw(t=>({...t,get:(e,n,r)=>Vp(e,n)||t.get(e,n,r),has:(e,n)=>!!Vp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Rw(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Rw(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Sc="@firebase/app",Dp="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xn=new Xy("@firebase/app"),Pw="@firebase/app-compat",jw="@firebase/analytics-compat",Vw="@firebase/analytics",Dw="@firebase/app-check-compat",Mw="@firebase/app-check",Ow="@firebase/auth",Lw="@firebase/auth-compat",Fw="@firebase/database",zw="@firebase/data-connect",Uw="@firebase/database-compat",Bw="@firebase/functions",$w="@firebase/functions-compat",qw="@firebase/installations",Hw="@firebase/installations-compat",Gw="@firebase/messaging",Ww="@firebase/messaging-compat",Kw="@firebase/performance",Qw="@firebase/performance-compat",Yw="@firebase/remote-config",Xw="@firebase/remote-config-compat",Jw="@firebase/storage",Zw="@firebase/storage-compat",e2="@firebase/firestore",t2="@firebase/vertexai-preview",n2="@firebase/firestore-compat",r2="firebase",s2="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc="[DEFAULT]",i2={[Sc]:"fire-core",[Pw]:"fire-core-compat",[Vw]:"fire-analytics",[jw]:"fire-analytics-compat",[Mw]:"fire-app-check",[Dw]:"fire-app-check-compat",[Ow]:"fire-auth",[Lw]:"fire-auth-compat",[Fw]:"fire-rtdb",[zw]:"fire-data-connect",[Uw]:"fire-rtdb-compat",[Bw]:"fire-fn",[$w]:"fire-fn-compat",[qw]:"fire-iid",[Hw]:"fire-iid-compat",[Gw]:"fire-fcm",[Ww]:"fire-fcm-compat",[Kw]:"fire-perf",[Qw]:"fire-perf-compat",[Yw]:"fire-rc",[Xw]:"fire-rc-compat",[Jw]:"fire-gcs",[Zw]:"fire-gcs-compat",[e2]:"fire-fst",[n2]:"fire-fst-compat",[t2]:"fire-vertex","fire-js":"fire-js",[r2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=new Map,o2=new Map,Nc=new Map;function Mp(t,e){try{t.container.addComponent(e)}catch(n){xn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function za(t){const e=t.name;if(Nc.has(e))return xn.debug(`There were multiple attempts to register component ${e}.`),!1;Nc.set(e,t);for(const n of qi.values())Mp(n,t);for(const n of o2.values())Mp(n,t);return!0}function a2(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wn=new Yy("app","Firebase",l2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $i("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=s2;function e0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Cc,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Wn.create("bad-app-name",{appName:String(s)});if(n||(n=Qy()),!n)throw Wn.create("no-options");const i=qi.get(s);if(i){if(Tc(n,i.options)&&Tc(r,i.config))return i;throw Wn.create("duplicate-app",{appName:s})}const a=new pw(s);for(const u of Nc.values())a.addComponent(u);const l=new u2(n,r,a);return qi.set(s,l),l}function h2(t=Cc){const e=qi.get(t);if(!e&&t===Cc&&Qy())return e0();if(!e)throw Wn.create("no-app",{appName:t});return e}function Op(){return Array.from(qi.values())}function as(t,e,n){var r;let s=(r=i2[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xn.warn(l.join(" "));return}za(new $i(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2="firebase-heartbeat-database",f2=1,Hi="firebase-heartbeat-store";let wu=null;function t0(){return wu||(wu=Cw(d2,f2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hi)}catch(n){console.warn(n)}}}}).catch(t=>{throw Wn.create("idb-open",{originalErrorMessage:t.message})})),wu}async function p2(t){try{const n=(await t0()).transaction(Hi),r=await n.objectStore(Hi).get(n0(t));return await n.done,r}catch(e){if(e instanceof Ss)xn.warn(e.message);else{const n=Wn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xn.warn(n.message)}}}async function Lp(t,e){try{const r=(await t0()).transaction(Hi,"readwrite");await r.objectStore(Hi).put(e,n0(t)),await r.done}catch(n){if(n instanceof Ss)xn.warn(n.message);else{const r=Wn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});xn.warn(r.message)}}}function n0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=1024,g2=30*24*60*60*1e3;class y2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Fp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=g2}),this._storage.overwrite(this._heartbeatsCache))}catch(r){xn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Fp(),{heartbeatsToSend:r,unsentEntries:s}=v2(this._heartbeatsCache.heartbeats),i=Fa(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return xn.warn(n),""}}}function Fp(){return new Date().toISOString().substring(0,10)}function v2(t,e=m2){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),zp(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),zp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class _2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ow()?aw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await p2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Lp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Lp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function zp(t){return Fa(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(t){za(new $i("platform-logger",e=>new bw(e),"PRIVATE")),za(new $i("heartbeat",e=>new y2(e),"PRIVATE")),as(Sc,Dp,t),as(Sc,Dp,"esm2017"),as("fire-js","")}x2("");var w2="firebase",E2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */as(w2,E2,"app");var Up=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vr,r0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,g){function T(){}T.prototype=g.prototype,x.D=g.prototype,x.prototype=new T,x.prototype.constructor=x,x.C=function(E,C,N){for(var _=Array(arguments.length-2),K=2;K<arguments.length;K++)_[K-2]=arguments[K];return g.prototype[C].apply(E,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,g,T){T||(T=0);var E=Array(16);if(typeof g=="string")for(var C=0;16>C;++C)E[C]=g.charCodeAt(T++)|g.charCodeAt(T++)<<8|g.charCodeAt(T++)<<16|g.charCodeAt(T++)<<24;else for(C=0;16>C;++C)E[C]=g[T++]|g[T++]<<8|g[T++]<<16|g[T++]<<24;g=x.g[0],T=x.g[1],C=x.g[2];var N=x.g[3],_=g+(N^T&(C^N))+E[0]+3614090360&4294967295;g=T+(_<<7&4294967295|_>>>25),_=N+(C^g&(T^C))+E[1]+3905402710&4294967295,N=g+(_<<12&4294967295|_>>>20),_=C+(T^N&(g^T))+E[2]+606105819&4294967295,C=N+(_<<17&4294967295|_>>>15),_=T+(g^C&(N^g))+E[3]+3250441966&4294967295,T=C+(_<<22&4294967295|_>>>10),_=g+(N^T&(C^N))+E[4]+4118548399&4294967295,g=T+(_<<7&4294967295|_>>>25),_=N+(C^g&(T^C))+E[5]+1200080426&4294967295,N=g+(_<<12&4294967295|_>>>20),_=C+(T^N&(g^T))+E[6]+2821735955&4294967295,C=N+(_<<17&4294967295|_>>>15),_=T+(g^C&(N^g))+E[7]+4249261313&4294967295,T=C+(_<<22&4294967295|_>>>10),_=g+(N^T&(C^N))+E[8]+1770035416&4294967295,g=T+(_<<7&4294967295|_>>>25),_=N+(C^g&(T^C))+E[9]+2336552879&4294967295,N=g+(_<<12&4294967295|_>>>20),_=C+(T^N&(g^T))+E[10]+4294925233&4294967295,C=N+(_<<17&4294967295|_>>>15),_=T+(g^C&(N^g))+E[11]+2304563134&4294967295,T=C+(_<<22&4294967295|_>>>10),_=g+(N^T&(C^N))+E[12]+1804603682&4294967295,g=T+(_<<7&4294967295|_>>>25),_=N+(C^g&(T^C))+E[13]+4254626195&4294967295,N=g+(_<<12&4294967295|_>>>20),_=C+(T^N&(g^T))+E[14]+2792965006&4294967295,C=N+(_<<17&4294967295|_>>>15),_=T+(g^C&(N^g))+E[15]+1236535329&4294967295,T=C+(_<<22&4294967295|_>>>10),_=g+(C^N&(T^C))+E[1]+4129170786&4294967295,g=T+(_<<5&4294967295|_>>>27),_=N+(T^C&(g^T))+E[6]+3225465664&4294967295,N=g+(_<<9&4294967295|_>>>23),_=C+(g^T&(N^g))+E[11]+643717713&4294967295,C=N+(_<<14&4294967295|_>>>18),_=T+(N^g&(C^N))+E[0]+3921069994&4294967295,T=C+(_<<20&4294967295|_>>>12),_=g+(C^N&(T^C))+E[5]+3593408605&4294967295,g=T+(_<<5&4294967295|_>>>27),_=N+(T^C&(g^T))+E[10]+38016083&4294967295,N=g+(_<<9&4294967295|_>>>23),_=C+(g^T&(N^g))+E[15]+3634488961&4294967295,C=N+(_<<14&4294967295|_>>>18),_=T+(N^g&(C^N))+E[4]+3889429448&4294967295,T=C+(_<<20&4294967295|_>>>12),_=g+(C^N&(T^C))+E[9]+568446438&4294967295,g=T+(_<<5&4294967295|_>>>27),_=N+(T^C&(g^T))+E[14]+3275163606&4294967295,N=g+(_<<9&4294967295|_>>>23),_=C+(g^T&(N^g))+E[3]+4107603335&4294967295,C=N+(_<<14&4294967295|_>>>18),_=T+(N^g&(C^N))+E[8]+1163531501&4294967295,T=C+(_<<20&4294967295|_>>>12),_=g+(C^N&(T^C))+E[13]+2850285829&4294967295,g=T+(_<<5&4294967295|_>>>27),_=N+(T^C&(g^T))+E[2]+4243563512&4294967295,N=g+(_<<9&4294967295|_>>>23),_=C+(g^T&(N^g))+E[7]+1735328473&4294967295,C=N+(_<<14&4294967295|_>>>18),_=T+(N^g&(C^N))+E[12]+2368359562&4294967295,T=C+(_<<20&4294967295|_>>>12),_=g+(T^C^N)+E[5]+4294588738&4294967295,g=T+(_<<4&4294967295|_>>>28),_=N+(g^T^C)+E[8]+2272392833&4294967295,N=g+(_<<11&4294967295|_>>>21),_=C+(N^g^T)+E[11]+1839030562&4294967295,C=N+(_<<16&4294967295|_>>>16),_=T+(C^N^g)+E[14]+4259657740&4294967295,T=C+(_<<23&4294967295|_>>>9),_=g+(T^C^N)+E[1]+2763975236&4294967295,g=T+(_<<4&4294967295|_>>>28),_=N+(g^T^C)+E[4]+1272893353&4294967295,N=g+(_<<11&4294967295|_>>>21),_=C+(N^g^T)+E[7]+4139469664&4294967295,C=N+(_<<16&4294967295|_>>>16),_=T+(C^N^g)+E[10]+3200236656&4294967295,T=C+(_<<23&4294967295|_>>>9),_=g+(T^C^N)+E[13]+681279174&4294967295,g=T+(_<<4&4294967295|_>>>28),_=N+(g^T^C)+E[0]+3936430074&4294967295,N=g+(_<<11&4294967295|_>>>21),_=C+(N^g^T)+E[3]+3572445317&4294967295,C=N+(_<<16&4294967295|_>>>16),_=T+(C^N^g)+E[6]+76029189&4294967295,T=C+(_<<23&4294967295|_>>>9),_=g+(T^C^N)+E[9]+3654602809&4294967295,g=T+(_<<4&4294967295|_>>>28),_=N+(g^T^C)+E[12]+3873151461&4294967295,N=g+(_<<11&4294967295|_>>>21),_=C+(N^g^T)+E[15]+530742520&4294967295,C=N+(_<<16&4294967295|_>>>16),_=T+(C^N^g)+E[2]+3299628645&4294967295,T=C+(_<<23&4294967295|_>>>9),_=g+(C^(T|~N))+E[0]+4096336452&4294967295,g=T+(_<<6&4294967295|_>>>26),_=N+(T^(g|~C))+E[7]+1126891415&4294967295,N=g+(_<<10&4294967295|_>>>22),_=C+(g^(N|~T))+E[14]+2878612391&4294967295,C=N+(_<<15&4294967295|_>>>17),_=T+(N^(C|~g))+E[5]+4237533241&4294967295,T=C+(_<<21&4294967295|_>>>11),_=g+(C^(T|~N))+E[12]+1700485571&4294967295,g=T+(_<<6&4294967295|_>>>26),_=N+(T^(g|~C))+E[3]+2399980690&4294967295,N=g+(_<<10&4294967295|_>>>22),_=C+(g^(N|~T))+E[10]+4293915773&4294967295,C=N+(_<<15&4294967295|_>>>17),_=T+(N^(C|~g))+E[1]+2240044497&4294967295,T=C+(_<<21&4294967295|_>>>11),_=g+(C^(T|~N))+E[8]+1873313359&4294967295,g=T+(_<<6&4294967295|_>>>26),_=N+(T^(g|~C))+E[15]+4264355552&4294967295,N=g+(_<<10&4294967295|_>>>22),_=C+(g^(N|~T))+E[6]+2734768916&4294967295,C=N+(_<<15&4294967295|_>>>17),_=T+(N^(C|~g))+E[13]+1309151649&4294967295,T=C+(_<<21&4294967295|_>>>11),_=g+(C^(T|~N))+E[4]+4149444226&4294967295,g=T+(_<<6&4294967295|_>>>26),_=N+(T^(g|~C))+E[11]+3174756917&4294967295,N=g+(_<<10&4294967295|_>>>22),_=C+(g^(N|~T))+E[2]+718787259&4294967295,C=N+(_<<15&4294967295|_>>>17),_=T+(N^(C|~g))+E[9]+3951481745&4294967295,x.g[0]=x.g[0]+g&4294967295,x.g[1]=x.g[1]+(C+(_<<21&4294967295|_>>>11))&4294967295,x.g[2]=x.g[2]+C&4294967295,x.g[3]=x.g[3]+N&4294967295}r.prototype.u=function(x,g){g===void 0&&(g=x.length);for(var T=g-this.blockSize,E=this.B,C=this.h,N=0;N<g;){if(C==0)for(;N<=T;)s(this,x,N),N+=this.blockSize;if(typeof x=="string"){for(;N<g;)if(E[C++]=x.charCodeAt(N++),C==this.blockSize){s(this,E),C=0;break}}else for(;N<g;)if(E[C++]=x[N++],C==this.blockSize){s(this,E),C=0;break}}this.h=C,this.o+=g},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var g=1;g<x.length-8;++g)x[g]=0;var T=8*this.o;for(g=x.length-8;g<x.length;++g)x[g]=T&255,T/=256;for(this.u(x),x=Array(16),g=T=0;4>g;++g)for(var E=0;32>E;E+=8)x[T++]=this.g[g]>>>E&255;return x};function i(x,g){var T=l;return Object.prototype.hasOwnProperty.call(T,x)?T[x]:T[x]=g(x)}function a(x,g){this.h=g;for(var T=[],E=!0,C=x.length-1;0<=C;C--){var N=x[C]|0;E&&N==g||(T[C]=N,E=!1)}this.g=T}var l={};function u(x){return-128<=x&&128>x?i(x,function(g){return new a([g|0],0>g?-1:0)}):new a([x|0],0>x?-1:0)}function d(x){if(isNaN(x)||!isFinite(x))return y;if(0>x)return P(d(-x));for(var g=[],T=1,E=0;x>=T;E++)g[E]=x/T|0,T*=4294967296;return new a(g,0)}function p(x,g){if(x.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(x.charAt(0)=="-")return P(p(x.substring(1),g));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=d(Math.pow(g,8)),E=y,C=0;C<x.length;C+=8){var N=Math.min(8,x.length-C),_=parseInt(x.substring(C,C+N),g);8>N?(N=d(Math.pow(g,N)),E=E.j(N).add(d(_))):(E=E.j(T),E=E.add(d(_)))}return E}var y=u(0),v=u(1),S=u(16777216);t=a.prototype,t.m=function(){if(b(this))return-P(this).m();for(var x=0,g=1,T=0;T<this.g.length;T++){var E=this.i(T);x+=(0<=E?E:4294967296+E)*g,g*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(A(this))return"0";if(b(this))return"-"+P(this).toString(x);for(var g=d(Math.pow(x,6)),T=this,E="";;){var C=j(T,g).g;T=I(T,C.j(g));var N=((0<T.g.length?T.g[0]:T.h)>>>0).toString(x);if(T=C,A(T))return N+E;for(;6>N.length;)N="0"+N;E=N+E}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function A(x){if(x.h!=0)return!1;for(var g=0;g<x.g.length;g++)if(x.g[g]!=0)return!1;return!0}function b(x){return x.h==-1}t.l=function(x){return x=I(this,x),b(x)?-1:A(x)?0:1};function P(x){for(var g=x.g.length,T=[],E=0;E<g;E++)T[E]=~x.g[E];return new a(T,~x.h).add(v)}t.abs=function(){return b(this)?P(this):this},t.add=function(x){for(var g=Math.max(this.g.length,x.g.length),T=[],E=0,C=0;C<=g;C++){var N=E+(this.i(C)&65535)+(x.i(C)&65535),_=(N>>>16)+(this.i(C)>>>16)+(x.i(C)>>>16);E=_>>>16,N&=65535,_&=65535,T[C]=_<<16|N}return new a(T,T[T.length-1]&-2147483648?-1:0)};function I(x,g){return x.add(P(g))}t.j=function(x){if(A(this)||A(x))return y;if(b(this))return b(x)?P(this).j(P(x)):P(P(this).j(x));if(b(x))return P(this.j(P(x)));if(0>this.l(S)&&0>x.l(S))return d(this.m()*x.m());for(var g=this.g.length+x.g.length,T=[],E=0;E<2*g;E++)T[E]=0;for(E=0;E<this.g.length;E++)for(var C=0;C<x.g.length;C++){var N=this.i(E)>>>16,_=this.i(E)&65535,K=x.i(C)>>>16,ge=x.i(C)&65535;T[2*E+2*C]+=_*ge,w(T,2*E+2*C),T[2*E+2*C+1]+=N*ge,w(T,2*E+2*C+1),T[2*E+2*C+1]+=_*K,w(T,2*E+2*C+1),T[2*E+2*C+2]+=N*K,w(T,2*E+2*C+2)}for(E=0;E<g;E++)T[E]=T[2*E+1]<<16|T[2*E];for(E=g;E<2*g;E++)T[E]=0;return new a(T,0)};function w(x,g){for(;(x[g]&65535)!=x[g];)x[g+1]+=x[g]>>>16,x[g]&=65535,g++}function k(x,g){this.g=x,this.h=g}function j(x,g){if(A(g))throw Error("division by zero");if(A(x))return new k(y,y);if(b(x))return g=j(P(x),g),new k(P(g.g),P(g.h));if(b(g))return g=j(x,P(g)),new k(P(g.g),g.h);if(30<x.g.length){if(b(x)||b(g))throw Error("slowDivide_ only works with positive integers.");for(var T=v,E=g;0>=E.l(x);)T=O(T),E=O(E);var C=M(T,1),N=M(E,1);for(E=M(E,2),T=M(T,2);!A(E);){var _=N.add(E);0>=_.l(x)&&(C=C.add(T),N=_),E=M(E,1),T=M(T,1)}return g=I(x,C.j(g)),new k(C,g)}for(C=y;0<=x.l(g);){for(T=Math.max(1,Math.floor(x.m()/g.m())),E=Math.ceil(Math.log(T)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),N=d(T),_=N.j(g);b(_)||0<_.l(x);)T-=E,N=d(T),_=N.j(g);A(N)&&(N=v),C=C.add(N),x=I(x,_)}return new k(C,x)}t.A=function(x){return j(this,x).h},t.and=function(x){for(var g=Math.max(this.g.length,x.g.length),T=[],E=0;E<g;E++)T[E]=this.i(E)&x.i(E);return new a(T,this.h&x.h)},t.or=function(x){for(var g=Math.max(this.g.length,x.g.length),T=[],E=0;E<g;E++)T[E]=this.i(E)|x.i(E);return new a(T,this.h|x.h)},t.xor=function(x){for(var g=Math.max(this.g.length,x.g.length),T=[],E=0;E<g;E++)T[E]=this.i(E)^x.i(E);return new a(T,this.h^x.h)};function O(x){for(var g=x.g.length+1,T=[],E=0;E<g;E++)T[E]=x.i(E)<<1|x.i(E-1)>>>31;return new a(T,x.h)}function M(x,g){var T=g>>5;g%=32;for(var E=x.g.length-T,C=[],N=0;N<E;N++)C[N]=0<g?x.i(N+T)>>>g|x.i(N+T+1)<<32-g:x.i(N+T);return new a(C,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,r0=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=p,vr=a}).apply(typeof Up<"u"?Up:typeof self<"u"?self:typeof window<"u"?window:{});var Go=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var s0,ai,i0,la,Ac,o0,a0,l0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,h,f){return o==Array.prototype||o==Object.prototype||(o[h]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Go=="object"&&Go];for(var h=0;h<o.length;++h){var f=o[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(o,h){if(h)e:{var f=r;o=o.split(".");for(var m=0;m<o.length-1;m++){var R=o[m];if(!(R in f))break e;f=f[R]}o=o[o.length-1],m=f[o],h=h(m),h!=m&&h!=null&&e(f,o,{configurable:!0,writable:!0,value:h})}}function i(o,h){o instanceof String&&(o+="");var f=0,m=!1,R={next:function(){if(!m&&f<o.length){var V=f++;return{value:h(V,o[V]),done:!1}}return m=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}s("Array.prototype.values",function(o){return o||function(){return i(this,function(h,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var h=typeof o;return h=h!="object"?h:o?Array.isArray(o)?"array":h:"null",h=="array"||h=="object"&&typeof o.length=="number"}function d(o){var h=typeof o;return h=="object"&&o!=null||h=="function"}function p(o,h,f){return o.call.apply(o.bind,arguments)}function y(o,h,f){if(!o)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,m),o.apply(h,R)}}return function(){return o.apply(h,arguments)}}function v(o,h,f){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:y,v.apply(null,arguments)}function S(o,h){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),o.apply(this,m)}}function A(o,h){function f(){}f.prototype=h.prototype,o.aa=h.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(m,R,V){for(var $=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)$[xe-2]=arguments[xe];return h.prototype[R].apply(m,$)}}function b(o){const h=o.length;if(0<h){const f=Array(h);for(let m=0;m<h;m++)f[m]=o[m];return f}return[]}function P(o,h){for(let f=1;f<arguments.length;f++){const m=arguments[f];if(u(m)){const R=o.length||0,V=m.length||0;o.length=R+V;for(let $=0;$<V;$++)o[R+$]=m[$]}else o.push(m)}}class I{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function w(o){return/^[\s\xa0]*$/.test(o)}function k(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function j(o){return j[" "](o),o}j[" "]=function(){};var O=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function M(o,h,f){for(const m in o)h.call(f,o[m],m,o)}function x(o,h){for(const f in o)h.call(void 0,o[f],f,o)}function g(o){const h={};for(const f in o)h[f]=o[f];return h}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(o,h){let f,m;for(let R=1;R<arguments.length;R++){m=arguments[R];for(f in m)o[f]=m[f];for(let V=0;V<T.length;V++)f=T[V],Object.prototype.hasOwnProperty.call(m,f)&&(o[f]=m[f])}}function C(o){var h=1;o=o.split(":");const f=[];for(;0<h&&o.length;)f.push(o.shift()),h--;return o.length&&f.push(o.join(":")),f}function N(o){l.setTimeout(()=>{throw o},0)}function _(){var o=q;let h=null;return o.g&&(h=o.g,o.g=o.g.next,o.g||(o.h=null),h.next=null),h}class K{constructor(){this.h=this.g=null}add(h,f){const m=ge.get();m.set(h,f),this.h?this.h.next=m:this.g=m,this.h=m}}var ge=new I(()=>new B,o=>o.reset());class B{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,D=!1,q=new K,Y=()=>{const o=l.Promise.resolve(void 0);ie=()=>{o.then(G)}};var G=()=>{for(var o;o=_();){try{o.h.call(o.g)}catch(f){N(f)}var h=ge;h.j(o),100>h.h&&(h.h++,o.next=h.g,h.g=o)}D=!1};function se(){this.s=this.s,this.C=this.C}se.prototype.s=!1,se.prototype.ma=function(){this.s||(this.s=!0,this.N())},se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _e(o,h){this.type=o,this.g=this.target=h,this.defaultPrevented=!1}_e.prototype.h=function(){this.defaultPrevented=!0};var vt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,h=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,h),l.removeEventListener("test",f,h)}catch{}return o}();function ht(o,h){if(_e.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,m=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=h,h=o.relatedTarget){if(O){e:{try{j(h.nodeName);var R=!0;break e}catch{}R=!1}R||(h=null)}}else f=="mouseover"?h=o.fromElement:f=="mouseout"&&(h=o.toElement);this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:kt[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&ht.aa.h.call(this)}}A(ht,_e);var kt={2:"touch",3:"pen",4:"mouse"};ht.prototype.h=function(){ht.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var He="closure_listenable_"+(1e6*Math.random()|0),jr=0;function Cl(o,h,f,m,R){this.listener=o,this.proxy=null,this.src=h,this.type=f,this.capture=!!m,this.ha=R,this.key=++jr,this.da=this.fa=!1}function Vr(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Qt(o){this.src=o,this.g={},this.h=0}Qt.prototype.add=function(o,h,f,m,R){var V=o.toString();o=this.g[V],o||(o=this.g[V]=[],this.h++);var $=Ps(o,h,m,R);return-1<$?(h=o[$],f||(h.fa=!1)):(h=new Cl(h,this.src,V,!!m,R),h.fa=f,o.push(h)),h};function Rs(o,h){var f=h.type;if(f in o.g){var m=o.g[f],R=Array.prototype.indexOf.call(m,h,void 0),V;(V=0<=R)&&Array.prototype.splice.call(m,R,1),V&&(Vr(h),o.g[f].length==0&&(delete o.g[f],o.h--))}}function Ps(o,h,f,m){for(var R=0;R<o.length;++R){var V=o[R];if(!V.da&&V.listener==h&&V.capture==!!f&&V.ha==m)return R}return-1}var js="closure_lm_"+(1e6*Math.random()|0),Vs={};function ho(o,h,f,m,R){if(Array.isArray(h)){for(var V=0;V<h.length;V++)ho(o,h[V],f,m,R);return null}return f=Ge(f),o&&o[He]?o.K(h,f,d(m)?!!m.capture:!1,R):Nl(o,h,f,!1,m,R)}function Nl(o,h,f,m,R,V){if(!h)throw Error("Invalid event type");var $=d(R)?!!R.capture:!!R,xe=Yt(o);if(xe||(o[js]=xe=new Qt(o)),f=xe.add(h,f,m,$,V),f.proxy)return f;if(m=Al(),f.proxy=m,m.src=o,m.listener=f,o.addEventListener)vt||(R=$),R===void 0&&(R=!1),o.addEventListener(h.toString(),m,R);else if(o.attachEvent)o.attachEvent(J(h.toString()),m);else if(o.addListener&&o.removeListener)o.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Al(){function o(f){return h.call(o.src,o.listener,f)}const h=Se;return o}function H(o,h,f,m,R){if(Array.isArray(h))for(var V=0;V<h.length;V++)H(o,h[V],f,m,R);else m=d(m)?!!m.capture:!!m,f=Ge(f),o&&o[He]?(o=o.i,h=String(h).toString(),h in o.g&&(V=o.g[h],f=Ps(V,f,m,R),-1<f&&(Vr(V[f]),Array.prototype.splice.call(V,f,1),V.length==0&&(delete o.g[h],o.h--)))):o&&(o=Yt(o))&&(h=o.g[h.toString()],o=-1,h&&(o=Ps(h,f,m,R)),(f=-1<o?h[o]:null)&&W(f))}function W(o){if(typeof o!="number"&&o&&!o.da){var h=o.src;if(h&&h[He])Rs(h.i,o);else{var f=o.type,m=o.proxy;h.removeEventListener?h.removeEventListener(f,m,o.capture):h.detachEvent?h.detachEvent(J(f),m):h.addListener&&h.removeListener&&h.removeListener(m),(f=Yt(h))?(Rs(f,o),f.h==0&&(f.src=null,h[js]=null)):Vr(o)}}}function J(o){return o in Vs?Vs[o]:Vs[o]="on"+o}function Se(o,h){if(o.da)o=!0;else{h=new ht(h,this);var f=o.listener,m=o.ha||o.src;o.fa&&W(o),o=f.call(m,h)}return o}function Yt(o){return o=o[js],o instanceof Qt?o:null}var In="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ge(o){return typeof o=="function"?o:(o[In]||(o[In]=function(h){return o.handleEvent(h)}),o[In])}function tt(){se.call(this),this.i=new Qt(this),this.M=this,this.F=null}A(tt,se),tt.prototype[He]=!0,tt.prototype.removeEventListener=function(o,h,f,m){H(this,o,h,f,m)};function dt(o,h){var f,m=o.F;if(m)for(f=[];m;m=m.F)f.push(m);if(o=o.M,m=h.type||h,typeof h=="string")h=new _e(h,o);else if(h instanceof _e)h.target=h.target||o;else{var R=h;h=new _e(m,o),E(h,R)}if(R=!0,f)for(var V=f.length-1;0<=V;V--){var $=h.g=f[V];R=fo($,m,!0,h)&&R}if($=h.g=o,R=fo($,m,!0,h)&&R,R=fo($,m,!1,h)&&R,f)for(V=0;V<f.length;V++)$=h.g=f[V],R=fo($,m,!1,h)&&R}tt.prototype.N=function(){if(tt.aa.N.call(this),this.i){var o=this.i,h;for(h in o.g){for(var f=o.g[h],m=0;m<f.length;m++)Vr(f[m]);delete o.g[h],o.h--}}this.F=null},tt.prototype.K=function(o,h,f,m){return this.i.add(String(o),h,!1,f,m)},tt.prototype.L=function(o,h,f,m){return this.i.add(String(o),h,!0,f,m)};function fo(o,h,f,m){if(h=o.i.g[String(h)],!h)return!0;h=h.concat();for(var R=!0,V=0;V<h.length;++V){var $=h[V];if($&&!$.da&&$.capture==f){var xe=$.listener,We=$.ha||$.src;$.fa&&Rs(o.i,$),R=xe.call(We,m)!==!1&&R}}return R&&!m.defaultPrevented}function xd(o,h,f){if(typeof o=="function")f&&(o=v(o,f));else if(o&&typeof o.handleEvent=="function")o=v(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(o,h||0)}function wd(o){o.g=xd(()=>{o.g=null,o.i&&(o.i=!1,wd(o))},o.l);const h=o.h;o.h=null,o.m.apply(null,h)}class Iv extends se{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:wd(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ds(o){se.call(this),this.h=o,this.g={}}A(Ds,se);var Ed=[];function Td(o){M(o.g,function(h,f){this.g.hasOwnProperty(f)&&W(h)},o),o.g={}}Ds.prototype.N=function(){Ds.aa.N.call(this),Td(this)},Ds.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bl=l.JSON.stringify,kv=l.JSON.parse,Sv=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function Rl(){}Rl.prototype.h=null;function Id(o){return o.h||(o.h=o.i())}function kd(){}var Ms={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pl(){_e.call(this,"d")}A(Pl,_e);function jl(){_e.call(this,"c")}A(jl,_e);var ir={},Sd=null;function po(){return Sd=Sd||new tt}ir.La="serverreachability";function Cd(o){_e.call(this,ir.La,o)}A(Cd,_e);function Os(o){const h=po();dt(h,new Cd(h))}ir.STAT_EVENT="statevent";function Nd(o,h){_e.call(this,ir.STAT_EVENT,o),this.stat=h}A(Nd,_e);function ft(o){const h=po();dt(h,new Nd(h,o))}ir.Ma="timingevent";function Ad(o,h){_e.call(this,ir.Ma,o),this.size=h}A(Ad,_e);function Ls(o,h){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},h)}function Fs(){this.g=!0}Fs.prototype.xa=function(){this.g=!1};function Cv(o,h,f,m,R,V){o.info(function(){if(o.g)if(V)for(var $="",xe=V.split("&"),We=0;We<xe.length;We++){var pe=xe[We].split("=");if(1<pe.length){var nt=pe[0];pe=pe[1];var rt=nt.split("_");$=2<=rt.length&&rt[1]=="type"?$+(nt+"="+pe+"&"):$+(nt+"=redacted&")}}else $=null;else $=V;return"XMLHTTP REQ ("+m+") [attempt "+R+"]: "+h+`
`+f+`
`+$})}function Nv(o,h,f,m,R,V,$){o.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+R+"]: "+h+`
`+f+`
`+V+" "+$})}function Dr(o,h,f,m){o.info(function(){return"XMLHTTP TEXT ("+h+"): "+bv(o,f)+(m?" "+m:"")})}function Av(o,h){o.info(function(){return"TIMEOUT: "+h})}Fs.prototype.info=function(){};function bv(o,h){if(!o.g)return h;if(!h)return null;try{var f=JSON.parse(h);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var m=f[o];if(!(2>m.length)){var R=m[1];if(Array.isArray(R)&&!(1>R.length)){var V=R[0];if(V!="noop"&&V!="stop"&&V!="close")for(var $=1;$<R.length;$++)R[$]=""}}}}return bl(f)}catch{return h}}var mo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},bd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vl;function go(){}A(go,Rl),go.prototype.g=function(){return new XMLHttpRequest},go.prototype.i=function(){return{}},Vl=new go;function kn(o,h,f,m){this.j=o,this.i=h,this.l=f,this.R=m||1,this.U=new Ds(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rd}function Rd(){this.i=null,this.g="",this.h=!1}var Pd={},Dl={};function Ml(o,h,f){o.L=1,o.v=xo(ln(h)),o.m=f,o.P=!0,jd(o,null)}function jd(o,h){o.F=Date.now(),yo(o),o.A=ln(o.v);var f=o.A,m=o.R;Array.isArray(m)||(m=[String(m)]),Wd(f.i,"t",m),o.C=0,f=o.j.J,o.h=new Rd,o.g=df(o.j,f?h:null,!o.m),0<o.O&&(o.M=new Iv(v(o.Y,o,o.g),o.O)),h=o.U,f=o.g,m=o.ca;var R="readystatechange";Array.isArray(R)||(R&&(Ed[0]=R.toString()),R=Ed);for(var V=0;V<R.length;V++){var $=ho(f,R[V],m||h.handleEvent,!1,h.h||h);if(!$)break;h.g[$.key]=$}h=o.H?g(o.H):{},o.m?(o.u||(o.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,h)):(o.u="GET",o.g.ea(o.A,o.u,null,h)),Os(),Cv(o.i,o.u,o.A,o.l,o.R,o.m)}kn.prototype.ca=function(o){o=o.target;const h=this.M;h&&un(o)==3?h.j():this.Y(o)},kn.prototype.Y=function(o){try{if(o==this.g)e:{const rt=un(this.g);var h=this.g.Ba();const Lr=this.g.Z();if(!(3>rt)&&(rt!=3||this.g&&(this.h.h||this.g.oa()||ef(this.g)))){this.J||rt!=4||h==7||(h==8||0>=Lr?Os(3):Os(2)),Ol(this);var f=this.g.Z();this.X=f;t:if(Vd(this)){var m=ef(this.g);o="";var R=m.length,V=un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){or(this),zs(this);var $="";break t}this.h.i=new l.TextDecoder}for(h=0;h<R;h++)this.h.h=!0,o+=this.h.i.decode(m[h],{stream:!(V&&h==R-1)});m.length=0,this.h.g+=o,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=f==200,Nv(this.i,this.u,this.A,this.l,this.R,rt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var xe,We=this.g;if((xe=We.g?We.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(xe)){var pe=xe;break t}}pe=null}if(f=pe)Dr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ll(this,f);else{this.o=!1,this.s=3,ft(12),or(this),zs(this);break e}}if(this.P){f=!0;let Ut;for(;!this.J&&this.C<$.length;)if(Ut=Rv(this,$),Ut==Dl){rt==4&&(this.s=4,ft(14),f=!1),Dr(this.i,this.l,null,"[Incomplete Response]");break}else if(Ut==Pd){this.s=4,ft(15),Dr(this.i,this.l,$,"[Invalid Chunk]"),f=!1;break}else Dr(this.i,this.l,Ut,null),Ll(this,Ut);if(Vd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rt!=4||$.length!=0||this.h.h||(this.s=1,ft(16),f=!1),this.o=this.o&&f,!f)Dr(this.i,this.l,$,"[Invalid Chunked Response]"),or(this),zs(this);else if(0<$.length&&!this.W){this.W=!0;var nt=this.j;nt.g==this&&nt.ba&&!nt.M&&(nt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),ql(nt),nt.M=!0,ft(11))}}else Dr(this.i,this.l,$,null),Ll(this,$);rt==4&&or(this),this.o&&!this.J&&(rt==4?lf(this.j,this):(this.o=!1,yo(this)))}else Kv(this.g),f==400&&0<$.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),or(this),zs(this)}}}catch{}finally{}};function Vd(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function Rv(o,h){var f=o.C,m=h.indexOf(`
`,f);return m==-1?Dl:(f=Number(h.substring(f,m)),isNaN(f)?Pd:(m+=1,m+f>h.length?Dl:(h=h.slice(m,m+f),o.C=m+f,h)))}kn.prototype.cancel=function(){this.J=!0,or(this)};function yo(o){o.S=Date.now()+o.I,Dd(o,o.I)}function Dd(o,h){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Ls(v(o.ba,o),h)}function Ol(o){o.B&&(l.clearTimeout(o.B),o.B=null)}kn.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(Av(this.i,this.A),this.L!=2&&(Os(),ft(17)),or(this),this.s=2,zs(this)):Dd(this,this.S-o)};function zs(o){o.j.G==0||o.J||lf(o.j,o)}function or(o){Ol(o);var h=o.M;h&&typeof h.ma=="function"&&h.ma(),o.M=null,Td(o.U),o.g&&(h=o.g,o.g=null,h.abort(),h.ma())}function Ll(o,h){try{var f=o.j;if(f.G!=0&&(f.g==o||Fl(f.h,o))){if(!o.K&&Fl(f.h,o)&&f.G==3){try{var m=f.Da.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var R=m;if(R[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)So(f),Io(f);else break e;$l(f),ft(18)}}else f.za=R[1],0<f.za-f.T&&37500>R[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ls(v(f.Za,f),6e3));if(1>=Ld(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else lr(f,11)}else if((o.K||f.g==o)&&So(f),!w(h))for(R=f.Da.g.parse(h),h=0;h<R.length;h++){let pe=R[h];if(f.T=pe[0],pe=pe[1],f.G==2)if(pe[0]=="c"){f.K=pe[1],f.ia=pe[2];const nt=pe[3];nt!=null&&(f.la=nt,f.j.info("VER="+f.la));const rt=pe[4];rt!=null&&(f.Aa=rt,f.j.info("SVER="+f.Aa));const Lr=pe[5];Lr!=null&&typeof Lr=="number"&&0<Lr&&(m=1.5*Lr,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;const Ut=o.g;if(Ut){const No=Ut.g?Ut.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(No){var V=m.h;V.g||No.indexOf("spdy")==-1&&No.indexOf("quic")==-1&&No.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(zl(V,V.h),V.h=null))}if(m.D){const Hl=Ut.g?Ut.g.getResponseHeader("X-HTTP-Session-Id"):null;Hl&&(m.ya=Hl,Ee(m.I,m.D,Hl))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var $=o;if(m.qa=hf(m,m.J?m.ia:null,m.W),$.K){Fd(m.h,$);var xe=$,We=m.L;We&&(xe.I=We),xe.B&&(Ol(xe),yo(xe)),m.g=$}else of(m);0<f.i.length&&ko(f)}else pe[0]!="stop"&&pe[0]!="close"||lr(f,7);else f.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?lr(f,7):Bl(f):pe[0]!="noop"&&f.l&&f.l.ta(pe),f.v=0)}}Os(4)}catch{}}var Pv=class{constructor(o,h){this.g=o,this.map=h}};function Md(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Od(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Ld(o){return o.h?1:o.g?o.g.size:0}function Fl(o,h){return o.h?o.h==h:o.g?o.g.has(h):!1}function zl(o,h){o.g?o.g.add(h):o.h=h}function Fd(o,h){o.h&&o.h==h?o.h=null:o.g&&o.g.has(h)&&o.g.delete(h)}Md.prototype.cancel=function(){if(this.i=zd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function zd(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let h=o.i;for(const f of o.g.values())h=h.concat(f.D);return h}return b(o.i)}function jv(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var h=[],f=o.length,m=0;m<f;m++)h.push(o[m]);return h}h=[],f=0;for(m in o)h[f++]=o[m];return h}function Vv(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var h=[];o=o.length;for(var f=0;f<o;f++)h.push(f);return h}h=[],f=0;for(const m in o)h[f++]=m;return h}}}function Ud(o,h){if(o.forEach&&typeof o.forEach=="function")o.forEach(h,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,h,void 0);else for(var f=Vv(o),m=jv(o),R=m.length,V=0;V<R;V++)h.call(void 0,m[V],f&&f[V],o)}var Bd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dv(o,h){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var m=o[f].indexOf("="),R=null;if(0<=m){var V=o[f].substring(0,m);R=o[f].substring(m+1)}else V=o[f];h(V,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function ar(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof ar){this.h=o.h,vo(this,o.j),this.o=o.o,this.g=o.g,_o(this,o.s),this.l=o.l;var h=o.i,f=new $s;f.i=h.i,h.g&&(f.g=new Map(h.g),f.h=h.h),$d(this,f),this.m=o.m}else o&&(h=String(o).match(Bd))?(this.h=!1,vo(this,h[1]||"",!0),this.o=Us(h[2]||""),this.g=Us(h[3]||"",!0),_o(this,h[4]),this.l=Us(h[5]||"",!0),$d(this,h[6]||"",!0),this.m=Us(h[7]||"")):(this.h=!1,this.i=new $s(null,this.h))}ar.prototype.toString=function(){var o=[],h=this.j;h&&o.push(Bs(h,qd,!0),":");var f=this.g;return(f||h=="file")&&(o.push("//"),(h=this.o)&&o.push(Bs(h,qd,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Bs(f,f.charAt(0)=="/"?Lv:Ov,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Bs(f,zv)),o.join("")};function ln(o){return new ar(o)}function vo(o,h,f){o.j=f?Us(h,!0):h,o.j&&(o.j=o.j.replace(/:$/,""))}function _o(o,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);o.s=h}else o.s=null}function $d(o,h,f){h instanceof $s?(o.i=h,Uv(o.i,o.h)):(f||(h=Bs(h,Fv)),o.i=new $s(h,o.h))}function Ee(o,h,f){o.i.set(h,f)}function xo(o){return Ee(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Us(o,h){return o?h?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Bs(o,h,f){return typeof o=="string"?(o=encodeURI(o).replace(h,Mv),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Mv(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var qd=/[#\/\?@]/g,Ov=/[#\?:]/g,Lv=/[#\?]/g,Fv=/[#\?@]/g,zv=/#/g;function $s(o,h){this.h=this.g=null,this.i=o||null,this.j=!!h}function Sn(o){o.g||(o.g=new Map,o.h=0,o.i&&Dv(o.i,function(h,f){o.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=$s.prototype,t.add=function(o,h){Sn(this),this.i=null,o=Mr(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(h),this.h+=1,this};function Hd(o,h){Sn(o),h=Mr(o,h),o.g.has(h)&&(o.i=null,o.h-=o.g.get(h).length,o.g.delete(h))}function Gd(o,h){return Sn(o),h=Mr(o,h),o.g.has(h)}t.forEach=function(o,h){Sn(this),this.g.forEach(function(f,m){f.forEach(function(R){o.call(h,R,m,this)},this)},this)},t.na=function(){Sn(this);const o=Array.from(this.g.values()),h=Array.from(this.g.keys()),f=[];for(let m=0;m<h.length;m++){const R=o[m];for(let V=0;V<R.length;V++)f.push(h[m])}return f},t.V=function(o){Sn(this);let h=[];if(typeof o=="string")Gd(this,o)&&(h=h.concat(this.g.get(Mr(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)h=h.concat(o[f])}return h},t.set=function(o,h){return Sn(this),this.i=null,o=Mr(this,o),Gd(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[h]),this.h+=1,this},t.get=function(o,h){return o?(o=this.V(o),0<o.length?String(o[0]):h):h};function Wd(o,h,f){Hd(o,h),0<f.length&&(o.i=null,o.g.set(Mr(o,h),b(f)),o.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],h=Array.from(this.g.keys());for(var f=0;f<h.length;f++){var m=h[f];const V=encodeURIComponent(String(m)),$=this.V(m);for(m=0;m<$.length;m++){var R=V;$[m]!==""&&(R+="="+encodeURIComponent(String($[m]))),o.push(R)}}return this.i=o.join("&")};function Mr(o,h){return h=String(h),o.j&&(h=h.toLowerCase()),h}function Uv(o,h){h&&!o.j&&(Sn(o),o.i=null,o.g.forEach(function(f,m){var R=m.toLowerCase();m!=R&&(Hd(this,m),Wd(this,R,f))},o)),o.j=h}function Bv(o,h){const f=new Fs;if(l.Image){const m=new Image;m.onload=S(Cn,f,"TestLoadImage: loaded",!0,h,m),m.onerror=S(Cn,f,"TestLoadImage: error",!1,h,m),m.onabort=S(Cn,f,"TestLoadImage: abort",!1,h,m),m.ontimeout=S(Cn,f,"TestLoadImage: timeout",!1,h,m),l.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=o}else h(!1)}function $v(o,h){const f=new Fs,m=new AbortController,R=setTimeout(()=>{m.abort(),Cn(f,"TestPingServer: timeout",!1,h)},1e4);fetch(o,{signal:m.signal}).then(V=>{clearTimeout(R),V.ok?Cn(f,"TestPingServer: ok",!0,h):Cn(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(R),Cn(f,"TestPingServer: error",!1,h)})}function Cn(o,h,f,m,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),m(f)}catch{}}function qv(){this.g=new Sv}function Hv(o,h,f){const m=f||"";try{Ud(o,function(R,V){let $=R;d(R)&&($=bl(R)),h.push(m+V+"="+encodeURIComponent($))})}catch(R){throw h.push(m+"type="+encodeURIComponent("_badmap")),R}}function wo(o){this.l=o.Ub||null,this.j=o.eb||!1}A(wo,Rl),wo.prototype.g=function(){return new Eo(this.l,this.j)},wo.prototype.i=function(o){return function(){return o}}({});function Eo(o,h){tt.call(this),this.D=o,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Eo,tt),t=Eo.prototype,t.open=function(o,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=h,this.readyState=1,Hs(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(h.body=o),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qs(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Hs(this)),this.g&&(this.readyState=3,Hs(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Kd(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Kd(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var h=o.value?o.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!o.done}))&&(this.response=this.responseText+=h)}o.done?qs(this):Hs(this),this.readyState==3&&Kd(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,qs(this))},t.Qa=function(o){this.g&&(this.response=o,qs(this))},t.ga=function(){this.g&&qs(this)};function qs(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Hs(o)}t.setRequestHeader=function(o,h){this.u.append(o,h)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=h.next();return o.join(`\r
`)};function Hs(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Eo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Qd(o){let h="";return M(o,function(f,m){h+=m,h+=":",h+=f,h+=`\r
`}),h}function Ul(o,h,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=Qd(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):Ee(o,h,f))}function Re(o){tt.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Re,tt);var Gv=/^https?$/i,Wv=["POST","PUT"];t=Re.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,h,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);h=h?h.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vl.g(),this.v=this.o?Id(this.o):Id(Vl),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(h,String(o),!0),this.B=!1}catch(V){Yd(this,V);return}if(o=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var R in m)f.set(R,m[R]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const V of m.keys())f.set(V,m.get(V));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(V=>V.toLowerCase()=="content-type"),R=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Wv,h,void 0))||m||R||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,$]of f)this.g.setRequestHeader(V,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zd(this),this.u=!0,this.g.send(o),this.u=!1}catch(V){Yd(this,V)}};function Yd(o,h){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=h,o.m=5,Xd(o),To(o)}function Xd(o){o.A||(o.A=!0,dt(o,"complete"),dt(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,dt(this,"complete"),dt(this,"abort"),To(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),To(this,!0)),Re.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Jd(this):this.bb())},t.bb=function(){Jd(this)};function Jd(o){if(o.h&&typeof a<"u"&&(!o.v[1]||un(o)!=4||o.Z()!=2)){if(o.u&&un(o)==4)xd(o.Ea,0,o);else if(dt(o,"readystatechange"),un(o)==4){o.h=!1;try{const $=o.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var m;if(m=$===0){var R=String(o.D).match(Bd)[1]||null;!R&&l.self&&l.self.location&&(R=l.self.location.protocol.slice(0,-1)),m=!Gv.test(R?R.toLowerCase():"")}f=m}if(f)dt(o,"complete"),dt(o,"success");else{o.m=6;try{var V=2<un(o)?o.g.statusText:""}catch{V=""}o.l=V+" ["+o.Z()+"]",Xd(o)}}finally{To(o)}}}}function To(o,h){if(o.g){Zd(o);const f=o.g,m=o.v[0]?()=>{}:null;o.g=null,o.v=null,h||dt(o,"ready");try{f.onreadystatechange=m}catch{}}}function Zd(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function un(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<un(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var h=this.g.responseText;return o&&h.indexOf(o)==0&&(h=h.substring(o.length)),kv(h)}};function ef(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Kv(o){const h={};o=(o.g&&2<=un(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<o.length;m++){if(w(o[m]))continue;var f=C(o[m]);const R=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const V=h[R]||[];h[R]=V,V.push(f)}x(h,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gs(o,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||h}function tf(o){this.Aa=0,this.i=[],this.j=new Fs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gs("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gs("baseRetryDelayMs",5e3,o),this.cb=Gs("retryDelaySeedMs",1e4,o),this.Wa=Gs("forwardChannelMaxRetries",2,o),this.wa=Gs("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Md(o&&o.concurrentRequestLimit),this.Da=new qv,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=tf.prototype,t.la=8,t.G=1,t.connect=function(o,h,f,m){ft(0),this.W=o,this.H=h||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=hf(this,null,this.W),ko(this)};function Bl(o){if(nf(o),o.G==3){var h=o.U++,f=ln(o.I);if(Ee(f,"SID",o.K),Ee(f,"RID",h),Ee(f,"TYPE","terminate"),Ws(o,f),h=new kn(o,o.j,h),h.L=2,h.v=xo(ln(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=h.v,f=!0),f||(h.g=df(h.j,null),h.g.ea(h.v)),h.F=Date.now(),yo(h)}cf(o)}function Io(o){o.g&&(ql(o),o.g.cancel(),o.g=null)}function nf(o){Io(o),o.u&&(l.clearTimeout(o.u),o.u=null),So(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function ko(o){if(!Od(o.h)&&!o.s){o.s=!0;var h=o.Ga;ie||Y(),D||(ie(),D=!0),q.add(h,o),o.B=0}}function Qv(o,h){return Ld(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=h.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Ls(v(o.Ga,o,h),uf(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const R=new kn(this,this.j,o);let V=this.o;if(this.S&&(V?(V=g(V),E(V,this.S)):V=this.S),this.m!==null||this.O||(R.H=V,V=null),this.P)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,4096<h){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=sf(this,R,h),f=ln(this.I),Ee(f,"RID",o),Ee(f,"CVER",22),this.D&&Ee(f,"X-HTTP-Session-Id",this.D),Ws(this,f),V&&(this.O?h="headers="+encodeURIComponent(String(Qd(V)))+"&"+h:this.m&&Ul(f,this.m,V)),zl(this.h,R),this.Ua&&Ee(f,"TYPE","init"),this.P?(Ee(f,"$req",h),Ee(f,"SID","null"),R.T=!0,Ml(R,f,null)):Ml(R,f,h),this.G=2}}else this.G==3&&(o?rf(this,o):this.i.length==0||Od(this.h)||rf(this))};function rf(o,h){var f;h?f=h.l:f=o.U++;const m=ln(o.I);Ee(m,"SID",o.K),Ee(m,"RID",f),Ee(m,"AID",o.T),Ws(o,m),o.m&&o.o&&Ul(m,o.m,o.o),f=new kn(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),h&&(o.i=h.D.concat(o.i)),h=sf(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),zl(o.h,f),Ml(f,m,h)}function Ws(o,h){o.H&&M(o.H,function(f,m){Ee(h,m,f)}),o.l&&Ud({},function(f,m){Ee(h,m,f)})}function sf(o,h,f){f=Math.min(o.i.length,f);var m=o.l?v(o.l.Na,o.l,o):null;e:{var R=o.i;let V=-1;for(;;){const $=["count="+f];V==-1?0<f?(V=R[0].g,$.push("ofs="+V)):V=0:$.push("ofs="+V);let xe=!0;for(let We=0;We<f;We++){let pe=R[We].g;const nt=R[We].map;if(pe-=V,0>pe)V=Math.max(0,R[We].g-100),xe=!1;else try{Hv(nt,$,"req"+pe+"_")}catch{m&&m(nt)}}if(xe){m=$.join("&");break e}}}return o=o.i.splice(0,f),h.D=o,m}function of(o){if(!o.g&&!o.u){o.Y=1;var h=o.Fa;ie||Y(),D||(ie(),D=!0),q.add(h,o),o.v=0}}function $l(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Ls(v(o.Fa,o),uf(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,af(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Ls(v(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),Io(this),af(this))};function ql(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function af(o){o.g=new kn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var h=ln(o.qa);Ee(h,"RID","rpc"),Ee(h,"SID",o.K),Ee(h,"AID",o.T),Ee(h,"CI",o.F?"0":"1"),!o.F&&o.ja&&Ee(h,"TO",o.ja),Ee(h,"TYPE","xmlhttp"),Ws(o,h),o.m&&o.o&&Ul(h,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=xo(ln(h)),f.m=null,f.P=!0,jd(f,o)}t.Za=function(){this.C!=null&&(this.C=null,Io(this),$l(this),ft(19))};function So(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function lf(o,h){var f=null;if(o.g==h){So(o),ql(o),o.g=null;var m=2}else if(Fl(o.h,h))f=h.D,Fd(o.h,h),m=1;else return;if(o.G!=0){if(h.o)if(m==1){f=h.m?h.m.length:0,h=Date.now()-h.F;var R=o.B;m=po(),dt(m,new Ad(m,f)),ko(o)}else of(o);else if(R=h.s,R==3||R==0&&0<h.X||!(m==1&&Qv(o,h)||m==2&&$l(o)))switch(f&&0<f.length&&(h=o.h,h.i=h.i.concat(f)),R){case 1:lr(o,5);break;case 4:lr(o,10);break;case 3:lr(o,6);break;default:lr(o,2)}}}function uf(o,h){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*h}function lr(o,h){if(o.j.info("Error code "+h),h==2){var f=v(o.fb,o),m=o.Xa;const R=!m;m=new ar(m||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||vo(m,"https"),xo(m),R?Bv(m.toString(),f):$v(m.toString(),f)}else ft(2);o.G=0,o.l&&o.l.sa(h),cf(o),nf(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function cf(o){if(o.G=0,o.ka=[],o.l){const h=zd(o.h);(h.length!=0||o.i.length!=0)&&(P(o.ka,h),P(o.ka,o.i),o.h.i.length=0,b(o.i),o.i.length=0),o.l.ra()}}function hf(o,h,f){var m=f instanceof ar?ln(f):new ar(f);if(m.g!="")h&&(m.g=h+"."+m.g),_o(m,m.s);else{var R=l.location;m=R.protocol,h=h?h+"."+R.hostname:R.hostname,R=+R.port;var V=new ar(null);m&&vo(V,m),h&&(V.g=h),R&&_o(V,R),f&&(V.l=f),m=V}return f=o.D,h=o.ya,f&&h&&Ee(m,f,h),Ee(m,"VER",o.la),Ws(o,m),m}function df(o,h,f){if(h&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=o.Ca&&!o.pa?new Re(new wo({eb:f})):new Re(o.pa),h.Ha(o.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ff(){}t=ff.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Co(){}Co.prototype.g=function(o,h){return new St(o,h)};function St(o,h){tt.call(this),this.g=new tf(h),this.l=o,this.h=h&&h.messageUrlParams||null,o=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(o?o["X-WebChannel-Content-Type"]=h.messageContentType:o={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(o?o["X-WebChannel-Client-Profile"]=h.va:o={"X-WebChannel-Client-Profile":h.va}),this.g.S=o,(o=h&&h.Sb)&&!w(o)&&(this.g.m=o),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!w(h)&&(this.g.D=h,o=this.h,o!==null&&h in o&&(o=this.h,h in o&&delete o[h])),this.j=new Or(this)}A(St,tt),St.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},St.prototype.close=function(){Bl(this.g)},St.prototype.o=function(o){var h=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=bl(o),o=f);h.i.push(new Pv(h.Ya++,o)),h.G==3&&ko(h)},St.prototype.N=function(){this.g.l=null,delete this.j,Bl(this.g),delete this.g,St.aa.N.call(this)};function pf(o){Pl.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var h=o.__sm__;if(h){e:{for(const f in h){o=f;break e}o=void 0}(this.i=o)&&(o=this.i,h=h!==null&&o in h?h[o]:void 0),this.data=h}else this.data=o}A(pf,Pl);function mf(){jl.call(this),this.status=1}A(mf,jl);function Or(o){this.g=o}A(Or,ff),Or.prototype.ua=function(){dt(this.g,"a")},Or.prototype.ta=function(o){dt(this.g,new pf(o))},Or.prototype.sa=function(o){dt(this.g,new mf)},Or.prototype.ra=function(){dt(this.g,"b")},Co.prototype.createWebChannel=Co.prototype.g,St.prototype.send=St.prototype.o,St.prototype.open=St.prototype.m,St.prototype.close=St.prototype.close,l0=function(){return new Co},a0=function(){return po()},o0=ir,Ac={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},mo.NO_ERROR=0,mo.TIMEOUT=8,mo.HTTP_ERROR=6,la=mo,bd.COMPLETE="complete",i0=bd,kd.EventType=Ms,Ms.OPEN="a",Ms.CLOSE="b",Ms.ERROR="c",Ms.MESSAGE="d",tt.prototype.listen=tt.prototype.K,ai=kd,Re.prototype.listenOnce=Re.prototype.L,Re.prototype.getLastError=Re.prototype.Ka,Re.prototype.getLastErrorCode=Re.prototype.Ba,Re.prototype.getStatus=Re.prototype.Z,Re.prototype.getResponseJson=Re.prototype.Oa,Re.prototype.getResponseText=Re.prototype.oa,Re.prototype.send=Re.prototype.ea,Re.prototype.setWithCredentials=Re.prototype.Ha,s0=Re}).apply(typeof Go<"u"?Go:typeof self<"u"?self:typeof window<"u"?window:{});const Bp="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}at.UNAUTHENTICATED=new at(null),at.GOOGLE_CREDENTIALS=new at("google-credentials-uid"),at.FIRST_PARTY=new at("first-party-uid"),at.MOCK_USER=new at("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cs="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr=new Xy("@firebase/firestore");function ni(){return Sr.logLevel}function X(t,...e){if(Sr.logLevel<=de.DEBUG){const n=e.map($h);Sr.debug(`Firestore (${Cs}): ${t}`,...n)}}function wn(t,...e){if(Sr.logLevel<=de.ERROR){const n=e.map($h);Sr.error(`Firestore (${Cs}): ${t}`,...n)}}function gs(t,...e){if(Sr.logLevel<=de.WARN){const n=e.map($h);Sr.warn(`Firestore (${Cs}): ${t}`,...n)}}function $h(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t="Unexpected state"){const e=`FIRESTORE (${Cs}) INTERNAL ASSERTION FAILED: `+t;throw wn(e),new Error(e)}function ve(t,e){t||te()}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends Ss{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class T2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(at.UNAUTHENTICATED))}shutdown(){}}class I2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class k2{constructor(e){this.t=e,this.currentUser=at.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ve(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new _r;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new _r,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new _r)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string"),new u0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string"),new at(e)}}class S2{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=at.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class C2{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new S2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(at.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class N2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class A2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ve(this.o===void 0);const r=i=>{i.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,X("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string"),this.R=n.token,new N2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=b2(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function me(t,e){return t<e?-1:t>e?1:0}function ys(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Z(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Z(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ue.fromMillis(Date.now())}static fromDate(e){return Ue.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ue(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ne(e)}static min(){return new ne(new Ue(0,0))}static max(){return new ne(new Ue(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(),r===void 0?r=e.length-n:r>e.length-n&&te(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Gi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gi?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),a=n.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class je extends Gi{construct(e,n,r){return new je(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Z(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new je(n)}static emptyPath(){return new je([])}}const R2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ye extends Gi{construct(e,n,r){return new Ye(e,n,r)}static isValidIdentifier(e){return R2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ye.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ye(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Z(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Z(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Z(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new Z(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ye(n)}static emptyPath(){return new Ye([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(je.fromString(e))}static fromName(e){return new ee(je.fromString(e).popFirst(5))}static empty(){return new ee(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new je(e.slice()))}}function P2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ne.fromTimestamp(r===1e9?new Ue(n+1,0):new Ue(n,r));return new Jn(s,ee.empty(),e)}function j2(t){return new Jn(t.readTime,t.key,-1)}class Jn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Jn(ne.min(),ee.empty(),-1)}static max(){return new Jn(ne.max(),ee.empty(),-1)}}function V2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class M2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function io(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==D2)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(p=>{a[d]=p,++l,l===i&&r(a)},p=>s(p))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function O2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function oo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}qh.oe=-1;function fl(t){return t==null}function Ua(t){return t===0&&1/t==-1/0}function L2(t){return typeof t=="number"&&Number.isInteger(t)&&!Ua(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Rr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function h0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e,n){this.comparator=e,this.root=n||Qe.EMPTY}insert(e,n){return new be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Qe.BLACK,null,null))}remove(e){return new be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wo(this.root,e,this.comparator,!0)}}class Wo{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qe{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Qe.RED,this.left=s??Qe.EMPTY,this.right=i??Qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Qe(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Qe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Qe.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();const e=this.left.check();if(e!==this.right.check())throw te();return e+(this.isRed()?0:1)}}Qe.EMPTY=null,Qe.RED=!0,Qe.BLACK=!1;Qe.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Qe(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.comparator=e,this.data=new be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new qp(this.data.getIterator())}getIteratorFrom(e){return new qp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Je)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Je(this.comparator);return n.data=e,n}}class qp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.fields=e,e.sort(Ye.comparator)}static empty(){return new At([])}unionWith(e){let n=new Je(Ye.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new At(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ys(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new d0("Invalid base64 string: "+i):i}}(e);return new et(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}et.EMPTY_BYTE_STRING=new et("");const F2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zn(t){if(ve(!!t),typeof t=="string"){let e=0;const n=F2.exec(t);if(ve(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ve(t.seconds),nanos:Ve(t.nanos)}}function Ve(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Cr(t){return typeof t=="string"?et.fromBase64String(t):et.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Gh(t){const e=t.mapValue.fields.__previous_value__;return Hh(e)?Gh(e):e}function Wi(t){const e=Zn(t.mapValue.fields.__local_write_time__.timestampValue);return new Ue(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,n,r,s,i,a,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class Ki{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ki("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ki&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko={mapValue:{}};function Nr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Hh(t)?4:B2(t)?9007199254740991:U2(t)?10:11:te()}function on(t,e){if(t===e)return!0;const n=Nr(t);if(n!==Nr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wi(t).isEqual(Wi(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Zn(s.timestampValue),l=Zn(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Cr(s.bytesValue).isEqual(Cr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ve(s.geoPointValue.latitude)===Ve(i.geoPointValue.latitude)&&Ve(s.geoPointValue.longitude)===Ve(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ve(s.integerValue)===Ve(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Ve(s.doubleValue),l=Ve(i.doubleValue);return a===l?Ua(a)===Ua(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return ys(t.arrayValue.values||[],e.arrayValue.values||[],on);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if($p(a)!==$p(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!on(a[u],l[u])))return!1;return!0}(t,e);default:return te()}}function Qi(t,e){return(t.values||[]).find(n=>on(n,e))!==void 0}function vs(t,e){if(t===e)return 0;const n=Nr(t),r=Nr(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Ve(i.integerValue||i.doubleValue),u=Ve(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Hp(t.timestampValue,e.timestampValue);case 4:return Hp(Wi(t),Wi(e));case 5:return me(t.stringValue,e.stringValue);case 6:return function(i,a){const l=Cr(i),u=Cr(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),u=a.split("/");for(let d=0;d<l.length&&d<u.length;d++){const p=me(l[d],u[d]);if(p!==0)return p}return me(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=me(Ve(i.latitude),Ve(a.latitude));return l!==0?l:me(Ve(i.longitude),Ve(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Gp(t.arrayValue,e.arrayValue);case 10:return function(i,a){var l,u,d,p;const y=i.fields||{},v=a.fields||{},S=(l=y.value)===null||l===void 0?void 0:l.arrayValue,A=(u=v.value)===null||u===void 0?void 0:u.arrayValue,b=me(((d=S==null?void 0:S.values)===null||d===void 0?void 0:d.length)||0,((p=A==null?void 0:A.values)===null||p===void 0?void 0:p.length)||0);return b!==0?b:Gp(S,A)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Ko.mapValue&&a===Ko.mapValue)return 0;if(i===Ko.mapValue)return 1;if(a===Ko.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=a.fields||{},p=Object.keys(d);u.sort(),p.sort();for(let y=0;y<u.length&&y<p.length;++y){const v=me(u[y],p[y]);if(v!==0)return v;const S=vs(l[u[y]],d[p[y]]);if(S!==0)return S}return me(u.length,p.length)}(t.mapValue,e.mapValue);default:throw te()}}function Hp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);const n=Zn(t),r=Zn(e),s=me(n.seconds,r.seconds);return s!==0?s:me(n.nanos,r.nanos)}function Gp(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=vs(n[s],r[s]);if(i)return i}return me(n.length,r.length)}function _s(t){return bc(t)}function bc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Zn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Cr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=bc(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${bc(n.fields[a])}`;return s+"}"}(t.mapValue):te()}function Rc(t){return!!t&&"integerValue"in t}function Wh(t){return!!t&&"arrayValue"in t}function Wp(t){return!!t&&"nullValue"in t}function Kp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ua(t){return!!t&&"mapValue"in t}function U2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function wi(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Rr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=wi(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=wi(t.arrayValue.values[n]);return e}return Object.assign({},t)}function B2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.value=e}static empty(){return new xt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ua(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=wi(n)}setAll(e){let n=Ye.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=wi(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());ua(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return on(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ua(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Rr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new xt(wi(this.value))}}function f0(t){const e=[];return Rr(t.fields,(n,r)=>{const s=new Ye([n]);if(ua(r)){const i=f0(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new At(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new ut(e,0,ne.min(),ne.min(),ne.min(),xt.empty(),0)}static newFoundDocument(e,n,r,s){return new ut(e,1,n,ne.min(),r,s,0)}static newNoDocument(e,n){return new ut(e,2,n,ne.min(),ne.min(),xt.empty(),0)}static newUnknownDocument(e,n){return new ut(e,3,n,ne.min(),ne.min(),xt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,n){this.position=e,this.inclusive=n}}function Qp(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=ee.comparator(ee.fromName(a.referenceValue),n.key):r=vs(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Yp(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!on(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e,n="asc"){this.field=e,this.dir=n}}function $2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{}class Fe extends p0{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new H2(e,n,r):n==="array-contains"?new K2(e,r):n==="in"?new Q2(e,r):n==="not-in"?new Y2(e,r):n==="array-contains-any"?new X2(e,r):new Fe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new G2(e,r):new W2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(vs(n,this.value)):n!==null&&Nr(this.value)===Nr(n)&&this.matchesComparison(vs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class an extends p0{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new an(e,n)}matches(e){return m0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function m0(t){return t.op==="and"}function g0(t){return q2(t)&&m0(t)}function q2(t){for(const e of t.filters)if(e instanceof an)return!1;return!0}function Pc(t){if(t instanceof Fe)return t.field.canonicalString()+t.op.toString()+_s(t.value);if(g0(t))return t.filters.map(e=>Pc(e)).join(",");{const e=t.filters.map(n=>Pc(n)).join(",");return`${t.op}(${e})`}}function y0(t,e){return t instanceof Fe?function(r,s){return s instanceof Fe&&r.op===s.op&&r.field.isEqual(s.field)&&on(r.value,s.value)}(t,e):t instanceof an?function(r,s){return s instanceof an&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&y0(a,s.filters[l]),!0):!1}(t,e):void te()}function v0(t){return t instanceof Fe?function(n){return`${n.field.canonicalString()} ${n.op} ${_s(n.value)}`}(t):t instanceof an?function(n){return n.op.toString()+" {"+n.getFilters().map(v0).join(" ,")+"}"}(t):"Filter"}class H2 extends Fe{constructor(e,n,r){super(e,n,r),this.key=ee.fromName(r.referenceValue)}matches(e){const n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class G2 extends Fe{constructor(e,n){super(e,"in",n),this.keys=_0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class W2 extends Fe{constructor(e,n){super(e,"not-in",n),this.keys=_0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function _0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ee.fromName(r.referenceValue))}class K2 extends Fe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Wh(n)&&Qi(n.arrayValue,this.value)}}class Q2 extends Fe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Qi(this.value.arrayValue,n)}}class Y2 extends Fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Qi(this.value.arrayValue,n)}}class X2 extends Fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Wh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Qi(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.ue=null}}function Xp(t,e=null,n=[],r=[],s=null,i=null,a=null){return new J2(t,e,n,r,s,i,a)}function Kh(t){const e=re(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Pc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),fl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>_s(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>_s(r)).join(",")),e.ue=n}return e.ue}function Qh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!$2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!y0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Yp(t.startAt,e.startAt)&&Yp(t.endAt,e.endAt)}function jc(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Z2(t,e,n,r,s,i,a,l){return new pl(t,e,n,r,s,i,a,l)}function Yh(t){return new pl(t)}function Jp(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function eE(t){return t.collectionGroup!==null}function Ei(t){const e=re(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Je(Ye.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new $a(i,r))}),n.has(Ye.keyField().canonicalString())||e.ce.push(new $a(Ye.keyField(),r))}return e.ce}function nn(t){const e=re(t);return e.le||(e.le=tE(e,Ei(t))),e.le}function tE(t,e){if(t.limitType==="F")return Xp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new $a(s.field,i)});const n=t.endAt?new Ba(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ba(t.startAt.position,t.startAt.inclusive):null;return Xp(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Vc(t,e,n){return new pl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ml(t,e){return Qh(nn(t),nn(e))&&t.limitType===e.limitType}function x0(t){return`${Kh(nn(t))}|lt:${t.limitType}`}function zr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>v0(s)).join(", ")}]`),fl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>_s(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>_s(s)).join(",")),`Target(${r})`}(nn(t))}; limitType=${t.limitType})`}function gl(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ee.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ei(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,u){const d=Qp(a,l,u);return a.inclusive?d<=0:d<0}(r.startAt,Ei(r),s)||r.endAt&&!function(a,l,u){const d=Qp(a,l,u);return a.inclusive?d>=0:d>0}(r.endAt,Ei(r),s))}(t,e)}function nE(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function w0(t){return(e,n)=>{let r=!1;for(const s of Ei(t)){const i=rE(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function rE(t,e,n){const r=t.field.isKeyField()?ee.comparator(e.key,n.key):function(i,a,l){const u=a.data.field(i),d=l.data.field(i);return u!==null&&d!==null?vs(u,d):te()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Rr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return h0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=new be(ee.comparator);function En(){return sE}const E0=new be(ee.comparator);function li(...t){let e=E0;for(const n of t)e=e.insert(n.key,n);return e}function T0(t){let e=E0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function mr(){return Ti()}function I0(){return Ti()}function Ti(){return new Ns(t=>t.toString(),(t,e)=>t.isEqual(e))}const iE=new be(ee.comparator),oE=new Je(ee.comparator);function ce(...t){let e=oE;for(const n of t)e=e.add(n);return e}const aE=new Je(me);function lE(){return aE}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ua(e)?"-0":e}}function k0(t){return{integerValue:""+t}}function uE(t,e){return L2(e)?k0(e):Xh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(){this._=void 0}}function cE(t,e,n){return t instanceof qa?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Hh(i)&&(i=Gh(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(n,e):t instanceof Yi?C0(t,e):t instanceof Xi?N0(t,e):function(s,i){const a=S0(s,i),l=Zp(a)+Zp(s.Pe);return Rc(a)&&Rc(s.Pe)?k0(l):Xh(s.serializer,l)}(t,e)}function hE(t,e,n){return t instanceof Yi?C0(t,e):t instanceof Xi?N0(t,e):n}function S0(t,e){return t instanceof Ha?function(r){return Rc(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class qa extends yl{}class Yi extends yl{constructor(e){super(),this.elements=e}}function C0(t,e){const n=A0(e);for(const r of t.elements)n.some(s=>on(s,r))||n.push(r);return{arrayValue:{values:n}}}class Xi extends yl{constructor(e){super(),this.elements=e}}function N0(t,e){let n=A0(e);for(const r of t.elements)n=n.filter(s=>!on(s,r));return{arrayValue:{values:n}}}class Ha extends yl{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Zp(t){return Ve(t.integerValue||t.doubleValue)}function A0(t){return Wh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function dE(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Yi&&s instanceof Yi||r instanceof Xi&&s instanceof Xi?ys(r.elements,s.elements,on):r instanceof Ha&&s instanceof Ha?on(r.Pe,s.Pe):r instanceof qa&&s instanceof qa}(t.transform,e.transform)}class fE{constructor(e,n){this.version=e,this.transformResults=n}}class rn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new rn}static exists(e){return new rn(void 0,e)}static updateTime(e){return new rn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ca(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class vl{}function b0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new P0(t.key,rn.none()):new ao(t.key,t.data,rn.none());{const n=t.data,r=xt.empty();let s=new Je(Ye.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new sr(t.key,r,new At(s.toArray()),rn.none())}}function pE(t,e,n){t instanceof ao?function(s,i,a){const l=s.value.clone(),u=tm(s.fieldTransforms,i,a.transformResults);l.setAll(u),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof sr?function(s,i,a){if(!ca(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=tm(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(R0(s)),u.setAll(l),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Ii(t,e,n,r){return t instanceof ao?function(i,a,l,u){if(!ca(i.precondition,a))return l;const d=i.value.clone(),p=nm(i.fieldTransforms,u,a);return d.setAll(p),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof sr?function(i,a,l,u){if(!ca(i.precondition,a))return l;const d=nm(i.fieldTransforms,u,a),p=a.data;return p.setAll(R0(i)),p.setAll(d),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(i,a,l){return ca(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function mE(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=S0(r.transform,s||null);i!=null&&(n===null&&(n=xt.empty()),n.set(r.field,i))}return n||null}function em(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ys(r,s,(i,a)=>dE(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ao extends vl{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class sr extends vl{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function R0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function tm(t,e,n){const r=new Map;ve(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,hE(a,l,n[s]))}return r}function nm(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,cE(i,a,e))}return r}class P0 extends vl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gE extends vl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&pE(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ii(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ii(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=I0();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const u=b0(a,l);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&ys(this.mutations,e.mutations,(n,r)=>em(n,r))&&ys(this.baseMutations,e.baseMutations,(n,r)=>em(n,r))}}class Jh{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ve(e.mutations.length===r.length);let s=function(){return iE}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Jh(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me,he;function xE(t){switch(t){default:return te();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function j0(t){if(t===void 0)return wn("GRPC error has no .code"),z.UNKNOWN;switch(t){case Me.OK:return z.OK;case Me.CANCELLED:return z.CANCELLED;case Me.UNKNOWN:return z.UNKNOWN;case Me.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case Me.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case Me.INTERNAL:return z.INTERNAL;case Me.UNAVAILABLE:return z.UNAVAILABLE;case Me.UNAUTHENTICATED:return z.UNAUTHENTICATED;case Me.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case Me.NOT_FOUND:return z.NOT_FOUND;case Me.ALREADY_EXISTS:return z.ALREADY_EXISTS;case Me.PERMISSION_DENIED:return z.PERMISSION_DENIED;case Me.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case Me.ABORTED:return z.ABORTED;case Me.OUT_OF_RANGE:return z.OUT_OF_RANGE;case Me.UNIMPLEMENTED:return z.UNIMPLEMENTED;case Me.DATA_LOSS:return z.DATA_LOSS;default:return te()}}(he=Me||(Me={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=new vr([4294967295,4294967295],0);function rm(t){const e=wE().encode(t),n=new r0;return n.update(e),new Uint8Array(n.digest())}function sm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new vr([n,r],0),new vr([s,i],0)]}class Zh{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ui(`Invalid padding: ${n}`);if(r<0)throw new ui(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ui(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ui(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=vr.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(vr.fromNumber(r)));return s.compare(EE)===1&&(s=new vr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=rm(e),[r,s]=sm(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);if(!this.de(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Zh(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.Ie===0)return;const n=rm(e),[r,s]=sm(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ui extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,lo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new _l(ne.min(),s,new be(me),En(),ce())}}class lo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new lo(r,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class V0{constructor(e,n){this.targetId=e,this.me=n}}class D0{constructor(e,n,r=et.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class im{constructor(){this.fe=0,this.ge=am(),this.pe=et.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ce(),n=ce(),r=ce();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:te()}}),new lo(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=am()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ve(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class TE{constructor(e){this.Le=e,this.Be=new Map,this.ke=En(),this.qe=om(),this.Qe=new be(me)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:te()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(jc(i))if(r===0){const a=new ee(i.path);this.Ue(n,a,ut.newNoDocument(a,ne.min()))}else ve(r===1);else{const a=this.Ye(n);if(a!==r){const l=this.Ze(e),u=l?this.Xe(l,e,a):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Cr(r).toUint8Array()}catch(u){if(u instanceof d0)return gs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Zh(a,s,i)}catch(u){return gs(u instanceof ui?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,a)=>{const l=this.Je(a);if(l){if(i.current&&jc(l.target)){const u=new ee(l.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,ut.newNoDocument(u,e))}i.be&&(n.set(a,i.ve()),i.Ce())}});let r=ce();this.qe.forEach((i,a)=>{let l=!0;a.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new _l(e,n,this.Qe,this.ke,r);return this.ke=En(),this.qe=om(),this.Qe=new be(me),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new im,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Je(me),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new im),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function om(){return new be(ee.comparator)}function am(){return new be(ee.comparator)}const IE={asc:"ASCENDING",desc:"DESCENDING"},kE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},SE={and:"AND",or:"OR"};class CE{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Dc(t,e){return t.useProto3Json||fl(e)?e:{value:e}}function Ga(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function M0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function NE(t,e){return Ga(t,e.toTimestamp())}function sn(t){return ve(!!t),ne.fromTimestamp(function(n){const r=Zn(n);return new Ue(r.seconds,r.nanos)}(t))}function ed(t,e){return Mc(t,e).canonicalString()}function Mc(t,e){const n=function(s){return new je(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function O0(t){const e=je.fromString(t);return ve(B0(e)),e}function Oc(t,e){return ed(t.databaseId,e.path)}function Eu(t,e){const n=O0(e);if(n.get(1)!==t.databaseId.projectId)throw new Z(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Z(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(F0(n))}function L0(t,e){return ed(t.databaseId,e)}function AE(t){const e=O0(t);return e.length===4?je.emptyPath():F0(e)}function Lc(t){return new je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function F0(t){return ve(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function lm(t,e,n){return{name:Oc(t,e),fields:n.value.mapValue.fields}}function bE(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:te()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,p){return d.useProto3Json?(ve(p===void 0||typeof p=="string"),et.fromBase64String(p||"")):(ve(p===void 0||p instanceof Buffer||p instanceof Uint8Array),et.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const p=d.code===void 0?z.UNKNOWN:j0(d.code);return new Z(p,d.message||"")}(a);n=new D0(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Eu(t,r.document.name),i=sn(r.document.updateTime),a=r.document.createTime?sn(r.document.createTime):ne.min(),l=new xt({mapValue:{fields:r.document.fields}}),u=ut.newFoundDocument(s,i,a,l),d=r.targetIds||[],p=r.removedTargetIds||[];n=new ha(d,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Eu(t,r.document),i=r.readTime?sn(r.readTime):ne.min(),a=ut.newNoDocument(s,i),l=r.removedTargetIds||[];n=new ha([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Eu(t,r.document),i=r.removedTargetIds||[];n=new ha([],i,s,null)}else{if(!("filter"in e))return te();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new _E(s,i),l=r.targetId;n=new V0(l,a)}}return n}function RE(t,e){let n;if(e instanceof ao)n={update:lm(t,e.key,e.value)};else if(e instanceof P0)n={delete:Oc(t,e.key)};else if(e instanceof sr)n={update:lm(t,e.key,e.data),updateMask:zE(e.fieldMask)};else{if(!(e instanceof gE))return te();n={verify:Oc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof qa)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Yi)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Xi)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ha)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw te()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:NE(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:te()}(t,e.precondition)),n}function PE(t,e){return t&&t.length>0?(ve(e!==void 0),t.map(n=>function(s,i){let a=s.updateTime?sn(s.updateTime):sn(i);return a.isEqual(ne.min())&&(a=sn(i)),new fE(a,s.transformResults||[])}(n,e))):[]}function jE(t,e){return{documents:[L0(t,e.path)]}}function VE(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=L0(t,s);const i=function(d){if(d.length!==0)return U0(an.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(p=>function(v){return{field:Ur(v.field),direction:OE(v.dir)}}(p))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Dc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function DE(t){let e=AE(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ve(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(y){const v=z0(y);return v instanceof an&&g0(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=function(y){return y.map(v=>function(A){return new $a(Br(A.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(v))}(n.orderBy));let l=null;n.limit&&(l=function(y){let v;return v=typeof y=="object"?y.value:y,fl(v)?null:v}(n.limit));let u=null;n.startAt&&(u=function(y){const v=!!y.before,S=y.values||[];return new Ba(S,v)}(n.startAt));let d=null;return n.endAt&&(d=function(y){const v=!y.before,S=y.values||[];return new Ba(S,v)}(n.endAt)),Z2(e,s,a,i,l,"F",u,d)}function ME(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function z0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Br(n.unaryFilter.field);return Fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Br(n.unaryFilter.field);return Fe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Br(n.unaryFilter.field);return Fe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Br(n.unaryFilter.field);return Fe.create(a,"!=",{nullValue:"NULL_VALUE"});default:return te()}}(t):t.fieldFilter!==void 0?function(n){return Fe.create(Br(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return an.create(n.compositeFilter.filters.map(r=>z0(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return te()}}(n.compositeFilter.op))}(t):te()}function OE(t){return IE[t]}function LE(t){return kE[t]}function FE(t){return SE[t]}function Ur(t){return{fieldPath:t.canonicalString()}}function Br(t){return Ye.fromServerFormat(t.fieldPath)}function U0(t){return t instanceof Fe?function(n){if(n.op==="=="){if(Kp(n.value))return{unaryFilter:{field:Ur(n.field),op:"IS_NAN"}};if(Wp(n.value))return{unaryFilter:{field:Ur(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Kp(n.value))return{unaryFilter:{field:Ur(n.field),op:"IS_NOT_NAN"}};if(Wp(n.value))return{unaryFilter:{field:Ur(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ur(n.field),op:LE(n.op),value:n.value}}}(t):t instanceof an?function(n){const r=n.getFilters().map(s=>U0(s));return r.length===1?r[0]:{compositeFilter:{op:FE(n.op),filters:r}}}(t):te()}function zE(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function B0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e,n,r,s,i=ne.min(),a=ne.min(),l=et.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Dn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Dn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Dn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Dn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e){this.ct=e}}function BE(t){const e=DE({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Vc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(){this.un=new qE}addToCollectionParentIndex(e,n){return this.un.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(Jn.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(Jn.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class qE{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Je(je.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Je(je.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new xs(0)}static kn(){return new xs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(){this.changes=new Ns(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ii(r.mutation,s,At.empty(),Ue.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){const s=mr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=li();return i.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=mr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=En();const a=Ti(),l=function(){return Ti()}();return n.forEach((u,d)=>{const p=r.get(d.key);s.has(d.key)&&(p===void 0||p.mutation instanceof sr)?i=i.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),Ii(p.mutation,d,p.mutation.getFieldMask(),Ue.now())):a.set(d.key,At.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,p)=>a.set(d,p)),n.forEach((d,p)=>{var y;return l.set(d,new GE(p,(y=a.get(d))!==null&&y!==void 0?y:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Ti();let s=new be((a,l)=>a-l),i=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let p=r.get(u)||At.empty();p=l.applyToLocalView(d,p),r.set(u,p);const y=(s.get(l.batchId)||ce()).add(u);s=s.insert(l.batchId,y)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,p=u.value,y=I0();p.forEach(v=>{if(!i.has(v)){const S=b0(n.get(v),r.get(v));S!==null&&y.set(v,S),i=i.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,y))}return L.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return ee.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):eE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(mr());let l=-1,u=i;return a.next(d=>L.forEach(d,(p,y)=>(l<y.largestBatchId&&(l=y.largestBatchId),i.get(p)?L.resolve():this.remoteDocumentCache.getEntry(e,p).next(v=>{u=u.insert(p,v)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ce())).next(p=>({batchId:l,changes:T0(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next(r=>{let s=li();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=li();return this.indexManager.getCollectionParents(e,i).next(l=>L.forEach(l,u=>{const d=function(y,v){return new pl(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(p=>{p.forEach((y,v)=>{a=a.insert(y,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,d)=>{const p=d.getKey();a.get(p)===null&&(a=a.insert(p,ut.newInvalidDocument(p)))});let l=li();return a.forEach((u,d)=>{const p=i.get(u);p!==void 0&&Ii(p.mutation,d,At.empty(),Ue.now()),gl(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return L.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:sn(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:BE(s.bundledQuery),readTime:sn(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(){this.overlays=new be(ee.comparator),this.Ir=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=mr();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=mr(),i=n.length+1,a=new ee(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new be((d,p)=>d-p);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=i.get(d.largestBatchId);p===null&&(p=mr(),i=i.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const l=mr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,p)=>l.set(d,p)),!(l.size()>=s)););return L.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new vE(n,r));let i=this.Ir.get(n);i===void 0&&(i=ce(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(){this.sessionToken=et.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(){this.Tr=new Je(Be.Er),this.dr=new Je(Be.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Be(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Be(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ee(new je([])),r=new Be(n,e),s=new Be(n,e+1),i=[];return this.dr.forEachInRange([r,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ee(new je([])),r=new Be(n,e),s=new Be(n,e+1);let i=ce();return this.dr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new Be(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Be{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ee.comparator(e.key,n.key)||me(e.wr,n.wr)}static Ar(e,n){return me(e.wr,n.wr)||ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Je(Be.Er)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new yE(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.br=this.br.add(new Be(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return L.resolve(a)}lookupMutationBatch(e,n){return L.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Be(n,0),s=new Be(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],a=>{const l=this.Dr(a.wr);i.push(l)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Je(me);return n.forEach(s=>{const i=new Be(s,0),a=new Be(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],l=>{r=r.add(l.wr)})}),L.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ee.isDocumentKey(i)||(i=i.child(""));const a=new Be(new ee(i),0);let l=new Je(me);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.wr)),!0)},a),L.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ve(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return L.forEach(n.mutations,s=>{const i=new Be(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Be(n,0),s=this.br.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e){this.Mr=e,this.docs=function(){return new be(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():ut.newInvalidDocument(n))}getEntries(e,n){let r=En();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ut.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=En();const a=n.path,l=new ee(a.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||V2(j2(p),r)<=0||(s.has(p.key)||gl(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){te()}Or(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ZE(this)}getSize(e){return L.resolve(this.size)}}class ZE extends HE{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e){this.persistence=e,this.Nr=new Ns(n=>Kh(n),Qh),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.Lr=0,this.Br=new td,this.targetCount=0,this.kr=xs.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),L.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new xs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Kn(n),L.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,n){this.qr={},this.overlays={},this.Qr=new qh(0),this.Kr=!1,this.Kr=!0,this.$r=new YE,this.referenceDelegate=e(this),this.Ur=new eT(this),this.indexManager=new $E,this.remoteDocumentCache=function(s){return new JE(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new UE(n),this.Gr=new KE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new QE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new XE(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const s=new nT(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return L.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class nT extends M2{constructor(e){super(),this.currentSequenceNumber=e}}class nd{constructor(e){this.persistence=e,this.Jr=new td,this.Yr=null}static Zr(e){return new nd(e)}get Xr(){if(this.Yr)return this.Yr;throw te()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),L.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.Xr,r=>{const s=ee.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ne.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return L.or([()=>L.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ce(),s=ce();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new rd(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return iw()?8:O2(rw())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new rT;return this.Xi(e,n,a).next(l=>{if(i.result=l,this.zi)return this.es(e,n,a,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(ni()<=de.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",zr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),L.resolve()):(ni()<=de.DEBUG&&X("QueryEngine","Query:",zr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(ni()<=de.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",zr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nn(n))):L.resolve())}Yi(e,n){if(Jp(n))return L.resolve(null);let r=nn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Vc(n,null,"F"),r=nn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=ce(...i);return this.Ji.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,l);return this.ns(n,d,a,u.readTime)?this.Yi(e,Vc(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return Jp(n)||s.isEqual(ne.min())?L.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const a=this.ts(n,i);return this.ns(n,a,r,s)?L.resolve(null):(ni()<=de.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),zr(n)),this.rs(e,a,n,P2(s,-1)).next(l=>l))})}ts(e,n){let r=new Je(w0(e));return n.forEach((s,i)=>{gl(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return ni()<=de.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",zr(n)),this.Ji.getDocumentsMatchingQuery(e,n,Jn.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new be(me),this._s=new Ns(i=>Kh(i),Qh),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WE(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function oT(t,e,n,r){return new iT(t,e,n,r)}async function $0(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let u=ce();for(const d of s){a.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}for(const d of i){l.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:a,addedBatchIds:l}))})})}function aT(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,p){const y=d.batch,v=y.keys();let S=L.resolve();return v.forEach(A=>{S=S.next(()=>p.getEntry(u,A)).next(b=>{const P=d.docVersions.get(A);ve(P!==null),b.version.compareTo(P)<0&&(y.applyToRemoteDocument(b,d),b.isValidDocument()&&(b.setReadTime(d.commitVersion),p.addEntry(b)))})}),S.next(()=>l.mutationQueue.removeMutationBatch(u,y))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ce();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function q0(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function lT(t,e){const n=re(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((p,y)=>{const v=s.get(y);if(!v)return;l.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,y).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,y)));let S=v.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(y)!==null?S=S.withResumeToken(et.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):p.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(p.resumeToken,r)),s=s.insert(y,S),function(b,P,I){return b.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(v,S,p)&&l.push(n.Ur.updateTargetData(i,S))});let u=En(),d=ce();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),l.push(uT(i,a,e.documentUpdates).next(p=>{u=p.Ps,d=p.Is})),!r.isEqual(ne.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(y=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(p)}return L.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function uT(t,e,n){let r=ce(),s=ce();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=En();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):X("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:a,Is:s}})}function cT(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function hT(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.Ur.allocateTargetId(r).next(a=>(s=new Dn(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Fc(t,e,n){const r=re(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!oo(a))throw a;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function um(t,e,n){const r=re(t);let s=ne.min(),i=ce();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,p){const y=re(u),v=y._s.get(p);return v!==void 0?L.resolve(y.os.get(v)):y.Ur.getTargetData(d,p)}(r,a,nn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?s:ne.min(),n?i:ce())).next(l=>(dT(r,nE(e),l),{documents:l,Ts:i})))}function dT(t,e,n){let r=t.us.get(e)||ne.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class cm{constructor(){this.activeTargetIds=lE()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fT{constructor(){this.so=new cm,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new cm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qo=null;function Tu(){return Qo===null?Qo=function(){return 268435456+Math.round(2147483648*Math.random())}():Qo++,"0x"+Qo.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ot="WebChannelConnection";class yT extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,a){const l=Tu(),u=this.xo(n,r.toUriEncodedString());X("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,a),this.No(n,u,d,s).then(p=>(X("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw gs("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",u,"request:",s),p})}Lo(n,r,s,i,a,l){return this.Mo(n,r,s,i,a)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Cs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>n[a]=i),s&&s.headers.forEach((i,a)=>n[a]=i)}xo(n,r){const s=mT[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Tu();return new Promise((a,l)=>{const u=new s0;u.setWithCredentials(!0),u.listenOnce(i0.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case la.NO_ERROR:const p=u.getResponseJson();X(ot,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),a(p);break;case la.TIMEOUT:X(ot,`RPC '${e}' ${i} timed out`),l(new Z(z.DEADLINE_EXCEEDED,"Request time out"));break;case la.HTTP_ERROR:const y=u.getStatus();if(X(ot,`RPC '${e}' ${i} failed with status:`,y,"response text:",u.getResponseText()),y>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const S=v==null?void 0:v.error;if(S&&S.status&&S.message){const A=function(P){const I=P.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(I)>=0?I:z.UNKNOWN}(S.status);l(new Z(A,S.message))}else l(new Z(z.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Z(z.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{X(ot,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);X(ot,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=Tu(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=l0(),l=a0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=i.join("");X(ot,`Creating RPC '${e}' stream ${s}: ${p}`,u);const y=a.createWebChannel(p,u);let v=!1,S=!1;const A=new gT({Io:P=>{S?X(ot,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(v||(X(ot,`Opening RPC '${e}' stream ${s} transport.`),y.open(),v=!0),X(ot,`RPC '${e}' stream ${s} sending:`,P),y.send(P))},To:()=>y.close()}),b=(P,I,w)=>{P.listen(I,k=>{try{w(k)}catch(j){setTimeout(()=>{throw j},0)}})};return b(y,ai.EventType.OPEN,()=>{S||(X(ot,`RPC '${e}' stream ${s} transport opened.`),A.yo())}),b(y,ai.EventType.CLOSE,()=>{S||(S=!0,X(ot,`RPC '${e}' stream ${s} transport closed`),A.So())}),b(y,ai.EventType.ERROR,P=>{S||(S=!0,gs(ot,`RPC '${e}' stream ${s} transport errored:`,P),A.So(new Z(z.UNAVAILABLE,"The operation could not be completed")))}),b(y,ai.EventType.MESSAGE,P=>{var I;if(!S){const w=P.data[0];ve(!!w);const k=w,j=k.error||((I=k[0])===null||I===void 0?void 0:I.error);if(j){X(ot,`RPC '${e}' stream ${s} received error:`,j);const O=j.status;let M=function(T){const E=Me[T];if(E!==void 0)return j0(E)}(O),x=j.message;M===void 0&&(M=z.INTERNAL,x="Unknown error status: "+O+" with message "+j.message),S=!0,A.So(new Z(M,x)),y.close()}else X(ot,`RPC '${e}' stream ${s} received:`,w),A.bo(w)}}),b(l,o0.STAT_EVENT,P=>{P.stat===Ac.PROXY?X(ot,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===Ac.NOPROXY&&X(ot,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{A.wo()},0),A}}function Iu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(t){return new CE(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e,n,r,s,i,a,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new H0(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(wn(n.toString()),wn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Z(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vT extends G0{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=bE(this.serializer,e),r=function(i){if(!("targetChange"in i))return ne.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?ne.min():a.readTime?sn(a.readTime):ne.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Lc(this.serializer),n.addTarget=function(i,a){let l;const u=a.target;if(l=jc(u)?{documents:jE(i,u)}:{query:VE(i,u)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=M0(i,a.resumeToken);const d=Dc(i,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(ne.min())>0){l.readTime=Ga(i,a.snapshotVersion.toTimestamp());const d=Dc(i,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=ME(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Lc(this.serializer),n.removeTarget=e,this.a_(n)}}class _T extends G0{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ve(!!e.streamToken),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=PE(e.writeResults,e.commitTime),r=sn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Lc(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>RE(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Z(z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,Mc(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Z(z.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Lo(e,Mc(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Z(z.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class wT{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(wn(n),this.D_=!1):X("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{r.enqueueAndForget(async()=>{Pr(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=re(u);d.L_.add(4),await uo(d),d.q_.set("Unknown"),d.L_.delete(4),await wl(d)}(this))})}),this.q_=new wT(r,s)}}async function wl(t){if(Pr(t))for(const e of t.B_)await e(!0)}async function uo(t){for(const e of t.B_)await e(!1)}function W0(t,e){const n=re(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),ad(n)?od(n):As(n).r_()&&id(n,e))}function sd(t,e){const n=re(t),r=As(n);n.N_.delete(e),r.r_()&&K0(n,e),n.N_.size===0&&(r.r_()?r.o_():Pr(n)&&n.q_.set("Unknown"))}function id(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}As(t).A_(e)}function K0(t,e){t.Q_.xe(e),As(t).R_(e)}function od(t){t.Q_=new TE({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),As(t).start(),t.q_.v_()}function ad(t){return Pr(t)&&!As(t).n_()&&t.N_.size>0}function Pr(t){return re(t).L_.size===0}function Q0(t){t.Q_=void 0}async function TT(t){t.q_.set("Online")}async function IT(t){t.N_.forEach((e,n)=>{id(t,e)})}async function kT(t,e){Q0(t),ad(t)?(t.q_.M_(e),od(t)):t.q_.set("Unknown")}async function ST(t,e,n){if(t.q_.set("Online"),e instanceof D0&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wa(t,r)}else if(e instanceof ha?t.Q_.Ke(e):e instanceof V0?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ne.min()))try{const r=await q0(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Q_.rt(a);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const p=i.N_.get(d);p&&i.N_.set(d,p.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,d)=>{const p=i.N_.get(u);if(!p)return;i.N_.set(u,p.withResumeToken(et.EMPTY_BYTE_STRING,p.snapshotVersion)),K0(i,u);const y=new Dn(p.target,u,d,p.sequenceNumber);id(i,y)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){X("RemoteStore","Failed to raise snapshot:",r),await Wa(t,r)}}async function Wa(t,e,n){if(!oo(e))throw e;t.L_.add(1),await uo(t),t.q_.set("Offline"),n||(n=()=>q0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await wl(t)})}function Y0(t,e){return e().catch(n=>Wa(t,n,e))}async function El(t){const e=re(t),n=er(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;CT(e);)try{const s=await cT(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,NT(e,s)}catch(s){await Wa(e,s)}X0(e)&&J0(e)}function CT(t){return Pr(t)&&t.O_.length<10}function NT(t,e){t.O_.push(e);const n=er(t);n.r_()&&n.V_&&n.m_(e.mutations)}function X0(t){return Pr(t)&&!er(t).n_()&&t.O_.length>0}function J0(t){er(t).start()}async function AT(t){er(t).p_()}async function bT(t){const e=er(t);for(const n of t.O_)e.m_(n.mutations)}async function RT(t,e,n){const r=t.O_.shift(),s=Jh.from(r,e,n);await Y0(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await El(t)}async function PT(t,e){e&&er(t).V_&&await async function(r,s){if(function(a){return xE(a)&&a!==z.ABORTED}(s.code)){const i=r.O_.shift();er(r).s_(),await Y0(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await El(r)}}(t,e),X0(t)&&J0(t)}async function dm(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const r=Pr(n);n.L_.add(3),await uo(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await wl(n)}async function jT(t,e){const n=re(t);e?(n.L_.delete(2),await wl(n)):e||(n.L_.add(2),await uo(n),n.q_.set("Unknown"))}function As(t){return t.K_||(t.K_=function(n,r,s){const i=re(n);return i.w_(),new vT(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:TT.bind(null,t),Ro:IT.bind(null,t),mo:kT.bind(null,t),d_:ST.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),ad(t)?od(t):t.q_.set("Unknown")):(await t.K_.stop(),Q0(t))})),t.K_}function er(t){return t.U_||(t.U_=function(n,r,s){const i=re(n);return i.w_(),new _T(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:AT.bind(null,t),mo:PT.bind(null,t),f_:bT.bind(null,t),g_:RT.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await El(t)):(await t.U_.stop(),t.O_.length>0&&(X("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new _r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new ld(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ud(t,e){if(wn("AsyncQueue",`${e}: ${t}`),oo(t))return new Z(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ee.comparator(n.key,r.key):(n,r)=>ee.comparator(n.key,r.key),this.keyedMap=li(),this.sortedSet=new be(this.comparator)}static emptySet(e){return new ls(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ls)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ls;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(){this.W_=new be(ee.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):te():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ws{constructor(e,n,r,s,i,a,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new ws(e,n,ls.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ml(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class DT{constructor(){this.queries=pm(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=re(n),i=s.queries;s.queries=pm(),i.forEach((a,l)=>{for(const u of l.j_)u.onError(r)})})(this,new Z(z.ABORTED,"Firestore shutting down"))}}function pm(){return new Ns(t=>x0(t),ml)}async function MT(t,e){const n=re(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new VT,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=ud(a,`Initialization of query '${zr(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&cd(n)}async function OT(t,e){const n=re(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function LT(t,e){const n=re(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.j_)l.X_(s)&&(r=!0);a.z_=s}}r&&cd(n)}function FT(t,e,n){const r=re(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function cd(t){t.Y_.forEach(e=>{e.next()})}var zc,mm;(mm=zc||(zc={})).ea="default",mm.Cache="cache";class zT{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ws(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ws.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==zc.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e){this.key=e}}class ev{constructor(e){this.key=e}}class UT{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ce(),this.mutatedKeys=ce(),this.Aa=w0(e),this.Ra=new ls(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new fm,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,y)=>{const v=s.get(p),S=gl(this.query,y)?y:null,A=!!v&&this.mutatedKeys.has(v.key),b=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let P=!1;v&&S?v.data.isEqual(S.data)?A!==b&&(r.track({type:3,doc:S}),P=!0):this.ga(v,S)||(r.track({type:2,doc:S}),P=!0,(u&&this.Aa(S,u)>0||d&&this.Aa(S,d)<0)&&(l=!0)):!v&&S?(r.track({type:0,doc:S}),P=!0):v&&!S&&(r.track({type:1,doc:v}),P=!0,(u||d)&&(l=!0)),P&&(S?(a=a.add(S),i=b?i.add(p):i.delete(p)):(a=a.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:a,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((p,y)=>function(S,A){const b=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return b(S)-b(A)}(p.type,y.type)||this.Aa(p.doc,y.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,a.length!==0||d?{snapshot:new ws(this.query,e.Ra,i,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new fm,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ce(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new ev(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Z0(r))}),n}ba(e){this.Ta=e.Ts,this.da=ce();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ws.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class BT{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class $T{constructor(e){this.key=e,this.va=!1}}class qT{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Ns(l=>x0(l),ml),this.Ma=new Map,this.xa=new Set,this.Oa=new be(ee.comparator),this.Na=new Map,this.La=new td,this.Ba={},this.ka=new Map,this.qa=xs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function HT(t,e,n=!0){const r=ov(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await tv(r,e,n,!0),s}async function GT(t,e){const n=ov(t);await tv(n,e,!0,!1)}async function tv(t,e,n,r){const s=await hT(t.localStore,nn(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await WT(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&W0(t.remoteStore,s),l}async function WT(t,e,n,r,s){t.Ka=(y,v,S)=>async function(b,P,I,w){let k=P.view.ma(I);k.ns&&(k=await um(b.localStore,P.query,!1).then(({documents:x})=>P.view.ma(x,k)));const j=w&&w.targetChanges.get(P.targetId),O=w&&w.targetMismatches.get(P.targetId)!=null,M=P.view.applyChanges(k,b.isPrimaryClient,j,O);return ym(b,P.targetId,M.wa),M.snapshot}(t,y,v,S);const i=await um(t.localStore,e,!0),a=new UT(e,i.Ts),l=a.ma(i.documents),u=lo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(l,t.isPrimaryClient,u);ym(t,n,d.wa);const p=new BT(e,n,a);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function KT(t,e,n){const r=re(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(a=>!ml(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Fc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&sd(r.remoteStore,s.targetId),Uc(r,s.targetId)}).catch(io)):(Uc(r,s.targetId),await Fc(r.localStore,s.targetId,!0))}async function QT(t,e){const n=re(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),sd(n.remoteStore,r.targetId))}async function YT(t,e,n){const r=rI(t);try{const s=await function(a,l){const u=re(a),d=Ue.now(),p=l.reduce((S,A)=>S.add(A.key),ce());let y,v;return u.persistence.runTransaction("Locally write mutations","readwrite",S=>{let A=En(),b=ce();return u.cs.getEntries(S,p).next(P=>{A=P,A.forEach((I,w)=>{w.isValidDocument()||(b=b.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(S,A)).next(P=>{y=P;const I=[];for(const w of l){const k=mE(w,y.get(w.key).overlayedDocument);k!=null&&I.push(new sr(w.key,k,f0(k.value.mapValue),rn.exists(!0)))}return u.mutationQueue.addMutationBatch(S,d,I,l)}).next(P=>{v=P;const I=P.applyToLocalDocumentSet(y,b);return u.documentOverlayCache.saveOverlays(S,P.batchId,I)})}).then(()=>({batchId:v.batchId,changes:T0(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let d=a.Ba[a.currentUser.toKey()];d||(d=new be(me)),d=d.insert(l,u),a.Ba[a.currentUser.toKey()]=d}(r,s.batchId,n),await co(r,s.changes),await El(r.remoteStore)}catch(s){const i=ud(s,"Failed to persist write");n.reject(i)}}async function nv(t,e){const n=re(t);try{const r=await lT(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Na.get(i);a&&(ve(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?ve(a.va):s.removedDocuments.size>0&&(ve(a.va),a.va=!1))}),await co(n,r,e)}catch(r){await io(r)}}function gm(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,a)=>{const l=a.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=re(a);u.onlineState=l;let d=!1;u.queries.forEach((p,y)=>{for(const v of y.j_)v.Z_(l)&&(d=!0)}),d&&cd(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function XT(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let a=new be(ee.comparator);a=a.insert(i,ut.newNoDocument(i,ne.min()));const l=ce().add(i),u=new _l(ne.min(),new Map,new be(me),a,l);await nv(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),hd(r)}else await Fc(r.localStore,e,!1).then(()=>Uc(r,e,n)).catch(io)}async function JT(t,e){const n=re(t),r=e.batch.batchId;try{const s=await aT(n.localStore,e);sv(n,r,null),rv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await co(n,s)}catch(s){await io(s)}}async function ZT(t,e,n){const r=re(t);try{const s=await function(a,l){const u=re(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return u.mutationQueue.lookupMutationBatch(d,l).next(y=>(ve(y!==null),p=y.keys(),u.mutationQueue.removeMutationBatch(d,y))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,p,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>u.localDocuments.getDocuments(d,p))})}(r.localStore,e);sv(r,e,n),rv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await co(r,s)}catch(s){await io(s)}}function rv(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function sv(t,e,n){const r=re(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Uc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||iv(t,r)})}function iv(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(sd(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),hd(t))}function ym(t,e,n){for(const r of n)r instanceof Z0?(t.La.addReference(r.key,e),eI(t,r)):r instanceof ev?(X("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||iv(t,r.key)):te()}function eI(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(X("SyncEngine","New document in limbo: "+n),t.xa.add(r),hd(t))}function hd(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ee(je.fromString(e)),r=t.qa.next();t.Na.set(r,new $T(n)),t.Oa=t.Oa.insert(n,r),W0(t.remoteStore,new Dn(nn(Yh(n.path)),r,"TargetPurposeLimboResolution",qh.oe))}}async function co(t,e,n){const r=re(t),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{a.push(r.Ka(u,e,n).then(d=>{var p;if((d||n)&&r.isPrimaryClient){const y=d?!d.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,y?"current":"not-current")}if(d){s.push(d);const y=rd.Wi(u.targetId,d);i.push(y)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(u,d){const p=re(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>L.forEach(d,v=>L.forEach(v.$i,S=>p.persistence.referenceDelegate.addReference(y,v.targetId,S)).next(()=>L.forEach(v.Ui,S=>p.persistence.referenceDelegate.removeReference(y,v.targetId,S)))))}catch(y){if(!oo(y))throw y;X("LocalStore","Failed to update sequence numbers: "+y)}for(const y of d){const v=y.targetId;if(!y.fromCache){const S=p.os.get(v),A=S.snapshotVersion,b=S.withLastLimboFreeSnapshotVersion(A);p.os=p.os.insert(v,b)}}}(r.localStore,i))}async function tI(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());const r=await $0(n.localStore,e);n.currentUser=e,function(i,a){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new Z(z.CANCELLED,a))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await co(n,r.hs)}}function nI(t,e){const n=re(t),r=n.Na.get(e);if(r&&r.va)return ce().add(r.key);{let s=ce();const i=n.Ma.get(e);if(!i)return s;for(const a of i){const l=n.Fa.get(a);s=s.unionWith(l.view.Va)}return s}}function ov(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=nv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=XT.bind(null,e),e.Ca.d_=LT.bind(null,e.eventManager),e.Ca.$a=FT.bind(null,e.eventManager),e}function rI(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZT.bind(null,e),e}class Ka{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=xl(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return oT(this.persistence,new sT,e.initialUser,this.serializer)}Ga(e){return new tT(nd.Zr,this.serializer)}Wa(e){return new fT}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ka.provider={build:()=>new Ka};class Bc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=tI.bind(null,this.syncEngine),await jT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new DT}()}createDatastore(e){const n=xl(e.databaseInfo.databaseId),r=function(i){return new yT(i)}(e.databaseInfo);return function(i,a,l,u){return new xT(i,a,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new ET(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>gm(this.syncEngine,n,0),function(){return hm.D()?new hm:new pT}())}createSyncEngine(e,n){return function(s,i,a,l,u,d,p){const y=new qT(s,i,a,l,u,d);return p&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=re(s);X("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await uo(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Bc.provider={build:()=>new Bc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):wn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=at.UNAUTHENTICATED,this.clientId=c0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{X("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(X("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ud(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ku(t,e){t.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await $0(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function vm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await oI(t);X("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>dm(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>dm(e.remoteStore,s)),t._onlineComponents=e}async function oI(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await ku(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===z.FAILED_PRECONDITION||s.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;gs("Error using user provided cache. Falling back to memory cache: "+n),await ku(t,new Ka)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await ku(t,new Ka);return t._offlineComponents}async function av(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await vm(t,t._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await vm(t,new Bc))),t._onlineComponents}function aI(t){return av(t).then(e=>e.syncEngine)}async function _m(t){const e=await av(t),n=e.eventManager;return n.onListen=HT.bind(null,e.syncEngine),n.onUnlisten=KT.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=GT.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=QT.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(t,e,n){if(!n)throw new Z(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function uI(t,e,n,r){if(e===!0&&r===!0)throw new Z(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function wm(t){if(!ee.isDocumentKey(t))throw new Z(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function dd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te()}function Kn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Z(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=dd(t);throw new Z(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Z(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Z(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lv((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Z(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Z(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Z(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fd{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Em({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Z(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Em(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new T2;switch(r.type){case"firstParty":return new C2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=xm.get(n);r&&(X("ComponentProvider","Removing Datastore"),xm.delete(n),r.terminate())}(this),Promise.resolve()}}function cI(t,e,n,r={}){var s;const i=(t=Kn(t,fd))._getSettings(),a=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&gs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=at.MOCK_USER;else{l=nw(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new Z(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new at(d)}t._authCredentials=new I2(new u0(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Tl(this.firestore,e,this._query)}}class Rt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ji(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rt(this.firestore,e,this._key)}}class Ji extends Tl{constructor(e,n,r){super(e,n,Yh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rt(this.firestore,null,new ee(e))}withConverter(e){return new Ji(this.firestore,e,this._path)}}function Tm(t,e,...n){if(t=Xn(t),arguments.length===1&&(e=c0.newId()),lI("doc","path",e),t instanceof fd){const r=je.fromString(e,...n);return wm(r),new Rt(t,null,new ee(r))}{if(!(t instanceof Rt||t instanceof Ji))throw new Z(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return wm(r),new Rt(t.firestore,t instanceof Ji?t.converter:null,new ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new H0(this,"async_queue_retry"),this.Vu=()=>{const r=Iu();r&&X("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Iu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Iu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new _r;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!oo(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(r);throw wn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=ld.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&te()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function km(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Zi extends fd{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Im,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Im(e),this._firestoreClient=void 0,await e}}}function hI(t,e){const n=typeof t=="object"?t:h2(),r=typeof t=="string"?t:"(default)",s=a2(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=ew("firestore");i&&cI(s,...i)}return s}function uv(t){if(t._terminated)throw new Z(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||dI(t),t._firestoreClient}function dI(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,d,p){return new z2(l,u,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,lv(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new iI(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Es(et.fromBase64String(e))}catch(n){throw new Z(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Es(et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Z(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ye(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Z(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Z(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI=/^__.*__$/;class pI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new sr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ao(e,this.data,n,this.fieldTransforms)}}class cv{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new sr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function hv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}class yd{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new yd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Qa(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(hv(this.Cu)&&fI.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class mI{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||xl(e)}Qu(e,n,r,s=!1){return new yd({Cu:e,methodName:n,qu:r,path:Ye.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dv(t){const e=t._freezeSettings(),n=xl(t._databaseId);return new mI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function gI(t,e,n,r,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);vd("Data must be an object, but it was:",a,r);const l=fv(r,a);let u,d;if(i.merge)u=new At(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const p=[];for(const y of i.mergeFields){const v=$c(e,y,n);if(!a.contains(v))throw new Z(z.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);mv(p,v)||p.push(v)}u=new At(p),d=a.fieldTransforms.filter(y=>u.covers(y.field))}else u=null,d=a.fieldTransforms;return new pI(new xt(l),u,d)}class kl extends pd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kl}}function yI(t,e,n,r){const s=t.Qu(1,e,n);vd("Data must be an object, but it was:",s,r);const i=[],a=xt.empty();Rr(r,(u,d)=>{const p=_d(e,u,n);d=Xn(d);const y=s.Nu(p);if(d instanceof kl)i.push(p);else{const v=Sl(d,y);v!=null&&(i.push(p),a.set(p,v))}});const l=new At(i);return new cv(a,l,s.fieldTransforms)}function vI(t,e,n,r,s,i){const a=t.Qu(1,e,n),l=[$c(e,r,n)],u=[s];if(i.length%2!=0)throw new Z(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<i.length;v+=2)l.push($c(e,i[v])),u.push(i[v+1]);const d=[],p=xt.empty();for(let v=l.length-1;v>=0;--v)if(!mv(d,l[v])){const S=l[v];let A=u[v];A=Xn(A);const b=a.Nu(S);if(A instanceof kl)d.push(S);else{const P=Sl(A,b);P!=null&&(d.push(S),p.set(S,P))}}const y=new At(d);return new cv(p,y,a.fieldTransforms)}function Sl(t,e){if(pv(t=Xn(t)))return vd("Unsupported field value:",e,t),fv(t,e);if(t instanceof pd)return function(r,s){if(!hv(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let u=Sl(l,s.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Xn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return uE(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ue.fromDate(r);return{timestampValue:Ga(s.serializer,i)}}if(r instanceof Ue){const i=new Ue(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ga(s.serializer,i)}}if(r instanceof md)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Es)return{bytesValue:M0(s.serializer,r._byteString)};if(r instanceof Rt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ed(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof gd)return function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return Xh(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${dd(r)}`)}(t,e)}function fv(t,e){const n={};return h0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rr(t,(r,s)=>{const i=Sl(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function pv(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ue||t instanceof md||t instanceof Es||t instanceof Rt||t instanceof pd||t instanceof gd)}function vd(t,e,n){if(!pv(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=dd(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function $c(t,e,n){if((e=Xn(e))instanceof Il)return e._internalPath;if(typeof e=="string")return _d(t,e);throw Qa("Field path arguments must be of type string or ",t,!1,void 0,n)}const _I=new RegExp("[~\\*/\\[\\]]");function _d(t,e,n){if(e.search(_I)>=0)throw Qa(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Il(...e.split("."))._internalPath}catch{throw Qa(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Qa(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new Z(z.INVALID_ARGUMENT,l+t+u)}function mv(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(yv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class xI extends gv{data(){return super.data()}}function yv(t,e){return typeof e=="string"?_d(t,e):e instanceof Il?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Z(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class EI{convertValue(e,n="none"){switch(Nr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ve(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Cr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Rr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>Ve(a.doubleValue));return new gd(i)}convertGeoPoint(e){return new md(Ve(e.latitude),Ve(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Gh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Wi(e));default:return null}}convertTimestamp(e){const n=Zn(e);return new Ue(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=je.fromString(e);ve(B0(r));const s=new Ki(r.get(1),r.get(3)),i=new ee(r.popFirst(5));return s.isEqual(n)||wn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vv extends gv{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new da(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(yv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class da extends vv{data(e={}){return super.data(e)}}class II{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ci(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new da(this._firestore,this._userDataWriter,r.key,r,new ci(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Z(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new da(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ci(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new da(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ci(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,p=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),p=a.indexOf(l.doc.key)),{type:kI(l.type),doc:u,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function kI(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te()}}class _v extends EI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Es(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,n)}}function SI(t,e,n){t=Kn(t,Rt);const r=Kn(t.firestore,Zi),s=TI(t.converter,e);return xv(r,[gI(dv(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,rn.none())])}function CI(t,e,n,...r){t=Kn(t,Rt);const s=Kn(t.firestore,Zi),i=dv(s);let a;return a=typeof(e=Xn(e))=="string"||e instanceof Il?vI(i,"updateDoc",t._key,e,n,r):yI(i,"updateDoc",t._key,e),xv(s,[a.toMutation(t._key,rn.exists(!0))])}function NI(t,...e){var n,r,s;t=Xn(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||km(e[a])||(i=e[a],a++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(km(e[a])){const y=e[a];e[a]=(n=y.next)===null||n===void 0?void 0:n.bind(y),e[a+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[a+2]=(s=y.complete)===null||s===void 0?void 0:s.bind(y)}let u,d,p;if(t instanceof Rt)d=Kn(t.firestore,Zi),p=Yh(t._key.path),u={next:y=>{e[a]&&e[a](AI(d,t,y))},error:e[a+1],complete:e[a+2]};else{const y=Kn(t,Tl);d=Kn(y.firestore,Zi),p=y._query;const v=new _v(d);u={next:S=>{e[a]&&e[a](new II(d,v,y,S))},error:e[a+1],complete:e[a+2]},wI(t._query)}return function(v,S,A,b){const P=new sI(b),I=new zT(S,P,A);return v.asyncQueue.enqueueAndForget(async()=>MT(await _m(v),I)),()=>{P.Za(),v.asyncQueue.enqueueAndForget(async()=>OT(await _m(v),I))}}(uv(d),p,l,u)}function xv(t,e){return function(r,s){const i=new _r;return r.asyncQueue.enqueueAndForget(async()=>YT(await aI(r),s,i)),i.promise}(uv(t),e)}function AI(t,e,n){const r=n.docs.get(e._key),s=new _v(t);return new vv(t,s,e._key,r,new ci(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Cs=s})(c2),za(new $i("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new Zi(new k2(r.getProvider("auth-internal")),new A2(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Z(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ki(d.options.projectId,p)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),as(Bp,"4.7.3",e),as(Bp,"4.7.3","esm2017")})();const oe={ITINERARY:"trip_itinerary",BOOKINGS:"trip_bookings",GUIDES:"trip_guides",PACKING:"trip_packing_list",MEMO:"trip_memo_list",WISH:"trip_wish_list",PHOTOS:"trip_photos",FIREBASE_CONFIG:"trip_firebase_config"},Sm="tokyo_trip_2025_shared",wv=F.createContext(void 0),bI=({children:t})=>{const[e,n]=F.useState(!0),[r,s]=F.useState(null),[i,a]=F.useState(!1),[l,u]=F.useState(null),[d,p]=F.useState("disconnected"),y=F.useRef(null),v=F.useRef(null),S=F.useRef(null),[A,b]=F.useState(Sp),[P,I]=F.useState(kp),[w,k]=F.useState(_c),[j,O]=F.useState(Cp.map(H=>({id:H,text:H,checked:!1}))),[M,x]=F.useState([]),[g,T]=F.useState([]),[E,C]=F.useState({}),N=async H=>{if(!(d==="connected"||d==="connecting")){p("connecting");try{const W=Op().length===0?e0(H):Op()[0],J=hI(W);y.current=W,v.current=J;const Se=Tm(J,"trips",Sm),Yt=NI(Se,In=>{if(In.exists()){const Ge=In.data();Ge.itinerary&&b(Ge.itinerary),Ge.bookings&&I(Ge.bookings),Ge.guideSpots&&k(Ge.guideSpots),Ge.packingList&&O(Ge.packingList),Ge.memoList&&x(Ge.memoList),Ge.wishList&&T(Ge.wishList),Ge.photos&&C(Ge.photos)}else SI(Se,{itinerary:A,bookings:P,guideSpots:w,packingList:j,memoList:M,wishList:g,photos:E});p("connected"),a(!0),u(H),localStorage.setItem(oe.FIREBASE_CONFIG,JSON.stringify(H))},In=>{console.error("Firebase Snapshot Error:",In),p("error"),s("")});S.current=Yt}catch(W){console.error("Firebase Connection Error:",W),p("error"),s("")}}},_=()=>{S.current&&S.current(),a(!1),p("disconnected"),u(null),localStorage.removeItem(oe.FIREBASE_CONFIG),window.location.reload()};F.useEffect(()=>{try{const H=(J,Se)=>{const Yt=localStorage.getItem(J);return Yt?JSON.parse(Yt):Se};if(b(H(oe.ITINERARY,Sp)),I(H(oe.BOOKINGS,kp)),k(H(oe.GUIDES,_c)),O(H(oe.PACKING,Cp.map(J=>({id:J,text:J,checked:!1})))),x(H(oe.MEMO,[])),T(H(oe.WISH,[])),C(H(oe.PHOTOS,{})),dn.apiKey&&!dn.apiKey.includes(""))console.log("Auto-connecting using hardcoded config..."),N(dn);else{const J=localStorage.getItem(oe.FIREBASE_CONFIG);if(J){const Se=JSON.parse(J);u(Se),N(Se)}}}catch(H){console.error("Initialization Error:",H),s("")}finally{n(!1)}return()=>{S.current&&S.current()}},[]);const K=(H,W,J)=>{try{localStorage.setItem(H,JSON.stringify(W))}catch(Se){console.error("Local Save Error:",Se)}if(i&&v.current&&d==="connected"){const Se=Tm(v.current,"trips",Sm);CI(Se,{[J]:W}).catch(Yt=>{console.error("Cloud Save Error:",Yt)})}},ge=H=>{b(H),K(oe.ITINERARY,H,"itinerary")},B=(H,W)=>{const J=[...A];J[H]={...J[H],items:W},ge(J)},ie=H=>{I(H),K(oe.BOOKINGS,H,"bookings")},D=H=>{const W=[...P,H];ie(W)},q=H=>{const W=P.filter(J=>J.id!==H);ie(W)},Y=(H,W)=>{const J=P.map(Se=>Se.id===H?{...Se,imageUrl:W}:Se);ie(J)},G=H=>{k(H),K(oe.GUIDES,H,"guideSpots")},se=H=>{const W=[...w,H];G(W)},_e=H=>{const W=w.filter(J=>J.id!==H);G(W)},vt=H=>{const W=w.map(J=>J.id===H.id?H:J);G(W)},ht=H=>{O(H),K(oe.PACKING,H,"packingList")},kt=H=>{const W=j.map(J=>J.id===H?{...J,checked:!J.checked}:J);ht(W)},He=H=>{x(H),K(oe.MEMO,H,"memoList")},jr=H=>{const W=[...M,H];He(W)},Cl=H=>{const W=M.filter(J=>J.id!==H);He(W)},Vr=H=>{const W=M.map(J=>J.id===H?{...J,checked:!J.checked}:J);He(W)},Qt=H=>{T(H),K(oe.WISH,H,"wishList")},Rs=H=>{const W=[...g,H];Qt(W)},Ps=H=>{const W=g.filter(J=>J.id!==H);Qt(W)},js=H=>{const W=g.map(J=>J.id===H?{...J,checked:!J.checked}:J);Qt(W)},Vs=(H,W)=>{const J={...E,[H]:W};C(J),K(oe.PHOTOS,J,"photos")},ho=H=>{const W={...E};delete W[H],C(W),K(oe.PHOTOS,W,"photos")},Nl=()=>{const H={[oe.ITINERARY]:A,[oe.BOOKINGS]:P,[oe.GUIDES]:w,[oe.PACKING]:j,[oe.MEMO]:M,[oe.WISH]:g,[oe.PHOTOS]:E},W=new Blob([JSON.stringify(H)],{type:"application/json"}),J=URL.createObjectURL(W),Se=document.createElement("a");Se.href=J,Se.download=`tokyo_trip_backup_${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(Se),Se.click(),document.body.removeChild(Se),URL.revokeObjectURL(J)},Al=H=>{try{const W=JSON.parse(H);return typeof W!="object"?!1:(W[oe.ITINERARY]&&ge(W[oe.ITINERARY]),W[oe.BOOKINGS]&&ie(W[oe.BOOKINGS]),W[oe.GUIDES]&&G(W[oe.GUIDES]),W[oe.PACKING]&&ht(W[oe.PACKING]),W[oe.MEMO]&&He(W[oe.MEMO]),W[oe.WISH]&&Qt(W[oe.WISH]),W[oe.PHOTOS]&&(C(W[oe.PHOTOS]),K(oe.PHOTOS,W[oe.PHOTOS],"photos")),!0)}catch(W){return console.error(W),!1}};return c.jsx(wv.Provider,{value:{itinerary:A,setItinerary:ge,updateItineraryItem:B,bookings:P,setBookings:ie,addBooking:D,deleteBooking:q,updateBookingPhoto:Y,guideSpots:w,addGuideSpot:se,deleteGuideSpot:_e,updateGuideSpot:vt,packingList:j,setPackingList:ht,togglePackingItem:kt,memoList:M,setMemoList:He,addMemoItem:jr,deleteMemoItem:Cl,toggleMemoItem:Vr,wishList:g,setWishList:Qt,addWishItem:Rs,deleteWishItem:Ps,toggleWishItem:js,photos:E,uploadPhoto:Vs,removePhoto:ho,exportData:Nl,importData:Al,isLoading:e,error:r,isCloudMode:i,cloudConfig:l,connectToCloud:N,disconnectCloud:_,connectionStatus:d},children:t})},bs=()=>{const t=F.useContext(wv);if(!t)throw new Error("useTripContext must be used within a TripProvider");return t},RI="0000",PI=t=>{switch(t){case"flight":return c.jsx(xi,{size:16});case"transport":return c.jsx($x,{size:16});case"food":return c.jsx(Gy,{size:16});case"hotel":return c.jsx(xc,{size:16});case"important":return c.jsx(Uy,{size:16});case"activity":return c.jsx(kr,{size:16});default:return c.jsx(Vx,{size:16})}},jI=(t,e=24,n="")=>{switch(t){case"sunny":return c.jsx(Bx,{size:e,className:`text-orange-400 ${n}`});case"rainy":return c.jsx(jx,{size:e,className:`text-blue-400 ${n}`});default:return c.jsx(La,{size:e,className:`text-gray-400 ${n}`})}},VI=t=>{switch(t){case"sunny":return"";case"rainy":return"";case"cloudy":return"";default:return""}},Cm=t=>{switch(t){case"flight":return"border-pink-300 bg-pink-50";case"hotel":return"border-blue-200 bg-blue-50";case"food":return"border-yellow-300 bg-yellow-50";default:return"border-stone-200 bg-white"}},DI=()=>{const[t,e]=F.useState({days:0,hours:0}),n=new Date("2025-12-17T00:00:00");F.useEffect(()=>{const s=()=>{const a=new Date,l=n.getTime()-a.getTime();if(l>0){const u=Math.floor(l/864e5),d=Math.floor(l/(1e3*60*60)%24);e({days:u,hours:d})}else e({days:0,hours:0})};s();const i=setInterval(s,6e4);return()=>clearInterval(i)},[]);const r=new Date>=n;return c.jsxs("div",{className:"mx-4 mb-6 bg-stone-800 rounded-3xl p-6 text-white shadow-lg relative overflow-hidden",children:[c.jsxs("div",{className:"relative z-10 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-stone-400 font-bold uppercase tracking-widest mb-1",children:r?"":""}),c.jsx("div",{className:"text-2xl font-bold",children:r?"":""})]}),c.jsx("div",{className:"text-right",children:r?c.jsx("div",{className:"p-2 bg-muji-highlight rounded-full",children:c.jsx(xi,{size:24,className:"text-white"})}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-4xl font-mono font-bold text-muji-highlight",children:t.days}),c.jsx("div",{className:"text-xs text-stone-400",children:""})]})})]}),c.jsx("div",{className:"absolute -bottom-10 -right-10 w-32 h-32 bg-stone-700 rounded-full opacity-50"})]})},MI=({item:t,dayDate:e,onClose:n,onNavigate:r})=>{var O,M;const{photos:s,uploadPhoto:i,removePhoto:a,itinerary:l,updateItineraryItem:u}=bs(),[d,p]=F.useState(!1),[y,v]=F.useState(t.notes||""),S=`photo_${e}_${t.time}`.replace(/[:.]/g,"-"),A=s[S],b=!t.linkTo&&_c.find(x=>t.activity.includes(x.title)||x.title.includes(t.activity)),P=!t.linkTo&&(t.type==="hotel"||t.type==="food"),I=x=>{var T;const g=(T=x.target.files)==null?void 0:T[0];if(g){if(g.size>500*1024){alert(" 500KB");return}const E=new FileReader;E.onloadend=()=>{const C=E.result;try{i(S,C)}catch{alert("")}},E.readAsDataURL(g)}},w=()=>{window.confirm("")&&a(S)},k=()=>{const x=l.findIndex(E=>E.date===e.split("-").slice(1).join("/").replace("-","/").replace("2025/","")),g=l.findIndex(E=>E.fullDate===e||E.date===e),T=x!==-1?x:g;if(T!==-1){const C=l[T].items.map(N=>{if(N.id===t.id)return{...N,notes:y};if(N.subItems){const _=N.subItems.map(K=>K.id===t.id?{...K,notes:y}:K);return{...N,subItems:_}}return N});u(T,C),p(!1)}else console.error("Could not find day to update"),alert("")},j=x=>{switch(x){case"flight":return"";case"transport":return"";case"food":return"";case"hotel":return"";case"important":return"";default:return""}};return c.jsxs("div",{className:"fixed inset-0 z-[60] flex items-end sm:items-center justify-center pointer-events-none",children:[c.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm pointer-events-auto transition-opacity",onClick:n}),c.jsxs("div",{className:"bg-white w-full max-w-md rounded-t-3xl sm:rounded-3xl p-6 relative pointer-events-auto animate-in slide-in-from-bottom duration-300 max-h-[90vh] overflow-y-auto",children:[c.jsx("button",{onClick:n,className:"absolute top-4 right-4 p-2 bg-stone-100 rounded-full text-stone-500 hover:bg-stone-200",children:c.jsx(Hn,{size:20})}),c.jsxs("div",{className:"mb-6",children:[c.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-bold bg-stone-100 text-stone-600 mb-2",children:j(t.type)}),c.jsx("h3",{className:"text-2xl font-bold text-stone-800",children:t.activity}),c.jsxs("div",{className:"flex items-center gap-2 text-stone-500 mt-1",children:[c.jsx(Lh,{size:16}),c.jsx("span",{className:"font-mono",children:t.time})]}),t.location&&c.jsxs("div",{className:"flex items-center gap-2 text-stone-500 mt-1",children:[c.jsx(kr,{size:16}),c.jsx("span",{children:t.location})]})]}),(t.linkTo||b||P)&&c.jsxs("div",{className:"mb-6 flex gap-3",children:[(((O=t.linkTo)==null?void 0:O.tab)===ae.GUIDE||b)&&c.jsxs("button",{onClick:()=>{var x;return r(ae.GUIDE,(x=t.linkTo)==null?void 0:x.targetId)},className:"flex-1 py-3 bg-emerald-50 text-emerald-700 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-emerald-100 transition-colors",children:[c.jsx(By,{size:18})," "]}),(((M=t.linkTo)==null?void 0:M.tab)===ae.BOOKINGS||P)&&c.jsxs("button",{onClick:()=>{var x;return r(ae.BOOKINGS,(x=t.linkTo)==null?void 0:x.targetId)},className:"flex-1 py-3 bg-orange-50 text-orange-700 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-orange-100 transition-colors",children:[c.jsx(Hy,{size:18})," "]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("h4",{className:"text-xs font-bold text-stone-400 uppercase tracking-wide",children:""}),d?c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>{p(!1),v(t.notes||"")},className:"text-stone-400 hover:text-red-500 p-1",children:c.jsx(Hn,{size:16})}),c.jsx("button",{onClick:k,className:"text-emerald-500 hover:text-emerald-700 p-1",children:c.jsx($y,{size:16})})]}):c.jsx("button",{onClick:()=>p(!0),className:"text-stone-400 hover:text-stone-600 p-1",children:c.jsx(qy,{size:14})})]}),d?c.jsx("textarea",{value:y,onChange:x=>v(x.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50 focus:outline-none focus:ring-2 focus:ring-stone-200 text-sm min-h-[80px]",placeholder:"..."}):t.notes?c.jsx("div",{className:"bg-yellow-50 p-4 rounded-xl border border-yellow-100",children:c.jsx("p",{className:"text-stone-700 text-sm whitespace-pre-wrap",children:t.notes})}):c.jsx("div",{className:"bg-stone-50 p-4 rounded-xl border border-stone-100 text-center",children:c.jsx("p",{className:"text-stone-400 text-sm italic",children:""})})]}),c.jsx("div",{className:"grid grid-cols-1 gap-3 mb-6",children:(t.location||t.activity)&&c.jsxs("a",{href:t.mapsLink||`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(t.location||t.activity)}`,target:"_blank",rel:"noreferrer",className:"flex items-center justify-center gap-2 w-full py-3 bg-blue-50 text-blue-600 rounded-xl font-bold hover:bg-blue-100 transition-colors",children:[c.jsx(kr,{size:18}),"  Google Maps"]})}),c.jsxs("div",{className:"border-t border-stone-100 pt-6",children:[c.jsxs("h4",{className:"text-sm font-bold text-stone-800 mb-3 flex items-center gap-2",children:[c.jsx(Lx,{size:18}),"  ()"]}),A?c.jsxs("div",{className:"relative rounded-xl overflow-hidden group",children:[c.jsx("img",{src:A,alt:"Memory",className:"w-full h-48 object-cover"}),c.jsx("button",{onClick:w,className:"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(Hn,{size:14})})]}):c.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-stone-300 rounded-xl bg-stone-50 cursor-pointer hover:bg-stone-100 transition-colors",children:[c.jsx(dl,{size:24,className:"text-stone-400 mb-2"}),c.jsx("span",{className:"text-sm text-stone-500 font-medium",children:""}),c.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:I})]})]})]})]})},Nm=({onNavigate:t})=>{const{itinerary:e,updateItineraryItem:n}=bs(),[r,s]=F.useState(0),[i,a]=F.useState(null),[l,u]=F.useState(!1),[d,p]=F.useState(!1),[y,v]=F.useState(""),[S,A]=F.useState(!1),[b,P]=F.useState(null),[I,w]=F.useState(null),[k,j]=F.useState(null),O=e[r],M=F.useRef(null),x=()=>{l?u(!1):(p(!0),v(""))},g=()=>{y===RI?(u(!0),p(!1)):(alert("PIN "),v(""))},T=(_,K)=>{w(_),j(K||null)},E=()=>{if(I){if(k){const _=O.items.find(K=>K.id===k);if(_&&_.subItems){const K=_.subItems.filter(ie=>ie.id!==I),ge={..._,subItems:K},B=O.items.map(ie=>ie.id===k?ge:ie);n(r,B)}}else{const _=O.items.filter(K=>K.id!==I);n(r,_)}w(null),j(null)}},C=_=>{P(_||null),A(!0)},N=(_,K)=>{if(b){const ge=O.items.find(B=>B.id===b);if(ge){const ie=[...ge.subItems||[],_];ie.sort((Y,G)=>Y.time.localeCompare(G.time));const D={...ge,subItems:ie},q=O.items.map(Y=>Y.id===b?D:Y);n(r,q)}}else{const ge=K?{..._,subItems:[]}:_,B=[...O.items,ge];B.sort((ie,D)=>ie.time.localeCompare(D.time)),n(r,B)}A(!1),P(null)};return c.jsxs("div",{className:"pb-24 pt-4 animate-in fade-in duration-500 relative min-h-screen flex flex-col",children:[c.jsx("div",{className:"px-4 mb-2 flex justify-end",children:c.jsx("button",{onClick:x,className:`p-2 rounded-xl transition-all ${l?"bg-stone-800 text-white shadow-md":"text-stone-300"}`,children:l?c.jsx(zh,{size:16}):c.jsx(Fh,{size:16})})}),c.jsx(DI,{}),c.jsx("div",{className:"sticky top-14 z-30 bg-muji-bg/95 backdrop-blur-sm pb-2 pt-2 border-b border-stone-200/50",children:c.jsxs("div",{ref:M,className:"flex overflow-x-auto no-scrollbar px-4 gap-3 snap-x",children:[e.map((_,K)=>{const ge=K===r;return c.jsxs("button",{onClick:()=>s(K),className:`snap-center flex-shrink-0 flex flex-col items-center justify-center w-16 h-20 rounded-2xl transition-all duration-300 border ${ge?"bg-stone-800 text-white border-stone-800 shadow-md scale-105":"bg-white text-stone-500 border-stone-200 hover:border-stone-400"}`,children:[c.jsx("span",{className:"text-xs font-medium uppercase",children:_.dayOfWeek}),c.jsx("span",{className:"text-xl font-bold font-mono",children:_.date.split("/")[1]})]},K)}),c.jsx("div",{className:"w-2"})]})}),O&&c.jsxs("div",{className:"flex-1 px-4 pt-6",children:[c.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-stone-100 mb-6 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[jI(O.weather.condition,32),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-lg font-bold text-stone-700",children:VI(O.weather.condition)}),c.jsx("span",{className:"text-xs text-stone-400 font-medium",children:"Tokyo"})]})]}),c.jsx("div",{className:"text-2xl font-mono font-bold text-stone-800 tracking-tight",children:O.weather.temp})]}),c.jsxs("div",{className:"relative pl-4 space-y-6",children:[c.jsx("div",{className:"absolute left-[21px] top-2 bottom-0 w-0.5 bg-stone-200"}),O.items.map(_=>_.subItems?c.jsxs("div",{className:"relative pl-0 mb-8",children:[l&&c.jsx("button",{onClick:K=>{K.stopPropagation(),T(_.id)},className:"absolute -left-2 top-0 bg-red-500 text-white p-1.5 rounded-full shadow-md z-30",children:c.jsx(qn,{size:12})}),c.jsx("div",{className:"relative bg-white rounded-3xl overflow-hidden shadow-lg border-2 border-emerald-100 mb-4 cursor-pointer active:scale-98 transition-transform",onClick:()=>a(_),children:c.jsxs("div",{className:"h-28 bg-emerald-50 relative",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-100/50 to-transparent"}),c.jsx(Ux,{className:"absolute top-4 right-4 text-emerald-300 opacity-50",size:48}),c.jsxs("div",{className:"absolute bottom-4 left-6",children:[c.jsx("div",{className:"text-xs font-bold text-emerald-600 uppercase tracking-widest mb-1",children:""}),c.jsx("h3",{className:"text-2xl font-bold text-stone-800",children:_.activity}),c.jsxs("div",{className:"flex items-center gap-2 text-stone-600 mt-1",children:[c.jsx(Lh,{size:14})," ",c.jsx("span",{className:"font-mono font-bold",children:_.time}),c.jsx("span",{className:"text-stone-300",children:"|"}),c.jsx(kr,{size:14})," ",c.jsx("span",{children:_.location})]})]}),l&&c.jsxs("button",{onClick:K=>{K.stopPropagation(),C(_.id)},className:"absolute top-2 right-2 bg-emerald-600 text-white px-3 py-1.5 rounded-full text-xs font-bold shadow-md hover:scale-105 transition-transform flex items-center gap-1",children:[c.jsx(Bi,{size:12})," "]})]})}),c.jsxs("div",{className:"pl-4 space-y-3",children:[_.subItems.length===0&&c.jsx("div",{className:"text-xs text-stone-400 italic pl-14",children:""}),_.subItems.map(K=>c.jsxs("div",{className:"flex items-center gap-3 relative group",onClick:()=>a(K),children:[c.jsx("div",{className:"w-14 text-right",children:c.jsx("span",{className:"text-xs font-mono font-bold text-stone-400",children:K.time})}),c.jsxs("div",{className:`flex-1 p-3 rounded-xl border cursor-pointer hover:bg-stone-50 transition-colors flex justify-between items-center ${Cm(K.type)}`,children:[c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-stone-700 text-sm",children:K.activity}),K.notes&&c.jsx("div",{className:"text-xs text-stone-400 mt-0.5",children:K.notes})]}),K.type==="important"&&c.jsx(Uy,{size:14,className:"text-orange-400"})]}),l&&c.jsx("button",{onClick:ge=>{ge.stopPropagation(),T(K.id,_.id)},className:"absolute -right-2 bg-red-100 text-red-500 p-1.5 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(Hn,{size:12})})]},K.id))]})]},_.id):c.jsxs("div",{className:"relative flex gap-4 group",children:[l&&c.jsx("button",{onClick:K=>{K.stopPropagation(),T(_.id)},className:"absolute -left-2 top-0 bg-red-500 text-white p-1.5 rounded-full shadow-md z-30",children:c.jsx(qn,{size:12})}),c.jsxs("div",{className:"z-10 flex-shrink-0 w-14 text-right pt-2",onClick:()=>a(_),children:[c.jsx("span",{className:"text-xs font-mono font-bold text-stone-500 bg-muji-bg px-1 relative z-20",children:_.time}),c.jsx("div",{className:`absolute left-[17px] mt-1.5 w-2.5 h-2.5 rounded-full border-2 border-white shadow-sm z-20 ${_.type==="important"?"bg-muji-highlight":"bg-stone-400"}`})]}),c.jsxs("div",{className:`flex-1 p-4 rounded-xl border-l-4 shadow-sm cursor-pointer hover:shadow-md transition-all active:scale-98 ${Cm(_.type)}`,onClick:()=>a(_),children:[c.jsxs("div",{className:"flex justify-between items-start mb-1",children:[c.jsx("h4",{className:"font-bold leading-tight text-stone-800",children:_.activity}),c.jsx("div",{className:"text-stone-400 opacity-50",children:PI(_.type)})]}),_.location&&c.jsxs("div",{className:"flex items-center gap-1 text-xs mt-1 text-stone-500",children:[c.jsx(kr,{size:10})," ",_.location]})]})]},_.id)),c.jsx("div",{className:"h-12"})]})]}),i&&c.jsx(MI,{item:i,dayDate:(O==null?void 0:O.date)||"",onClose:()=>a(null),onNavigate:t}),l&&c.jsx("button",{onClick:()=>C(),className:"fixed bottom-24 right-6 bg-stone-800 text-white w-14 h-14 rounded-full shadow-xl flex items-center justify-center animate-in zoom-in hover:scale-105 transition-transform z-40",children:c.jsx(Bi,{size:28})}),d&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm px-6",children:c.jsxs("div",{className:"bg-white p-8 rounded-3xl w-full max-w-sm shadow-2xl animate-in zoom-in-95",children:[c.jsx("h3",{className:"text-xl font-bold text-center mb-6 text-stone-800",children:""}),c.jsx("input",{type:"password",value:y,onChange:_=>v(_.target.value),placeholder:" PIN ",maxLength:4,className:"w-full text-center text-4xl font-mono tracking-[0.5em] border-b-2 border-stone-200 focus:border-stone-800 outline-none pb-2 mb-8 bg-transparent",autoFocus:!0}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:()=>p(!1),className:"flex-1 py-3 rounded-xl bg-stone-100 text-stone-500 font-bold",children:""}),c.jsx("button",{onClick:g,className:"flex-1 py-3 rounded-xl bg-stone-800 text-white font-bold",children:""})]})]})}),I&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm px-6",children:c.jsxs("div",{className:"bg-white p-6 rounded-3xl w-full max-w-sm shadow-2xl animate-in zoom-in-95",children:[c.jsx("h3",{className:"text-xl font-bold text-stone-800 mb-4 text-center",children:""}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>w(null),className:"flex-1 py-3 rounded-xl bg-stone-100 text-stone-600 font-bold",children:""}),c.jsx("button",{onClick:E,className:"flex-1 py-3 rounded-xl bg-red-500 text-white font-bold",children:""})]})]})}),S&&c.jsx(OI,{onClose:()=>{A(!1),P(null)},onSave:N,isSubItem:!!b})]})},OI=({onClose:t,onSave:e,isSubItem:n})=>{const[r,s]=F.useState(""),[i,a]=F.useState(""),[l,u]=F.useState(""),[d,p]=F.useState("activity"),[y,v]=F.useState(""),[S,A]=F.useState(!1),[b,P]=F.useState(!1),I=()=>{if(!r||!i)return;if(!b){P(!0);return}const w={id:Date.now().toString(),time:r,activity:i,location:l,type:d,notes:y};e(w,S)};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm px-4",children:c.jsxs("div",{className:"bg-white w-full max-w-md rounded-3xl p-6 shadow-2xl animate-in slide-in-from-bottom-10",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h3",{className:"font-bold text-xl",children:n?"":""}),c.jsx("button",{onClick:t,children:c.jsx(Hn,{size:24,className:"text-stone-400"})})]}),b?c.jsxs("div",{className:"text-center py-4",children:[c.jsxs("div",{className:"mb-6 text-stone-600",children:[" ",c.jsx("span",{className:"font-bold text-stone-800",children:i})," "]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>P(!1),className:"flex-1 py-3 bg-stone-100 text-stone-500 font-bold rounded-xl",children:""}),c.jsx("button",{onClick:I,className:"flex-1 py-3 bg-muji-highlight text-white font-bold rounded-xl shadow-md",children:""})]})]}):c.jsxs("div",{className:"space-y-4",children:[!n&&c.jsxs("div",{className:`p-3 rounded-xl border flex items-center gap-3 cursor-pointer transition-all ${S?"bg-emerald-50 border-emerald-300 ring-1 ring-emerald-300":"bg-stone-50 border-stone-200"}`,onClick:()=>A(!S),children:[c.jsx("div",{className:`w-5 h-5 rounded-md flex items-center justify-center border ${S?"bg-emerald-500 border-emerald-500 text-white":"bg-white border-stone-300"}`,children:S&&c.jsx(Fx,{size:14})}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-sm text-stone-800",children:""}),c.jsx("div",{className:"text-xs text-stone-500",children:""})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("div",{className:"w-1/3",children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:""}),c.jsx("input",{value:r,onChange:w=>s(w.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:"HH:MM"})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:""}),c.jsx("input",{value:i,onChange:w=>a(w.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:""})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:""}),c.jsx("input",{value:l,onChange:w=>u(w.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:""})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:""}),c.jsxs("select",{value:d,onChange:w=>p(w.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",children:[c.jsx("option",{value:"activity",children:""}),c.jsx("option",{value:"transport",children:""}),c.jsx("option",{value:"food",children:" ()"}),c.jsx("option",{value:"flight",children:""}),c.jsx("option",{value:"hotel",children:""}),c.jsx("option",{value:"important",children:""})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:""}),c.jsx("textarea",{value:y,onChange:w=>v(w.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50 h-20",placeholder:"..."})]}),c.jsx("button",{onClick:I,className:"w-full py-4 bg-stone-800 text-white font-bold rounded-xl mt-2",children:""})]})]})})},LI="0000",FI=({highlightId:t})=>{var ie;const{guideSpots:e,addGuideSpot:n,deleteGuideSpot:r,updateGuideSpot:s,itinerary:i}=bs(),[a,l]=F.useState(!1),[u,d]=F.useState(!1),[p,y]=F.useState(""),[v,S]=F.useState(!1),[A,b]=F.useState(null),[P,I]=F.useState(null),[w,k]=F.useState(0),j=F.useRef(null),O=i.map(D=>({date:D.date,fullDate:D.fullDate,dayOfWeek:D.dayOfWeek})),M=(ie=O[w])==null?void 0:ie.date,x=e.filter(D=>D.date===M),g=Array.from(new Set(x.map(D=>D.title)));F.useEffect(()=>{if(t){const D=e.find(q=>q.id===t);if(D&&D.date){const q=O.findIndex(Y=>Y.date===D.date);q!==-1&&k(q)}setTimeout(()=>{const q=document.getElementById(t);q&&q.scrollIntoView({behavior:"smooth",block:"center"})},300)}},[t,e]);const T=()=>{a?l(!1):(d(!0),y(""))},E=()=>{p===LI?(l(!0),d(!1)):(alert("PIN "),y(""))},C=D=>{const q=x.find(Y=>Y.title===D);if(q){const Y=document.getElementById(q.id);Y==null||Y.scrollIntoView({behavior:"smooth",block:"start"})}},N=D=>{I(D)},_=()=>{P&&(r(P),I(null))},K=()=>{b(null),S(!0)},ge=D=>{b(D),S(!0)},B=D=>{A?s(D):n(D),S(!1),b(null)};return c.jsxs("div",{className:"pb-24 pt-4 animate-in fade-in duration-500 min-h-screen flex flex-col",children:[c.jsxs("div",{className:"px-4 mb-4 flex justify-between items-center sticky top-0 z-30 bg-muji-bg pt-2 pb-2",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold tracking-widest text-stone-800",children:""}),c.jsx("div",{className:"w-10 h-1 bg-emerald-300 mt-1 rounded-full"})]}),c.jsx("button",{onClick:T,className:`p-2 rounded-xl transition-all ${a?"bg-stone-800 text-white shadow-md":"text-stone-300"}`,children:a?c.jsx(zh,{size:18}):c.jsx(Fh,{size:18})})]}),c.jsx("div",{className:"sticky top-14 z-20 bg-muji-bg/95 backdrop-blur-sm pb-2 border-b border-stone-200/50",children:c.jsxs("div",{ref:j,className:"flex overflow-x-auto no-scrollbar px-4 gap-3 snap-x",children:[O.map((D,q)=>{const Y=q===w;return c.jsxs("button",{onClick:()=>k(q),className:`snap-center flex-shrink-0 flex flex-col items-center justify-center min-w-[3.5rem] py-2 rounded-2xl transition-all duration-300 border ${Y?"bg-emerald-600 text-white border-emerald-600 shadow-md scale-105":"bg-white text-stone-500 border-stone-200"}`,children:[c.jsx("span",{className:"text-[10px] font-medium uppercase",children:D.dayOfWeek}),c.jsx("span",{className:"text-sm font-bold font-mono",children:D.date})]},q)}),c.jsx("div",{className:"w-2"})]})}),x.length>0&&c.jsx("div",{className:"px-4 py-4 flex flex-wrap gap-2",children:g.map(D=>c.jsx("button",{onClick:()=>C(D),className:"px-3 py-1.5 bg-emerald-50 text-emerald-700 rounded-full text-xs font-bold border border-emerald-100 hover:bg-emerald-100 active:scale-95 transition-all",children:D},D))}),c.jsx("div",{className:"px-4 space-y-8 mt-2",children:x.length===0?c.jsxs("div",{className:"text-center py-20 text-stone-400",children:[c.jsx("p",{children:""}),a&&c.jsx("button",{onClick:K,className:"mt-4 text-emerald-600 font-bold underline",children:""})]}):x.map(D=>c.jsxs("article",{id:D.id,className:`bg-white rounded-3xl overflow-hidden shadow-sm border transition-all duration-500 scroll-mt-32 ${t===D.id?"ring-4 ring-emerald-200 border-emerald-400 scale-[1.02]":"border-stone-100"}`,children:[c.jsxs("div",{className:"relative h-56 bg-stone-200 group",children:[c.jsx("img",{src:D.imageUrl,alt:D.title,className:"w-full h-full object-cover",onError:q=>{q.target.src="https://images.unsplash.com/photo-1493976040374-85c8e12f0c0e?auto=format&fit=crop&w=800&q=80"}}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/10 to-transparent"}),c.jsxs("div",{className:"absolute bottom-4 left-4 text-white",children:[c.jsx("div",{className:"text-xs font-bold opacity-90 tracking-widest uppercase bg-black/20 backdrop-blur-sm px-2 py-1 rounded w-fit mb-1",children:D.subtitle}),c.jsx("h3",{className:"text-2xl font-bold",children:D.title})]}),a&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:q=>{q.stopPropagation(),N(D.id)},className:"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full shadow-lg opacity-90 hover:opacity-100 hover:scale-110 transition-all",children:c.jsx(qn,{size:16})}),c.jsx("button",{onClick:q=>{q.stopPropagation(),ge(D)},className:"absolute top-2 right-12 bg-stone-800 text-white p-2 rounded-full shadow-lg opacity-90 hover:opacity-100 hover:scale-110 transition-all",children:c.jsx(qy,{size:16})})]})]}),c.jsxs("div",{className:"p-6",children:[c.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:D.tags.map(q=>c.jsxs("span",{className:"text-[10px] font-bold bg-stone-100 text-stone-500 px-2 py-1 rounded-md",children:["#",q]},q))}),c.jsx("p",{className:"text-stone-600 leading-relaxed text-justify text-sm",children:D.description})]})]},D.id))}),a&&c.jsx("button",{onClick:K,className:"fixed bottom-24 right-6 bg-stone-800 text-white w-14 h-14 rounded-full shadow-xl flex items-center justify-center animate-in zoom-in hover:scale-105 transition-transform z-40",children:c.jsx(Bi,{size:28})}),u&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm px-6",children:c.jsxs("div",{className:"bg-white p-8 rounded-3xl w-full max-w-sm shadow-2xl animate-in zoom-in-95",children:[c.jsx("h3",{className:"text-xl font-bold text-center mb-6 text-stone-800",children:""}),c.jsx("input",{type:"password",value:p,onChange:D=>y(D.target.value),placeholder:" PIN ",maxLength:4,className:"w-full text-center text-4xl font-mono tracking-[0.5em] border-b-2 border-stone-200 focus:border-stone-800 outline-none pb-2 mb-8 bg-transparent",autoFocus:!0}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:()=>d(!1),className:"flex-1 py-3 rounded-xl bg-stone-100 text-stone-500 font-bold",children:""}),c.jsx("button",{onClick:E,className:"flex-1 py-3 rounded-xl bg-stone-800 text-white font-bold",children:""})]})]})}),P&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm px-6",children:c.jsxs("div",{className:"bg-white p-6 rounded-3xl w-full max-w-sm shadow-2xl animate-in zoom-in-95",children:[c.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[c.jsx("div",{className:"bg-red-100 p-4 rounded-full text-red-500 mb-4",children:c.jsx(qn,{size:32})}),c.jsx("h3",{className:"text-xl font-bold text-stone-800",children:""}),c.jsx("p",{className:"text-sm text-stone-500 mt-2",children:""})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>I(null),className:"flex-1 py-3 rounded-xl bg-stone-100 text-stone-600 font-bold",children:""}),c.jsx("button",{onClick:_,className:"flex-1 py-3 rounded-xl bg-red-500 text-white font-bold",children:""})]})]})}),v&&c.jsx(zI,{onClose:()=>S(!1),onSave:B,defaultDate:M||"12/17",dates:O.map(D=>D.date),initialData:A})]})},zI=({onClose:t,onSave:e,defaultDate:n,dates:r,initialData:s})=>{const[i,a]=F.useState((s==null?void 0:s.title)||""),[l,u]=F.useState((s==null?void 0:s.subtitle)||""),[d,p]=F.useState((s==null?void 0:s.description)||""),[y,v]=F.useState((s==null?void 0:s.date)||n),[S,A]=F.useState((s==null?void 0:s.tags.join(", "))||""),[b,P]=F.useState((s==null?void 0:s.imageUrl)||""),[I,w]=F.useState(!1),k=F.useRef(null),j=M=>{var g;const x=(g=M.target.files)==null?void 0:g[0];if(x){const T=new FileReader;T.onloadend=()=>{try{P(T.result)}catch{alert("")}},T.readAsDataURL(x)}},O=()=>{if(!(!i||!d)){if(!I){w(!0);return}e({id:(s==null?void 0:s.id)||Date.now().toString(),date:y,title:i,subtitle:l||"Spot",description:d,tags:S.split(",").map(M=>M.trim()).filter(Boolean),imageUrl:b})}};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm px-4",children:c.jsxs("div",{className:"bg-white w-full max-w-md rounded-3xl p-6 shadow-2xl animate-in slide-in-from-bottom-10 max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h3",{className:"font-bold text-xl",children:s?"":""}),c.jsx("button",{onClick:t,children:c.jsx(Hn,{size:24,className:"text-stone-400"})})]}),I?c.jsxs("div",{className:"text-center py-6",children:[c.jsxs("div",{className:"mb-6 text-stone-600",children:["",s?"":""," ",c.jsx("span",{className:"font-bold text-stone-800",children:i})," "]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>w(!1),className:"flex-1 py-3 bg-stone-100 text-stone-500 font-bold rounded-xl",children:""}),c.jsxs("button",{onClick:O,className:"flex-1 py-3 bg-muji-highlight text-white font-bold rounded-xl shadow-md",children:["",s?"":""]})]})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:""}),c.jsx("select",{value:y,onChange:M=>v(M.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",children:r.map(M=>c.jsx("option",{value:M,children:M},M))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:""}),c.jsx("input",{value:i,onChange:M=>a(M.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:""})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:""}),c.jsx("input",{value:l,onChange:M=>u(M.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:""})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:""}),c.jsx("textarea",{value:d,onChange:M=>p(M.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50 h-32",placeholder:"..."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:" ()"}),c.jsx("input",{value:S,onChange:M=>A(M.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:", , "})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:""}),c.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border border-dashed border-stone-300 bg-stone-50 cursor-pointer hover:bg-stone-100",children:[c.jsx(dl,{size:20,className:"text-stone-400"}),c.jsx("span",{className:"text-sm text-stone-500 truncate",children:b?"":""}),c.jsx("input",{ref:k,type:"file",accept:"image/*",className:"hidden",onChange:j})]}),b&&c.jsx("img",{src:b,alt:"Preview",className:"h-24 w-full object-cover rounded-lg mt-2 border border-stone-200"})]}),c.jsx("button",{onClick:O,className:"w-full py-4 bg-stone-800 text-white font-bold rounded-xl mt-2",children:""})]})]})})},UI=.21,BI=()=>{const[t,e]=F.useState(""),[n,r]=F.useState(null),[s]=F.useState(UI),i=y=>{e(v=>v+y)},a=()=>{e(y=>y.slice(0,-1))},l=()=>{e(""),r(null)},u=()=>{try{if(!/^[0-9+\-*/().\s]+$/.test(t))return;const y=new Function("return "+t)();isFinite(y)&&r(y*s)}catch(y){console.error("Calculation error",y)}};F.useEffect(()=>{if(t.length===0){r(0);return}const y=setTimeout(()=>{try{if(!/^[0-9+\-*/().\s]+$/.test(t))return;const v=new Function("return "+t)();isFinite(v)&&r(v*s)}catch{}},500);return()=>clearTimeout(y)},[t,s]);const d="flex-1 rounded-xl bg-white shadow-sm border border-stone-100 text-lg font-bold text-stone-600 active:bg-stone-100 active:scale-95 transition-all flex items-center justify-center",p="flex-1 rounded-xl bg-stone-100 shadow-sm border border-stone-200 text-lg font-bold text-muji-highlight active:bg-stone-200 active:scale-95 transition-all flex items-center justify-center";return c.jsxs("div",{className:"h-[calc(100vh-140px)] flex flex-col p-4 animate-in zoom-in-95 duration-300",children:[c.jsxs("div",{className:"bg-stone-800 rounded-2xl p-5 text-right mb-4 shadow-md flex-shrink-0",children:[c.jsxs("div",{className:"flex justify-between items-end mb-2",children:[c.jsx("span",{className:"text-stone-400 text-xs",children:" (JPY)"}),c.jsx("div",{className:"text-2xl text-white font-mono break-all",children:t||"0"})]}),c.jsx("div",{className:"h-px bg-stone-600 mb-2"}),c.jsxs("div",{className:"flex justify-between items-end",children:[c.jsx("span",{className:"text-stone-400 text-xs",children:" (TWD)"}),c.jsx("div",{className:"text-3xl text-muji-highlight font-mono font-bold",children:n?Math.round(n).toLocaleString():"0"})]}),c.jsxs("div",{className:"mt-2 text-[10px] text-stone-500 text-right",children:["Rate: ",s]})]}),c.jsxs("div",{className:"grid grid-cols-4 gap-2 flex-1 min-h-0",children:[c.jsx("button",{onClick:l,className:"col-span-1 rounded-xl bg-red-50 text-red-500 font-bold flex items-center justify-center text-lg",children:"AC"}),c.jsx("button",{onClick:a,className:"col-span-1 rounded-xl bg-stone-200 text-stone-600 flex items-center justify-center",children:c.jsx(Dx,{size:20})}),c.jsx("button",{onClick:()=>i("/"),className:p,children:""}),c.jsx("button",{onClick:()=>i("*"),className:p,children:""}),c.jsx("button",{onClick:()=>i("7"),className:d,children:"7"}),c.jsx("button",{onClick:()=>i("8"),className:d,children:"8"}),c.jsx("button",{onClick:()=>i("9"),className:d,children:"9"}),c.jsx("button",{onClick:()=>i("-"),className:p,children:"-"}),c.jsx("button",{onClick:()=>i("4"),className:d,children:"4"}),c.jsx("button",{onClick:()=>i("5"),className:d,children:"5"}),c.jsx("button",{onClick:()=>i("6"),className:d,children:"6"}),c.jsx("button",{onClick:()=>i("+"),className:p,children:"+"}),c.jsx("button",{onClick:()=>i("1"),className:d,children:"1"}),c.jsx("button",{onClick:()=>i("2"),className:d,children:"2"}),c.jsx("button",{onClick:()=>i("3"),className:d,children:"3"}),c.jsx("button",{onClick:u,className:"row-span-2 rounded-xl bg-muji-primary text-white text-xl font-bold flex items-center justify-center shadow-md active:scale-95 transition-transform",children:"="}),c.jsx("button",{onClick:()=>i("0"),className:`${d} col-span-2`,children:"0"}),c.jsx("button",{onClick:()=>i("."),className:d,children:"."})]})]})},$I=()=>{const{packingList:t,togglePackingItem:e,memoList:n,addMemoItem:r,deleteMemoItem:s,toggleMemoItem:i,wishList:a,addWishItem:l,deleteWishItem:u,toggleWishItem:d,exportData:p,importData:y,isCloudMode:v,connectToCloud:S,disconnectCloud:A,connectionStatus:b}=bs(),[P,I]=F.useState("packing"),[w,k]=F.useState(""),[j,O]=F.useState(null),[M,x]=F.useState(!1),g=F.useRef(null),T=dn.apiKey&&!dn.apiKey.includes(""),E=(G,se)=>{se==="memo"?i(G):d(G)},C=G=>{G.preventDefault(),w.trim()&&x(!0)},N=()=>{if(!w.trim())return;const G={id:Date.now().toString(),text:w.trim(),checked:!1};P==="memo"?r(G):P==="wish"&&l(G),k(""),x(!1)},_=()=>{x(!1)},K=(G,se,_e)=>{se.stopPropagation(),O({id:G,type:_e})},ge=()=>{if(!j)return;const{id:G,type:se}=j;se==="memo"?s(G):u(G),O(null)},B=G=>{var vt;const se=(vt=G.target.files)==null?void 0:vt[0];if(!se)return;if(!window.confirm("")){G.target.value="";return}const _e=new FileReader;_e.onload=ht=>{var jr;const kt=(jr=ht.target)==null?void 0:jr.result,He=y(kt);alert(He?"":"")},_e.readAsText(se)},ie=async()=>{try{await S(dn)}catch{alert(" Config ")}},D=async()=>{if(dn.apiKey.includes("")||!dn.apiKey){alert(" `constants.ts`  Firebase Config \n\n");return}ie()},q=G=>/^(http|https):\/\/[^ "]+$/.test(G),Y=()=>P==="memo"?n:P==="wish"?a:[];return c.jsxs("div",{className:"pb-24 pt-4 px-4 h-full flex flex-col relative",children:[c.jsxs("div",{className:"flex p-1 bg-stone-200 rounded-2xl mb-6 flex-shrink-0",children:[c.jsx("button",{onClick:()=>I("packing"),className:`flex-1 py-2.5 rounded-xl text-sm font-bold transition-all ${P==="packing"?"bg-white shadow-sm text-stone-800":"text-stone-500"}`,children:""}),c.jsx("button",{onClick:()=>I("memo"),className:`flex-1 py-2.5 rounded-xl text-sm font-bold transition-all ${P==="memo"?"bg-white shadow-sm text-stone-800":"text-stone-500"}`,children:""}),c.jsx("button",{onClick:()=>I("wish"),className:`flex-1 py-2.5 rounded-xl text-sm font-bold transition-all ${P==="wish"?"bg-white shadow-sm text-stone-800":"text-stone-500"}`,children:""})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar pb-20",children:[P==="packing"?c.jsxs("div",{className:"space-y-3 animate-in fade-in duration-300",children:[t.map(G=>c.jsxs("div",{onClick:()=>e(G.id),className:`flex items-center gap-4 p-4 rounded-2xl border transition-all cursor-pointer ${G.checked?"bg-stone-100 border-stone-100 opacity-60":"bg-white border-stone-100 shadow-sm"}`,children:[c.jsx("div",{className:`${G.checked?"text-stone-400":"text-muji-highlight"}`,children:G.checked?c.jsx(wc,{size:24}):c.jsx(Ap,{size:24})}),c.jsx("span",{className:`text-lg ${G.checked?"line-through text-stone-400":"text-stone-800"}`,children:G.text})]},G.id)),c.jsxs("div",{className:"text-center text-xs text-stone-400 mt-8",children:["Progress: ",t.filter(G=>G.checked).length," / ",t.length]})]}):c.jsxs("div",{className:"space-y-3 animate-in fade-in duration-300",children:[c.jsxs("form",{onSubmit:C,className:"flex gap-2 mb-6 relative",children:[c.jsx("input",{type:"text",value:w,onChange:G=>k(G.target.value),placeholder:P==="wish"?"...":"...",className:`flex-1 p-4 rounded-2xl border transition-all focus:outline-none focus:ring-2 focus:ring-muji-accent bg-white ${M?"border-muji-highlight":"border-stone-200"}`,disabled:M}),M?c.jsxs("div",{className:"flex gap-2 animate-in slide-in-from-right",children:[c.jsx("button",{type:"button",onClick:_,className:"bg-stone-200 text-stone-600 p-4 rounded-2xl hover:bg-stone-300 transition-colors",children:c.jsx(Hn,{size:24})}),c.jsx("button",{type:"button",onClick:N,className:"bg-muji-highlight text-white p-4 rounded-2xl shadow-md hover:bg-amber-600 transition-colors",children:c.jsx($y,{size:24})})]}):c.jsx("button",{type:"submit",disabled:!w.trim(),className:"bg-stone-800 text-white p-4 rounded-2xl disabled:opacity-50 disabled:cursor-not-allowed shadow-sm active:scale-95 transition-all",children:c.jsx(Bi,{size:24})})]}),M&&c.jsx("div",{className:"text-center text-xs text-muji-highlight font-bold mb-4 animate-in fade-in",children:""}),Y().length===0&&c.jsx("div",{className:"text-center text-stone-400 py-10",children:c.jsx("p",{children:P==="wish"?"":""})}),Y().map(G=>c.jsxs("div",{onClick:()=>E(G.id,P),className:`relative group flex items-center gap-4 p-4 rounded-2xl border transition-all cursor-pointer ${G.checked?"bg-stone-100 border-stone-100 opacity-60":"bg-white border-stone-100 shadow-sm"}`,children:[c.jsx("div",{className:`${G.checked?"text-stone-400":"text-muji-highlight"} flex-shrink-0`,children:G.checked?c.jsx(wc,{size:24}):c.jsx(Ap,{size:24})}),c.jsx("div",{className:`flex-1 overflow-hidden ${G.checked?"line-through text-stone-400":"text-stone-800"}`,children:q(G.text)?c.jsxs("a",{href:G.text,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 text-blue-600 hover:underline truncate w-full",onClick:se=>se.stopPropagation(),children:[c.jsx(zx,{size:16}),c.jsx("span",{className:"truncate",children:G.text})]}):c.jsx("span",{className:"break-words",children:G.text})}),c.jsx("button",{onClick:se=>K(G.id,se,P),className:"p-2 text-stone-300 hover:text-red-400 transition-colors",children:c.jsx(qn,{size:18})})]},G.id))]}),c.jsxs("div",{className:"mt-8 pt-8 border-t border-stone-200",children:[c.jsx("h4",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest mb-4 text-center",children:"Data Management"}),c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("button",{onClick:p,className:"flex-1 py-2 bg-white border border-stone-300 text-stone-600 rounded-xl text-xs font-bold flex items-center justify-center gap-2 active:scale-95 transition-transform",children:[c.jsx(Mx,{size:14})," "]}),c.jsxs("label",{className:"flex-1 py-2 bg-stone-100 text-stone-600 rounded-xl text-xs font-bold flex items-center justify-center gap-2 cursor-pointer active:scale-95 transition-transform hover:bg-stone-200",children:[c.jsx(dl,{size:14})," ",c.jsx("input",{ref:g,type:"file",accept:".json",className:"hidden",onChange:B})]})]}),T?c.jsxs("div",{className:`w-full py-2 border rounded-xl text-xs font-bold flex items-center justify-center gap-2 ${b==="connected"?"bg-sky-50 border-sky-200 text-sky-600":b==="error"?"bg-red-50 border-red-200 text-red-500":"bg-stone-50 border-stone-200 text-stone-400"}`,children:[b==="connecting"?c.jsx(Ec,{className:"animate-spin",size:14}):b==="connected"?c.jsx(La,{size:14}):c.jsx(Oa,{size:14}),b==="connecting"?"...":b==="connected"?" (Auto)":c.jsx("button",{onClick:ie,className:"underline hover:text-red-700",children:""})]}):c.jsxs("button",{onClick:D,disabled:b==="connecting",className:`w-full py-2 border rounded-xl text-xs font-bold flex items-center justify-center gap-2 active:scale-95 transition-transform ${v?"bg-sky-50 border-sky-200 text-sky-600":"bg-white border-stone-200 text-stone-400 hover:bg-stone-50 hover:text-stone-600"}`,children:[b==="connecting"?c.jsx(Ec,{className:"animate-spin",size:14}):v?c.jsx(Px,{size:14}):c.jsx(La,{size:14}),b==="connecting"?"...":v?" ()":""]}),v&&T&&c.jsxs("p",{className:"text-[10px] text-sky-400 text-center px-2",children:["",dn.projectId]})]})]})]}),j&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm px-6",children:c.jsxs("div",{className:"bg-white p-6 rounded-3xl w-full max-w-sm shadow-2xl animate-in zoom-in-95",children:[c.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[c.jsx("div",{className:"bg-red-100 p-4 rounded-full text-red-500 mb-4",children:c.jsx(Oa,{size:32})}),c.jsx("h3",{className:"text-xl font-bold text-stone-800",children:""}),c.jsx("p",{className:"text-sm text-stone-500 mt-2",children:""})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>O(null),className:"flex-1 py-3 rounded-xl bg-stone-100 text-stone-600 font-bold hover:bg-stone-200 transition-colors",children:""}),c.jsx("button",{onClick:ge,className:"flex-1 py-3 rounded-xl bg-red-500 text-white font-bold hover:bg-red-600 transition-colors shadow-sm",children:""})]})]})})]})},qI="0000",HI=({highlightId:t})=>{const{bookings:e,addBooking:n,deleteBooking:r,updateBookingPhoto:s}=bs(),[i,a]=F.useState(!1),[l,u]=F.useState(!1),[d,p]=F.useState(""),[y,v]=F.useState(!1),[S,A]=F.useState(null),[b,P]=F.useState(null),I=F.useRef(null),w=F.useRef(null),k=F.useRef(null),j=F.useRef(null);F.useEffect(()=>{t&&e.length>0&&setTimeout(()=>{const B=document.getElementById(t);B&&B.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},[t,e]);const O=()=>{i?a(!1):(u(!0),p(""))},M=()=>{d===qI?(a(!0),u(!1)):(alert("PIN "),p(""))},x=B=>{A(B)},g=()=>{S&&(r(S),A(null))},T=B=>{P(B),setTimeout(()=>{var ie;(ie=I.current)==null||ie.click()},0)},E=B=>{var D;const ie=(D=B.target.files)==null?void 0:D[0];if(ie&&b){const q=new FileReader;q.onloadend=()=>{const Y=q.result;s(b,Y),P(null),I.current&&(I.current.value="")},q.readAsDataURL(ie)}},C=B=>{n(B),v(!1)},N=B=>{B.current&&B.current.scrollIntoView({behavior:"smooth",block:"start"})},_=e.filter(B=>B.type==="flight"),K=e.filter(B=>B.type==="hotel"),ge=e.filter(B=>B.type==="dining");return c.jsxs("div",{className:"pt-4 px-4 relative animate-in fade-in duration-500 min-h-screen",children:[c.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:I,onChange:E}),c.jsxs("div",{className:"flex justify-between items-center mb-4 px-1 sticky top-0 bg-muji-bg z-30 pt-2 pb-2",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-stone-800 tracking-wider",children:""}),c.jsx("div",{className:"w-10 h-1 bg-muji-highlight mt-1 rounded-full"})]}),c.jsx("button",{onClick:O,className:`p-3 rounded-2xl transition-all ${i?"bg-stone-800 text-white shadow-md":"bg-stone-100 text-stone-500"}`,children:i?c.jsx(zh,{size:20}):c.jsx(Fh,{size:20})})]}),c.jsxs("div",{className:"flex gap-2 mb-6 overflow-x-auto no-scrollbar",children:[c.jsxs("button",{onClick:()=>N(w),className:"flex items-center gap-2 px-4 py-2 bg-white border border-stone-200 rounded-full text-stone-600 font-bold text-sm shadow-sm active:bg-stone-100 whitespace-nowrap",children:[c.jsx(xi,{size:16})," "]}),c.jsxs("button",{onClick:()=>N(k),className:"flex items-center gap-2 px-4 py-2 bg-white border border-stone-200 rounded-full text-stone-600 font-bold text-sm shadow-sm active:bg-stone-100 whitespace-nowrap",children:[c.jsx(xc,{size:16})," "]}),c.jsxs("button",{onClick:()=>N(j),className:"flex items-center gap-2 px-4 py-2 bg-white border border-stone-200 rounded-full text-stone-600 font-bold text-sm shadow-sm active:bg-stone-100 whitespace-nowrap",children:[c.jsx(Gy,{size:16})," "]})]}),c.jsxs("div",{className:"space-y-10",children:[_.length>0&&c.jsxs("div",{ref:w,children:[c.jsx("h3",{className:"text-sm font-bold text-stone-400 uppercase tracking-widest mb-3 ml-1",children:""}),c.jsx("div",{className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 no-scrollbar",children:_.map(B=>c.jsxs("div",{id:B.id,className:"snap-center min-w-[90vw] sm:min-w-[350px] relative group scroll-m-24",children:[c.jsx("div",{className:`absolute -inset-1 rounded-[2rem] transition-opacity duration-500 bg-gradient-to-r from-orange-200 to-orange-100 -z-10 ${t===B.id?"opacity-100":"opacity-0"}`}),i&&c.jsx("button",{onClick:()=>x(B.id),className:"absolute -top-2 -right-2 z-20 bg-red-500 text-white p-2 rounded-full shadow-lg hover:bg-red-600 transition-colors",children:c.jsx(qn,{size:16})}),c.jsxs("div",{className:"bg-white rounded-3xl overflow-hidden shadow-sm border border-stone-200 relative h-full flex flex-col",children:[c.jsx("div",{className:"absolute top-[65%] -left-3 w-6 h-6 bg-muji-bg rounded-full z-10 border-r border-stone-200"}),c.jsx("div",{className:"absolute top-[65%] -right-3 w-6 h-6 bg-muji-bg rounded-full z-10 border-l border-stone-200"}),c.jsxs("div",{className:"p-6 flex-1",children:[c.jsxs("div",{className:"flex justify-between items-start mb-6",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2.5 bg-stone-100 rounded-full text-stone-600",children:c.jsx(xi,{size:24})}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-xl text-stone-800",children:B.title}),c.jsx("div",{className:"text-xs text-stone-400 font-mono tracking-wider",children:B.date})]})]}),c.jsx("div",{className:"text-2xl font-mono font-bold text-stone-800",children:B.subTitle})]}),c.jsxs("div",{className:"flex justify-between items-center px-2 mb-2",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-4xl font-black text-stone-800 font-mono",children:B.details.from}),B.details.terminal&&c.jsx("div",{className:"text-[10px] font-bold bg-stone-100 text-stone-500 rounded px-1 mt-1 inline-block",children:B.details.terminal}),c.jsx("div",{className:"text-sm font-bold text-stone-500 mt-1",children:B.details.departTime})]}),c.jsx("div",{className:"flex-1 border-b-2 border-dashed border-stone-300 mx-4 relative top-[-10px]",children:c.jsx(xi,{size:16,className:"absolute -top-[9px] left-1/2 -translate-x-1/2 text-stone-300 rotate-90"})}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-4xl font-black text-stone-800 font-mono",children:B.details.to}),c.jsx("div",{className:"text-sm font-bold text-stone-500 mt-1",children:B.details.arriveTime})]})]})]}),c.jsx("div",{className:"border-b-2 border-dashed border-stone-200 w-full relative"}),c.jsxs("div",{className:"bg-stone-50 p-4 grid grid-cols-3 gap-2 text-center",children:[c.jsxs("div",{className:"border-r border-stone-200 last:border-0",children:[c.jsx("span",{className:"text-[10px] text-stone-400 block uppercase font-bold",children:""}),c.jsx("span",{className:"font-bold font-mono text-lg text-stone-800",children:B.details.counter||"--"})]}),c.jsxs("div",{className:"border-r border-stone-200 last:border-0",children:[c.jsx("span",{className:"text-[10px] text-stone-400 block uppercase font-bold",children:""}),c.jsx("span",{className:"font-bold font-mono text-lg text-muji-highlight",children:B.details.gate||"--"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-[10px] text-stone-400 block uppercase font-bold",children:""}),c.jsx("span",{className:"font-bold font-mono text-lg text-stone-800",children:B.details.baggage||"--"})]})]})]})]},B.id))})]}),K.length>0&&c.jsxs("div",{ref:k,className:"scroll-mt-24",children:[c.jsx("h3",{className:"text-sm font-bold text-stone-400 uppercase tracking-widest mb-3 ml-1",children:""}),c.jsx("div",{className:"space-y-4",children:K.map(B=>c.jsxs("div",{id:B.id,className:`relative group bg-white rounded-3xl overflow-hidden shadow-sm border transition-all duration-500 ${t===B.id?"ring-4 ring-orange-200 border-orange-400 scale-[1.02]":"border-stone-200"}`,children:[i&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>x(B.id),className:"absolute top-2 right-2 z-20 bg-red-500 text-white p-2 rounded-full shadow-lg hover:bg-red-600 transition-colors",children:c.jsx(qn,{size:16})}),c.jsx("button",{onClick:()=>T(B.id),className:"absolute top-2 right-12 z-20 bg-stone-800/80 backdrop-blur-sm text-white p-2 rounded-full shadow-lg hover:bg-stone-900 transition-colors",title:"",children:c.jsx(Np,{size:16})})]}),c.jsxs("div",{className:"relative h-48",children:[c.jsx("img",{src:B.imageUrl||"https://via.placeholder.com/400x200?text=No+Image",alt:B.title,className:"w-full h-full object-cover",onError:ie=>{ie.target.src="https://images.unsplash.com/photo-1566073771259-6a8506099945?auto=format&fit=crop&w=800&q=80"}}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"}),c.jsxs("div",{className:"absolute bottom-4 left-4 text-white",children:[c.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold bg-white/20 backdrop-blur-md px-2 py-1 rounded-md w-fit mb-2",children:[c.jsx(xc,{size:12})," ",B.subTitle]}),c.jsx("h3",{className:"font-bold text-2xl leading-tight",children:B.title})]})]}),c.jsxs("div",{className:"p-5",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4 pb-4 border-b border-stone-100",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-stone-400 uppercase",children:""}),c.jsx("div",{className:"font-bold text-stone-800 font-mono text-xl",children:B.details.checkIn})]}),c.jsx("div",{className:"text-stone-300 text-2xl font-light",children:"/"}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-xs text-stone-400 uppercase",children:""}),c.jsx("div",{className:"font-bold text-stone-800 font-mono text-xl",children:B.details.checkOut})]})]}),c.jsxs("div",{className:"flex items-center justify-between gap-2",children:[c.jsxs("div",{className:"flex items-start gap-2 text-sm text-stone-600 flex-1",children:[c.jsx(kr,{size:16,className:"mt-0.5 flex-shrink-0 text-muji-highlight"}),c.jsx("span",{className:"line-clamp-2",children:B.details.address})]}),c.jsx("a",{href:B.details.mapLink||`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(B.title+" "+(B.details.address||""))}`,target:"_blank",rel:"noreferrer",className:"p-3 bg-stone-100 rounded-xl text-stone-600 hover:bg-stone-200 transition-colors",children:c.jsx(Ox,{size:20})})]})]})]},B.id))})]}),ge.length>0&&c.jsxs("div",{ref:j,className:"scroll-mt-24",children:[c.jsx("h3",{className:"text-sm font-bold text-stone-400 uppercase tracking-widest mb-3 ml-1",children:""}),c.jsx("div",{className:"space-y-4",children:ge.map(B=>c.jsxs("div",{id:B.id,className:`relative group bg-white rounded-3xl overflow-hidden shadow-sm border flex flex-col sm:flex-row transition-all duration-500 ${t===B.id?"ring-4 ring-orange-200 border-orange-400 scale-[1.02]":"border-stone-200"}`,children:[i&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>x(B.id),className:"absolute top-2 right-2 z-20 bg-red-500 text-white p-2 rounded-full shadow-lg hover:bg-red-600 transition-colors",children:c.jsx(qn,{size:16})}),c.jsx("button",{onClick:()=>T(B.id),className:"absolute top-2 right-12 z-20 bg-stone-800/80 backdrop-blur-sm text-white p-2 rounded-full shadow-lg hover:bg-stone-900 transition-colors",title:"",children:c.jsx(Np,{size:16})})]}),c.jsx("div",{className:"w-full sm:w-1/3 h-40 sm:h-auto relative",children:c.jsx("img",{src:B.imageUrl||"https://via.placeholder.com/150x200?text=Food",alt:B.title,className:"w-full h-full object-cover absolute inset-0",onError:ie=>{ie.target.src="https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?auto=format&fit=crop&w=800&q=80"}})}),c.jsxs("div",{className:"flex-1 p-5 flex flex-col justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"flex items-center gap-2 mb-2",children:c.jsx("span",{className:"text-[10px] font-bold bg-orange-100 text-orange-600 px-2 py-0.5 rounded-full uppercase",children:""})}),c.jsx("h3",{className:"font-bold text-xl text-stone-800 leading-tight mb-1",children:B.title}),c.jsx("div",{className:"text-xs text-stone-500 mb-4",children:B.subTitle}),c.jsxs("div",{className:"space-y-2 text-sm text-stone-700 mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Rx,{size:14,className:"text-stone-400"}),c.jsx("span",{className:"font-mono",children:B.date})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Lh,{size:14,className:"text-stone-400"}),c.jsx("span",{className:"font-mono font-bold text-muji-highlight text-lg",children:B.time})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(qx,{size:14,className:"text-stone-400"}),c.jsxs("span",{children:[B.details.pax," "]})]})]})]}),c.jsxs("a",{href:B.details.mapLink||`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(B.title)}`,target:"_blank",rel:"noreferrer",className:"w-full bg-stone-800 hover:bg-stone-700 text-white text-sm font-bold py-3 rounded-xl flex items-center justify-center gap-2 transition-colors",children:[c.jsx(kr,{size:16})," "]})]})]},B.id))})]}),i&&c.jsx("button",{onClick:()=>v(!0),className:"fixed bottom-24 right-6 bg-stone-800 text-white w-14 h-14 rounded-full shadow-xl flex items-center justify-center animate-in zoom-in hover:scale-105 transition-transform z-40",children:c.jsx(Bi,{size:28})}),c.jsx("div",{className:"h-32 w-full"})]}),S&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm px-6",children:c.jsxs("div",{className:"bg-white p-6 rounded-3xl w-full max-w-sm shadow-2xl animate-in zoom-in-95",children:[c.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[c.jsx("div",{className:"bg-red-100 p-4 rounded-full text-red-500 mb-4",children:c.jsx(Oa,{size:32})}),c.jsx("h3",{className:"text-xl font-bold text-stone-800",children:""}),c.jsx("p",{className:"text-sm text-stone-500 mt-2",children:""})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>A(null),className:"flex-1 py-3 rounded-xl bg-stone-100 text-stone-600 font-bold hover:bg-stone-200 transition-colors",children:""}),c.jsx("button",{onClick:g,className:"flex-1 py-3 rounded-xl bg-red-500 text-white font-bold hover:bg-red-600 transition-colors shadow-sm",children:""})]})]})}),l&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm px-6",children:c.jsxs("div",{className:"bg-white p-8 rounded-3xl w-full max-w-sm shadow-2xl animate-in zoom-in-95",children:[c.jsx("h3",{className:"text-xl font-bold text-center mb-6 text-stone-800",children:""}),c.jsx("input",{type:"password",value:d,onChange:B=>p(B.target.value),placeholder:" PIN ",maxLength:4,className:"w-full text-center text-4xl font-mono tracking-[0.5em] border-b-2 border-stone-200 focus:border-stone-800 outline-none pb-2 mb-8 bg-transparent",autoFocus:!0}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:()=>u(!1),className:"flex-1 py-3 rounded-xl bg-stone-100 text-stone-500 font-bold",children:""}),c.jsx("button",{onClick:M,className:"flex-1 py-3 rounded-xl bg-stone-800 text-white font-bold",children:""})]})]})}),y&&c.jsx(GI,{onClose:()=>v(!1),onSave:C})]})},GI=({onClose:t,onSave:e})=>{const[n,r]=F.useState("dining"),[s,i]=F.useState(""),[a,l]=F.useState(""),[u,d]=F.useState(""),[p,y]=F.useState(""),[v,S]=F.useState(""),[A,b]=F.useState(""),[P,I]=F.useState(""),[w,k]=F.useState(""),[j,O]=F.useState(""),[M,x]=F.useState(!1),g=E=>{var N;const C=(N=E.target.files)==null?void 0:N[0];if(C){const _=new FileReader;_.onloadend=()=>{const K=_.result;try{b(K)}catch{alert("")}},_.readAsDataURL(C)}},T=()=>{if(!s||!u)return;if(!M){x(!0);return}const E={id:Date.now().toString(),type:n,title:s,subTitle:a||(n==="flight"?"Flight #":n==="hotel"?"1 Night":"Reservation"),date:u,time:p,imageUrl:A,details:n==="flight"?{from:P||"AAA",to:w||"BBB",departTime:p,arriveTime:"--",gate:j||"--",terminal:"--",counter:"--",baggage:"--"}:n==="hotel"?{checkIn:p,checkOut:"--",address:v||"Tokyo",mapLink:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(v||s)}`}:{pax:2,mapLink:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(v||s)}`}};e(E)};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm px-4",children:c.jsxs("div",{className:"bg-white w-full max-w-md rounded-3xl p-6 shadow-2xl animate-in slide-in-from-bottom-10 max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h3",{className:"font-bold text-xl",children:""}),c.jsx("button",{onClick:t,children:c.jsx(Hn,{size:24,className:"text-stone-400"})})]}),M?c.jsxs("div",{className:"text-center py-6",children:[c.jsxs("div",{className:"mb-8 text-stone-600",children:[" ",c.jsx("span",{className:"font-bold text-stone-800",children:s})," "]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>x(!1),className:"flex-1 py-3 bg-stone-100 text-stone-500 font-bold rounded-xl",children:""}),c.jsx("button",{onClick:T,className:"flex-1 py-3 bg-muji-highlight text-white font-bold rounded-xl shadow-md",children:""})]})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-stone-500 mb-1",children:""}),c.jsx("div",{className:"flex gap-2",children:[{id:"flight",label:""},{id:"hotel",label:""},{id:"dining",label:""}].map(E=>c.jsx("button",{onClick:()=>r(E.id),className:`flex-1 py-2 rounded-xl text-sm font-bold border ${n===E.id?"bg-stone-800 text-white border-stone-800":"bg-white text-stone-500 border-stone-200"}`,children:E.label},E.id))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-stone-500 mb-1",children:" ()"}),c.jsx("input",{value:s,onChange:E=>i(E.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:" / "})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-stone-500 mb-1",children:" ()"}),c.jsx("input",{value:a,onChange:E=>l(E.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:"JX804 / 3"})]}),n==="flight"&&c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-xs font-bold text-stone-500 mb-1",children:""}),c.jsx("input",{value:P,onChange:E=>I(E.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50 uppercase",placeholder:"TPE"})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-xs font-bold text-stone-500 mb-1",children:""}),c.jsx("input",{value:w,onChange:E=>k(E.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50 uppercase",placeholder:"NRT"})]})]}),n!=="flight"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-stone-500 mb-1",children:" / "}),c.jsx("input",{value:v,onChange:E=>S(E.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:""})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-xs font-bold text-stone-500 mb-1",children:""}),c.jsx("input",{value:u,onChange:E=>d(E.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:"YYYY/MM/DD"})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-xs font-bold text-stone-500 mb-1",children:""}),c.jsx("input",{value:p,onChange:E=>y(E.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:"HH:MM"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-stone-500 mb-1",children:""}),c.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border border-dashed border-stone-300 bg-stone-50 cursor-pointer hover:bg-stone-100",children:[c.jsx(dl,{size:20,className:"text-stone-400"}),c.jsx("span",{className:"text-sm text-stone-500 truncate",children:A?"":""}),c.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:g})]}),A&&c.jsx("img",{src:A,alt:"Preview",className:"h-20 rounded-lg mt-2 object-cover border border-stone-200"})]}),c.jsx("button",{onClick:T,className:"w-full py-4 bg-stone-800 text-white font-bold rounded-xl mt-4 shadow-md active:scale-95 transition-transform",children:""})]})]})})},WI=({currentTab:t,onTabChange:e})=>{const n=[{id:ae.RATE,label:"",icon:c.jsx(Ax,{size:20})},{id:ae.GUIDE,label:"",icon:c.jsx(By,{size:20})},{id:ae.PLAN,label:"",icon:c.jsx(bx,{size:28}),isCenter:!0},{id:ae.BOOKINGS,label:"",icon:c.jsx(Hy,{size:20})},{id:ae.LISTS,label:"",icon:c.jsx(wc,{size:20})}];return c.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-md border-t border-stone-200 pb-safe pt-2 px-1 z-50",children:c.jsx("div",{className:"flex justify-around items-end pb-2 relative",children:n.map(r=>{const s=t===r.id;return r.isCenter?c.jsxs("button",{onClick:()=>e(r.id),className:"flex flex-col items-center justify-end -mt-6 transition-all duration-300",children:[c.jsx("div",{className:`p-4 rounded-full shadow-lg transition-all ${s?"bg-stone-800 text-white scale-110":"bg-white text-stone-400 border border-stone-100"}`,children:r.icon}),c.jsx("span",{className:`text-[10px] font-bold tracking-wide mt-1 ${s?"text-stone-800":"text-stone-400"}`,children:r.label})]},r.id):c.jsxs("button",{onClick:()=>e(r.id),className:`flex flex-col items-center gap-1 min-w-[50px] w-full transition-all duration-300 ${s?"text-stone-800 -translate-y-1":"text-stone-400 hover:text-stone-600"}`,children:[c.jsx("div",{className:`p-2 rounded-2xl transition-all ${s?"bg-stone-100 shadow-sm":""}`,children:r.icon}),c.jsx("span",{className:`text-[10px] font-bold tracking-wide ${s?"opacity-100":"opacity-0 h-0 overflow-hidden"}`,children:r.label})]},r.id)})})})};class Ev extends F.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Uncaught error:",e,n)}render(){var e;return this.state.hasError?c.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-6 bg-stone-100 text-stone-600 text-center",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4 text-stone-800",children:""}),c.jsx("p",{className:"mb-4 text-sm",children:""}),c.jsx("pre",{className:"bg-white p-4 rounded-lg text-xs text-left overflow-auto w-full max-w-sm mb-6 border border-red-200 text-red-500",children:(e=this.state.error)==null?void 0:e.toString()}),c.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-stone-800 text-white rounded-xl font-bold",children:""})]}):this.props.children}}const KI=()=>{const{isLoading:t,error:e,isCloudMode:n}=bs(),[r,s]=F.useState(ae.PLAN),[i,a]=F.useState(null);if(t)return c.jsxs("div",{className:"min-h-screen bg-muji-bg flex flex-col items-center justify-center text-stone-400",children:[c.jsx(Ec,{className:"animate-spin mb-2",size:32}),c.jsx("p",{className:"text-sm font-medium tracking-widest",children:"..."})]});const l=(p,y)=>{s(p),y&&a(y)},u=p=>{s(p),a(null)},d=()=>{switch(r){case ae.PLAN:return c.jsx(Nm,{onNavigate:l});case ae.GUIDE:return c.jsx(FI,{highlightId:i});case ae.RATE:return c.jsx(BI,{});case ae.BOOKINGS:return c.jsx(HI,{highlightId:i});case ae.LISTS:return c.jsx($I,{});default:return c.jsx(Nm,{onNavigate:l})}};return c.jsxs("div",{className:"min-h-screen bg-muji-bg font-sans text-muji-text selection:bg-stone-200",children:[c.jsx("header",{className:"sticky top-0 bg-muji-bg/80 backdrop-blur-sm z-40 px-6 pt-12 pb-2",children:c.jsx("div",{className:"flex justify-between items-center",children:c.jsxs("div",{children:[c.jsxs("h1",{className:"text-xl font-bold tracking-widest text-stone-700 flex items-center gap-2",children:["Tokyo Trip 2025",n&&c.jsx("div",{className:"w-2 h-2 rounded-full bg-sky-500 animate-pulse",title:""})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[n&&c.jsxs("span",{className:"text-[10px] text-sky-600 font-bold bg-sky-100 px-2 py-0.5 rounded flex items-center gap-1",children:[c.jsx(La,{size:10})," "]}),e&&c.jsxs("span",{className:"text-[10px] text-red-500 font-bold bg-red-100 px-2 py-0.5 rounded flex items-center gap-1",children:[c.jsx(Oa,{size:10})," "]})]})]})})}),c.jsx("main",{className:"max-w-md mx-auto min-h-screen relative",children:c.jsx(Ev,{children:d()})}),c.jsx(WI,{currentTab:r,onTabChange:u}),c.jsx("div",{className:"h-safe-bottom"})]})},QI=()=>c.jsx(Ev,{children:c.jsx(bI,{children:c.jsx(KI,{})})}),YI=()=>{if(document.getElementById("tailwind-cdn"))return;const t=document.createElement("script");t.innerHTML=`
    const initTailwind = () => {
      if (window.tailwind) {
        window.tailwind.config = {
          theme: {
            extend: {
              fontFamily: {
                sans: ['"Zen Maru Gothic"', 'sans-serif'],
              },
              colors: {
                muji: {
                  bg: '#f9f9f6',
                  card: '#ffffff',
                  text: '#4a4a4a',
                  muted: '#9ca3af',
                  accent: '#78716c',
                  highlight: '#d97706',
                  primary: '#57534e',
                }
              }
            }
          }
        };
      } else {
        setTimeout(initTailwind, 20);
      }
    };
    initTailwind();
  `,document.head.appendChild(t);const e=document.createElement("script");e.id="tailwind-cdn",e.src="https://cdn.tailwindcss.com",document.head.appendChild(e)};YI();const Tv=document.getElementById("root");if(!Tv)throw new Error("Could not find root element to mount to");const XI=Su.createRoot(Tv);XI.render(c.jsx(d_.StrictMode,{children:c.jsx(QI,{})}));
