(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function l_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Om={exports:{}},ul={},Lm={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var co=Symbol.for("react.element"),u_=Symbol.for("react.portal"),c_=Symbol.for("react.fragment"),h_=Symbol.for("react.strict_mode"),d_=Symbol.for("react.profiler"),f_=Symbol.for("react.provider"),p_=Symbol.for("react.context"),m_=Symbol.for("react.forward_ref"),g_=Symbol.for("react.suspense"),y_=Symbol.for("react.memo"),v_=Symbol.for("react.lazy"),bf=Symbol.iterator;function __(t){return t===null||typeof t!="object"?null:(t=bf&&t[bf]||t["@@iterator"],typeof t=="function"?t:null)}var Fm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zm=Object.assign,Um={};function Ps(t,e,n){this.props=t,this.context=e,this.refs=Um,this.updater=n||Fm}Ps.prototype.isReactComponent={};Ps.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ps.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Bm(){}Bm.prototype=Ps.prototype;function ch(t,e,n){this.props=t,this.context=e,this.refs=Um,this.updater=n||Fm}var hh=ch.prototype=new Bm;hh.constructor=ch;zm(hh,Ps.prototype);hh.isPureReactComponent=!0;var Rf=Array.isArray,$m=Object.prototype.hasOwnProperty,dh={current:null},qm={key:!0,ref:!0,__self:!0,__source:!0};function Gm(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)$m.call(e,r)&&!qm.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:co,type:t,key:i,ref:a,props:s,_owner:dh.current}}function x_(t,e){return{$$typeof:co,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function fh(t){return typeof t=="object"&&t!==null&&t.$$typeof===co}function w_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Pf=/\/+/g;function lu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?w_(""+t.key):e.toString(36)}function ua(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case co:case u_:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+lu(a,0):r,Rf(s)?(n="",t!=null&&(n=t.replace(Pf,"$&/")+"/"),ua(s,e,n,"",function(d){return d})):s!=null&&(fh(s)&&(s=x_(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Pf,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Rf(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+lu(i,l);a+=ua(i,e,n,u,s)}else if(u=__(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+lu(i,l++),a+=ua(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Uo(t,e,n){if(t==null)return t;var r=[],s=0;return ua(t,r,"","",function(i){return e.call(n,i,s++)}),r}function E_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var vt={current:null},ca={transition:null},T_={ReactCurrentDispatcher:vt,ReactCurrentBatchConfig:ca,ReactCurrentOwner:dh};function Hm(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:Uo,forEach:function(t,e,n){Uo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Uo(t,function(){e++}),e},toArray:function(t){return Uo(t,function(e){return e})||[]},only:function(t){if(!fh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=Ps;le.Fragment=c_;le.Profiler=d_;le.PureComponent=ch;le.StrictMode=h_;le.Suspense=g_;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T_;le.act=Hm;le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=zm({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=dh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)$m.call(e,u)&&!qm.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:co,type:t.type,key:s,ref:i,props:r,_owner:a}};le.createContext=function(t){return t={$$typeof:p_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:f_,_context:t},t.Consumer=t};le.createElement=Gm;le.createFactory=function(t){var e=Gm.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:m_,render:t}};le.isValidElement=fh;le.lazy=function(t){return{$$typeof:v_,_payload:{_status:-1,_result:t},_init:E_}};le.memo=function(t,e){return{$$typeof:y_,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=ca.transition;ca.transition={};try{t()}finally{ca.transition=e}};le.unstable_act=Hm;le.useCallback=function(t,e){return vt.current.useCallback(t,e)};le.useContext=function(t){return vt.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return vt.current.useDeferredValue(t)};le.useEffect=function(t,e){return vt.current.useEffect(t,e)};le.useId=function(){return vt.current.useId()};le.useImperativeHandle=function(t,e,n){return vt.current.useImperativeHandle(t,e,n)};le.useInsertionEffect=function(t,e){return vt.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return vt.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return vt.current.useMemo(t,e)};le.useReducer=function(t,e,n){return vt.current.useReducer(t,e,n)};le.useRef=function(t){return vt.current.useRef(t)};le.useState=function(t){return vt.current.useState(t)};le.useSyncExternalStore=function(t,e,n){return vt.current.useSyncExternalStore(t,e,n)};le.useTransition=function(){return vt.current.useTransition()};le.version="18.3.1";Lm.exports=le;var U=Lm.exports;const I_=l_(U);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k_=U,S_=Symbol.for("react.element"),C_=Symbol.for("react.fragment"),N_=Object.prototype.hasOwnProperty,A_=k_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,b_={key:!0,ref:!0,__self:!0,__source:!0};function Wm(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)N_.call(e,r)&&!b_.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:S_,type:t,key:i,ref:a,props:s,_owner:A_.current}}ul.Fragment=C_;ul.jsx=Wm;ul.jsxs=Wm;Om.exports=ul;var c=Om.exports,Hu={},Km={exports:{}},Lt={},Qm={exports:{}},Ym={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,H){var Q=V.length;V.push(H);e:for(;0<Q;){var de=Q-1>>>1,ve=V[de];if(0<s(ve,H))V[de]=H,V[Q]=ve,Q=de;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var H=V[0],Q=V.pop();if(Q!==H){V[0]=Q;e:for(var de=0,ve=V.length,Te=ve>>>1;de<Te;){var Z=2*(de+1)-1,Ne=V[Z],it=Z+1,xt=V[it];if(0>s(Ne,Q))it<ve&&0>s(xt,Ne)?(V[de]=xt,V[it]=Q,de=it):(V[de]=Ne,V[Z]=Q,de=Z);else if(it<ve&&0>s(xt,Q))V[de]=xt,V[it]=Q,de=it;else break e}}return H}function s(V,H){var Q=V.sortIndex-H.sortIndex;return Q!==0?Q:V.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],d=[],p=1,g=null,v=3,S=!1,A=!1,b=!1,j=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(V){for(var H=n(d);H!==null;){if(H.callback===null)r(d);else if(H.startTime<=V)r(d),H.sortIndex=H.expirationTime,e(u,H);else break;H=n(d)}}function P(V){if(b=!1,k(V),!A)if(n(u)!==null)A=!0,q(O);else{var H=n(d);H!==null&&ue(P,H.startTime-V)}}function O(V,H){A=!1,b&&(b=!1,I(y),y=-1),S=!0;var Q=v;try{for(k(H),g=n(u);g!==null&&(!(g.expirationTime>H)||V&&!C());){var de=g.callback;if(typeof de=="function"){g.callback=null,v=g.priorityLevel;var ve=de(g.expirationTime<=H);H=t.unstable_now(),typeof ve=="function"?g.callback=ve:g===n(u)&&r(u),k(H)}else r(u);g=n(u)}if(g!==null)var Te=!0;else{var Z=n(d);Z!==null&&ue(P,Z.startTime-H),Te=!1}return Te}finally{g=null,v=Q,S=!1}}var M=!1,x=null,y=-1,T=5,E=-1;function C(){return!(t.unstable_now()-E<T)}function N(){if(x!==null){var V=t.unstable_now();E=V;var H=!0;try{H=x(!0,V)}finally{H?_():(M=!1,x=null)}}else M=!1}var _;if(typeof w=="function")_=function(){w(N)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,he=X.port2;X.port1.onmessage=N,_=function(){he.postMessage(null)}}else _=function(){j(N,0)};function q(V){x=V,M||(M=!0,_())}function ue(V,H){y=j(function(){V(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){A||S||(A=!0,q(O))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(V){switch(v){case 1:case 2:case 3:var H=3;break;default:H=v}var Q=v;v=H;try{return V()}finally{v=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,H){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Q=v;v=V;try{return H()}finally{v=Q}},t.unstable_scheduleCallback=function(V,H,Q){var de=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?de+Q:de):Q=de,V){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=Q+ve,V={id:p++,callback:H,priorityLevel:V,startTime:Q,expirationTime:ve,sortIndex:-1},Q>de?(V.sortIndex=Q,e(d,V),n(u)===null&&V===n(d)&&(b?(I(y),y=-1):b=!0,ue(P,Q-de))):(V.sortIndex=ve,e(u,V),A||S||(A=!0,q(O))),V},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(V){var H=v;return function(){var Q=v;v=H;try{return V.apply(this,arguments)}finally{v=Q}}}})(Ym);Qm.exports=Ym;var R_=Qm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P_=U,Ot=R_;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xm=new Set,Oi={};function zr(t,e){vs(t,e),vs(t+"Capture",e)}function vs(t,e){for(Oi[t]=e,t=0;t<e.length;t++)Xm.add(e[t])}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wu=Object.prototype.hasOwnProperty,j_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jf={},Df={};function D_(t){return Wu.call(Df,t)?!0:Wu.call(jf,t)?!1:j_.test(t)?Df[t]=!0:(jf[t]=!0,!1)}function V_(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function M_(t,e,n,r){if(e===null||typeof e>"u"||V_(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _t(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){rt[t]=new _t(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];rt[e]=new _t(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){rt[t]=new _t(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){rt[t]=new _t(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){rt[t]=new _t(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){rt[t]=new _t(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){rt[t]=new _t(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){rt[t]=new _t(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){rt[t]=new _t(t,5,!1,t.toLowerCase(),null,!1,!1)});var ph=/[\-:]([a-z])/g;function mh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ph,mh);rt[e]=new _t(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ph,mh);rt[e]=new _t(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ph,mh);rt[e]=new _t(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){rt[t]=new _t(t,1,!1,t.toLowerCase(),null,!1,!1)});rt.xlinkHref=new _t("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){rt[t]=new _t(t,1,!1,t.toLowerCase(),null,!0,!0)});function gh(t,e,n,r){var s=rt.hasOwnProperty(e)?rt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(M_(e,n,s,r)&&(n=null),r||s===null?D_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Dn=P_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bo=Symbol.for("react.element"),Jr=Symbol.for("react.portal"),Zr=Symbol.for("react.fragment"),yh=Symbol.for("react.strict_mode"),Ku=Symbol.for("react.profiler"),Jm=Symbol.for("react.provider"),Zm=Symbol.for("react.context"),vh=Symbol.for("react.forward_ref"),Qu=Symbol.for("react.suspense"),Yu=Symbol.for("react.suspense_list"),_h=Symbol.for("react.memo"),zn=Symbol.for("react.lazy"),eg=Symbol.for("react.offscreen"),Vf=Symbol.iterator;function oi(t){return t===null||typeof t!="object"?null:(t=Vf&&t[Vf]||t["@@iterator"],typeof t=="function"?t:null)}var De=Object.assign,uu;function mi(t){if(uu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);uu=e&&e[1]||""}return`
`+uu+t}var cu=!1;function hu(t,e){if(!t||cu)return"";cu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{cu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?mi(t):""}function O_(t){switch(t.tag){case 5:return mi(t.type);case 16:return mi("Lazy");case 13:return mi("Suspense");case 19:return mi("SuspenseList");case 0:case 2:case 15:return t=hu(t.type,!1),t;case 11:return t=hu(t.type.render,!1),t;case 1:return t=hu(t.type,!0),t;default:return""}}function Xu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Zr:return"Fragment";case Jr:return"Portal";case Ku:return"Profiler";case yh:return"StrictMode";case Qu:return"Suspense";case Yu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Zm:return(t.displayName||"Context")+".Consumer";case Jm:return(t._context.displayName||"Context")+".Provider";case vh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _h:return e=t.displayName||null,e!==null?e:Xu(t.type)||"Memo";case zn:e=t._payload,t=t._init;try{return Xu(t(e))}catch{}}return null}function L_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xu(e);case 8:return e===yh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ar(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function tg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function F_(t){var e=tg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function $o(t){t._valueTracker||(t._valueTracker=F_(t))}function ng(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=tg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Sa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ju(t,e){var n=e.checked;return De({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Mf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ar(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function rg(t,e){e=e.checked,e!=null&&gh(t,"checked",e,!1)}function Zu(t,e){rg(t,e);var n=ar(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ec(t,e.type,n):e.hasOwnProperty("defaultValue")&&ec(t,e.type,ar(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Of(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ec(t,e,n){(e!=="number"||Sa(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var gi=Array.isArray;function cs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ar(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function tc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return De({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Lf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(gi(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ar(n)}}function sg(t,e){var n=ar(e.value),r=ar(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ff(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ig(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ig(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var qo,og=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(qo=qo||document.createElement("div"),qo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=qo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Li(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ti={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},z_=["Webkit","ms","Moz","O"];Object.keys(Ti).forEach(function(t){z_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ti[e]=Ti[t]})});function ag(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ti.hasOwnProperty(t)&&Ti[t]?(""+e).trim():e+"px"}function lg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=ag(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var U_=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rc(t,e){if(e){if(U_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function sc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ic=null;function xh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var oc=null,hs=null,ds=null;function zf(t){if(t=po(t)){if(typeof oc!="function")throw Error($(280));var e=t.stateNode;e&&(e=pl(e),oc(t.stateNode,t.type,e))}}function ug(t){hs?ds?ds.push(t):ds=[t]:hs=t}function cg(){if(hs){var t=hs,e=ds;if(ds=hs=null,zf(t),e)for(t=0;t<e.length;t++)zf(e[t])}}function hg(t,e){return t(e)}function dg(){}var du=!1;function fg(t,e,n){if(du)return t(e,n);du=!0;try{return hg(t,e,n)}finally{du=!1,(hs!==null||ds!==null)&&(dg(),cg())}}function Fi(t,e){var n=t.stateNode;if(n===null)return null;var r=pl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var ac=!1;if(Cn)try{var ai={};Object.defineProperty(ai,"passive",{get:function(){ac=!0}}),window.addEventListener("test",ai,ai),window.removeEventListener("test",ai,ai)}catch{ac=!1}function B_(t,e,n,r,s,i,a,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(p){this.onError(p)}}var Ii=!1,Ca=null,Na=!1,lc=null,$_={onError:function(t){Ii=!0,Ca=t}};function q_(t,e,n,r,s,i,a,l,u){Ii=!1,Ca=null,B_.apply($_,arguments)}function G_(t,e,n,r,s,i,a,l,u){if(q_.apply(this,arguments),Ii){if(Ii){var d=Ca;Ii=!1,Ca=null}else throw Error($(198));Na||(Na=!0,lc=d)}}function Ur(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function pg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Uf(t){if(Ur(t)!==t)throw Error($(188))}function H_(t){var e=t.alternate;if(!e){if(e=Ur(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Uf(s),t;if(i===r)return Uf(s),e;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function mg(t){return t=H_(t),t!==null?gg(t):null}function gg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=gg(t);if(e!==null)return e;t=t.sibling}return null}var yg=Ot.unstable_scheduleCallback,Bf=Ot.unstable_cancelCallback,W_=Ot.unstable_shouldYield,K_=Ot.unstable_requestPaint,Fe=Ot.unstable_now,Q_=Ot.unstable_getCurrentPriorityLevel,wh=Ot.unstable_ImmediatePriority,vg=Ot.unstable_UserBlockingPriority,Aa=Ot.unstable_NormalPriority,Y_=Ot.unstable_LowPriority,_g=Ot.unstable_IdlePriority,cl=null,un=null;function X_(t){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(cl,t,void 0,(t.current.flags&128)===128)}catch{}}var Zt=Math.clz32?Math.clz32:e1,J_=Math.log,Z_=Math.LN2;function e1(t){return t>>>=0,t===0?32:31-(J_(t)/Z_|0)|0}var Go=64,Ho=4194304;function yi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ba(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=yi(l):(i&=a,i!==0&&(r=yi(i)))}else a=n&~s,a!==0?r=yi(a):i!==0&&(r=yi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Zt(e),s=1<<n,r|=t[n],e&=~s;return r}function t1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function n1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Zt(i),l=1<<a,u=s[a];u===-1?(!(l&n)||l&r)&&(s[a]=t1(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function uc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function xg(){var t=Go;return Go<<=1,!(Go&4194240)&&(Go=64),t}function fu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ho(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Zt(e),t[e]=n}function r1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Zt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Eh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Zt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var _e=0;function wg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Eg,Th,Tg,Ig,kg,cc=!1,Wo=[],Wn=null,Kn=null,Qn=null,zi=new Map,Ui=new Map,Bn=[],s1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $f(t,e){switch(t){case"focusin":case"focusout":Wn=null;break;case"dragenter":case"dragleave":Kn=null;break;case"mouseover":case"mouseout":Qn=null;break;case"pointerover":case"pointerout":zi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ui.delete(e.pointerId)}}function li(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=po(e),e!==null&&Th(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function i1(t,e,n,r,s){switch(e){case"focusin":return Wn=li(Wn,t,e,n,r,s),!0;case"dragenter":return Kn=li(Kn,t,e,n,r,s),!0;case"mouseover":return Qn=li(Qn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return zi.set(i,li(zi.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ui.set(i,li(Ui.get(i)||null,t,e,n,r,s)),!0}return!1}function Sg(t){var e=Tr(t.target);if(e!==null){var n=Ur(e);if(n!==null){if(e=n.tag,e===13){if(e=pg(n),e!==null){t.blockedOn=e,kg(t.priority,function(){Tg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ha(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=hc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ic=r,n.target.dispatchEvent(r),ic=null}else return e=po(n),e!==null&&Th(e),t.blockedOn=n,!1;e.shift()}return!0}function qf(t,e,n){ha(t)&&n.delete(e)}function o1(){cc=!1,Wn!==null&&ha(Wn)&&(Wn=null),Kn!==null&&ha(Kn)&&(Kn=null),Qn!==null&&ha(Qn)&&(Qn=null),zi.forEach(qf),Ui.forEach(qf)}function ui(t,e){t.blockedOn===e&&(t.blockedOn=null,cc||(cc=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,o1)))}function Bi(t){function e(s){return ui(s,t)}if(0<Wo.length){ui(Wo[0],t);for(var n=1;n<Wo.length;n++){var r=Wo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Wn!==null&&ui(Wn,t),Kn!==null&&ui(Kn,t),Qn!==null&&ui(Qn,t),zi.forEach(e),Ui.forEach(e),n=0;n<Bn.length;n++)r=Bn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Bn.length&&(n=Bn[0],n.blockedOn===null);)Sg(n),n.blockedOn===null&&Bn.shift()}var fs=Dn.ReactCurrentBatchConfig,Ra=!0;function a1(t,e,n,r){var s=_e,i=fs.transition;fs.transition=null;try{_e=1,Ih(t,e,n,r)}finally{_e=s,fs.transition=i}}function l1(t,e,n,r){var s=_e,i=fs.transition;fs.transition=null;try{_e=4,Ih(t,e,n,r)}finally{_e=s,fs.transition=i}}function Ih(t,e,n,r){if(Ra){var s=hc(t,e,n,r);if(s===null)Tu(t,e,r,Pa,n),$f(t,r);else if(i1(s,t,e,n,r))r.stopPropagation();else if($f(t,r),e&4&&-1<s1.indexOf(t)){for(;s!==null;){var i=po(s);if(i!==null&&Eg(i),i=hc(t,e,n,r),i===null&&Tu(t,e,r,Pa,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Tu(t,e,r,null,n)}}var Pa=null;function hc(t,e,n,r){if(Pa=null,t=xh(r),t=Tr(t),t!==null)if(e=Ur(t),e===null)t=null;else if(n=e.tag,n===13){if(t=pg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Pa=t,null}function Cg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Q_()){case wh:return 1;case vg:return 4;case Aa:case Y_:return 16;case _g:return 536870912;default:return 16}default:return 16}}var qn=null,kh=null,da=null;function Ng(){if(da)return da;var t,e=kh,n=e.length,r,s="value"in qn?qn.value:qn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return da=s.slice(t,1<r?1-r:void 0)}function fa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ko(){return!0}function Gf(){return!1}function Ft(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ko:Gf,this.isPropagationStopped=Gf,this}return De(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ko)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ko)},persist:function(){},isPersistent:Ko}),e}var js={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sh=Ft(js),fo=De({},js,{view:0,detail:0}),u1=Ft(fo),pu,mu,ci,hl=De({},fo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ch,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ci&&(ci&&t.type==="mousemove"?(pu=t.screenX-ci.screenX,mu=t.screenY-ci.screenY):mu=pu=0,ci=t),pu)},movementY:function(t){return"movementY"in t?t.movementY:mu}}),Hf=Ft(hl),c1=De({},hl,{dataTransfer:0}),h1=Ft(c1),d1=De({},fo,{relatedTarget:0}),gu=Ft(d1),f1=De({},js,{animationName:0,elapsedTime:0,pseudoElement:0}),p1=Ft(f1),m1=De({},js,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),g1=Ft(m1),y1=De({},js,{data:0}),Wf=Ft(y1),v1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},x1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function w1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=x1[t])?!!e[t]:!1}function Ch(){return w1}var E1=De({},fo,{key:function(t){if(t.key){var e=v1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=fa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ch,charCode:function(t){return t.type==="keypress"?fa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),T1=Ft(E1),I1=De({},hl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kf=Ft(I1),k1=De({},fo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ch}),S1=Ft(k1),C1=De({},js,{propertyName:0,elapsedTime:0,pseudoElement:0}),N1=Ft(C1),A1=De({},hl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),b1=Ft(A1),R1=[9,13,27,32],Nh=Cn&&"CompositionEvent"in window,ki=null;Cn&&"documentMode"in document&&(ki=document.documentMode);var P1=Cn&&"TextEvent"in window&&!ki,Ag=Cn&&(!Nh||ki&&8<ki&&11>=ki),Qf=" ",Yf=!1;function bg(t,e){switch(t){case"keyup":return R1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var es=!1;function j1(t,e){switch(t){case"compositionend":return Rg(e);case"keypress":return e.which!==32?null:(Yf=!0,Qf);case"textInput":return t=e.data,t===Qf&&Yf?null:t;default:return null}}function D1(t,e){if(es)return t==="compositionend"||!Nh&&bg(t,e)?(t=Ng(),da=kh=qn=null,es=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ag&&e.locale!=="ko"?null:e.data;default:return null}}var V1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!V1[t.type]:e==="textarea"}function Pg(t,e,n,r){ug(r),e=ja(e,"onChange"),0<e.length&&(n=new Sh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Si=null,$i=null;function M1(t){$g(t,0)}function dl(t){var e=rs(t);if(ng(e))return t}function O1(t,e){if(t==="change")return e}var jg=!1;if(Cn){var yu;if(Cn){var vu="oninput"in document;if(!vu){var Jf=document.createElement("div");Jf.setAttribute("oninput","return;"),vu=typeof Jf.oninput=="function"}yu=vu}else yu=!1;jg=yu&&(!document.documentMode||9<document.documentMode)}function Zf(){Si&&(Si.detachEvent("onpropertychange",Dg),$i=Si=null)}function Dg(t){if(t.propertyName==="value"&&dl($i)){var e=[];Pg(e,$i,t,xh(t)),fg(M1,e)}}function L1(t,e,n){t==="focusin"?(Zf(),Si=e,$i=n,Si.attachEvent("onpropertychange",Dg)):t==="focusout"&&Zf()}function F1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return dl($i)}function z1(t,e){if(t==="click")return dl(e)}function U1(t,e){if(t==="input"||t==="change")return dl(e)}function B1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var tn=typeof Object.is=="function"?Object.is:B1;function qi(t,e){if(tn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Wu.call(e,s)||!tn(t[s],e[s]))return!1}return!0}function ep(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function tp(t,e){var n=ep(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ep(n)}}function Vg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Vg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Mg(){for(var t=window,e=Sa();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Sa(t.document)}return e}function Ah(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function $1(t){var e=Mg(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Vg(n.ownerDocument.documentElement,n)){if(r!==null&&Ah(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=tp(n,i);var a=tp(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var q1=Cn&&"documentMode"in document&&11>=document.documentMode,ts=null,dc=null,Ci=null,fc=!1;function np(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fc||ts==null||ts!==Sa(r)||(r=ts,"selectionStart"in r&&Ah(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ci&&qi(Ci,r)||(Ci=r,r=ja(dc,"onSelect"),0<r.length&&(e=new Sh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ts)))}function Qo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ns={animationend:Qo("Animation","AnimationEnd"),animationiteration:Qo("Animation","AnimationIteration"),animationstart:Qo("Animation","AnimationStart"),transitionend:Qo("Transition","TransitionEnd")},_u={},Og={};Cn&&(Og=document.createElement("div").style,"AnimationEvent"in window||(delete ns.animationend.animation,delete ns.animationiteration.animation,delete ns.animationstart.animation),"TransitionEvent"in window||delete ns.transitionend.transition);function fl(t){if(_u[t])return _u[t];if(!ns[t])return t;var e=ns[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Og)return _u[t]=e[n];return t}var Lg=fl("animationend"),Fg=fl("animationiteration"),zg=fl("animationstart"),Ug=fl("transitionend"),Bg=new Map,rp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dr(t,e){Bg.set(t,e),zr(e,[t])}for(var xu=0;xu<rp.length;xu++){var wu=rp[xu],G1=wu.toLowerCase(),H1=wu[0].toUpperCase()+wu.slice(1);dr(G1,"on"+H1)}dr(Lg,"onAnimationEnd");dr(Fg,"onAnimationIteration");dr(zg,"onAnimationStart");dr("dblclick","onDoubleClick");dr("focusin","onFocus");dr("focusout","onBlur");dr(Ug,"onTransitionEnd");vs("onMouseEnter",["mouseout","mouseover"]);vs("onMouseLeave",["mouseout","mouseover"]);vs("onPointerEnter",["pointerout","pointerover"]);vs("onPointerLeave",["pointerout","pointerover"]);zr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zr("onBeforeInput",["compositionend","keypress","textInput","paste"]);zr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),W1=new Set("cancel close invalid load scroll toggle".split(" ").concat(vi));function sp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,G_(r,e,void 0,t),t.currentTarget=null}function $g(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;sp(s,l,d),i=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;sp(s,l,d),i=u}}}if(Na)throw t=lc,Na=!1,lc=null,t}function Se(t,e){var n=e[vc];n===void 0&&(n=e[vc]=new Set);var r=t+"__bubble";n.has(r)||(qg(e,t,2,!1),n.add(r))}function Eu(t,e,n){var r=0;e&&(r|=4),qg(n,t,r,e)}var Yo="_reactListening"+Math.random().toString(36).slice(2);function Gi(t){if(!t[Yo]){t[Yo]=!0,Xm.forEach(function(n){n!=="selectionchange"&&(W1.has(n)||Eu(n,!1,t),Eu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Yo]||(e[Yo]=!0,Eu("selectionchange",!1,e))}}function qg(t,e,n,r){switch(Cg(e)){case 1:var s=a1;break;case 4:s=l1;break;default:s=Ih}n=s.bind(null,e,n,t),s=void 0,!ac||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Tu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Tr(l),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}l=l.parentNode}}r=r.return}fg(function(){var d=i,p=xh(n),g=[];e:{var v=Bg.get(t);if(v!==void 0){var S=Sh,A=t;switch(t){case"keypress":if(fa(n)===0)break e;case"keydown":case"keyup":S=T1;break;case"focusin":A="focus",S=gu;break;case"focusout":A="blur",S=gu;break;case"beforeblur":case"afterblur":S=gu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Hf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=h1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=S1;break;case Lg:case Fg:case zg:S=p1;break;case Ug:S=N1;break;case"scroll":S=u1;break;case"wheel":S=b1;break;case"copy":case"cut":case"paste":S=g1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=Kf}var b=(e&4)!==0,j=!b&&t==="scroll",I=b?v!==null?v+"Capture":null:v;b=[];for(var w=d,k;w!==null;){k=w;var P=k.stateNode;if(k.tag===5&&P!==null&&(k=P,I!==null&&(P=Fi(w,I),P!=null&&b.push(Hi(w,P,k)))),j)break;w=w.return}0<b.length&&(v=new S(v,A,null,n,p),g.push({event:v,listeners:b}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",v&&n!==ic&&(A=n.relatedTarget||n.fromElement)&&(Tr(A)||A[Nn]))break e;if((S||v)&&(v=p.window===p?p:(v=p.ownerDocument)?v.defaultView||v.parentWindow:window,S?(A=n.relatedTarget||n.toElement,S=d,A=A?Tr(A):null,A!==null&&(j=Ur(A),A!==j||A.tag!==5&&A.tag!==6)&&(A=null)):(S=null,A=d),S!==A)){if(b=Hf,P="onMouseLeave",I="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(b=Kf,P="onPointerLeave",I="onPointerEnter",w="pointer"),j=S==null?v:rs(S),k=A==null?v:rs(A),v=new b(P,w+"leave",S,n,p),v.target=j,v.relatedTarget=k,P=null,Tr(p)===d&&(b=new b(I,w+"enter",A,n,p),b.target=k,b.relatedTarget=j,P=b),j=P,S&&A)t:{for(b=S,I=A,w=0,k=b;k;k=Kr(k))w++;for(k=0,P=I;P;P=Kr(P))k++;for(;0<w-k;)b=Kr(b),w--;for(;0<k-w;)I=Kr(I),k--;for(;w--;){if(b===I||I!==null&&b===I.alternate)break t;b=Kr(b),I=Kr(I)}b=null}else b=null;S!==null&&ip(g,v,S,b,!1),A!==null&&j!==null&&ip(g,j,A,b,!0)}}e:{if(v=d?rs(d):window,S=v.nodeName&&v.nodeName.toLowerCase(),S==="select"||S==="input"&&v.type==="file")var O=O1;else if(Xf(v))if(jg)O=U1;else{O=F1;var M=L1}else(S=v.nodeName)&&S.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(O=z1);if(O&&(O=O(t,d))){Pg(g,O,n,p);break e}M&&M(t,v,d),t==="focusout"&&(M=v._wrapperState)&&M.controlled&&v.type==="number"&&ec(v,"number",v.value)}switch(M=d?rs(d):window,t){case"focusin":(Xf(M)||M.contentEditable==="true")&&(ts=M,dc=d,Ci=null);break;case"focusout":Ci=dc=ts=null;break;case"mousedown":fc=!0;break;case"contextmenu":case"mouseup":case"dragend":fc=!1,np(g,n,p);break;case"selectionchange":if(q1)break;case"keydown":case"keyup":np(g,n,p)}var x;if(Nh)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else es?bg(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(Ag&&n.locale!=="ko"&&(es||y!=="onCompositionStart"?y==="onCompositionEnd"&&es&&(x=Ng()):(qn=p,kh="value"in qn?qn.value:qn.textContent,es=!0)),M=ja(d,y),0<M.length&&(y=new Wf(y,t,null,n,p),g.push({event:y,listeners:M}),x?y.data=x:(x=Rg(n),x!==null&&(y.data=x)))),(x=P1?j1(t,n):D1(t,n))&&(d=ja(d,"onBeforeInput"),0<d.length&&(p=new Wf("onBeforeInput","beforeinput",null,n,p),g.push({event:p,listeners:d}),p.data=x))}$g(g,e)})}function Hi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ja(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Fi(t,n),i!=null&&r.unshift(Hi(t,i,s)),i=Fi(t,e),i!=null&&r.push(Hi(t,i,s))),t=t.return}return r}function Kr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ip(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=Fi(n,i),u!=null&&a.unshift(Hi(n,u,l))):s||(u=Fi(n,i),u!=null&&a.push(Hi(n,u,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var K1=/\r\n?/g,Q1=/\u0000|\uFFFD/g;function op(t){return(typeof t=="string"?t:""+t).replace(K1,`
`).replace(Q1,"")}function Xo(t,e,n){if(e=op(e),op(t)!==e&&n)throw Error($(425))}function Da(){}var pc=null,mc=null;function gc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var yc=typeof setTimeout=="function"?setTimeout:void 0,Y1=typeof clearTimeout=="function"?clearTimeout:void 0,ap=typeof Promise=="function"?Promise:void 0,X1=typeof queueMicrotask=="function"?queueMicrotask:typeof ap<"u"?function(t){return ap.resolve(null).then(t).catch(J1)}:yc;function J1(t){setTimeout(function(){throw t})}function Iu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Bi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Bi(e)}function Yn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function lp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ds=Math.random().toString(36).slice(2),ln="__reactFiber$"+Ds,Wi="__reactProps$"+Ds,Nn="__reactContainer$"+Ds,vc="__reactEvents$"+Ds,Z1="__reactListeners$"+Ds,ex="__reactHandles$"+Ds;function Tr(t){var e=t[ln];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Nn]||n[ln]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=lp(t);t!==null;){if(n=t[ln])return n;t=lp(t)}return e}t=n,n=t.parentNode}return null}function po(t){return t=t[ln]||t[Nn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function rs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function pl(t){return t[Wi]||null}var _c=[],ss=-1;function fr(t){return{current:t}}function Ce(t){0>ss||(t.current=_c[ss],_c[ss]=null,ss--)}function Ie(t,e){ss++,_c[ss]=t.current,t.current=e}var lr={},pt=fr(lr),kt=fr(!1),br=lr;function _s(t,e){var n=t.type.contextTypes;if(!n)return lr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function St(t){return t=t.childContextTypes,t!=null}function Va(){Ce(kt),Ce(pt)}function up(t,e,n){if(pt.current!==lr)throw Error($(168));Ie(pt,e),Ie(kt,n)}function Gg(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error($(108,L_(t)||"Unknown",s));return De({},n,r)}function Ma(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||lr,br=pt.current,Ie(pt,t),Ie(kt,kt.current),!0}function cp(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=Gg(t,e,br),r.__reactInternalMemoizedMergedChildContext=t,Ce(kt),Ce(pt),Ie(pt,t)):Ce(kt),Ie(kt,n)}var En=null,ml=!1,ku=!1;function Hg(t){En===null?En=[t]:En.push(t)}function tx(t){ml=!0,Hg(t)}function pr(){if(!ku&&En!==null){ku=!0;var t=0,e=_e;try{var n=En;for(_e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}En=null,ml=!1}catch(s){throw En!==null&&(En=En.slice(t+1)),yg(wh,pr),s}finally{_e=e,ku=!1}}return null}var is=[],os=0,Oa=null,La=0,zt=[],Ut=0,Rr=null,In=1,kn="";function xr(t,e){is[os++]=La,is[os++]=Oa,Oa=t,La=e}function Wg(t,e,n){zt[Ut++]=In,zt[Ut++]=kn,zt[Ut++]=Rr,Rr=t;var r=In;t=kn;var s=32-Zt(r)-1;r&=~(1<<s),n+=1;var i=32-Zt(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,In=1<<32-Zt(e)+s|n<<s|r,kn=i+t}else In=1<<i|n<<s|r,kn=t}function bh(t){t.return!==null&&(xr(t,1),Wg(t,1,0))}function Rh(t){for(;t===Oa;)Oa=is[--os],is[os]=null,La=is[--os],is[os]=null;for(;t===Rr;)Rr=zt[--Ut],zt[Ut]=null,kn=zt[--Ut],zt[Ut]=null,In=zt[--Ut],zt[Ut]=null}var Vt=null,jt=null,Ae=!1,Jt=null;function Kg(t,e){var n=Bt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function hp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Vt=t,jt=Yn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Vt=t,jt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Rr!==null?{id:In,overflow:kn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Bt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Vt=t,jt=null,!0):!1;default:return!1}}function xc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function wc(t){if(Ae){var e=jt;if(e){var n=e;if(!hp(t,e)){if(xc(t))throw Error($(418));e=Yn(n.nextSibling);var r=Vt;e&&hp(t,e)?Kg(r,n):(t.flags=t.flags&-4097|2,Ae=!1,Vt=t)}}else{if(xc(t))throw Error($(418));t.flags=t.flags&-4097|2,Ae=!1,Vt=t}}}function dp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Vt=t}function Jo(t){if(t!==Vt)return!1;if(!Ae)return dp(t),Ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!gc(t.type,t.memoizedProps)),e&&(e=jt)){if(xc(t))throw Qg(),Error($(418));for(;e;)Kg(t,e),e=Yn(e.nextSibling)}if(dp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){jt=Yn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}jt=null}}else jt=Vt?Yn(t.stateNode.nextSibling):null;return!0}function Qg(){for(var t=jt;t;)t=Yn(t.nextSibling)}function xs(){jt=Vt=null,Ae=!1}function Ph(t){Jt===null?Jt=[t]:Jt.push(t)}var nx=Dn.ReactCurrentBatchConfig;function hi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function Zo(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function fp(t){var e=t._init;return e(t._payload)}function Yg(t){function e(I,w){if(t){var k=I.deletions;k===null?(I.deletions=[w],I.flags|=16):k.push(w)}}function n(I,w){if(!t)return null;for(;w!==null;)e(I,w),w=w.sibling;return null}function r(I,w){for(I=new Map;w!==null;)w.key!==null?I.set(w.key,w):I.set(w.index,w),w=w.sibling;return I}function s(I,w){return I=er(I,w),I.index=0,I.sibling=null,I}function i(I,w,k){return I.index=k,t?(k=I.alternate,k!==null?(k=k.index,k<w?(I.flags|=2,w):k):(I.flags|=2,w)):(I.flags|=1048576,w)}function a(I){return t&&I.alternate===null&&(I.flags|=2),I}function l(I,w,k,P){return w===null||w.tag!==6?(w=Pu(k,I.mode,P),w.return=I,w):(w=s(w,k),w.return=I,w)}function u(I,w,k,P){var O=k.type;return O===Zr?p(I,w,k.props.children,P,k.key):w!==null&&(w.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===zn&&fp(O)===w.type)?(P=s(w,k.props),P.ref=hi(I,w,k),P.return=I,P):(P=xa(k.type,k.key,k.props,null,I.mode,P),P.ref=hi(I,w,k),P.return=I,P)}function d(I,w,k,P){return w===null||w.tag!==4||w.stateNode.containerInfo!==k.containerInfo||w.stateNode.implementation!==k.implementation?(w=ju(k,I.mode,P),w.return=I,w):(w=s(w,k.children||[]),w.return=I,w)}function p(I,w,k,P,O){return w===null||w.tag!==7?(w=Nr(k,I.mode,P,O),w.return=I,w):(w=s(w,k),w.return=I,w)}function g(I,w,k){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Pu(""+w,I.mode,k),w.return=I,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Bo:return k=xa(w.type,w.key,w.props,null,I.mode,k),k.ref=hi(I,null,w),k.return=I,k;case Jr:return w=ju(w,I.mode,k),w.return=I,w;case zn:var P=w._init;return g(I,P(w._payload),k)}if(gi(w)||oi(w))return w=Nr(w,I.mode,k,null),w.return=I,w;Zo(I,w)}return null}function v(I,w,k,P){var O=w!==null?w.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return O!==null?null:l(I,w,""+k,P);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Bo:return k.key===O?u(I,w,k,P):null;case Jr:return k.key===O?d(I,w,k,P):null;case zn:return O=k._init,v(I,w,O(k._payload),P)}if(gi(k)||oi(k))return O!==null?null:p(I,w,k,P,null);Zo(I,k)}return null}function S(I,w,k,P,O){if(typeof P=="string"&&P!==""||typeof P=="number")return I=I.get(k)||null,l(w,I,""+P,O);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Bo:return I=I.get(P.key===null?k:P.key)||null,u(w,I,P,O);case Jr:return I=I.get(P.key===null?k:P.key)||null,d(w,I,P,O);case zn:var M=P._init;return S(I,w,k,M(P._payload),O)}if(gi(P)||oi(P))return I=I.get(k)||null,p(w,I,P,O,null);Zo(w,P)}return null}function A(I,w,k,P){for(var O=null,M=null,x=w,y=w=0,T=null;x!==null&&y<k.length;y++){x.index>y?(T=x,x=null):T=x.sibling;var E=v(I,x,k[y],P);if(E===null){x===null&&(x=T);break}t&&x&&E.alternate===null&&e(I,x),w=i(E,w,y),M===null?O=E:M.sibling=E,M=E,x=T}if(y===k.length)return n(I,x),Ae&&xr(I,y),O;if(x===null){for(;y<k.length;y++)x=g(I,k[y],P),x!==null&&(w=i(x,w,y),M===null?O=x:M.sibling=x,M=x);return Ae&&xr(I,y),O}for(x=r(I,x);y<k.length;y++)T=S(x,I,y,k[y],P),T!==null&&(t&&T.alternate!==null&&x.delete(T.key===null?y:T.key),w=i(T,w,y),M===null?O=T:M.sibling=T,M=T);return t&&x.forEach(function(C){return e(I,C)}),Ae&&xr(I,y),O}function b(I,w,k,P){var O=oi(k);if(typeof O!="function")throw Error($(150));if(k=O.call(k),k==null)throw Error($(151));for(var M=O=null,x=w,y=w=0,T=null,E=k.next();x!==null&&!E.done;y++,E=k.next()){x.index>y?(T=x,x=null):T=x.sibling;var C=v(I,x,E.value,P);if(C===null){x===null&&(x=T);break}t&&x&&C.alternate===null&&e(I,x),w=i(C,w,y),M===null?O=C:M.sibling=C,M=C,x=T}if(E.done)return n(I,x),Ae&&xr(I,y),O;if(x===null){for(;!E.done;y++,E=k.next())E=g(I,E.value,P),E!==null&&(w=i(E,w,y),M===null?O=E:M.sibling=E,M=E);return Ae&&xr(I,y),O}for(x=r(I,x);!E.done;y++,E=k.next())E=S(x,I,y,E.value,P),E!==null&&(t&&E.alternate!==null&&x.delete(E.key===null?y:E.key),w=i(E,w,y),M===null?O=E:M.sibling=E,M=E);return t&&x.forEach(function(N){return e(I,N)}),Ae&&xr(I,y),O}function j(I,w,k,P){if(typeof k=="object"&&k!==null&&k.type===Zr&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Bo:e:{for(var O=k.key,M=w;M!==null;){if(M.key===O){if(O=k.type,O===Zr){if(M.tag===7){n(I,M.sibling),w=s(M,k.props.children),w.return=I,I=w;break e}}else if(M.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===zn&&fp(O)===M.type){n(I,M.sibling),w=s(M,k.props),w.ref=hi(I,M,k),w.return=I,I=w;break e}n(I,M);break}else e(I,M);M=M.sibling}k.type===Zr?(w=Nr(k.props.children,I.mode,P,k.key),w.return=I,I=w):(P=xa(k.type,k.key,k.props,null,I.mode,P),P.ref=hi(I,w,k),P.return=I,I=P)}return a(I);case Jr:e:{for(M=k.key;w!==null;){if(w.key===M)if(w.tag===4&&w.stateNode.containerInfo===k.containerInfo&&w.stateNode.implementation===k.implementation){n(I,w.sibling),w=s(w,k.children||[]),w.return=I,I=w;break e}else{n(I,w);break}else e(I,w);w=w.sibling}w=ju(k,I.mode,P),w.return=I,I=w}return a(I);case zn:return M=k._init,j(I,w,M(k._payload),P)}if(gi(k))return A(I,w,k,P);if(oi(k))return b(I,w,k,P);Zo(I,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,w!==null&&w.tag===6?(n(I,w.sibling),w=s(w,k),w.return=I,I=w):(n(I,w),w=Pu(k,I.mode,P),w.return=I,I=w),a(I)):n(I,w)}return j}var ws=Yg(!0),Xg=Yg(!1),Fa=fr(null),za=null,as=null,jh=null;function Dh(){jh=as=za=null}function Vh(t){var e=Fa.current;Ce(Fa),t._currentValue=e}function Ec(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ps(t,e){za=t,jh=as=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(It=!0),t.firstContext=null)}function qt(t){var e=t._currentValue;if(jh!==t)if(t={context:t,memoizedValue:e,next:null},as===null){if(za===null)throw Error($(308));as=t,za.dependencies={lanes:0,firstContext:t}}else as=as.next=t;return e}var Ir=null;function Mh(t){Ir===null?Ir=[t]:Ir.push(t)}function Jg(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Mh(e)):(n.next=s.next,s.next=n),e.interleaved=n,An(t,r)}function An(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Un=!1;function Oh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Sn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Xn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,An(t,n)}return s=r.interleaved,s===null?(e.next=e,Mh(r)):(e.next=s.next,s.next=e),r.interleaved=e,An(t,n)}function pa(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Eh(t,n)}}function pp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ua(t,e,n,r){var s=t.updateQueue;Un=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,a===null?i=d:a.next=d,a=u;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==a&&(l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=u))}if(i!==null){var g=s.baseState;a=0,p=d=u=null,l=i;do{var v=l.lane,S=l.eventTime;if((r&v)===v){p!==null&&(p=p.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var A=t,b=l;switch(v=e,S=n,b.tag){case 1:if(A=b.payload,typeof A=="function"){g=A.call(S,g,v);break e}g=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=b.payload,v=typeof A=="function"?A.call(S,g,v):A,v==null)break e;g=De({},g,v);break e;case 2:Un=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,v=s.effects,v===null?s.effects=[l]:v.push(l))}else S={eventTime:S,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(d=p=S,u=g):p=p.next=S,a|=v;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;v=l,l=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(p===null&&(u=g),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);jr|=a,t.lanes=a,t.memoizedState=g}}function mp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var mo={},cn=fr(mo),Ki=fr(mo),Qi=fr(mo);function kr(t){if(t===mo)throw Error($(174));return t}function Lh(t,e){switch(Ie(Qi,e),Ie(Ki,t),Ie(cn,mo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:nc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=nc(e,t)}Ce(cn),Ie(cn,e)}function Es(){Ce(cn),Ce(Ki),Ce(Qi)}function ey(t){kr(Qi.current);var e=kr(cn.current),n=nc(e,t.type);e!==n&&(Ie(Ki,t),Ie(cn,n))}function Fh(t){Ki.current===t&&(Ce(cn),Ce(Ki))}var Pe=fr(0);function Ba(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Su=[];function zh(){for(var t=0;t<Su.length;t++)Su[t]._workInProgressVersionPrimary=null;Su.length=0}var ma=Dn.ReactCurrentDispatcher,Cu=Dn.ReactCurrentBatchConfig,Pr=0,je=null,$e=null,Qe=null,$a=!1,Ni=!1,Yi=0,rx=0;function lt(){throw Error($(321))}function Uh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!tn(t[n],e[n]))return!1;return!0}function Bh(t,e,n,r,s,i){if(Pr=i,je=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ma.current=t===null||t.memoizedState===null?ax:lx,t=n(r,s),Ni){i=0;do{if(Ni=!1,Yi=0,25<=i)throw Error($(301));i+=1,Qe=$e=null,e.updateQueue=null,ma.current=ux,t=n(r,s)}while(Ni)}if(ma.current=qa,e=$e!==null&&$e.next!==null,Pr=0,Qe=$e=je=null,$a=!1,e)throw Error($(300));return t}function $h(){var t=Yi!==0;return Yi=0,t}function an(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?je.memoizedState=Qe=t:Qe=Qe.next=t,Qe}function Gt(){if($e===null){var t=je.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var e=Qe===null?je.memoizedState:Qe.next;if(e!==null)Qe=e,$e=t;else{if(t===null)throw Error($(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Qe===null?je.memoizedState=Qe=t:Qe=Qe.next=t}return Qe}function Xi(t,e){return typeof e=="function"?e(t):e}function Nu(t){var e=Gt(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=$e,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,u=null,d=i;do{var p=d.lane;if((Pr&p)===p)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var g={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=g,a=r):u=u.next=g,je.lanes|=p,jr|=p}d=d.next}while(d!==null&&d!==i);u===null?a=r:u.next=l,tn(r,e.memoizedState)||(It=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,je.lanes|=i,jr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Au(t){var e=Gt(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);tn(i,e.memoizedState)||(It=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function ty(){}function ny(t,e){var n=je,r=Gt(),s=e(),i=!tn(r.memoizedState,s);if(i&&(r.memoizedState=s,It=!0),r=r.queue,qh(iy.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Qe!==null&&Qe.memoizedState.tag&1){if(n.flags|=2048,Ji(9,sy.bind(null,n,r,s,e),void 0,null),Ye===null)throw Error($(349));Pr&30||ry(n,e,s)}return s}function ry(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function sy(t,e,n,r){e.value=n,e.getSnapshot=r,oy(e)&&ay(t)}function iy(t,e,n){return n(function(){oy(e)&&ay(t)})}function oy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!tn(t,n)}catch{return!0}}function ay(t){var e=An(t,1);e!==null&&en(e,t,1,-1)}function gp(t){var e=an();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:t},e.queue=t,t=t.dispatch=ox.bind(null,je,t),[e.memoizedState,t]}function Ji(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ly(){return Gt().memoizedState}function ga(t,e,n,r){var s=an();je.flags|=t,s.memoizedState=Ji(1|e,n,void 0,r===void 0?null:r)}function gl(t,e,n,r){var s=Gt();r=r===void 0?null:r;var i=void 0;if($e!==null){var a=$e.memoizedState;if(i=a.destroy,r!==null&&Uh(r,a.deps)){s.memoizedState=Ji(e,n,i,r);return}}je.flags|=t,s.memoizedState=Ji(1|e,n,i,r)}function yp(t,e){return ga(8390656,8,t,e)}function qh(t,e){return gl(2048,8,t,e)}function uy(t,e){return gl(4,2,t,e)}function cy(t,e){return gl(4,4,t,e)}function hy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function dy(t,e,n){return n=n!=null?n.concat([t]):null,gl(4,4,hy.bind(null,e,t),n)}function Gh(){}function fy(t,e){var n=Gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Uh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function py(t,e){var n=Gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Uh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function my(t,e,n){return Pr&21?(tn(n,e)||(n=xg(),je.lanes|=n,jr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,It=!0),t.memoizedState=n)}function sx(t,e){var n=_e;_e=n!==0&&4>n?n:4,t(!0);var r=Cu.transition;Cu.transition={};try{t(!1),e()}finally{_e=n,Cu.transition=r}}function gy(){return Gt().memoizedState}function ix(t,e,n){var r=Zn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},yy(t))vy(e,n);else if(n=Jg(t,e,n,r),n!==null){var s=yt();en(n,t,r,s),_y(n,e,r)}}function ox(t,e,n){var r=Zn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(yy(t))vy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,tn(l,a)){var u=e.interleaved;u===null?(s.next=s,Mh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Jg(t,e,s,r),n!==null&&(s=yt(),en(n,t,r,s),_y(n,e,r))}}function yy(t){var e=t.alternate;return t===je||e!==null&&e===je}function vy(t,e){Ni=$a=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function _y(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Eh(t,n)}}var qa={readContext:qt,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useInsertionEffect:lt,useLayoutEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useMutableSource:lt,useSyncExternalStore:lt,useId:lt,unstable_isNewReconciler:!1},ax={readContext:qt,useCallback:function(t,e){return an().memoizedState=[t,e===void 0?null:e],t},useContext:qt,useEffect:yp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ga(4194308,4,hy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ga(4194308,4,t,e)},useInsertionEffect:function(t,e){return ga(4,2,t,e)},useMemo:function(t,e){var n=an();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=an();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ix.bind(null,je,t),[r.memoizedState,t]},useRef:function(t){var e=an();return t={current:t},e.memoizedState=t},useState:gp,useDebugValue:Gh,useDeferredValue:function(t){return an().memoizedState=t},useTransition:function(){var t=gp(!1),e=t[0];return t=sx.bind(null,t[1]),an().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=je,s=an();if(Ae){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),Ye===null)throw Error($(349));Pr&30||ry(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,yp(iy.bind(null,r,i,t),[t]),r.flags|=2048,Ji(9,sy.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=an(),e=Ye.identifierPrefix;if(Ae){var n=kn,r=In;n=(r&~(1<<32-Zt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Yi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=rx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},lx={readContext:qt,useCallback:fy,useContext:qt,useEffect:qh,useImperativeHandle:dy,useInsertionEffect:uy,useLayoutEffect:cy,useMemo:py,useReducer:Nu,useRef:ly,useState:function(){return Nu(Xi)},useDebugValue:Gh,useDeferredValue:function(t){var e=Gt();return my(e,$e.memoizedState,t)},useTransition:function(){var t=Nu(Xi)[0],e=Gt().memoizedState;return[t,e]},useMutableSource:ty,useSyncExternalStore:ny,useId:gy,unstable_isNewReconciler:!1},ux={readContext:qt,useCallback:fy,useContext:qt,useEffect:qh,useImperativeHandle:dy,useInsertionEffect:uy,useLayoutEffect:cy,useMemo:py,useReducer:Au,useRef:ly,useState:function(){return Au(Xi)},useDebugValue:Gh,useDeferredValue:function(t){var e=Gt();return $e===null?e.memoizedState=t:my(e,$e.memoizedState,t)},useTransition:function(){var t=Au(Xi)[0],e=Gt().memoizedState;return[t,e]},useMutableSource:ty,useSyncExternalStore:ny,useId:gy,unstable_isNewReconciler:!1};function Yt(t,e){if(t&&t.defaultProps){e=De({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Tc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:De({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var yl={isMounted:function(t){return(t=t._reactInternals)?Ur(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=yt(),s=Zn(t),i=Sn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Xn(t,i,s),e!==null&&(en(e,t,s,r),pa(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=yt(),s=Zn(t),i=Sn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Xn(t,i,s),e!==null&&(en(e,t,s,r),pa(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yt(),r=Zn(t),s=Sn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Xn(t,s,r),e!==null&&(en(e,t,r,n),pa(e,t,r))}};function vp(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!qi(n,r)||!qi(s,i):!0}function xy(t,e,n){var r=!1,s=lr,i=e.contextType;return typeof i=="object"&&i!==null?i=qt(i):(s=St(e)?br:pt.current,r=e.contextTypes,i=(r=r!=null)?_s(t,s):lr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=yl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function _p(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&yl.enqueueReplaceState(e,e.state,null)}function Ic(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Oh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=qt(i):(i=St(e)?br:pt.current,s.context=_s(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Tc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&yl.enqueueReplaceState(s,s.state,null),Ua(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ts(t,e){try{var n="",r=e;do n+=O_(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function bu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function kc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var cx=typeof WeakMap=="function"?WeakMap:Map;function wy(t,e,n){n=Sn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ha||(Ha=!0,Vc=r),kc(t,e)},n}function Ey(t,e,n){n=Sn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){kc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){kc(t,e),typeof r!="function"&&(Jn===null?Jn=new Set([this]):Jn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function xp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new cx;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Ix.bind(null,t,e,n),e.then(t,t))}function wp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ep(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Sn(-1,1),e.tag=2,Xn(n,e,1))),n.lanes|=1),t)}var hx=Dn.ReactCurrentOwner,It=!1;function gt(t,e,n,r){e.child=t===null?Xg(e,null,n,r):ws(e,t.child,n,r)}function Tp(t,e,n,r,s){n=n.render;var i=e.ref;return ps(e,s),r=Bh(t,e,n,r,i,s),n=$h(),t!==null&&!It?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,bn(t,e,s)):(Ae&&n&&bh(e),e.flags|=1,gt(t,e,r,s),e.child)}function Ip(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Zh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Ty(t,e,i,r,s)):(t=xa(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:qi,n(a,r)&&t.ref===e.ref)return bn(t,e,s)}return e.flags|=1,t=er(i,r),t.ref=e.ref,t.return=e,e.child=t}function Ty(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(qi(i,r)&&t.ref===e.ref)if(It=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(It=!0);else return e.lanes=t.lanes,bn(t,e,s)}return Sc(t,e,n,r,s)}function Iy(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(us,Pt),Pt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ie(us,Pt),Pt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ie(us,Pt),Pt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ie(us,Pt),Pt|=r;return gt(t,e,s,n),e.child}function ky(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Sc(t,e,n,r,s){var i=St(n)?br:pt.current;return i=_s(e,i),ps(e,s),n=Bh(t,e,n,r,i,s),r=$h(),t!==null&&!It?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,bn(t,e,s)):(Ae&&r&&bh(e),e.flags|=1,gt(t,e,n,s),e.child)}function kp(t,e,n,r,s){if(St(n)){var i=!0;Ma(e)}else i=!1;if(ps(e,s),e.stateNode===null)ya(t,e),xy(e,n,r),Ic(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=qt(d):(d=St(n)?br:pt.current,d=_s(e,d));var p=n.getDerivedStateFromProps,g=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==d)&&_p(e,a,r,d),Un=!1;var v=e.memoizedState;a.state=v,Ua(e,r,a,s),u=e.memoizedState,l!==r||v!==u||kt.current||Un?(typeof p=="function"&&(Tc(e,n,p,r),u=e.memoizedState),(l=Un||vp(e,n,l,r,v,u,d))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=d,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Zg(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Yt(e.type,l),a.props=d,g=e.pendingProps,v=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=qt(u):(u=St(n)?br:pt.current,u=_s(e,u));var S=n.getDerivedStateFromProps;(p=typeof S=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==g||v!==u)&&_p(e,a,r,u),Un=!1,v=e.memoizedState,a.state=v,Ua(e,r,a,s);var A=e.memoizedState;l!==g||v!==A||kt.current||Un?(typeof S=="function"&&(Tc(e,n,S,r),A=e.memoizedState),(d=Un||vp(e,n,d,r,v,A,u)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,A,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,A,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=A),a.props=r,a.state=A,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return Cc(t,e,n,r,i,s)}function Cc(t,e,n,r,s,i){ky(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&cp(e,n,!1),bn(t,e,i);r=e.stateNode,hx.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=ws(e,t.child,null,i),e.child=ws(e,null,l,i)):gt(t,e,l,i),e.memoizedState=r.state,s&&cp(e,n,!0),e.child}function Sy(t){var e=t.stateNode;e.pendingContext?up(t,e.pendingContext,e.pendingContext!==e.context):e.context&&up(t,e.context,!1),Lh(t,e.containerInfo)}function Sp(t,e,n,r,s){return xs(),Ph(s),e.flags|=256,gt(t,e,n,r),e.child}var Nc={dehydrated:null,treeContext:null,retryLane:0};function Ac(t){return{baseLanes:t,cachePool:null,transitions:null}}function Cy(t,e,n){var r=e.pendingProps,s=Pe.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ie(Pe,s&1),t===null)return wc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=xl(a,r,0,null),t=Nr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ac(n),e.memoizedState=Nc,t):Hh(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return dx(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=er(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=er(l,i):(i=Nr(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Ac(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Nc,r}return i=t.child,t=i.sibling,r=er(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Hh(t,e){return e=xl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ea(t,e,n,r){return r!==null&&Ph(r),ws(e,t.child,null,n),t=Hh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function dx(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=bu(Error($(422))),ea(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=xl({mode:"visible",children:r.children},s,0,null),i=Nr(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ws(e,t.child,null,a),e.child.memoizedState=Ac(a),e.memoizedState=Nc,i);if(!(e.mode&1))return ea(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error($(419)),r=bu(i,r,void 0),ea(t,e,a,r)}if(l=(a&t.childLanes)!==0,It||l){if(r=Ye,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,An(t,s),en(r,t,s,-1))}return Jh(),r=bu(Error($(421))),ea(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=kx.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,jt=Yn(s.nextSibling),Vt=e,Ae=!0,Jt=null,t!==null&&(zt[Ut++]=In,zt[Ut++]=kn,zt[Ut++]=Rr,In=t.id,kn=t.overflow,Rr=e),e=Hh(e,r.children),e.flags|=4096,e)}function Cp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ec(t.return,e,n)}function Ru(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Ny(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(gt(t,e,r.children,n),r=Pe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Cp(t,n,e);else if(t.tag===19)Cp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ie(Pe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ba(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Ru(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ba(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Ru(e,!0,n,null,i);break;case"together":Ru(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ya(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function bn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),jr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=er(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=er(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function fx(t,e,n){switch(e.tag){case 3:Sy(e),xs();break;case 5:ey(e);break;case 1:St(e.type)&&Ma(e);break;case 4:Lh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ie(Fa,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ie(Pe,Pe.current&1),e.flags|=128,null):n&e.child.childLanes?Cy(t,e,n):(Ie(Pe,Pe.current&1),t=bn(t,e,n),t!==null?t.sibling:null);Ie(Pe,Pe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Ny(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ie(Pe,Pe.current),r)break;return null;case 22:case 23:return e.lanes=0,Iy(t,e,n)}return bn(t,e,n)}var Ay,bc,by,Ry;Ay=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};bc=function(){};by=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,kr(cn.current);var i=null;switch(n){case"input":s=Ju(t,s),r=Ju(t,r),i=[];break;case"select":s=De({},s,{value:void 0}),r=De({},r,{value:void 0}),i=[];break;case"textarea":s=tc(t,s),r=tc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Da)}rc(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Oi.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Oi.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Se("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Ry=function(t,e,n,r){n!==r&&(e.flags|=4)};function di(t,e){if(!Ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function px(t,e,n){var r=e.pendingProps;switch(Rh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(e),null;case 1:return St(e.type)&&Va(),ut(e),null;case 3:return r=e.stateNode,Es(),Ce(kt),Ce(pt),zh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Jo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jt!==null&&(Lc(Jt),Jt=null))),bc(t,e),ut(e),null;case 5:Fh(e);var s=kr(Qi.current);if(n=e.type,t!==null&&e.stateNode!=null)by(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return ut(e),null}if(t=kr(cn.current),Jo(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[ln]=e,r[Wi]=i,t=(e.mode&1)!==0,n){case"dialog":Se("cancel",r),Se("close",r);break;case"iframe":case"object":case"embed":Se("load",r);break;case"video":case"audio":for(s=0;s<vi.length;s++)Se(vi[s],r);break;case"source":Se("error",r);break;case"img":case"image":case"link":Se("error",r),Se("load",r);break;case"details":Se("toggle",r);break;case"input":Mf(r,i),Se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Se("invalid",r);break;case"textarea":Lf(r,i),Se("invalid",r)}rc(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Xo(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Xo(r.textContent,l,t),s=["children",""+l]):Oi.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Se("scroll",r)}switch(n){case"input":$o(r),Of(r,i,!0);break;case"textarea":$o(r),Ff(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Da)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ig(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[ln]=e,t[Wi]=r,Ay(t,e,!1,!1),e.stateNode=t;e:{switch(a=sc(n,r),n){case"dialog":Se("cancel",t),Se("close",t),s=r;break;case"iframe":case"object":case"embed":Se("load",t),s=r;break;case"video":case"audio":for(s=0;s<vi.length;s++)Se(vi[s],t);s=r;break;case"source":Se("error",t),s=r;break;case"img":case"image":case"link":Se("error",t),Se("load",t),s=r;break;case"details":Se("toggle",t),s=r;break;case"input":Mf(t,r),s=Ju(t,r),Se("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=De({},r,{value:void 0}),Se("invalid",t);break;case"textarea":Lf(t,r),s=tc(t,r),Se("invalid",t);break;default:s=r}rc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?lg(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&og(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Li(t,u):typeof u=="number"&&Li(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Oi.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Se("scroll",t):u!=null&&gh(t,i,u,a))}switch(n){case"input":$o(t),Of(t,r,!1);break;case"textarea":$o(t),Ff(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ar(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?cs(t,!!r.multiple,i,!1):r.defaultValue!=null&&cs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Da)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ut(e),null;case 6:if(t&&e.stateNode!=null)Ry(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=kr(Qi.current),kr(cn.current),Jo(e)){if(r=e.stateNode,n=e.memoizedProps,r[ln]=e,(i=r.nodeValue!==n)&&(t=Vt,t!==null))switch(t.tag){case 3:Xo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xo(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ln]=e,e.stateNode=r}return ut(e),null;case 13:if(Ce(Pe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ae&&jt!==null&&e.mode&1&&!(e.flags&128))Qg(),xs(),e.flags|=98560,i=!1;else if(i=Jo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error($(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[ln]=e}else xs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ut(e),i=!1}else Jt!==null&&(Lc(Jt),Jt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Pe.current&1?Ge===0&&(Ge=3):Jh())),e.updateQueue!==null&&(e.flags|=4),ut(e),null);case 4:return Es(),bc(t,e),t===null&&Gi(e.stateNode.containerInfo),ut(e),null;case 10:return Vh(e.type._context),ut(e),null;case 17:return St(e.type)&&Va(),ut(e),null;case 19:if(Ce(Pe),i=e.memoizedState,i===null)return ut(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)di(i,!1);else{if(Ge!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Ba(t),a!==null){for(e.flags|=128,di(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ie(Pe,Pe.current&1|2),e.child}t=t.sibling}i.tail!==null&&Fe()>Is&&(e.flags|=128,r=!0,di(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ba(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),di(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ae)return ut(e),null}else 2*Fe()-i.renderingStartTime>Is&&n!==1073741824&&(e.flags|=128,r=!0,di(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Fe(),e.sibling=null,n=Pe.current,Ie(Pe,r?n&1|2:n&1),e):(ut(e),null);case 22:case 23:return Xh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Pt&1073741824&&(ut(e),e.subtreeFlags&6&&(e.flags|=8192)):ut(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function mx(t,e){switch(Rh(e),e.tag){case 1:return St(e.type)&&Va(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Es(),Ce(kt),Ce(pt),zh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Fh(e),null;case 13:if(Ce(Pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));xs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ce(Pe),null;case 4:return Es(),null;case 10:return Vh(e.type._context),null;case 22:case 23:return Xh(),null;case 24:return null;default:return null}}var ta=!1,dt=!1,gx=typeof WeakSet=="function"?WeakSet:Set,K=null;function ls(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Oe(t,e,r)}else n.current=null}function Rc(t,e,n){try{n()}catch(r){Oe(t,e,r)}}var Np=!1;function yx(t,e){if(pc=Ra,t=Mg(),Ah(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,d=0,p=0,g=t,v=null;t:for(;;){for(var S;g!==n||s!==0&&g.nodeType!==3||(l=a+s),g!==i||r!==0&&g.nodeType!==3||(u=a+r),g.nodeType===3&&(a+=g.nodeValue.length),(S=g.firstChild)!==null;)v=g,g=S;for(;;){if(g===t)break t;if(v===n&&++d===s&&(l=a),v===i&&++p===r&&(u=a),(S=g.nextSibling)!==null)break;g=v,v=g.parentNode}g=S}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(mc={focusedElem:t,selectionRange:n},Ra=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var A=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var b=A.memoizedProps,j=A.memoizedState,I=e.stateNode,w=I.getSnapshotBeforeUpdate(e.elementType===e.type?b:Yt(e.type,b),j);I.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(P){Oe(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return A=Np,Np=!1,A}function Ai(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Rc(e,n,i)}s=s.next}while(s!==r)}}function vl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Pc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Py(t){var e=t.alternate;e!==null&&(t.alternate=null,Py(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ln],delete e[Wi],delete e[vc],delete e[Z1],delete e[ex])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function jy(t){return t.tag===5||t.tag===3||t.tag===4}function Ap(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||jy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Da));else if(r!==4&&(t=t.child,t!==null))for(jc(t,e,n),t=t.sibling;t!==null;)jc(t,e,n),t=t.sibling}function Dc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Dc(t,e,n),t=t.sibling;t!==null;)Dc(t,e,n),t=t.sibling}var Je=null,Xt=!1;function Fn(t,e,n){for(n=n.child;n!==null;)Dy(t,e,n),n=n.sibling}function Dy(t,e,n){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(cl,n)}catch{}switch(n.tag){case 5:dt||ls(n,e);case 6:var r=Je,s=Xt;Je=null,Fn(t,e,n),Je=r,Xt=s,Je!==null&&(Xt?(t=Je,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Je.removeChild(n.stateNode));break;case 18:Je!==null&&(Xt?(t=Je,n=n.stateNode,t.nodeType===8?Iu(t.parentNode,n):t.nodeType===1&&Iu(t,n),Bi(t)):Iu(Je,n.stateNode));break;case 4:r=Je,s=Xt,Je=n.stateNode.containerInfo,Xt=!0,Fn(t,e,n),Je=r,Xt=s;break;case 0:case 11:case 14:case 15:if(!dt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Rc(n,e,a),s=s.next}while(s!==r)}Fn(t,e,n);break;case 1:if(!dt&&(ls(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Oe(n,e,l)}Fn(t,e,n);break;case 21:Fn(t,e,n);break;case 22:n.mode&1?(dt=(r=dt)||n.memoizedState!==null,Fn(t,e,n),dt=r):Fn(t,e,n);break;default:Fn(t,e,n)}}function bp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new gx),e.forEach(function(r){var s=Sx.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Qt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Je=l.stateNode,Xt=!1;break e;case 3:Je=l.stateNode.containerInfo,Xt=!0;break e;case 4:Je=l.stateNode.containerInfo,Xt=!0;break e}l=l.return}if(Je===null)throw Error($(160));Dy(i,a,s),Je=null,Xt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Oe(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Vy(e,t),e=e.sibling}function Vy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qt(e,t),rn(t),r&4){try{Ai(3,t,t.return),vl(3,t)}catch(b){Oe(t,t.return,b)}try{Ai(5,t,t.return)}catch(b){Oe(t,t.return,b)}}break;case 1:Qt(e,t),rn(t),r&512&&n!==null&&ls(n,n.return);break;case 5:if(Qt(e,t),rn(t),r&512&&n!==null&&ls(n,n.return),t.flags&32){var s=t.stateNode;try{Li(s,"")}catch(b){Oe(t,t.return,b)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&rg(s,i),sc(l,a);var d=sc(l,i);for(a=0;a<u.length;a+=2){var p=u[a],g=u[a+1];p==="style"?lg(s,g):p==="dangerouslySetInnerHTML"?og(s,g):p==="children"?Li(s,g):gh(s,p,g,d)}switch(l){case"input":Zu(s,i);break;case"textarea":sg(s,i);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var S=i.value;S!=null?cs(s,!!i.multiple,S,!1):v!==!!i.multiple&&(i.defaultValue!=null?cs(s,!!i.multiple,i.defaultValue,!0):cs(s,!!i.multiple,i.multiple?[]:"",!1))}s[Wi]=i}catch(b){Oe(t,t.return,b)}}break;case 6:if(Qt(e,t),rn(t),r&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(b){Oe(t,t.return,b)}}break;case 3:if(Qt(e,t),rn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Bi(e.containerInfo)}catch(b){Oe(t,t.return,b)}break;case 4:Qt(e,t),rn(t);break;case 13:Qt(e,t),rn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Qh=Fe())),r&4&&bp(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(dt=(d=dt)||p,Qt(e,t),dt=d):Qt(e,t),rn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for(K=t,p=t.child;p!==null;){for(g=K=p;K!==null;){switch(v=K,S=v.child,v.tag){case 0:case 11:case 14:case 15:Ai(4,v,v.return);break;case 1:ls(v,v.return);var A=v.stateNode;if(typeof A.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,A.props=e.memoizedProps,A.state=e.memoizedState,A.componentWillUnmount()}catch(b){Oe(r,n,b)}}break;case 5:ls(v,v.return);break;case 22:if(v.memoizedState!==null){Pp(g);continue}}S!==null?(S.return=v,K=S):Pp(g)}p=p.sibling}e:for(p=null,g=t;;){if(g.tag===5){if(p===null){p=g;try{s=g.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=g.stateNode,u=g.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=ag("display",a))}catch(b){Oe(t,t.return,b)}}}else if(g.tag===6){if(p===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(b){Oe(t,t.return,b)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;p===g&&(p=null),g=g.return}p===g&&(p=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Qt(e,t),rn(t),r&4&&bp(t);break;case 21:break;default:Qt(e,t),rn(t)}}function rn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(jy(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Li(s,""),r.flags&=-33);var i=Ap(t);Dc(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Ap(t);jc(t,l,a);break;default:throw Error($(161))}}catch(u){Oe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function vx(t,e,n){K=t,My(t)}function My(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var s=K,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||ta;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||dt;l=ta;var d=dt;if(ta=a,(dt=u)&&!d)for(K=s;K!==null;)a=K,u=a.child,a.tag===22&&a.memoizedState!==null?jp(s):u!==null?(u.return=a,K=u):jp(s);for(;i!==null;)K=i,My(i),i=i.sibling;K=s,ta=l,dt=d}Rp(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,K=i):Rp(t)}}function Rp(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dt||vl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!dt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Yt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&mp(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}mp(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var g=p.dehydrated;g!==null&&Bi(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}dt||e.flags&512&&Pc(e)}catch(v){Oe(e,e.return,v)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function Pp(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function jp(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{vl(4,e)}catch(u){Oe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Oe(e,s,u)}}var i=e.return;try{Pc(e)}catch(u){Oe(e,i,u)}break;case 5:var a=e.return;try{Pc(e)}catch(u){Oe(e,a,u)}}}catch(u){Oe(e,e.return,u)}if(e===t){K=null;break}var l=e.sibling;if(l!==null){l.return=e.return,K=l;break}K=e.return}}var _x=Math.ceil,Ga=Dn.ReactCurrentDispatcher,Wh=Dn.ReactCurrentOwner,$t=Dn.ReactCurrentBatchConfig,me=0,Ye=null,Ue=null,tt=0,Pt=0,us=fr(0),Ge=0,Zi=null,jr=0,_l=0,Kh=0,bi=null,Et=null,Qh=0,Is=1/0,wn=null,Ha=!1,Vc=null,Jn=null,na=!1,Gn=null,Wa=0,Ri=0,Mc=null,va=-1,_a=0;function yt(){return me&6?Fe():va!==-1?va:va=Fe()}function Zn(t){return t.mode&1?me&2&&tt!==0?tt&-tt:nx.transition!==null?(_a===0&&(_a=xg()),_a):(t=_e,t!==0||(t=window.event,t=t===void 0?16:Cg(t.type)),t):1}function en(t,e,n,r){if(50<Ri)throw Ri=0,Mc=null,Error($(185));ho(t,n,r),(!(me&2)||t!==Ye)&&(t===Ye&&(!(me&2)&&(_l|=n),Ge===4&&$n(t,tt)),Ct(t,r),n===1&&me===0&&!(e.mode&1)&&(Is=Fe()+500,ml&&pr()))}function Ct(t,e){var n=t.callbackNode;n1(t,e);var r=ba(t,t===Ye?tt:0);if(r===0)n!==null&&Bf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Bf(n),e===1)t.tag===0?tx(Dp.bind(null,t)):Hg(Dp.bind(null,t)),X1(function(){!(me&6)&&pr()}),n=null;else{switch(wg(r)){case 1:n=wh;break;case 4:n=vg;break;case 16:n=Aa;break;case 536870912:n=_g;break;default:n=Aa}n=qy(n,Oy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Oy(t,e){if(va=-1,_a=0,me&6)throw Error($(327));var n=t.callbackNode;if(ms()&&t.callbackNode!==n)return null;var r=ba(t,t===Ye?tt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ka(t,r);else{e=r;var s=me;me|=2;var i=Fy();(Ye!==t||tt!==e)&&(wn=null,Is=Fe()+500,Cr(t,e));do try{Ex();break}catch(l){Ly(t,l)}while(!0);Dh(),Ga.current=i,me=s,Ue!==null?e=0:(Ye=null,tt=0,e=Ge)}if(e!==0){if(e===2&&(s=uc(t),s!==0&&(r=s,e=Oc(t,s))),e===1)throw n=Zi,Cr(t,0),$n(t,r),Ct(t,Fe()),n;if(e===6)$n(t,r);else{if(s=t.current.alternate,!(r&30)&&!xx(s)&&(e=Ka(t,r),e===2&&(i=uc(t),i!==0&&(r=i,e=Oc(t,i))),e===1))throw n=Zi,Cr(t,0),$n(t,r),Ct(t,Fe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:wr(t,Et,wn);break;case 3:if($n(t,r),(r&130023424)===r&&(e=Qh+500-Fe(),10<e)){if(ba(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){yt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=yc(wr.bind(null,t,Et,wn),e);break}wr(t,Et,wn);break;case 4:if($n(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Zt(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_x(r/1960))-r,10<r){t.timeoutHandle=yc(wr.bind(null,t,Et,wn),r);break}wr(t,Et,wn);break;case 5:wr(t,Et,wn);break;default:throw Error($(329))}}}return Ct(t,Fe()),t.callbackNode===n?Oy.bind(null,t):null}function Oc(t,e){var n=bi;return t.current.memoizedState.isDehydrated&&(Cr(t,e).flags|=256),t=Ka(t,e),t!==2&&(e=Et,Et=n,e!==null&&Lc(e)),t}function Lc(t){Et===null?Et=t:Et.push.apply(Et,t)}function xx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!tn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function $n(t,e){for(e&=~Kh,e&=~_l,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Zt(e),r=1<<n;t[n]=-1,e&=~r}}function Dp(t){if(me&6)throw Error($(327));ms();var e=ba(t,0);if(!(e&1))return Ct(t,Fe()),null;var n=Ka(t,e);if(t.tag!==0&&n===2){var r=uc(t);r!==0&&(e=r,n=Oc(t,r))}if(n===1)throw n=Zi,Cr(t,0),$n(t,e),Ct(t,Fe()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wr(t,Et,wn),Ct(t,Fe()),null}function Yh(t,e){var n=me;me|=1;try{return t(e)}finally{me=n,me===0&&(Is=Fe()+500,ml&&pr())}}function Dr(t){Gn!==null&&Gn.tag===0&&!(me&6)&&ms();var e=me;me|=1;var n=$t.transition,r=_e;try{if($t.transition=null,_e=1,t)return t()}finally{_e=r,$t.transition=n,me=e,!(me&6)&&pr()}}function Xh(){Pt=us.current,Ce(us)}function Cr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Y1(n)),Ue!==null)for(n=Ue.return;n!==null;){var r=n;switch(Rh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Va();break;case 3:Es(),Ce(kt),Ce(pt),zh();break;case 5:Fh(r);break;case 4:Es();break;case 13:Ce(Pe);break;case 19:Ce(Pe);break;case 10:Vh(r.type._context);break;case 22:case 23:Xh()}n=n.return}if(Ye=t,Ue=t=er(t.current,null),tt=Pt=e,Ge=0,Zi=null,Kh=_l=jr=0,Et=bi=null,Ir!==null){for(e=0;e<Ir.length;e++)if(n=Ir[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Ir=null}return t}function Ly(t,e){do{var n=Ue;try{if(Dh(),ma.current=qa,$a){for(var r=je.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}$a=!1}if(Pr=0,Qe=$e=je=null,Ni=!1,Yi=0,Wh.current=null,n===null||n.return===null){Ge=1,Zi=e,Ue=null;break}e:{var i=t,a=n.return,l=n,u=e;if(e=tt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,p=l,g=p.tag;if(!(p.mode&1)&&(g===0||g===11||g===15)){var v=p.alternate;v?(p.updateQueue=v.updateQueue,p.memoizedState=v.memoizedState,p.lanes=v.lanes):(p.updateQueue=null,p.memoizedState=null)}var S=wp(a);if(S!==null){S.flags&=-257,Ep(S,a,l,i,e),S.mode&1&&xp(i,d,e),e=S,u=d;var A=e.updateQueue;if(A===null){var b=new Set;b.add(u),e.updateQueue=b}else A.add(u);break e}else{if(!(e&1)){xp(i,d,e),Jh();break e}u=Error($(426))}}else if(Ae&&l.mode&1){var j=wp(a);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Ep(j,a,l,i,e),Ph(Ts(u,l));break e}}i=u=Ts(u,l),Ge!==4&&(Ge=2),bi===null?bi=[i]:bi.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var I=wy(i,u,e);pp(i,I);break e;case 1:l=u;var w=i.type,k=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Jn===null||!Jn.has(k)))){i.flags|=65536,e&=-e,i.lanes|=e;var P=Ey(i,l,e);pp(i,P);break e}}i=i.return}while(i!==null)}Uy(n)}catch(O){e=O,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(!0)}function Fy(){var t=Ga.current;return Ga.current=qa,t===null?qa:t}function Jh(){(Ge===0||Ge===3||Ge===2)&&(Ge=4),Ye===null||!(jr&268435455)&&!(_l&268435455)||$n(Ye,tt)}function Ka(t,e){var n=me;me|=2;var r=Fy();(Ye!==t||tt!==e)&&(wn=null,Cr(t,e));do try{wx();break}catch(s){Ly(t,s)}while(!0);if(Dh(),me=n,Ga.current=r,Ue!==null)throw Error($(261));return Ye=null,tt=0,Ge}function wx(){for(;Ue!==null;)zy(Ue)}function Ex(){for(;Ue!==null&&!W_();)zy(Ue)}function zy(t){var e=$y(t.alternate,t,Pt);t.memoizedProps=t.pendingProps,e===null?Uy(t):Ue=e,Wh.current=null}function Uy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=mx(n,e),n!==null){n.flags&=32767,Ue=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ge=6,Ue=null;return}}else if(n=px(n,e,Pt),n!==null){Ue=n;return}if(e=e.sibling,e!==null){Ue=e;return}Ue=e=t}while(e!==null);Ge===0&&(Ge=5)}function wr(t,e,n){var r=_e,s=$t.transition;try{$t.transition=null,_e=1,Tx(t,e,n,r)}finally{$t.transition=s,_e=r}return null}function Tx(t,e,n,r){do ms();while(Gn!==null);if(me&6)throw Error($(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(r1(t,i),t===Ye&&(Ue=Ye=null,tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||na||(na=!0,qy(Aa,function(){return ms(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=$t.transition,$t.transition=null;var a=_e;_e=1;var l=me;me|=4,Wh.current=null,yx(t,n),Vy(n,t),$1(mc),Ra=!!pc,mc=pc=null,t.current=n,vx(n),K_(),me=l,_e=a,$t.transition=i}else t.current=n;if(na&&(na=!1,Gn=t,Wa=s),i=t.pendingLanes,i===0&&(Jn=null),X_(n.stateNode),Ct(t,Fe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ha)throw Ha=!1,t=Vc,Vc=null,t;return Wa&1&&t.tag!==0&&ms(),i=t.pendingLanes,i&1?t===Mc?Ri++:(Ri=0,Mc=t):Ri=0,pr(),null}function ms(){if(Gn!==null){var t=wg(Wa),e=$t.transition,n=_e;try{if($t.transition=null,_e=16>t?16:t,Gn===null)var r=!1;else{if(t=Gn,Gn=null,Wa=0,me&6)throw Error($(331));var s=me;for(me|=4,K=t.current;K!==null;){var i=K,a=i.child;if(K.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(K=d;K!==null;){var p=K;switch(p.tag){case 0:case 11:case 15:Ai(8,p,i)}var g=p.child;if(g!==null)g.return=p,K=g;else for(;K!==null;){p=K;var v=p.sibling,S=p.return;if(Py(p),p===d){K=null;break}if(v!==null){v.return=S,K=v;break}K=S}}}var A=i.alternate;if(A!==null){var b=A.child;if(b!==null){A.child=null;do{var j=b.sibling;b.sibling=null,b=j}while(b!==null)}}K=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,K=a;else e:for(;K!==null;){if(i=K,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ai(9,i,i.return)}var I=i.sibling;if(I!==null){I.return=i.return,K=I;break e}K=i.return}}var w=t.current;for(K=w;K!==null;){a=K;var k=a.child;if(a.subtreeFlags&2064&&k!==null)k.return=a,K=k;else e:for(a=w;K!==null;){if(l=K,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:vl(9,l)}}catch(O){Oe(l,l.return,O)}if(l===a){K=null;break e}var P=l.sibling;if(P!==null){P.return=l.return,K=P;break e}K=l.return}}if(me=s,pr(),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(cl,t)}catch{}r=!0}return r}finally{_e=n,$t.transition=e}}return!1}function Vp(t,e,n){e=Ts(n,e),e=wy(t,e,1),t=Xn(t,e,1),e=yt(),t!==null&&(ho(t,1,e),Ct(t,e))}function Oe(t,e,n){if(t.tag===3)Vp(t,t,n);else for(;e!==null;){if(e.tag===3){Vp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Jn===null||!Jn.has(r))){t=Ts(n,t),t=Ey(e,t,1),e=Xn(e,t,1),t=yt(),e!==null&&(ho(e,1,t),Ct(e,t));break}}e=e.return}}function Ix(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=yt(),t.pingedLanes|=t.suspendedLanes&n,Ye===t&&(tt&n)===n&&(Ge===4||Ge===3&&(tt&130023424)===tt&&500>Fe()-Qh?Cr(t,0):Kh|=n),Ct(t,e)}function By(t,e){e===0&&(t.mode&1?(e=Ho,Ho<<=1,!(Ho&130023424)&&(Ho=4194304)):e=1);var n=yt();t=An(t,e),t!==null&&(ho(t,e,n),Ct(t,n))}function kx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),By(t,n)}function Sx(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),By(t,n)}var $y;$y=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||kt.current)It=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return It=!1,fx(t,e,n);It=!!(t.flags&131072)}else It=!1,Ae&&e.flags&1048576&&Wg(e,La,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ya(t,e),t=e.pendingProps;var s=_s(e,pt.current);ps(e,n),s=Bh(null,e,r,t,s,n);var i=$h();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,St(r)?(i=!0,Ma(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Oh(e),s.updater=yl,e.stateNode=s,s._reactInternals=e,Ic(e,r,t,n),e=Cc(null,e,r,!0,i,n)):(e.tag=0,Ae&&i&&bh(e),gt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ya(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Nx(r),t=Yt(r,t),s){case 0:e=Sc(null,e,r,t,n);break e;case 1:e=kp(null,e,r,t,n);break e;case 11:e=Tp(null,e,r,t,n);break e;case 14:e=Ip(null,e,r,Yt(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yt(r,s),Sc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yt(r,s),kp(t,e,r,s,n);case 3:e:{if(Sy(e),t===null)throw Error($(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Zg(t,e),Ua(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ts(Error($(423)),e),e=Sp(t,e,r,n,s);break e}else if(r!==s){s=Ts(Error($(424)),e),e=Sp(t,e,r,n,s);break e}else for(jt=Yn(e.stateNode.containerInfo.firstChild),Vt=e,Ae=!0,Jt=null,n=Xg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xs(),r===s){e=bn(t,e,n);break e}gt(t,e,r,n)}e=e.child}return e;case 5:return ey(e),t===null&&wc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,gc(r,s)?a=null:i!==null&&gc(r,i)&&(e.flags|=32),ky(t,e),gt(t,e,a,n),e.child;case 6:return t===null&&wc(e),null;case 13:return Cy(t,e,n);case 4:return Lh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ws(e,null,r,n):gt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yt(r,s),Tp(t,e,r,s,n);case 7:return gt(t,e,e.pendingProps,n),e.child;case 8:return gt(t,e,e.pendingProps.children,n),e.child;case 12:return gt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Ie(Fa,r._currentValue),r._currentValue=a,i!==null)if(tn(i.value,a)){if(i.children===s.children&&!kt.current){e=bn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Sn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?u.next=u:(u.next=p.next,p.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Ec(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error($(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Ec(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}gt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ps(e,n),s=qt(s),r=r(s),e.flags|=1,gt(t,e,r,n),e.child;case 14:return r=e.type,s=Yt(r,e.pendingProps),s=Yt(r.type,s),Ip(t,e,r,s,n);case 15:return Ty(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yt(r,s),ya(t,e),e.tag=1,St(r)?(t=!0,Ma(e)):t=!1,ps(e,n),xy(e,r,s),Ic(e,r,s,n),Cc(null,e,r,!0,t,n);case 19:return Ny(t,e,n);case 22:return Iy(t,e,n)}throw Error($(156,e.tag))};function qy(t,e){return yg(t,e)}function Cx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bt(t,e,n,r){return new Cx(t,e,n,r)}function Zh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Nx(t){if(typeof t=="function")return Zh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===vh)return 11;if(t===_h)return 14}return 2}function er(t,e){var n=t.alternate;return n===null?(n=Bt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function xa(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Zh(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Zr:return Nr(n.children,s,i,e);case yh:a=8,s|=8;break;case Ku:return t=Bt(12,n,e,s|2),t.elementType=Ku,t.lanes=i,t;case Qu:return t=Bt(13,n,e,s),t.elementType=Qu,t.lanes=i,t;case Yu:return t=Bt(19,n,e,s),t.elementType=Yu,t.lanes=i,t;case eg:return xl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Jm:a=10;break e;case Zm:a=9;break e;case vh:a=11;break e;case _h:a=14;break e;case zn:a=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Bt(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Nr(t,e,n,r){return t=Bt(7,t,r,e),t.lanes=n,t}function xl(t,e,n,r){return t=Bt(22,t,r,e),t.elementType=eg,t.lanes=n,t.stateNode={isHidden:!1},t}function Pu(t,e,n){return t=Bt(6,t,null,e),t.lanes=n,t}function ju(t,e,n){return e=Bt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ax(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fu(0),this.expirationTimes=fu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ed(t,e,n,r,s,i,a,l,u){return t=new Ax(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Bt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oh(i),t}function bx(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Gy(t){if(!t)return lr;t=t._reactInternals;e:{if(Ur(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(St(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(St(n))return Gg(t,n,e)}return e}function Hy(t,e,n,r,s,i,a,l,u){return t=ed(n,r,!0,t,s,i,a,l,u),t.context=Gy(null),n=t.current,r=yt(),s=Zn(n),i=Sn(r,s),i.callback=e??null,Xn(n,i,s),t.current.lanes=s,ho(t,s,r),Ct(t,r),t}function wl(t,e,n,r){var s=e.current,i=yt(),a=Zn(s);return n=Gy(n),e.context===null?e.context=n:e.pendingContext=n,e=Sn(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Xn(s,e,a),t!==null&&(en(t,s,a,i),pa(t,s,a)),a}function Qa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Mp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function td(t,e){Mp(t,e),(t=t.alternate)&&Mp(t,e)}function Rx(){return null}var Wy=typeof reportError=="function"?reportError:function(t){console.error(t)};function nd(t){this._internalRoot=t}El.prototype.render=nd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));wl(t,e,null,null)};El.prototype.unmount=nd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Dr(function(){wl(null,t,null,null)}),e[Nn]=null}};function El(t){this._internalRoot=t}El.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ig();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Bn.length&&e!==0&&e<Bn[n].priority;n++);Bn.splice(n,0,t),n===0&&Sg(t)}};function rd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Tl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Op(){}function Px(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Qa(a);i.call(d)}}var a=Hy(e,r,t,0,null,!1,!1,"",Op);return t._reactRootContainer=a,t[Nn]=a.current,Gi(t.nodeType===8?t.parentNode:t),Dr(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Qa(u);l.call(d)}}var u=ed(t,0,!1,null,null,!1,!1,"",Op);return t._reactRootContainer=u,t[Nn]=u.current,Gi(t.nodeType===8?t.parentNode:t),Dr(function(){wl(e,u,n,r)}),u}function Il(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var u=Qa(a);l.call(u)}}wl(e,a,t,s)}else a=Px(n,e,t,s,r);return Qa(a)}Eg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=yi(e.pendingLanes);n!==0&&(Eh(e,n|1),Ct(e,Fe()),!(me&6)&&(Is=Fe()+500,pr()))}break;case 13:Dr(function(){var r=An(t,1);if(r!==null){var s=yt();en(r,t,1,s)}}),td(t,1)}};Th=function(t){if(t.tag===13){var e=An(t,134217728);if(e!==null){var n=yt();en(e,t,134217728,n)}td(t,134217728)}};Tg=function(t){if(t.tag===13){var e=Zn(t),n=An(t,e);if(n!==null){var r=yt();en(n,t,e,r)}td(t,e)}};Ig=function(){return _e};kg=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}};oc=function(t,e,n){switch(e){case"input":if(Zu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=pl(r);if(!s)throw Error($(90));ng(r),Zu(r,s)}}}break;case"textarea":sg(t,n);break;case"select":e=n.value,e!=null&&cs(t,!!n.multiple,e,!1)}};hg=Yh;dg=Dr;var jx={usingClientEntryPoint:!1,Events:[po,rs,pl,ug,cg,Yh]},fi={findFiberByHostInstance:Tr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Dx={bundleType:fi.bundleType,version:fi.version,rendererPackageName:fi.rendererPackageName,rendererConfig:fi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=mg(t),t===null?null:t.stateNode},findFiberByHostInstance:fi.findFiberByHostInstance||Rx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ra=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ra.isDisabled&&ra.supportsFiber)try{cl=ra.inject(Dx),un=ra}catch{}}Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jx;Lt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rd(e))throw Error($(200));return bx(t,e,null,n)};Lt.createRoot=function(t,e){if(!rd(t))throw Error($(299));var n=!1,r="",s=Wy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=ed(t,1,!1,null,null,n,!1,r,s),t[Nn]=e.current,Gi(t.nodeType===8?t.parentNode:t),new nd(e)};Lt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=mg(e),t=t===null?null:t.stateNode,t};Lt.flushSync=function(t){return Dr(t)};Lt.hydrate=function(t,e,n){if(!Tl(e))throw Error($(200));return Il(null,t,e,!0,n)};Lt.hydrateRoot=function(t,e,n){if(!rd(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=Wy;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Hy(e,null,t,1,n??null,s,!1,i,a),t[Nn]=e.current,Gi(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new El(e)};Lt.render=function(t,e,n){if(!Tl(e))throw Error($(200));return Il(null,t,e,!1,n)};Lt.unmountComponentAtNode=function(t){if(!Tl(t))throw Error($(40));return t._reactRootContainer?(Dr(function(){Il(null,null,t,!1,function(){t._reactRootContainer=null,t[Nn]=null})}),!0):!1};Lt.unstable_batchedUpdates=Yh;Lt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Tl(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Il(t,e,n,!1,r)};Lt.version="18.3.1-next-f1338f8080-20240426";function Ky(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ky)}catch(t){console.error(t)}}Ky(),Km.exports=Lt;var Vx=Km.exports,Lp=Vx;Hu.createRoot=Lp.createRoot,Hu.hydrateRoot=Lp.hydrateRoot;var oe=(t=>(t.PLAN="PLAN",t.GUIDE="GUIDE",t.RATE="RATE",t.LISTS="LISTS",t.BOOKINGS="BOOKINGS",t))(oe||{});const Tn={apiKey:"AIzaSyD-xMOB9D-d-2DqRW64jIvxRpB7BlAmSWM",authDomain:"tokyo-trip-51592.firebaseapp.com",projectId:"tokyo-trip-51592",storageBucket:"tokyo-trip-51592.firebasestorage.app",messagingSenderId:"1008859950162",appId:"1:1008859950162:web:d53c524e1ea5ef0178838b"},Mx="https://cf.bstatic.com/xdata/images/hotel/max1280x900/223709051.jpg?k=330554157147772a39282361730043586326176161623168233388708453&o=&hp=1",Ox="https://cf.bstatic.com/xdata/images/hotel/max1280x900/192534431.jpg?k=069695604111364661858567118181604927237890732801831818507851&o=&hp=1",Lx="https://images.unsplash.com/photo-1558030006-450675393462?auto=format&fit=crop&w=800&q=80",Fx=[{id:"f1",type:"flight",title:"",subTitle:"JX804",date:"2025/12/17",details:{from:"TPE",to:"NRT",departTime:"15:00",arriveTime:"19:00",seat:"24A",gate:"--",terminal:" (T1)",counter:"3, 5, 6",baggage:"--"}},{id:"f2",type:"flight",title:"",subTitle:"IT203",date:"2025/12/22",details:{from:"NRT",to:"TPE",departTime:"18:25",arriveTime:"21:50",seat:"12F",gate:"--",terminal:" (T2)",counter:"T",baggage:"--"}},{id:"h1",type:"hotel",title:"",subTitle:"12/17 - 12/20 (3)",date:"2025/12/17",imageUrl:Mx,details:{checkIn:"14:00",checkOut:"12:00",address:"2-6-21",mapLink:"https://maps.app.goo.gl/bxZNMcPWgM31LXa6A"}},{id:"h2",type:"hotel",title:" Resol ",subTitle:"12/20 - 12/22 (2)",date:"2025/12/20",imageUrl:Ox,details:{checkIn:"15:00",checkOut:"11:00",address:"2-25-12",mapLink:"https://maps.app.goo.gl/qokbXoRbd4B5FiFo8"}},{id:"d1",type:"dining",title:"",subTitle:" Miyuki ",date:"2025/12/20 ()",time:"11:30",imageUrl:Lx,details:{pax:2,mapLink:"https://maps.app.goo.gl/eZArqns8efq52ucZ9",cancelLink:"#"}}],Qy=[{id:"g_tokyo_st_17",date:"12/17",title:"",subtitle:"Tokyo Station",description:"",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1536098561742-ca998e48cbcc?auto=format&fit=crop&w=800&q=80"},{id:"g_disney",date:"12/18",title:"",subtitle:"Tokyo Disneyland",description:" App  40 (Priority Pass)",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1545580124-a28a2a890476?auto=format&fit=crop&w=800&q=80"},{id:"g_kamakura",date:"12/19",title:"",subtitle:"Kamakura",description:"",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1599816075883-93723793df66?auto=format&fit=crop&w=800&q=80",mapEmbedUrl:"https://www.openstreetmap.org/export/embed.html?bbox=139.5300%2C35.3000%2C139.5700%2C35.3400&layer=mapnik"},{id:"g_komachi",date:"12/19",title:" / ",subtitle:"Komachi Dori",description:"",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1572973809226-c2cb74070a27?auto=format&fit=crop&w=800&q=80"},{id:"g3",date:"12/19",title:"",subtitle:"Shichirigahama",description:" Bills",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1549643276-fbc2bd874326?auto=format&fit=crop&w=800&q=80"},{id:"g_enoshima",date:"12/19",title:"",subtitle:"Enoshima",description:" (Sea Candle) 360",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1596350314414-b6c86a34591a?auto=format&fit=crop&w=800&q=80"},{id:"g_yokohama",date:"12/19",title:"",subtitle:"Yokohama",description:"21",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1554797589-7241bb691973?auto=format&fit=crop&w=800&q=80"},{id:"g_redbrick",date:"12/19",title:"",subtitle:"Red Brick Warehouse",description:"",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1606216482167-73b3202970a2?auto=format&fit=crop&w=800&q=80"},{id:"g_chinatown",date:"12/19",title:"",subtitle:"Chinatown",description:"500",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1565551624647-1959828e352d?auto=format&fit=crop&w=800&q=80"},{id:"g_ginza",date:"12/20",title:"",subtitle:"Ginza",description:"",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1565624796338-3c35b8eb8371?auto=format&fit=crop&w=800&q=80"},{id:"g_tokyo_st",date:"12/20",title:"",subtitle:"Tokyo Station",description:"",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1536098561742-ca998e48cbcc?auto=format&fit=crop&w=800&q=80"},{id:"g_akiba",date:"12/20",title:"",subtitle:"Akihabara",description:"(Otaku)",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1569931727787-4340798a44b8?auto=format&fit=crop&w=800&q=80"},{id:"g_skytree",date:"12/20",title:"",subtitle:"Tokyo Skytree",description:"634 (Solamachi)300",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1545389659-1ecf04b20a7d?auto=format&fit=crop&w=800&q=80"},{id:"g1",date:"12/21",title:"",subtitle:"Gotokuji Temple",description:"",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1595856424075-d147814b8a2c?auto=format&fit=crop&w=800&q=80",mapEmbedUrl:"https://www.openstreetmap.org/export/embed.html?bbox=139.6450%2C35.6480%2C139.6490%2C35.6520&layer=mapnik"},{id:"g2",date:"12/21",title:"",subtitle:"Azabudai Hills",description:"2023330HarukasTeamLabJP",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1707228800539-7e452932456e?auto=format&fit=crop&w=800&q=80"},{id:"g_shibuya",date:"12/21",title:"",subtitle:"Shibuya",description:" SHIBUYA SKY 360",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1542931287-023b922fa89b?auto=format&fit=crop&w=800&q=80"},{id:"g_harajuku",date:"12/21",title:"",subtitle:"Harajuku",description:"(Kawaii)",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1551641506-ee5bf4cb95f6?auto=format&fit=crop&w=800&q=80"},{id:"g_shinjuku",date:"12/21",title:"",subtitle:"Shinjuku",description:"",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1570162613388-9d4134986348?auto=format&fit=crop&w=800&q=80"},{id:"g_tsukiji",date:"12/22",title:"",subtitle:"Tsukiji Market",description:"",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1572979261314-884852c08365?auto=format&fit=crop&w=800&q=80"},{id:"g_ueno",date:"12/22",title:"",subtitle:"Ueno",description:"",tags:["","",""],imageUrl:"https://images.unsplash.com/photo-1575960088924-f7c60317e307?auto=format&fit=crop&w=800&q=80"}],zx=[{date:"12/17",fullDate:"2025-12-17",dayOfWeek:"",weather:{condition:"sunny",temp:"2C - 12C"},items:[{id:"17-1",time:"15:00",activity:" (JX804)",type:"flight",linkTo:{tab:oe.BOOKINGS,targetId:"f1"}},{id:"17-main-1",time:"21:30",activity:"",type:"activity",location:"",linkTo:{tab:oe.GUIDE,targetId:"g_tokyo_st_17"},subItems:[{id:"17-2",time:"21:30",activity:"Check-in: ",type:"hotel",location:"",linkTo:{tab:oe.BOOKINGS,targetId:"h1"},mapsLink:"https://maps.app.goo.gl/bxZNMcPWgM31LXa6A"}]}]},{date:"12/18",fullDate:"2025-12-18",dayOfWeek:"",weather:{condition:"sunny",temp:"0C - 12C"},items:[{id:"18-2",time:"09:00",activity:"",type:"activity",notes:" App  Priority Pass",location:"",linkTo:{tab:oe.GUIDE,targetId:"g_disney"},subItems:[{id:"18-3",time:"17:45",activity:" + ",type:"activity",notes:" 30 "},{id:"18-4",time:"19:00",activity:"",type:"activity",notes:" Dreamlights"}]}]},{date:"12/19",fullDate:"2025-12-19",dayOfWeek:"",weather:{condition:"sunny",temp:"0C - 12C"},items:[{id:"19-main-1",time:"11:00",activity:"",type:"activity",location:"",linkTo:{tab:oe.GUIDE,targetId:"g_kamakura"},subItems:[{id:"19-s1",time:"11:00",activity:" / ",type:"activity",notes:"",linkTo:{tab:oe.GUIDE,targetId:"g_komachi"}},{id:"19-s2",time:"12:52",activity:"",type:"activity",notes:"Bills",linkTo:{tab:oe.GUIDE,targetId:"g3"}},{id:"19-new-1",time:"13:00",activity:"Espresso D Works",type:"food",notes:""},{id:"19-s3",time:"15:00",activity:"",type:"activity",notes:"",linkTo:{tab:oe.GUIDE,targetId:"g_enoshima"}}]},{id:"19-main-2",time:"18:30",activity:"",type:"activity",location:"",linkTo:{tab:oe.GUIDE,targetId:"g_yokohama"},subItems:[{id:"19-s4",time:"18:30",activity:"",type:"activity",notes:"",linkTo:{tab:oe.GUIDE,targetId:"g_redbrick"}},{id:"19-s5",time:"19:30",activity:"",type:"food",notes:"",linkTo:{tab:oe.GUIDE,targetId:"g_chinatown"}},{id:"19-s6",time:"20:30",activity:"",type:"activity",notes:""}]}]},{date:"12/20",fullDate:"2025-12-20",dayOfWeek:"",weather:{condition:"sunny",temp:"4C - 13C"},items:[{id:"20-main-1",time:"11:00",activity:"",type:"activity",location:"",linkTo:{tab:oe.GUIDE,targetId:"g_ginza"},subItems:[{id:"20-s1",time:"11:30",activity:"",type:"food",notes:"Miyuki ",linkTo:{tab:oe.BOOKINGS,targetId:"d1"}}]},{id:"20-main-2",time:"12:30",activity:"",type:"activity",linkTo:{tab:oe.GUIDE,targetId:"g_tokyo_st"},subItems:[{id:"20-s2",time:"12:30",activity:" ()",type:"activity",notes:""}]},{id:"20-main-3",time:"15:00",activity:"",type:"activity",linkTo:{tab:oe.GUIDE,targetId:"g_akiba"},subItems:[{id:"20-s3",time:"15:00",activity:"Check-in: Resol Hotel",type:"hotel",notes:"/",linkTo:{tab:oe.BOOKINGS,targetId:"h2"}},{id:"20-s4",time:"15:30",activity:"",type:"activity",notes:"Bic Camera, Yodobashi, "}]},{id:"20-main-4",time:"19:30",activity:"",type:"activity",location:"",linkTo:{tab:oe.GUIDE,targetId:"g_skytree"},subItems:[{id:"20-s5",time:"19:30",activity:"",type:"activity",notes:""}]}]},{date:"12/21",fullDate:"2025-12-21",dayOfWeek:"",weather:{condition:"sunny",temp:"5C - 13C"},items:[{id:"21-main-1",time:"10:30",activity:"",type:"activity",location:"",linkTo:{tab:oe.GUIDE,targetId:"g1"},subItems:[{id:"21-s1",time:"10:30",activity:"",type:"activity",notes:""}]},{id:"21-main-2",time:"12:30",activity:"",type:"activity",location:"",linkTo:{tab:oe.GUIDE,targetId:"g_shibuya"},subItems:[{id:"21-s2",time:"12:30",activity:"",type:"food",notes:""}]},{id:"21-main-3",time:"14:40",activity:"",type:"activity",linkTo:{tab:oe.GUIDE,targetId:"g_harajuku"},subItems:[{id:"21-s3",time:"14:40",activity:"3 coins",type:"activity",notes:""}]},{id:"21-main-4",time:"16:10",activity:"",type:"activity",linkTo:{tab:oe.GUIDE,targetId:"g_shinjuku"},subItems:[{id:"21-s4",time:"16:10",activity:"POMME d'AMOUR TOKYO",type:"food",notes:""}]},{id:"21-main-5",time:"19:30",activity:"",type:"activity",location:"",linkTo:{tab:oe.GUIDE,targetId:"g2"},subItems:[{id:"21-s5",time:"19:30",activity:"",type:"activity",notes:""}]}]},{date:"12/22",fullDate:"2025-12-22",dayOfWeek:"",weather:{condition:"cloudy",temp:"6C - 13C"},items:[{id:"22-main-1",time:"11:15",activity:"",type:"activity",linkTo:{tab:oe.GUIDE,targetId:"g_tsukiji"},subItems:[{id:"22-s1",time:"11:15",activity:"",type:"food",notes:", "}]},{id:"22-main-2",time:"15:30",activity:"",type:"activity",linkTo:{tab:oe.GUIDE,targetId:"g_ueno"},subItems:[{id:"22-s2",time:"16:25",activity:" Skyliner",type:"transport",notes:""}]},{id:"22-4",time:"18:25",activity:" (IT203)",type:"flight",linkTo:{tab:oe.BOOKINGS,targetId:"f2"}}]}],Ux=["","","","","Sim / ","","","","",""];/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Bx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ae=(t,e)=>{const n=U.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:u,...d},p)=>U.createElement("svg",{ref:p,...Bx,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${$x(t)}`,l].join(" "),...d},[...e.map(([g,v])=>U.createElement(g,v)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=ae("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=ae("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=ae("BedDouble",[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=ae("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=ae("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=ae("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=ae("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fp=ae("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=ae("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=ae("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=ae("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=ae("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=ae("CloudRain",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=ae("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=ae("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=ae("Delete",[["path",{d:"M20 5H9l-7 7 7 7h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2Z",key:"1oy587"}],["line",{x1:"18",x2:"12",y1:"9",y2:"15",key:"1olkx5"}],["line",{x1:"12",x2:"18",y1:"9",y2:"15",key:"1n50pc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xx=ae("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=ae("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=ae("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=ae("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=ae("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=ae("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=ae("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=ae("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=ae("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=ae("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=ae("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=ae("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=ae("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=ae("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=ae("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0=ae("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=ae("TrainFront",[["path",{d:"M8 3.1V7a4 4 0 0 0 8 0V3.1",key:"1v71zp"}],["path",{d:"m9 15-1-1",key:"1yrq24"}],["path",{d:"m15 15 1-1",key:"1t0d6s"}],["path",{d:"M9 19c-2.8 0-5-2.2-5-5v-4a8 8 0 0 1 16 0v4c0 2.8-2.2 5-5 5Z",key:"1p0hjs"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m16 19 2 3",key:"xo31yx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=ae("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=ae("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=ae("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=ae("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t0=ae("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=ae("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var Up={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},aw=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},r0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,p=i>>2,g=(i&3)<<4|l>>4;let v=(l&15)<<2|d>>6,S=d&63;u||(S=64,a||(v=64)),r.push(n[p],n[g],n[v],n[S])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(n0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):aw(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||g==null)throw new lw;const v=i<<2|l>>4;if(r.push(v),d!==64){const S=l<<4&240|d>>2;if(r.push(S),g!==64){const A=d<<6&192|g;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class lw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uw=function(t){const e=n0(t);return r0.encodeByteArray(e,!0)},Ja=function(t){return uw(t).replace(/\./g,"")},cw=function(t){try{return r0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw=()=>hw().__FIREBASE_DEFAULTS__,fw=()=>{if(typeof process>"u"||typeof Up>"u")return;const t=Up.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},pw=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&cw(t[1]);return e&&JSON.parse(e)},ad=()=>{try{return dw()||fw()||pw()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mw=t=>{var e,n;return(n=(e=ad())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},gw=t=>{const e=mw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},s0=()=>{var t;return(t=ad())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ja(JSON.stringify(n)),Ja(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xw(){var t;const e=(t=ad())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ww(){return!xw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ew(){try{return typeof indexedDB=="object"}catch{return!1}}function Tw(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="FirebaseError";class Vs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Iw,Object.setPrototypeOf(this,Vs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,i0.prototype.create)}}class i0{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?kw(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Vs(s,l,r)}}function kw(t,e){return t.replace(Sw,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Sw=/\{\$([^}]+)}/g;function Bc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(Bp(i)&&Bp(a)){if(!Bc(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Bp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(t){return t&&t._delegate?t._delegate:t}class to{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new yw;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Aw(e))try{this.getOrInitializeService({instanceIdentifier:Er})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Er){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Er){return this.instances.has(e)}getOptions(e=Er){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Nw(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Er){return this.component?this.component.multipleInstances?e:Er:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Nw(t){return t===Er?void 0:t}function Aw(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Cw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const Rw={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},Pw=pe.INFO,jw={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},Dw=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=jw[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class o0{constructor(e){this.name=e,this._logLevel=Pw,this._logHandler=Dw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Rw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const Vw=(t,e)=>e.some(n=>t instanceof n);let $p,qp;function Mw(){return $p||($p=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ow(){return qp||(qp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const a0=new WeakMap,$c=new WeakMap,l0=new WeakMap,Du=new WeakMap,ld=new WeakMap;function Lw(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(rr(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&a0.set(n,t)}).catch(()=>{}),ld.set(e,t),e}function Fw(t){if($c.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});$c.set(t,e)}let qc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return $c.get(t);if(e==="objectStoreNames")return t.objectStoreNames||l0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return rr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function zw(t){qc=t(qc)}function Uw(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Vu(this),e,...n);return l0.set(r,e.sort?e.sort():[e]),rr(r)}:Ow().includes(t)?function(...e){return t.apply(Vu(this),e),rr(a0.get(this))}:function(...e){return rr(t.apply(Vu(this),e))}}function Bw(t){return typeof t=="function"?Uw(t):(t instanceof IDBTransaction&&Fw(t),Vw(t,Mw())?new Proxy(t,qc):t)}function rr(t){if(t instanceof IDBRequest)return Lw(t);if(Du.has(t))return Du.get(t);const e=Bw(t);return e!==t&&(Du.set(t,e),ld.set(e,t)),e}const Vu=t=>ld.get(t);function $w(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=rr(a);return r&&a.addEventListener("upgradeneeded",u=>{r(rr(a.result),u.oldVersion,u.newVersion,rr(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const qw=["get","getKey","getAll","getAllKeys","count"],Gw=["put","add","delete","clear"],Mu=new Map;function Gp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Mu.get(e))return Mu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Gw.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||qw.includes(n)))return;const i=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return Mu.set(e,i),i}zw(t=>({...t,get:(e,n,r)=>Gp(e,n)||t.get(e,n,r),has:(e,n)=>!!Gp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Ww(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Ww(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Gc="@firebase/app",Hp="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn=new o0("@firebase/app"),Kw="@firebase/app-compat",Qw="@firebase/analytics-compat",Yw="@firebase/analytics",Xw="@firebase/app-check-compat",Jw="@firebase/app-check",Zw="@firebase/auth",e2="@firebase/auth-compat",t2="@firebase/database",n2="@firebase/data-connect",r2="@firebase/database-compat",s2="@firebase/functions",i2="@firebase/functions-compat",o2="@firebase/installations",a2="@firebase/installations-compat",l2="@firebase/messaging",u2="@firebase/messaging-compat",c2="@firebase/performance",h2="@firebase/performance-compat",d2="@firebase/remote-config",f2="@firebase/remote-config-compat",p2="@firebase/storage",m2="@firebase/storage-compat",g2="@firebase/firestore",y2="@firebase/vertexai-preview",v2="@firebase/firestore-compat",_2="firebase",x2="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc="[DEFAULT]",w2={[Gc]:"fire-core",[Kw]:"fire-core-compat",[Yw]:"fire-analytics",[Qw]:"fire-analytics-compat",[Jw]:"fire-app-check",[Xw]:"fire-app-check-compat",[Zw]:"fire-auth",[e2]:"fire-auth-compat",[t2]:"fire-rtdb",[n2]:"fire-data-connect",[r2]:"fire-rtdb-compat",[s2]:"fire-fn",[i2]:"fire-fn-compat",[o2]:"fire-iid",[a2]:"fire-iid-compat",[l2]:"fire-fcm",[u2]:"fire-fcm-compat",[c2]:"fire-perf",[h2]:"fire-perf-compat",[d2]:"fire-rc",[f2]:"fire-rc-compat",[p2]:"fire-gcs",[m2]:"fire-gcs-compat",[g2]:"fire-fst",[v2]:"fire-fst-compat",[y2]:"fire-vertex","fire-js":"fire-js",[_2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=new Map,E2=new Map,Wc=new Map;function Wp(t,e){try{t.container.addComponent(e)}catch(n){Rn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Za(t){const e=t.name;if(Wc.has(e))return Rn.debug(`There were multiple attempts to register component ${e}.`),!1;Wc.set(e,t);for(const n of no.values())Wp(n,t);for(const n of E2.values())Wp(n,t);return!0}function T2(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sr=new i0("app","Firebase",I2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new to("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=x2;function u0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Hc,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw sr.create("bad-app-name",{appName:String(s)});if(n||(n=s0()),!n)throw sr.create("no-options");const i=no.get(s);if(i){if(Bc(n,i.options)&&Bc(r,i.config))return i;throw sr.create("duplicate-app",{appName:s})}const a=new bw(s);for(const u of Wc.values())a.addComponent(u);const l=new k2(n,r,a);return no.set(s,l),l}function c0(t=Hc){const e=no.get(t);if(!e&&t===Hc&&s0())return u0();if(!e)throw sr.create("no-app",{appName:t});return e}function C2(){return Array.from(no.values())}function gs(t,e,n){var r;let s=(r=w2[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rn.warn(l.join(" "));return}Za(new to(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2="firebase-heartbeat-database",A2=1,ro="firebase-heartbeat-store";let Ou=null;function h0(){return Ou||(Ou=$w(N2,A2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ro)}catch(n){console.warn(n)}}}}).catch(t=>{throw sr.create("idb-open",{originalErrorMessage:t.message})})),Ou}async function b2(t){try{const n=(await h0()).transaction(ro),r=await n.objectStore(ro).get(d0(t));return await n.done,r}catch(e){if(e instanceof Vs)Rn.warn(e.message);else{const n=sr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Rn.warn(n.message)}}}async function Kp(t,e){try{const r=(await h0()).transaction(ro,"readwrite");await r.objectStore(ro).put(e,d0(t)),await r.done}catch(n){if(n instanceof Vs)Rn.warn(n.message);else{const r=sr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Rn.warn(r.message)}}}function d0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=1024,P2=30*24*60*60*1e3;class j2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new V2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Qp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=P2}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Rn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Qp(),{heartbeatsToSend:r,unsentEntries:s}=D2(this._heartbeatsCache.heartbeats),i=Ja(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Rn.warn(n),""}}}function Qp(){return new Date().toISOString().substring(0,10)}function D2(t,e=R2){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),Yp(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Yp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class V2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ew()?Tw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await b2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Kp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Kp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Yp(t){return Ja(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(t){Za(new to("platform-logger",e=>new Hw(e),"PRIVATE")),Za(new to("heartbeat",e=>new j2(e),"PRIVATE")),gs(Gc,Hp,t),gs(Gc,Hp,"esm2017"),gs("fire-js","")}M2("");var O2="firebase",L2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gs(O2,L2,"app");var Xp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ar,f0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,y){function T(){}T.prototype=y.prototype,x.D=y.prototype,x.prototype=new T,x.prototype.constructor=x,x.C=function(E,C,N){for(var _=Array(arguments.length-2),X=2;X<arguments.length;X++)_[X-2]=arguments[X];return y.prototype[C].apply(E,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,y,T){T||(T=0);var E=Array(16);if(typeof y=="string")for(var C=0;16>C;++C)E[C]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(C=0;16>C;++C)E[C]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=x.g[0],T=x.g[1],C=x.g[2];var N=x.g[3],_=y+(N^T&(C^N))+E[0]+3614090360&4294967295;y=T+(_<<7&4294967295|_>>>25),_=N+(C^y&(T^C))+E[1]+3905402710&4294967295,N=y+(_<<12&4294967295|_>>>20),_=C+(T^N&(y^T))+E[2]+606105819&4294967295,C=N+(_<<17&4294967295|_>>>15),_=T+(y^C&(N^y))+E[3]+3250441966&4294967295,T=C+(_<<22&4294967295|_>>>10),_=y+(N^T&(C^N))+E[4]+4118548399&4294967295,y=T+(_<<7&4294967295|_>>>25),_=N+(C^y&(T^C))+E[5]+1200080426&4294967295,N=y+(_<<12&4294967295|_>>>20),_=C+(T^N&(y^T))+E[6]+2821735955&4294967295,C=N+(_<<17&4294967295|_>>>15),_=T+(y^C&(N^y))+E[7]+4249261313&4294967295,T=C+(_<<22&4294967295|_>>>10),_=y+(N^T&(C^N))+E[8]+1770035416&4294967295,y=T+(_<<7&4294967295|_>>>25),_=N+(C^y&(T^C))+E[9]+2336552879&4294967295,N=y+(_<<12&4294967295|_>>>20),_=C+(T^N&(y^T))+E[10]+4294925233&4294967295,C=N+(_<<17&4294967295|_>>>15),_=T+(y^C&(N^y))+E[11]+2304563134&4294967295,T=C+(_<<22&4294967295|_>>>10),_=y+(N^T&(C^N))+E[12]+1804603682&4294967295,y=T+(_<<7&4294967295|_>>>25),_=N+(C^y&(T^C))+E[13]+4254626195&4294967295,N=y+(_<<12&4294967295|_>>>20),_=C+(T^N&(y^T))+E[14]+2792965006&4294967295,C=N+(_<<17&4294967295|_>>>15),_=T+(y^C&(N^y))+E[15]+1236535329&4294967295,T=C+(_<<22&4294967295|_>>>10),_=y+(C^N&(T^C))+E[1]+4129170786&4294967295,y=T+(_<<5&4294967295|_>>>27),_=N+(T^C&(y^T))+E[6]+3225465664&4294967295,N=y+(_<<9&4294967295|_>>>23),_=C+(y^T&(N^y))+E[11]+643717713&4294967295,C=N+(_<<14&4294967295|_>>>18),_=T+(N^y&(C^N))+E[0]+3921069994&4294967295,T=C+(_<<20&4294967295|_>>>12),_=y+(C^N&(T^C))+E[5]+3593408605&4294967295,y=T+(_<<5&4294967295|_>>>27),_=N+(T^C&(y^T))+E[10]+38016083&4294967295,N=y+(_<<9&4294967295|_>>>23),_=C+(y^T&(N^y))+E[15]+3634488961&4294967295,C=N+(_<<14&4294967295|_>>>18),_=T+(N^y&(C^N))+E[4]+3889429448&4294967295,T=C+(_<<20&4294967295|_>>>12),_=y+(C^N&(T^C))+E[9]+568446438&4294967295,y=T+(_<<5&4294967295|_>>>27),_=N+(T^C&(y^T))+E[14]+3275163606&4294967295,N=y+(_<<9&4294967295|_>>>23),_=C+(y^T&(N^y))+E[3]+4107603335&4294967295,C=N+(_<<14&4294967295|_>>>18),_=T+(N^y&(C^N))+E[8]+1163531501&4294967295,T=C+(_<<20&4294967295|_>>>12),_=y+(C^N&(T^C))+E[13]+2850285829&4294967295,y=T+(_<<5&4294967295|_>>>27),_=N+(T^C&(y^T))+E[2]+4243563512&4294967295,N=y+(_<<9&4294967295|_>>>23),_=C+(y^T&(N^y))+E[7]+1735328473&4294967295,C=N+(_<<14&4294967295|_>>>18),_=T+(N^y&(C^N))+E[12]+2368359562&4294967295,T=C+(_<<20&4294967295|_>>>12),_=y+(T^C^N)+E[5]+4294588738&4294967295,y=T+(_<<4&4294967295|_>>>28),_=N+(y^T^C)+E[8]+2272392833&4294967295,N=y+(_<<11&4294967295|_>>>21),_=C+(N^y^T)+E[11]+1839030562&4294967295,C=N+(_<<16&4294967295|_>>>16),_=T+(C^N^y)+E[14]+4259657740&4294967295,T=C+(_<<23&4294967295|_>>>9),_=y+(T^C^N)+E[1]+2763975236&4294967295,y=T+(_<<4&4294967295|_>>>28),_=N+(y^T^C)+E[4]+1272893353&4294967295,N=y+(_<<11&4294967295|_>>>21),_=C+(N^y^T)+E[7]+4139469664&4294967295,C=N+(_<<16&4294967295|_>>>16),_=T+(C^N^y)+E[10]+3200236656&4294967295,T=C+(_<<23&4294967295|_>>>9),_=y+(T^C^N)+E[13]+681279174&4294967295,y=T+(_<<4&4294967295|_>>>28),_=N+(y^T^C)+E[0]+3936430074&4294967295,N=y+(_<<11&4294967295|_>>>21),_=C+(N^y^T)+E[3]+3572445317&4294967295,C=N+(_<<16&4294967295|_>>>16),_=T+(C^N^y)+E[6]+76029189&4294967295,T=C+(_<<23&4294967295|_>>>9),_=y+(T^C^N)+E[9]+3654602809&4294967295,y=T+(_<<4&4294967295|_>>>28),_=N+(y^T^C)+E[12]+3873151461&4294967295,N=y+(_<<11&4294967295|_>>>21),_=C+(N^y^T)+E[15]+530742520&4294967295,C=N+(_<<16&4294967295|_>>>16),_=T+(C^N^y)+E[2]+3299628645&4294967295,T=C+(_<<23&4294967295|_>>>9),_=y+(C^(T|~N))+E[0]+4096336452&4294967295,y=T+(_<<6&4294967295|_>>>26),_=N+(T^(y|~C))+E[7]+1126891415&4294967295,N=y+(_<<10&4294967295|_>>>22),_=C+(y^(N|~T))+E[14]+2878612391&4294967295,C=N+(_<<15&4294967295|_>>>17),_=T+(N^(C|~y))+E[5]+4237533241&4294967295,T=C+(_<<21&4294967295|_>>>11),_=y+(C^(T|~N))+E[12]+1700485571&4294967295,y=T+(_<<6&4294967295|_>>>26),_=N+(T^(y|~C))+E[3]+2399980690&4294967295,N=y+(_<<10&4294967295|_>>>22),_=C+(y^(N|~T))+E[10]+4293915773&4294967295,C=N+(_<<15&4294967295|_>>>17),_=T+(N^(C|~y))+E[1]+2240044497&4294967295,T=C+(_<<21&4294967295|_>>>11),_=y+(C^(T|~N))+E[8]+1873313359&4294967295,y=T+(_<<6&4294967295|_>>>26),_=N+(T^(y|~C))+E[15]+4264355552&4294967295,N=y+(_<<10&4294967295|_>>>22),_=C+(y^(N|~T))+E[6]+2734768916&4294967295,C=N+(_<<15&4294967295|_>>>17),_=T+(N^(C|~y))+E[13]+1309151649&4294967295,T=C+(_<<21&4294967295|_>>>11),_=y+(C^(T|~N))+E[4]+4149444226&4294967295,y=T+(_<<6&4294967295|_>>>26),_=N+(T^(y|~C))+E[11]+3174756917&4294967295,N=y+(_<<10&4294967295|_>>>22),_=C+(y^(N|~T))+E[2]+718787259&4294967295,C=N+(_<<15&4294967295|_>>>17),_=T+(N^(C|~y))+E[9]+3951481745&4294967295,x.g[0]=x.g[0]+y&4294967295,x.g[1]=x.g[1]+(C+(_<<21&4294967295|_>>>11))&4294967295,x.g[2]=x.g[2]+C&4294967295,x.g[3]=x.g[3]+N&4294967295}r.prototype.u=function(x,y){y===void 0&&(y=x.length);for(var T=y-this.blockSize,E=this.B,C=this.h,N=0;N<y;){if(C==0)for(;N<=T;)s(this,x,N),N+=this.blockSize;if(typeof x=="string"){for(;N<y;)if(E[C++]=x.charCodeAt(N++),C==this.blockSize){s(this,E),C=0;break}}else for(;N<y;)if(E[C++]=x[N++],C==this.blockSize){s(this,E),C=0;break}}this.h=C,this.o+=y},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var y=1;y<x.length-8;++y)x[y]=0;var T=8*this.o;for(y=x.length-8;y<x.length;++y)x[y]=T&255,T/=256;for(this.u(x),x=Array(16),y=T=0;4>y;++y)for(var E=0;32>E;E+=8)x[T++]=this.g[y]>>>E&255;return x};function i(x,y){var T=l;return Object.prototype.hasOwnProperty.call(T,x)?T[x]:T[x]=y(x)}function a(x,y){this.h=y;for(var T=[],E=!0,C=x.length-1;0<=C;C--){var N=x[C]|0;E&&N==y||(T[C]=N,E=!1)}this.g=T}var l={};function u(x){return-128<=x&&128>x?i(x,function(y){return new a([y|0],0>y?-1:0)}):new a([x|0],0>x?-1:0)}function d(x){if(isNaN(x)||!isFinite(x))return g;if(0>x)return j(d(-x));for(var y=[],T=1,E=0;x>=T;E++)y[E]=x/T|0,T*=4294967296;return new a(y,0)}function p(x,y){if(x.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(x.charAt(0)=="-")return j(p(x.substring(1),y));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=d(Math.pow(y,8)),E=g,C=0;C<x.length;C+=8){var N=Math.min(8,x.length-C),_=parseInt(x.substring(C,C+N),y);8>N?(N=d(Math.pow(y,N)),E=E.j(N).add(d(_))):(E=E.j(T),E=E.add(d(_)))}return E}var g=u(0),v=u(1),S=u(16777216);t=a.prototype,t.m=function(){if(b(this))return-j(this).m();for(var x=0,y=1,T=0;T<this.g.length;T++){var E=this.i(T);x+=(0<=E?E:4294967296+E)*y,y*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(A(this))return"0";if(b(this))return"-"+j(this).toString(x);for(var y=d(Math.pow(x,6)),T=this,E="";;){var C=P(T,y).g;T=I(T,C.j(y));var N=((0<T.g.length?T.g[0]:T.h)>>>0).toString(x);if(T=C,A(T))return N+E;for(;6>N.length;)N="0"+N;E=N+E}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function A(x){if(x.h!=0)return!1;for(var y=0;y<x.g.length;y++)if(x.g[y]!=0)return!1;return!0}function b(x){return x.h==-1}t.l=function(x){return x=I(this,x),b(x)?-1:A(x)?0:1};function j(x){for(var y=x.g.length,T=[],E=0;E<y;E++)T[E]=~x.g[E];return new a(T,~x.h).add(v)}t.abs=function(){return b(this)?j(this):this},t.add=function(x){for(var y=Math.max(this.g.length,x.g.length),T=[],E=0,C=0;C<=y;C++){var N=E+(this.i(C)&65535)+(x.i(C)&65535),_=(N>>>16)+(this.i(C)>>>16)+(x.i(C)>>>16);E=_>>>16,N&=65535,_&=65535,T[C]=_<<16|N}return new a(T,T[T.length-1]&-2147483648?-1:0)};function I(x,y){return x.add(j(y))}t.j=function(x){if(A(this)||A(x))return g;if(b(this))return b(x)?j(this).j(j(x)):j(j(this).j(x));if(b(x))return j(this.j(j(x)));if(0>this.l(S)&&0>x.l(S))return d(this.m()*x.m());for(var y=this.g.length+x.g.length,T=[],E=0;E<2*y;E++)T[E]=0;for(E=0;E<this.g.length;E++)for(var C=0;C<x.g.length;C++){var N=this.i(E)>>>16,_=this.i(E)&65535,X=x.i(C)>>>16,he=x.i(C)&65535;T[2*E+2*C]+=_*he,w(T,2*E+2*C),T[2*E+2*C+1]+=N*he,w(T,2*E+2*C+1),T[2*E+2*C+1]+=_*X,w(T,2*E+2*C+1),T[2*E+2*C+2]+=N*X,w(T,2*E+2*C+2)}for(E=0;E<y;E++)T[E]=T[2*E+1]<<16|T[2*E];for(E=y;E<2*y;E++)T[E]=0;return new a(T,0)};function w(x,y){for(;(x[y]&65535)!=x[y];)x[y+1]+=x[y]>>>16,x[y]&=65535,y++}function k(x,y){this.g=x,this.h=y}function P(x,y){if(A(y))throw Error("division by zero");if(A(x))return new k(g,g);if(b(x))return y=P(j(x),y),new k(j(y.g),j(y.h));if(b(y))return y=P(x,j(y)),new k(j(y.g),y.h);if(30<x.g.length){if(b(x)||b(y))throw Error("slowDivide_ only works with positive integers.");for(var T=v,E=y;0>=E.l(x);)T=O(T),E=O(E);var C=M(T,1),N=M(E,1);for(E=M(E,2),T=M(T,2);!A(E);){var _=N.add(E);0>=_.l(x)&&(C=C.add(T),N=_),E=M(E,1),T=M(T,1)}return y=I(x,C.j(y)),new k(C,y)}for(C=g;0<=x.l(y);){for(T=Math.max(1,Math.floor(x.m()/y.m())),E=Math.ceil(Math.log(T)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),N=d(T),_=N.j(y);b(_)||0<_.l(x);)T-=E,N=d(T),_=N.j(y);A(N)&&(N=v),C=C.add(N),x=I(x,_)}return new k(C,x)}t.A=function(x){return P(this,x).h},t.and=function(x){for(var y=Math.max(this.g.length,x.g.length),T=[],E=0;E<y;E++)T[E]=this.i(E)&x.i(E);return new a(T,this.h&x.h)},t.or=function(x){for(var y=Math.max(this.g.length,x.g.length),T=[],E=0;E<y;E++)T[E]=this.i(E)|x.i(E);return new a(T,this.h|x.h)},t.xor=function(x){for(var y=Math.max(this.g.length,x.g.length),T=[],E=0;E<y;E++)T[E]=this.i(E)^x.i(E);return new a(T,this.h^x.h)};function O(x){for(var y=x.g.length+1,T=[],E=0;E<y;E++)T[E]=x.i(E)<<1|x.i(E-1)>>>31;return new a(T,x.h)}function M(x,y){var T=y>>5;y%=32;for(var E=x.g.length-T,C=[],N=0;N<E;N++)C[N]=0<y?x.i(N+T)>>>y|x.i(N+T+1)<<32-y:x.i(N+T);return new a(C,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,f0=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=p,Ar=a}).apply(typeof Xp<"u"?Xp:typeof self<"u"?self:typeof window<"u"?window:{});var sa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var p0,_i,m0,wa,Kc,g0,y0,v0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,h,f){return o==Array.prototype||o==Object.prototype||(o[h]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof sa=="object"&&sa];for(var h=0;h<o.length;++h){var f=o[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(o,h){if(h)e:{var f=r;o=o.split(".");for(var m=0;m<o.length-1;m++){var R=o[m];if(!(R in f))break e;f=f[R]}o=o[o.length-1],m=f[o],h=h(m),h!=m&&h!=null&&e(f,o,{configurable:!0,writable:!0,value:h})}}function i(o,h){o instanceof String&&(o+="");var f=0,m=!1,R={next:function(){if(!m&&f<o.length){var D=f++;return{value:h(D,o[D]),done:!1}}return m=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}s("Array.prototype.values",function(o){return o||function(){return i(this,function(h,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var h=typeof o;return h=h!="object"?h:o?Array.isArray(o)?"array":h:"null",h=="array"||h=="object"&&typeof o.length=="number"}function d(o){var h=typeof o;return h=="object"&&o!=null||h=="function"}function p(o,h,f){return o.call.apply(o.bind,arguments)}function g(o,h,f){if(!o)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,m),o.apply(h,R)}}return function(){return o.apply(h,arguments)}}function v(o,h,f){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:g,v.apply(null,arguments)}function S(o,h){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),o.apply(this,m)}}function A(o,h){function f(){}f.prototype=h.prototype,o.aa=h.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(m,R,D){for(var W=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)W[Ee-2]=arguments[Ee];return h.prototype[R].apply(m,W)}}function b(o){const h=o.length;if(0<h){const f=Array(h);for(let m=0;m<h;m++)f[m]=o[m];return f}return[]}function j(o,h){for(let f=1;f<arguments.length;f++){const m=arguments[f];if(u(m)){const R=o.length||0,D=m.length||0;o.length=R+D;for(let W=0;W<D;W++)o[R+W]=m[W]}else o.push(m)}}class I{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function w(o){return/^[\s\xa0]*$/.test(o)}function k(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function P(o){return P[" "](o),o}P[" "]=function(){};var O=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function M(o,h,f){for(const m in o)h.call(f,o[m],m,o)}function x(o,h){for(const f in o)h.call(void 0,o[f],f,o)}function y(o){const h={};for(const f in o)h[f]=o[f];return h}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(o,h){let f,m;for(let R=1;R<arguments.length;R++){m=arguments[R];for(f in m)o[f]=m[f];for(let D=0;D<T.length;D++)f=T[D],Object.prototype.hasOwnProperty.call(m,f)&&(o[f]=m[f])}}function C(o){var h=1;o=o.split(":");const f=[];for(;0<h&&o.length;)f.push(o.shift()),h--;return o.length&&f.push(o.join(":")),f}function N(o){l.setTimeout(()=>{throw o},0)}function _(){var o=H;let h=null;return o.g&&(h=o.g,o.g=o.g.next,o.g||(o.h=null),h.next=null),h}class X{constructor(){this.h=this.g=null}add(h,f){const m=he.get();m.set(h,f),this.h?this.h.next=m:this.g=m,this.h=m}}var he=new I(()=>new q,o=>o.reset());class q{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,V=!1,H=new X,Q=()=>{const o=l.Promise.resolve(void 0);ue=()=>{o.then(de)}};var de=()=>{for(var o;o=_();){try{o.h.call(o.g)}catch(f){N(f)}var h=he;h.j(o),100>h.h&&(h.h++,o.next=h.g,h.g=o)}V=!1};function ve(){this.s=this.s,this.C=this.C}ve.prototype.s=!1,ve.prototype.ma=function(){this.s||(this.s=!0,this.N())},ve.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Te(o,h){this.type=o,this.g=this.target=h,this.defaultPrevented=!1}Te.prototype.h=function(){this.defaultPrevented=!0};var Z=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,h=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,h),l.removeEventListener("test",f,h)}catch{}return o}();function Ne(o,h){if(Te.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,m=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=h,h=o.relatedTarget){if(O){e:{try{P(h.nodeName);var R=!0;break e}catch{}R=!1}R||(h=null)}}else f=="mouseover"?h=o.fromElement:f=="mouseout"&&(h=o.toElement);this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:it[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Ne.aa.h.call(this)}}A(Ne,Te);var it={2:"touch",3:"pen",4:"mouse"};Ne.prototype.h=function(){Ne.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var xt="closure_listenable_"+(1e6*Math.random()|0),zs=0;function Us(o,h,f,m,R){this.listener=o,this.proxy=null,this.src=h,this.type=f,this.capture=!!m,this.ha=R,this.key=++zs,this.da=this.fa=!1}function nn(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function yn(o){this.src=o,this.g={},this.h=0}yn.prototype.add=function(o,h,f,m,R){var D=o.toString();o=this.g[D],o||(o=this.g[D]=[],this.h++);var W=Bs(o,h,m,R);return-1<W?(h=o[W],f||(h.fa=!1)):(h=new Us(h,this.src,D,!!m,R),h.fa=f,o.push(h)),h};function vn(o,h){var f=h.type;if(f in o.g){var m=o.g[f],R=Array.prototype.indexOf.call(m,h,void 0),D;(D=0<=R)&&Array.prototype.splice.call(m,R,1),D&&(nn(h),o.g[f].length==0&&(delete o.g[f],o.h--))}}function Bs(o,h,f,m){for(var R=0;R<o.length;++R){var D=o[R];if(!D.da&&D.listener==h&&D.capture==!!f&&D.ha==m)return R}return-1}var $s="closure_lm_"+(1e6*Math.random()|0),qs={};function Vn(o,h,f,m,R){if(Array.isArray(h)){for(var D=0;D<h.length;D++)Vn(o,h[D],f,m,R);return null}return f=B(f),o&&o[xt]?o.K(h,f,d(m)?!!m.capture:!1,R):Gl(o,h,f,!1,m,R)}function Gl(o,h,f,m,R,D){if(!h)throw Error("Invalid event type");var W=d(R)?!!R.capture:!!R,Ee=Hs(o);if(Ee||(o[$s]=Ee=new yn(o)),f=Ee.add(h,f,m,W,D),f.proxy)return f;if(m=Hl(),f.proxy=m,m.src=o,m.listener=f,o.addEventListener)Z||(R=W),R===void 0&&(R=!1),o.addEventListener(h.toString(),m,R);else if(o.attachEvent)o.attachEvent(To(h.toString()),m);else if(o.addListener&&o.removeListener)o.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Hl(){function o(f){return h.call(o.src,o.listener,f)}const h=Wl;return o}function Eo(o,h,f,m,R){if(Array.isArray(h))for(var D=0;D<h.length;D++)Eo(o,h[D],f,m,R);else m=d(m)?!!m.capture:!!m,f=B(f),o&&o[xt]?(o=o.i,h=String(h).toString(),h in o.g&&(D=o.g[h],f=Bs(D,f,m,R),-1<f&&(nn(D[f]),Array.prototype.splice.call(D,f,1),D.length==0&&(delete o.g[h],o.h--)))):o&&(o=Hs(o))&&(h=o.g[h.toString()],o=-1,h&&(o=Bs(h,f,m,R)),(f=-1<o?h[o]:null)&&Gs(f))}function Gs(o){if(typeof o!="number"&&o&&!o.da){var h=o.src;if(h&&h[xt])vn(h.i,o);else{var f=o.type,m=o.proxy;h.removeEventListener?h.removeEventListener(f,m,o.capture):h.detachEvent?h.detachEvent(To(f),m):h.addListener&&h.removeListener&&h.removeListener(m),(f=Hs(h))?(vn(f,o),f.h==0&&(f.src=null,h[$s]=null)):nn(o)}}}function To(o){return o in qs?qs[o]:qs[o]="on"+o}function Wl(o,h){if(o.da)o=!0;else{h=new Ne(h,this);var f=o.listener,m=o.ha||o.src;o.fa&&Gs(o),o=f.call(m,h)}return o}function Hs(o){return o=o[$s],o instanceof yn?o:null}var L="__closure_events_fn_"+(1e9*Math.random()>>>0);function B(o){return typeof o=="function"?o:(o[L]||(o[L]=function(h){return o.handleEvent(h)}),o[L])}function G(){ve.call(this),this.i=new yn(this),this.M=this,this.F=null}A(G,ve),G.prototype[xt]=!0,G.prototype.removeEventListener=function(o,h,f,m){Eo(this,o,h,f,m)};function ee(o,h){var f,m=o.F;if(m)for(f=[];m;m=m.F)f.push(m);if(o=o.M,m=h.type||h,typeof h=="string")h=new Te(h,o);else if(h instanceof Te)h.target=h.target||o;else{var R=h;h=new Te(m,o),E(h,R)}if(R=!0,f)for(var D=f.length-1;0<=D;D--){var W=h.g=f[D];R=we(W,m,!0,h)&&R}if(W=h.g=o,R=we(W,m,!0,h)&&R,R=we(W,m,!1,h)&&R,f)for(D=0;D<f.length;D++)W=h.g=f[D],R=we(W,m,!1,h)&&R}G.prototype.N=function(){if(G.aa.N.call(this),this.i){var o=this.i,h;for(h in o.g){for(var f=o.g[h],m=0;m<f.length;m++)nn(f[m]);delete o.g[h],o.h--}}this.F=null},G.prototype.K=function(o,h,f,m){return this.i.add(String(o),h,!1,f,m)},G.prototype.L=function(o,h,f,m){return this.i.add(String(o),h,!0,f,m)};function we(o,h,f,m){if(h=o.i.g[String(h)],!h)return!0;h=h.concat();for(var R=!0,D=0;D<h.length;++D){var W=h[D];if(W&&!W.da&&W.capture==f){var Ee=W.listener,Xe=W.ha||W.src;W.fa&&vn(o.i,W),R=Ee.call(Xe,m)!==!1&&R}}return R&&!m.defaultPrevented}function Be(o,h,f){if(typeof o=="function")f&&(o=v(o,f));else if(o&&typeof o.handleEvent=="function")o=v(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(o,h||0)}function We(o){o.g=Be(()=>{o.g=null,o.i&&(o.i=!1,We(o))},o.l);const h=o.h;o.h=null,o.m.apply(null,h)}class At extends ve{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:We(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ht(o){ve.call(this),this.h=o,this.g={}}A(Ht,ve);var Io=[];function ko(o){M(o.g,function(h,f){this.g.hasOwnProperty(f)&&Gs(h)},o),o.g={}}Ht.prototype.N=function(){Ht.aa.N.call(this),ko(this)},Ht.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ws=l.JSON.stringify,wt=l.JSON.parse,Re=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function bt(){}bt.prototype.h=null;function Wt(o){return o.h||(o.h=o.i())}function Fd(){}var Ks={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kl(){Te.call(this,"d")}A(Kl,Te);function Ql(){Te.call(this,"c")}A(Ql,Te);var gr={},zd=null;function So(){return zd=zd||new G}gr.La="serverreachability";function Ud(o){Te.call(this,gr.La,o)}A(Ud,Te);function Qs(o){const h=So();ee(h,new Ud(h))}gr.STAT_EVENT="statevent";function Bd(o,h){Te.call(this,gr.STAT_EVENT,o),this.stat=h}A(Bd,Te);function mt(o){const h=So();ee(h,new Bd(h,o))}gr.Ma="timingevent";function $d(o,h){Te.call(this,gr.Ma,o),this.size=h}A($d,Te);function Ys(o,h){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},h)}function Xs(){this.g=!0}Xs.prototype.xa=function(){this.g=!1};function Fv(o,h,f,m,R,D){o.info(function(){if(o.g)if(D)for(var W="",Ee=D.split("&"),Xe=0;Xe<Ee.length;Xe++){var ge=Ee[Xe].split("=");if(1<ge.length){var ot=ge[0];ge=ge[1];var at=ot.split("_");W=2<=at.length&&at[1]=="type"?W+(ot+"="+ge+"&"):W+(ot+"=redacted&")}}else W=null;else W=D;return"XMLHTTP REQ ("+m+") [attempt "+R+"]: "+h+`
`+f+`
`+W})}function zv(o,h,f,m,R,D,W){o.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+R+"]: "+h+`
`+f+`
`+D+" "+W})}function qr(o,h,f,m){o.info(function(){return"XMLHTTP TEXT ("+h+"): "+Bv(o,f)+(m?" "+m:"")})}function Uv(o,h){o.info(function(){return"TIMEOUT: "+h})}Xs.prototype.info=function(){};function Bv(o,h){if(!o.g)return h;if(!h)return null;try{var f=JSON.parse(h);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var m=f[o];if(!(2>m.length)){var R=m[1];if(Array.isArray(R)&&!(1>R.length)){var D=R[0];if(D!="noop"&&D!="stop"&&D!="close")for(var W=1;W<R.length;W++)R[W]=""}}}}return Ws(f)}catch{return h}}var Co={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yl;function No(){}A(No,bt),No.prototype.g=function(){return new XMLHttpRequest},No.prototype.i=function(){return{}},Yl=new No;function Mn(o,h,f,m){this.j=o,this.i=h,this.l=f,this.R=m||1,this.U=new Ht(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Gd}function Gd(){this.i=null,this.g="",this.h=!1}var Hd={},Xl={};function Jl(o,h,f){o.L=1,o.v=Po(_n(h)),o.m=f,o.P=!0,Wd(o,null)}function Wd(o,h){o.F=Date.now(),Ao(o),o.A=_n(o.v);var f=o.A,m=o.R;Array.isArray(m)||(m=[String(m)]),lf(f.i,"t",m),o.C=0,f=o.j.J,o.h=new Gd,o.g=Sf(o.j,f?h:null,!o.m),0<o.O&&(o.M=new At(v(o.Y,o,o.g),o.O)),h=o.U,f=o.g,m=o.ca;var R="readystatechange";Array.isArray(R)||(R&&(Io[0]=R.toString()),R=Io);for(var D=0;D<R.length;D++){var W=Vn(f,R[D],m||h.handleEvent,!1,h.h||h);if(!W)break;h.g[W.key]=W}h=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,h)):(o.u="GET",o.g.ea(o.A,o.u,null,h)),Qs(),Fv(o.i,o.u,o.A,o.l,o.R,o.m)}Mn.prototype.ca=function(o){o=o.target;const h=this.M;h&&xn(o)==3?h.j():this.Y(o)},Mn.prototype.Y=function(o){try{if(o==this.g)e:{const at=xn(this.g);var h=this.g.Ba();const Wr=this.g.Z();if(!(3>at)&&(at!=3||this.g&&(this.h.h||this.g.oa()||mf(this.g)))){this.J||at!=4||h==7||(h==8||0>=Wr?Qs(3):Qs(2)),Zl(this);var f=this.g.Z();this.X=f;t:if(Kd(this)){var m=mf(this.g);o="";var R=m.length,D=xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){yr(this),Js(this);var W="";break t}this.h.i=new l.TextDecoder}for(h=0;h<R;h++)this.h.h=!0,o+=this.h.i.decode(m[h],{stream:!(D&&h==R-1)});m.length=0,this.h.g+=o,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=f==200,zv(this.i,this.u,this.A,this.l,this.R,at,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,Xe=this.g;if((Ee=Xe.g?Xe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Ee)){var ge=Ee;break t}}ge=null}if(f=ge)qr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,eu(this,f);else{this.o=!1,this.s=3,mt(12),yr(this),Js(this);break e}}if(this.P){f=!0;let Kt;for(;!this.J&&this.C<W.length;)if(Kt=$v(this,W),Kt==Xl){at==4&&(this.s=4,mt(14),f=!1),qr(this.i,this.l,null,"[Incomplete Response]");break}else if(Kt==Hd){this.s=4,mt(15),qr(this.i,this.l,W,"[Invalid Chunk]"),f=!1;break}else qr(this.i,this.l,Kt,null),eu(this,Kt);if(Kd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||W.length!=0||this.h.h||(this.s=1,mt(16),f=!1),this.o=this.o&&f,!f)qr(this.i,this.l,W,"[Invalid Chunked Response]"),yr(this),Js(this);else if(0<W.length&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.ba&&!ot.M&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),ou(ot),ot.M=!0,mt(11))}}else qr(this.i,this.l,W,null),eu(this,W);at==4&&yr(this),this.o&&!this.J&&(at==4?Ef(this.j,this):(this.o=!1,Ao(this)))}else o_(this.g),f==400&&0<W.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),yr(this),Js(this)}}}catch{}finally{}};function Kd(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function $v(o,h){var f=o.C,m=h.indexOf(`
`,f);return m==-1?Xl:(f=Number(h.substring(f,m)),isNaN(f)?Hd:(m+=1,m+f>h.length?Xl:(h=h.slice(m,m+f),o.C=m+f,h)))}Mn.prototype.cancel=function(){this.J=!0,yr(this)};function Ao(o){o.S=Date.now()+o.I,Qd(o,o.I)}function Qd(o,h){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Ys(v(o.ba,o),h)}function Zl(o){o.B&&(l.clearTimeout(o.B),o.B=null)}Mn.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(Uv(this.i,this.A),this.L!=2&&(Qs(),mt(17)),yr(this),this.s=2,Js(this)):Qd(this,this.S-o)};function Js(o){o.j.G==0||o.J||Ef(o.j,o)}function yr(o){Zl(o);var h=o.M;h&&typeof h.ma=="function"&&h.ma(),o.M=null,ko(o.U),o.g&&(h=o.g,o.g=null,h.abort(),h.ma())}function eu(o,h){try{var f=o.j;if(f.G!=0&&(f.g==o||tu(f.h,o))){if(!o.K&&tu(f.h,o)&&f.G==3){try{var m=f.Da.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var R=m;if(R[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)Lo(f),Mo(f);else break e;iu(f),mt(18)}}else f.za=R[1],0<f.za-f.T&&37500>R[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ys(v(f.Za,f),6e3));if(1>=Jd(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else _r(f,11)}else if((o.K||f.g==o)&&Lo(f),!w(h))for(R=f.Da.g.parse(h),h=0;h<R.length;h++){let ge=R[h];if(f.T=ge[0],ge=ge[1],f.G==2)if(ge[0]=="c"){f.K=ge[1],f.ia=ge[2];const ot=ge[3];ot!=null&&(f.la=ot,f.j.info("VER="+f.la));const at=ge[4];at!=null&&(f.Aa=at,f.j.info("SVER="+f.Aa));const Wr=ge[5];Wr!=null&&typeof Wr=="number"&&0<Wr&&(m=1.5*Wr,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;const Kt=o.g;if(Kt){const zo=Kt.g?Kt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zo){var D=m.h;D.g||zo.indexOf("spdy")==-1&&zo.indexOf("quic")==-1&&zo.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(nu(D,D.h),D.h=null))}if(m.D){const au=Kt.g?Kt.g.getResponseHeader("X-HTTP-Session-Id"):null;au&&(m.ya=au,ke(m.I,m.D,au))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var W=o;if(m.qa=kf(m,m.J?m.ia:null,m.W),W.K){Zd(m.h,W);var Ee=W,Xe=m.L;Xe&&(Ee.I=Xe),Ee.B&&(Zl(Ee),Ao(Ee)),m.g=W}else xf(m);0<f.i.length&&Oo(f)}else ge[0]!="stop"&&ge[0]!="close"||_r(f,7);else f.G==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?_r(f,7):su(f):ge[0]!="noop"&&f.l&&f.l.ta(ge),f.v=0)}}Qs(4)}catch{}}var qv=class{constructor(o,h){this.g=o,this.map=h}};function Yd(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xd(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Jd(o){return o.h?1:o.g?o.g.size:0}function tu(o,h){return o.h?o.h==h:o.g?o.g.has(h):!1}function nu(o,h){o.g?o.g.add(h):o.h=h}function Zd(o,h){o.h&&o.h==h?o.h=null:o.g&&o.g.has(h)&&o.g.delete(h)}Yd.prototype.cancel=function(){if(this.i=ef(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function ef(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let h=o.i;for(const f of o.g.values())h=h.concat(f.D);return h}return b(o.i)}function Gv(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var h=[],f=o.length,m=0;m<f;m++)h.push(o[m]);return h}h=[],f=0;for(m in o)h[f++]=o[m];return h}function Hv(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var h=[];o=o.length;for(var f=0;f<o;f++)h.push(f);return h}h=[],f=0;for(const m in o)h[f++]=m;return h}}}function tf(o,h){if(o.forEach&&typeof o.forEach=="function")o.forEach(h,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,h,void 0);else for(var f=Hv(o),m=Gv(o),R=m.length,D=0;D<R;D++)h.call(void 0,m[D],f&&f[D],o)}var nf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wv(o,h){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var m=o[f].indexOf("="),R=null;if(0<=m){var D=o[f].substring(0,m);R=o[f].substring(m+1)}else D=o[f];h(D,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function vr(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof vr){this.h=o.h,bo(this,o.j),this.o=o.o,this.g=o.g,Ro(this,o.s),this.l=o.l;var h=o.i,f=new ti;f.i=h.i,h.g&&(f.g=new Map(h.g),f.h=h.h),rf(this,f),this.m=o.m}else o&&(h=String(o).match(nf))?(this.h=!1,bo(this,h[1]||"",!0),this.o=Zs(h[2]||""),this.g=Zs(h[3]||"",!0),Ro(this,h[4]),this.l=Zs(h[5]||"",!0),rf(this,h[6]||"",!0),this.m=Zs(h[7]||"")):(this.h=!1,this.i=new ti(null,this.h))}vr.prototype.toString=function(){var o=[],h=this.j;h&&o.push(ei(h,sf,!0),":");var f=this.g;return(f||h=="file")&&(o.push("//"),(h=this.o)&&o.push(ei(h,sf,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(ei(f,f.charAt(0)=="/"?Yv:Qv,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",ei(f,Jv)),o.join("")};function _n(o){return new vr(o)}function bo(o,h,f){o.j=f?Zs(h,!0):h,o.j&&(o.j=o.j.replace(/:$/,""))}function Ro(o,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);o.s=h}else o.s=null}function rf(o,h,f){h instanceof ti?(o.i=h,Zv(o.i,o.h)):(f||(h=ei(h,Xv)),o.i=new ti(h,o.h))}function ke(o,h,f){o.i.set(h,f)}function Po(o){return ke(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Zs(o,h){return o?h?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function ei(o,h,f){return typeof o=="string"?(o=encodeURI(o).replace(h,Kv),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Kv(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var sf=/[#\/\?@]/g,Qv=/[#\?:]/g,Yv=/[#\?]/g,Xv=/[#\?@]/g,Jv=/#/g;function ti(o,h){this.h=this.g=null,this.i=o||null,this.j=!!h}function On(o){o.g||(o.g=new Map,o.h=0,o.i&&Wv(o.i,function(h,f){o.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=ti.prototype,t.add=function(o,h){On(this),this.i=null,o=Gr(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(h),this.h+=1,this};function of(o,h){On(o),h=Gr(o,h),o.g.has(h)&&(o.i=null,o.h-=o.g.get(h).length,o.g.delete(h))}function af(o,h){return On(o),h=Gr(o,h),o.g.has(h)}t.forEach=function(o,h){On(this),this.g.forEach(function(f,m){f.forEach(function(R){o.call(h,R,m,this)},this)},this)},t.na=function(){On(this);const o=Array.from(this.g.values()),h=Array.from(this.g.keys()),f=[];for(let m=0;m<h.length;m++){const R=o[m];for(let D=0;D<R.length;D++)f.push(h[m])}return f},t.V=function(o){On(this);let h=[];if(typeof o=="string")af(this,o)&&(h=h.concat(this.g.get(Gr(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)h=h.concat(o[f])}return h},t.set=function(o,h){return On(this),this.i=null,o=Gr(this,o),af(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[h]),this.h+=1,this},t.get=function(o,h){return o?(o=this.V(o),0<o.length?String(o[0]):h):h};function lf(o,h,f){of(o,h),0<f.length&&(o.i=null,o.g.set(Gr(o,h),b(f)),o.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],h=Array.from(this.g.keys());for(var f=0;f<h.length;f++){var m=h[f];const D=encodeURIComponent(String(m)),W=this.V(m);for(m=0;m<W.length;m++){var R=D;W[m]!==""&&(R+="="+encodeURIComponent(String(W[m]))),o.push(R)}}return this.i=o.join("&")};function Gr(o,h){return h=String(h),o.j&&(h=h.toLowerCase()),h}function Zv(o,h){h&&!o.j&&(On(o),o.i=null,o.g.forEach(function(f,m){var R=m.toLowerCase();m!=R&&(of(this,m),lf(this,R,f))},o)),o.j=h}function e_(o,h){const f=new Xs;if(l.Image){const m=new Image;m.onload=S(Ln,f,"TestLoadImage: loaded",!0,h,m),m.onerror=S(Ln,f,"TestLoadImage: error",!1,h,m),m.onabort=S(Ln,f,"TestLoadImage: abort",!1,h,m),m.ontimeout=S(Ln,f,"TestLoadImage: timeout",!1,h,m),l.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=o}else h(!1)}function t_(o,h){const f=new Xs,m=new AbortController,R=setTimeout(()=>{m.abort(),Ln(f,"TestPingServer: timeout",!1,h)},1e4);fetch(o,{signal:m.signal}).then(D=>{clearTimeout(R),D.ok?Ln(f,"TestPingServer: ok",!0,h):Ln(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(R),Ln(f,"TestPingServer: error",!1,h)})}function Ln(o,h,f,m,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),m(f)}catch{}}function n_(){this.g=new Re}function r_(o,h,f){const m=f||"";try{tf(o,function(R,D){let W=R;d(R)&&(W=Ws(R)),h.push(m+D+"="+encodeURIComponent(W))})}catch(R){throw h.push(m+"type="+encodeURIComponent("_badmap")),R}}function jo(o){this.l=o.Ub||null,this.j=o.eb||!1}A(jo,bt),jo.prototype.g=function(){return new Do(this.l,this.j)},jo.prototype.i=function(o){return function(){return o}}({});function Do(o,h){G.call(this),this.D=o,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Do,G),t=Do.prototype,t.open=function(o,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=h,this.readyState=1,ri(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(h.body=o),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ni(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,ri(this)),this.g&&(this.readyState=3,ri(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;uf(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function uf(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var h=o.value?o.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!o.done}))&&(this.response=this.responseText+=h)}o.done?ni(this):ri(this),this.readyState==3&&uf(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,ni(this))},t.Qa=function(o){this.g&&(this.response=o,ni(this))},t.ga=function(){this.g&&ni(this)};function ni(o){o.readyState=4,o.l=null,o.j=null,o.v=null,ri(o)}t.setRequestHeader=function(o,h){this.u.append(o,h)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=h.next();return o.join(`\r
`)};function ri(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Do.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function cf(o){let h="";return M(o,function(f,m){h+=m,h+=":",h+=f,h+=`\r
`}),h}function ru(o,h,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=cf(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):ke(o,h,f))}function Me(o){G.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Me,G);var s_=/^https?$/i,i_=["POST","PUT"];t=Me.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,h,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);h=h?h.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yl.g(),this.v=this.o?Wt(this.o):Wt(Yl),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(h,String(o),!0),this.B=!1}catch(D){hf(this,D);return}if(o=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var R in m)f.set(R,m[R]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const D of m.keys())f.set(D,m.get(D));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(D=>D.toLowerCase()=="content-type"),R=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(i_,h,void 0))||m||R||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,W]of f)this.g.setRequestHeader(D,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{pf(this),this.u=!0,this.g.send(o),this.u=!1}catch(D){hf(this,D)}};function hf(o,h){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=h,o.m=5,df(o),Vo(o)}function df(o){o.A||(o.A=!0,ee(o,"complete"),ee(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,ee(this,"complete"),ee(this,"abort"),Vo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vo(this,!0)),Me.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ff(this):this.bb())},t.bb=function(){ff(this)};function ff(o){if(o.h&&typeof a<"u"&&(!o.v[1]||xn(o)!=4||o.Z()!=2)){if(o.u&&xn(o)==4)Be(o.Ea,0,o);else if(ee(o,"readystatechange"),xn(o)==4){o.h=!1;try{const W=o.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var m;if(m=W===0){var R=String(o.D).match(nf)[1]||null;!R&&l.self&&l.self.location&&(R=l.self.location.protocol.slice(0,-1)),m=!s_.test(R?R.toLowerCase():"")}f=m}if(f)ee(o,"complete"),ee(o,"success");else{o.m=6;try{var D=2<xn(o)?o.g.statusText:""}catch{D=""}o.l=D+" ["+o.Z()+"]",df(o)}}finally{Vo(o)}}}}function Vo(o,h){if(o.g){pf(o);const f=o.g,m=o.v[0]?()=>{}:null;o.g=null,o.v=null,h||ee(o,"ready");try{f.onreadystatechange=m}catch{}}}function pf(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function xn(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<xn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var h=this.g.responseText;return o&&h.indexOf(o)==0&&(h=h.substring(o.length)),wt(h)}};function mf(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function o_(o){const h={};o=(o.g&&2<=xn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<o.length;m++){if(w(o[m]))continue;var f=C(o[m]);const R=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const D=h[R]||[];h[R]=D,D.push(f)}x(h,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function si(o,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||h}function gf(o){this.Aa=0,this.i=[],this.j=new Xs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=si("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=si("baseRetryDelayMs",5e3,o),this.cb=si("retryDelaySeedMs",1e4,o),this.Wa=si("forwardChannelMaxRetries",2,o),this.wa=si("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Yd(o&&o.concurrentRequestLimit),this.Da=new n_,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=gf.prototype,t.la=8,t.G=1,t.connect=function(o,h,f,m){mt(0),this.W=o,this.H=h||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=kf(this,null,this.W),Oo(this)};function su(o){if(yf(o),o.G==3){var h=o.U++,f=_n(o.I);if(ke(f,"SID",o.K),ke(f,"RID",h),ke(f,"TYPE","terminate"),ii(o,f),h=new Mn(o,o.j,h),h.L=2,h.v=Po(_n(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=h.v,f=!0),f||(h.g=Sf(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Ao(h)}If(o)}function Mo(o){o.g&&(ou(o),o.g.cancel(),o.g=null)}function yf(o){Mo(o),o.u&&(l.clearTimeout(o.u),o.u=null),Lo(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Oo(o){if(!Xd(o.h)&&!o.s){o.s=!0;var h=o.Ga;ue||Q(),V||(ue(),V=!0),H.add(h,o),o.B=0}}function a_(o,h){return Jd(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=h.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Ys(v(o.Ga,o,h),Tf(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const R=new Mn(this,this.j,o);let D=this.o;if(this.S&&(D?(D=y(D),E(D,this.S)):D=this.S),this.m!==null||this.O||(R.H=D,D=null),this.P)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,4096<h){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=_f(this,R,h),f=_n(this.I),ke(f,"RID",o),ke(f,"CVER",22),this.D&&ke(f,"X-HTTP-Session-Id",this.D),ii(this,f),D&&(this.O?h="headers="+encodeURIComponent(String(cf(D)))+"&"+h:this.m&&ru(f,this.m,D)),nu(this.h,R),this.Ua&&ke(f,"TYPE","init"),this.P?(ke(f,"$req",h),ke(f,"SID","null"),R.T=!0,Jl(R,f,null)):Jl(R,f,h),this.G=2}}else this.G==3&&(o?vf(this,o):this.i.length==0||Xd(this.h)||vf(this))};function vf(o,h){var f;h?f=h.l:f=o.U++;const m=_n(o.I);ke(m,"SID",o.K),ke(m,"RID",f),ke(m,"AID",o.T),ii(o,m),o.m&&o.o&&ru(m,o.m,o.o),f=new Mn(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),h&&(o.i=h.D.concat(o.i)),h=_f(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),nu(o.h,f),Jl(f,m,h)}function ii(o,h){o.H&&M(o.H,function(f,m){ke(h,m,f)}),o.l&&tf({},function(f,m){ke(h,m,f)})}function _f(o,h,f){f=Math.min(o.i.length,f);var m=o.l?v(o.l.Na,o.l,o):null;e:{var R=o.i;let D=-1;for(;;){const W=["count="+f];D==-1?0<f?(D=R[0].g,W.push("ofs="+D)):D=0:W.push("ofs="+D);let Ee=!0;for(let Xe=0;Xe<f;Xe++){let ge=R[Xe].g;const ot=R[Xe].map;if(ge-=D,0>ge)D=Math.max(0,R[Xe].g-100),Ee=!1;else try{r_(ot,W,"req"+ge+"_")}catch{m&&m(ot)}}if(Ee){m=W.join("&");break e}}}return o=o.i.splice(0,f),h.D=o,m}function xf(o){if(!o.g&&!o.u){o.Y=1;var h=o.Fa;ue||Q(),V||(ue(),V=!0),H.add(h,o),o.v=0}}function iu(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Ys(v(o.Fa,o),Tf(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,wf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Ys(v(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),Mo(this),wf(this))};function ou(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function wf(o){o.g=new Mn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var h=_n(o.qa);ke(h,"RID","rpc"),ke(h,"SID",o.K),ke(h,"AID",o.T),ke(h,"CI",o.F?"0":"1"),!o.F&&o.ja&&ke(h,"TO",o.ja),ke(h,"TYPE","xmlhttp"),ii(o,h),o.m&&o.o&&ru(h,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=Po(_n(h)),f.m=null,f.P=!0,Wd(f,o)}t.Za=function(){this.C!=null&&(this.C=null,Mo(this),iu(this),mt(19))};function Lo(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Ef(o,h){var f=null;if(o.g==h){Lo(o),ou(o),o.g=null;var m=2}else if(tu(o.h,h))f=h.D,Zd(o.h,h),m=1;else return;if(o.G!=0){if(h.o)if(m==1){f=h.m?h.m.length:0,h=Date.now()-h.F;var R=o.B;m=So(),ee(m,new $d(m,f)),Oo(o)}else xf(o);else if(R=h.s,R==3||R==0&&0<h.X||!(m==1&&a_(o,h)||m==2&&iu(o)))switch(f&&0<f.length&&(h=o.h,h.i=h.i.concat(f)),R){case 1:_r(o,5);break;case 4:_r(o,10);break;case 3:_r(o,6);break;default:_r(o,2)}}}function Tf(o,h){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*h}function _r(o,h){if(o.j.info("Error code "+h),h==2){var f=v(o.fb,o),m=o.Xa;const R=!m;m=new vr(m||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||bo(m,"https"),Po(m),R?e_(m.toString(),f):t_(m.toString(),f)}else mt(2);o.G=0,o.l&&o.l.sa(h),If(o),yf(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function If(o){if(o.G=0,o.ka=[],o.l){const h=ef(o.h);(h.length!=0||o.i.length!=0)&&(j(o.ka,h),j(o.ka,o.i),o.h.i.length=0,b(o.i),o.i.length=0),o.l.ra()}}function kf(o,h,f){var m=f instanceof vr?_n(f):new vr(f);if(m.g!="")h&&(m.g=h+"."+m.g),Ro(m,m.s);else{var R=l.location;m=R.protocol,h=h?h+"."+R.hostname:R.hostname,R=+R.port;var D=new vr(null);m&&bo(D,m),h&&(D.g=h),R&&Ro(D,R),f&&(D.l=f),m=D}return f=o.D,h=o.ya,f&&h&&ke(m,f,h),ke(m,"VER",o.la),ii(o,m),m}function Sf(o,h,f){if(h&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=o.Ca&&!o.pa?new Me(new jo({eb:f})):new Me(o.pa),h.Ha(o.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cf(){}t=Cf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Fo(){}Fo.prototype.g=function(o,h){return new Rt(o,h)};function Rt(o,h){G.call(this),this.g=new gf(h),this.l=o,this.h=h&&h.messageUrlParams||null,o=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(o?o["X-WebChannel-Content-Type"]=h.messageContentType:o={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(o?o["X-WebChannel-Client-Profile"]=h.va:o={"X-WebChannel-Client-Profile":h.va}),this.g.S=o,(o=h&&h.Sb)&&!w(o)&&(this.g.m=o),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!w(h)&&(this.g.D=h,o=this.h,o!==null&&h in o&&(o=this.h,h in o&&delete o[h])),this.j=new Hr(this)}A(Rt,G),Rt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rt.prototype.close=function(){su(this.g)},Rt.prototype.o=function(o){var h=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=Ws(o),o=f);h.i.push(new qv(h.Ya++,o)),h.G==3&&Oo(h)},Rt.prototype.N=function(){this.g.l=null,delete this.j,su(this.g),delete this.g,Rt.aa.N.call(this)};function Nf(o){Kl.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var h=o.__sm__;if(h){e:{for(const f in h){o=f;break e}o=void 0}(this.i=o)&&(o=this.i,h=h!==null&&o in h?h[o]:void 0),this.data=h}else this.data=o}A(Nf,Kl);function Af(){Ql.call(this),this.status=1}A(Af,Ql);function Hr(o){this.g=o}A(Hr,Cf),Hr.prototype.ua=function(){ee(this.g,"a")},Hr.prototype.ta=function(o){ee(this.g,new Nf(o))},Hr.prototype.sa=function(o){ee(this.g,new Af)},Hr.prototype.ra=function(){ee(this.g,"b")},Fo.prototype.createWebChannel=Fo.prototype.g,Rt.prototype.send=Rt.prototype.o,Rt.prototype.open=Rt.prototype.m,Rt.prototype.close=Rt.prototype.close,v0=function(){return new Fo},y0=function(){return So()},g0=gr,Kc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Co.NO_ERROR=0,Co.TIMEOUT=8,Co.HTTP_ERROR=6,wa=Co,qd.COMPLETE="complete",m0=qd,Fd.EventType=Ks,Ks.OPEN="a",Ks.CLOSE="b",Ks.ERROR="c",Ks.MESSAGE="d",G.prototype.listen=G.prototype.K,_i=Fd,Me.prototype.listenOnce=Me.prototype.L,Me.prototype.getLastError=Me.prototype.Ka,Me.prototype.getLastErrorCode=Me.prototype.Ba,Me.prototype.getStatus=Me.prototype.Z,Me.prototype.getResponseJson=Me.prototype.Oa,Me.prototype.getResponseText=Me.prototype.oa,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Ha,p0=Me}).apply(typeof sa<"u"?sa:typeof self<"u"?self:typeof window<"u"?window:{});const Jp="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ht.UNAUTHENTICATED=new ht(null),ht.GOOGLE_CREDENTIALS=new ht("google-credentials-uid"),ht.FIRST_PARTY=new ht("first-party-uid"),ht.MOCK_USER=new ht("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ms="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr=new o0("@firebase/firestore");function pi(){return Mr.logLevel}function Y(t,...e){if(Mr.logLevel<=pe.DEBUG){const n=e.map(ud);Mr.debug(`Firestore (${Ms}): ${t}`,...n)}}function Pn(t,...e){if(Mr.logLevel<=pe.ERROR){const n=e.map(ud);Mr.error(`Firestore (${Ms}): ${t}`,...n)}}function ks(t,...e){if(Mr.logLevel<=pe.WARN){const n=e.map(ud);Mr.warn(`Firestore (${Ms}): ${t}`,...n)}}function ud(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(t="Unexpected state"){const e=`FIRESTORE (${Ms}) INTERNAL ASSERTION FAILED: `+t;throw Pn(e),new Error(e)}function xe(t,e){t||re()}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends Vs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class F2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ht.UNAUTHENTICATED))}shutdown(){}}class z2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class U2{constructor(e){this.t=e,this.currentUser=ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){xe(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new ir;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ir,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ir)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe(typeof r.accessToken=="string"),new _0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string"),new ht(e)}}class B2{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ht.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class $2{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new B2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class q2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class G2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){xe(this.o===void 0);const r=i=>{i.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,Y("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(xe(typeof n.token=="string"),this.R=n.token,new q2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=H2(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ye(t,e){return t<e?-1:t>e?1:0}function Ss(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new J(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return He.fromMillis(Date.now())}static fromDate(e){return He.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new He(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.timestamp=e}static fromTimestamp(e){return new se(e)}static min(){return new se(new He(0,0))}static max(){return new se(new He(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,n,r){n===void 0?n=0:n>e.length&&re(),r===void 0?r=e.length-n:r>e.length-n&&re(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return so.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof so?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),a=n.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class be extends so{construct(e,n,r){return new be(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new be(n)}static emptyPath(){return new be([])}}const W2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class et extends so{construct(e,n,r){return new et(e,n,r)}static isValidIdentifier(e){return W2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),et.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new et(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new J(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new J(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new J(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new J(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new et(n)}static emptyPath(){return new et([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(be.fromString(e))}static fromName(e){return new te(be.fromString(e).popFirst(5))}static empty(){return new te(be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new be(e.slice()))}}function K2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=se.fromTimestamp(r===1e9?new He(n+1,0):new He(n,r));return new ur(s,te.empty(),e)}function Q2(t){return new ur(t.readTime,t.key,-1)}class ur{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ur(se.min(),te.empty(),-1)}static max(){return new ur(se.max(),te.empty(),-1)}}function Y2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:ye(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class J2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function go(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==X2)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(s=>s?z.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new z((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(p=>{a[d]=p,++l,l===i&&r(a)},p=>s(p))}})}static doWhile(e,n){return new z((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function Z2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function yo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}cd.oe=-1;function Sl(t){return t==null}function el(t){return t===0&&1/t==-1/0}function eE(t){return typeof t=="number"&&Number.isInteger(t)&&!el(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Br(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function w0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n){this.comparator=e,this.root=n||Ze.EMPTY}insert(e,n){return new Ve(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ze.BLACK,null,null))}remove(e){return new Ve(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ze.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ia(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ia(this.root,e,this.comparator,!1)}getReverseIterator(){return new ia(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ia(this.root,e,this.comparator,!0)}}class ia{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ze{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ze.RED,this.left=s??Ze.EMPTY,this.right=i??Ze.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ze(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ze.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ze.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw re();const e=this.left.check();if(e!==this.right.check())throw re();return e+(this.isRed()?0:1)}}Ze.EMPTY=null,Ze.RED=!0,Ze.BLACK=!1;Ze.EMPTY=new class{constructor(){this.size=0}get key(){throw re()}get value(){throw re()}get color(){throw re()}get left(){throw re()}get right(){throw re()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ze(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new em(this.data.getIterator())}getIteratorFrom(e){return new em(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new nt(this.comparator);return n.data=e,n}}class em{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.fields=e,e.sort(et.comparator)}static empty(){return new Dt([])}unionWith(e){let n=new nt(et.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Dt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ss(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new E0("Invalid base64 string: "+i):i}}(e);return new st(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new st(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}st.EMPTY_BYTE_STRING=new st("");const tE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cr(t){if(xe(!!t),typeof t=="string"){let e=0;const n=tE.exec(t);if(xe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Le(t.seconds),nanos:Le(t.nanos)}}function Le(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Or(t){return typeof t=="string"?st.fromBase64String(t):st.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function dd(t){const e=t.mapValue.fields.__previous_value__;return hd(e)?dd(e):e}function io(t){const e=cr(t.mapValue.fields.__local_write_time__.timestampValue);return new He(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e,n,r,s,i,a,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class oo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new oo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof oo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa={mapValue:{}};function Lr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?hd(t)?4:sE(t)?9007199254740991:rE(t)?10:11:re()}function mn(t,e){if(t===e)return!0;const n=Lr(t);if(n!==Lr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return io(t).isEqual(io(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=cr(s.timestampValue),l=cr(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Or(s.bytesValue).isEqual(Or(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Le(s.geoPointValue.latitude)===Le(i.geoPointValue.latitude)&&Le(s.geoPointValue.longitude)===Le(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Le(s.integerValue)===Le(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Le(s.doubleValue),l=Le(i.doubleValue);return a===l?el(a)===el(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Ss(t.arrayValue.values||[],e.arrayValue.values||[],mn);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Zp(a)!==Zp(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!mn(a[u],l[u])))return!1;return!0}(t,e);default:return re()}}function ao(t,e){return(t.values||[]).find(n=>mn(n,e))!==void 0}function Cs(t,e){if(t===e)return 0;const n=Lr(t),r=Lr(e);if(n!==r)return ye(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ye(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Le(i.integerValue||i.doubleValue),u=Le(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return tm(t.timestampValue,e.timestampValue);case 4:return tm(io(t),io(e));case 5:return ye(t.stringValue,e.stringValue);case 6:return function(i,a){const l=Or(i),u=Or(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),u=a.split("/");for(let d=0;d<l.length&&d<u.length;d++){const p=ye(l[d],u[d]);if(p!==0)return p}return ye(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=ye(Le(i.latitude),Le(a.latitude));return l!==0?l:ye(Le(i.longitude),Le(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return nm(t.arrayValue,e.arrayValue);case 10:return function(i,a){var l,u,d,p;const g=i.fields||{},v=a.fields||{},S=(l=g.value)===null||l===void 0?void 0:l.arrayValue,A=(u=v.value)===null||u===void 0?void 0:u.arrayValue,b=ye(((d=S==null?void 0:S.values)===null||d===void 0?void 0:d.length)||0,((p=A==null?void 0:A.values)===null||p===void 0?void 0:p.length)||0);return b!==0?b:nm(S,A)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===oa.mapValue&&a===oa.mapValue)return 0;if(i===oa.mapValue)return 1;if(a===oa.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=a.fields||{},p=Object.keys(d);u.sort(),p.sort();for(let g=0;g<u.length&&g<p.length;++g){const v=ye(u[g],p[g]);if(v!==0)return v;const S=Cs(l[u[g]],d[p[g]]);if(S!==0)return S}return ye(u.length,p.length)}(t.mapValue,e.mapValue);default:throw re()}}function tm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ye(t,e);const n=cr(t),r=cr(e),s=ye(n.seconds,r.seconds);return s!==0?s:ye(n.nanos,r.nanos)}function nm(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Cs(n[s],r[s]);if(i)return i}return ye(n.length,r.length)}function Ns(t){return Qc(t)}function Qc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=cr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Or(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Qc(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Qc(n.fields[a])}`;return s+"}"}(t.mapValue):re()}function Yc(t){return!!t&&"integerValue"in t}function fd(t){return!!t&&"arrayValue"in t}function rm(t){return!!t&&"nullValue"in t}function sm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ea(t){return!!t&&"mapValue"in t}function rE(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ji(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Br(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ji(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ji(t.arrayValue.values[n]);return e}return Object.assign({},t)}function sE(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.value=e}static empty(){return new Tt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ea(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ji(n)}setAll(e){let n=et.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=ji(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ea(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return mn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ea(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Br(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Tt(ji(this.value))}}function T0(t){const e=[];return Br(t.fields,(n,r)=>{const s=new et([n]);if(Ea(r)){const i=T0(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new Dt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new ft(e,0,se.min(),se.min(),se.min(),Tt.empty(),0)}static newFoundDocument(e,n,r,s){return new ft(e,1,n,se.min(),r,s,0)}static newNoDocument(e,n){return new ft(e,2,n,se.min(),se.min(),Tt.empty(),0)}static newUnknownDocument(e,n){return new ft(e,3,n,se.min(),se.min(),Tt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n){this.position=e,this.inclusive=n}}function im(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=te.comparator(te.fromName(a.referenceValue),n.key):r=Cs(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function om(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!mn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n="asc"){this.field=e,this.dir=n}}function iE(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{}class qe extends I0{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new aE(e,n,r):n==="array-contains"?new cE(e,r):n==="in"?new hE(e,r):n==="not-in"?new dE(e,r):n==="array-contains-any"?new fE(e,r):new qe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new lE(e,r):new uE(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Cs(n,this.value)):n!==null&&Lr(this.value)===Lr(n)&&this.matchesComparison(Cs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gn extends I0{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new gn(e,n)}matches(e){return k0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function k0(t){return t.op==="and"}function S0(t){return oE(t)&&k0(t)}function oE(t){for(const e of t.filters)if(e instanceof gn)return!1;return!0}function Xc(t){if(t instanceof qe)return t.field.canonicalString()+t.op.toString()+Ns(t.value);if(S0(t))return t.filters.map(e=>Xc(e)).join(",");{const e=t.filters.map(n=>Xc(n)).join(",");return`${t.op}(${e})`}}function C0(t,e){return t instanceof qe?function(r,s){return s instanceof qe&&r.op===s.op&&r.field.isEqual(s.field)&&mn(r.value,s.value)}(t,e):t instanceof gn?function(r,s){return s instanceof gn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&C0(a,s.filters[l]),!0):!1}(t,e):void re()}function N0(t){return t instanceof qe?function(n){return`${n.field.canonicalString()} ${n.op} ${Ns(n.value)}`}(t):t instanceof gn?function(n){return n.op.toString()+" {"+n.getFilters().map(N0).join(" ,")+"}"}(t):"Filter"}class aE extends qe{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class lE extends qe{constructor(e,n){super(e,"in",n),this.keys=A0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class uE extends qe{constructor(e,n){super(e,"not-in",n),this.keys=A0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function A0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class cE extends qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return fd(n)&&ao(n.arrayValue,this.value)}}class hE extends qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ao(this.value.arrayValue,n)}}class dE extends qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(ao(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ao(this.value.arrayValue,n)}}class fE extends qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!fd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ao(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.ue=null}}function am(t,e=null,n=[],r=[],s=null,i=null,a=null){return new pE(t,e,n,r,s,i,a)}function pd(t){const e=ie(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Xc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Sl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ns(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ns(r)).join(",")),e.ue=n}return e.ue}function md(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!iE(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!C0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!om(t.startAt,e.startAt)&&om(t.endAt,e.endAt)}function Jc(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function mE(t,e,n,r,s,i,a,l){return new Cl(t,e,n,r,s,i,a,l)}function Nl(t){return new Cl(t)}function lm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function gE(t){return t.collectionGroup!==null}function Di(t){const e=ie(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new nt(et.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new nl(i,r))}),n.has(et.keyField().canonicalString())||e.ce.push(new nl(et.keyField(),r))}return e.ce}function hn(t){const e=ie(t);return e.le||(e.le=yE(e,Di(t))),e.le}function yE(t,e){if(t.limitType==="F")return am(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new nl(s.field,i)});const n=t.endAt?new tl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new tl(t.startAt.position,t.startAt.inclusive):null;return am(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Zc(t,e,n){return new Cl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Al(t,e){return md(hn(t),hn(e))&&t.limitType===e.limitType}function b0(t){return`${pd(hn(t))}|lt:${t.limitType}`}function Qr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>N0(s)).join(", ")}]`),Sl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ns(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ns(s)).join(",")),`Target(${r})`}(hn(t))}; limitType=${t.limitType})`}function bl(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):te.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Di(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,u){const d=im(a,l,u);return a.inclusive?d<=0:d<0}(r.startAt,Di(r),s)||r.endAt&&!function(a,l,u){const d=im(a,l,u);return a.inclusive?d>=0:d>0}(r.endAt,Di(r),s))}(t,e)}function vE(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function R0(t){return(e,n)=>{let r=!1;for(const s of Di(t)){const i=_E(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function _E(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(i,a,l){const u=a.data.field(i),d=l.data.field(i);return u!==null&&d!==null?Cs(u,d):re()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Br(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return w0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE=new Ve(te.comparator);function jn(){return xE}const P0=new Ve(te.comparator);function xi(...t){let e=P0;for(const n of t)e=e.insert(n.key,n);return e}function j0(t){let e=P0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Sr(){return Vi()}function D0(){return Vi()}function Vi(){return new Os(t=>t.toString(),(t,e)=>t.isEqual(e))}const wE=new Ve(te.comparator),EE=new nt(te.comparator);function ce(...t){let e=EE;for(const n of t)e=e.add(n);return e}const TE=new nt(ye);function IE(){return TE}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gd(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:el(e)?"-0":e}}function V0(t){return{integerValue:""+t}}function kE(t,e){return eE(e)?V0(e):gd(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(){this._=void 0}}function SE(t,e,n){return t instanceof rl?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&hd(i)&&(i=dd(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(n,e):t instanceof lo?O0(t,e):t instanceof uo?L0(t,e):function(s,i){const a=M0(s,i),l=um(a)+um(s.Pe);return Yc(a)&&Yc(s.Pe)?V0(l):gd(s.serializer,l)}(t,e)}function CE(t,e,n){return t instanceof lo?O0(t,e):t instanceof uo?L0(t,e):n}function M0(t,e){return t instanceof sl?function(r){return Yc(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class rl extends Rl{}class lo extends Rl{constructor(e){super(),this.elements=e}}function O0(t,e){const n=F0(e);for(const r of t.elements)n.some(s=>mn(s,r))||n.push(r);return{arrayValue:{values:n}}}class uo extends Rl{constructor(e){super(),this.elements=e}}function L0(t,e){let n=F0(e);for(const r of t.elements)n=n.filter(s=>!mn(s,r));return{arrayValue:{values:n}}}class sl extends Rl{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function um(t){return Le(t.integerValue||t.doubleValue)}function F0(t){return fd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function NE(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof lo&&s instanceof lo||r instanceof uo&&s instanceof uo?Ss(r.elements,s.elements,mn):r instanceof sl&&s instanceof sl?mn(r.Pe,s.Pe):r instanceof rl&&s instanceof rl}(t.transform,e.transform)}class AE{constructor(e,n){this.version=e,this.transformResults=n}}class Mt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Mt}static exists(e){return new Mt(void 0,e)}static updateTime(e){return new Mt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ta(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Pl{}function z0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new jl(t.key,Mt.none()):new vo(t.key,t.data,Mt.none());{const n=t.data,r=Tt.empty();let s=new nt(et.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new mr(t.key,r,new Dt(s.toArray()),Mt.none())}}function bE(t,e,n){t instanceof vo?function(s,i,a){const l=s.value.clone(),u=hm(s.fieldTransforms,i,a.transformResults);l.setAll(u),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof mr?function(s,i,a){if(!Ta(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=hm(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(U0(s)),u.setAll(l),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Mi(t,e,n,r){return t instanceof vo?function(i,a,l,u){if(!Ta(i.precondition,a))return l;const d=i.value.clone(),p=dm(i.fieldTransforms,u,a);return d.setAll(p),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof mr?function(i,a,l,u){if(!Ta(i.precondition,a))return l;const d=dm(i.fieldTransforms,u,a),p=a.data;return p.setAll(U0(i)),p.setAll(d),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(i,a,l){return Ta(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function RE(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=M0(r.transform,s||null);i!=null&&(n===null&&(n=Tt.empty()),n.set(r.field,i))}return n||null}function cm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ss(r,s,(i,a)=>NE(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class vo extends Pl{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class mr extends Pl{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function U0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function hm(t,e,n){const r=new Map;xe(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,CE(a,l,n[s]))}return r}function dm(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,SE(i,a,e))}return r}class jl extends Pl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class PE extends Pl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&bE(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Mi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Mi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=D0();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const u=z0(a,l);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&Ss(this.mutations,e.mutations,(n,r)=>cm(n,r))&&Ss(this.baseMutations,e.baseMutations,(n,r)=>cm(n,r))}}class yd{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){xe(e.mutations.length===r.length);let s=function(){return wE}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new yd(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,fe;function ME(t){switch(t){default:return re();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function B0(t){if(t===void 0)return Pn("GRPC error has no .code"),F.UNKNOWN;switch(t){case ze.OK:return F.OK;case ze.CANCELLED:return F.CANCELLED;case ze.UNKNOWN:return F.UNKNOWN;case ze.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case ze.INTERNAL:return F.INTERNAL;case ze.UNAVAILABLE:return F.UNAVAILABLE;case ze.UNAUTHENTICATED:return F.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case ze.NOT_FOUND:return F.NOT_FOUND;case ze.ALREADY_EXISTS:return F.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return F.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case ze.ABORTED:return F.ABORTED;case ze.OUT_OF_RANGE:return F.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return F.UNIMPLEMENTED;case ze.DATA_LOSS:return F.DATA_LOSS;default:return re()}}(fe=ze||(ze={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE=new Ar([4294967295,4294967295],0);function fm(t){const e=OE().encode(t),n=new f0;return n.update(e),new Uint8Array(n.digest())}function pm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ar([n,r],0),new Ar([s,i],0)]}class vd{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new wi(`Invalid padding: ${n}`);if(r<0)throw new wi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new wi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new wi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ar.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Ar.fromNumber(r)));return s.compare(LE)===1&&(s=new Ar([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=fm(e),[r,s]=pm(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);if(!this.de(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new vd(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.Ie===0)return;const n=fm(e),[r,s]=pm(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class wi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,_o.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Dl(se.min(),s,new Ve(ye),jn(),ce())}}class _o{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new _o(r,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class $0{constructor(e,n){this.targetId=e,this.me=n}}class q0{constructor(e,n,r=st.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class mm{constructor(){this.fe=0,this.ge=ym(),this.pe=st.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ce(),n=ce(),r=ce();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:re()}}),new _o(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=ym()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,xe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class FE{constructor(e){this.Le=e,this.Be=new Map,this.ke=jn(),this.qe=gm(),this.Qe=new Ve(ye)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:re()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Jc(i))if(r===0){const a=new te(i.path);this.Ue(n,a,ft.newNoDocument(a,se.min()))}else xe(r===1);else{const a=this.Ye(n);if(a!==r){const l=this.Ze(e),u=l?this.Xe(l,e,a):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Or(r).toUint8Array()}catch(u){if(u instanceof E0)return ks("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new vd(a,s,i)}catch(u){return ks(u instanceof wi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,a)=>{const l=this.Je(a);if(l){if(i.current&&Jc(l.target)){const u=new te(l.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,ft.newNoDocument(u,e))}i.be&&(n.set(a,i.ve()),i.Ce())}});let r=ce();this.qe.forEach((i,a)=>{let l=!0;a.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new Dl(e,n,this.Qe,this.ke,r);return this.ke=jn(),this.qe=gm(),this.Qe=new Ve(ye),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new mm,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new nt(ye),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new mm),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function gm(){return new Ve(te.comparator)}function ym(){return new Ve(te.comparator)}const zE={asc:"ASCENDING",desc:"DESCENDING"},UE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BE={and:"AND",or:"OR"};class $E{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function eh(t,e){return t.useProto3Json||Sl(e)?e:{value:e}}function il(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function G0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function qE(t,e){return il(t,e.toTimestamp())}function dn(t){return xe(!!t),se.fromTimestamp(function(n){const r=cr(n);return new He(r.seconds,r.nanos)}(t))}function _d(t,e){return th(t,e).canonicalString()}function th(t,e){const n=function(s){return new be(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function H0(t){const e=be.fromString(t);return xe(X0(e)),e}function nh(t,e){return _d(t.databaseId,e.path)}function Lu(t,e){const n=H0(e);if(n.get(1)!==t.databaseId.projectId)throw new J(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(K0(n))}function W0(t,e){return _d(t.databaseId,e)}function GE(t){const e=H0(t);return e.length===4?be.emptyPath():K0(e)}function rh(t){return new be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function K0(t){return xe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function vm(t,e,n){return{name:nh(t,e),fields:n.value.mapValue.fields}}function HE(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:re()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,p){return d.useProto3Json?(xe(p===void 0||typeof p=="string"),st.fromBase64String(p||"")):(xe(p===void 0||p instanceof Buffer||p instanceof Uint8Array),st.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const p=d.code===void 0?F.UNKNOWN:B0(d.code);return new J(p,d.message||"")}(a);n=new q0(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Lu(t,r.document.name),i=dn(r.document.updateTime),a=r.document.createTime?dn(r.document.createTime):se.min(),l=new Tt({mapValue:{fields:r.document.fields}}),u=ft.newFoundDocument(s,i,a,l),d=r.targetIds||[],p=r.removedTargetIds||[];n=new Ia(d,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Lu(t,r.document),i=r.readTime?dn(r.readTime):se.min(),a=ft.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Ia([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Lu(t,r.document),i=r.removedTargetIds||[];n=new Ia([],i,s,null)}else{if(!("filter"in e))return re();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new VE(s,i),l=r.targetId;n=new $0(l,a)}}return n}function WE(t,e){let n;if(e instanceof vo)n={update:vm(t,e.key,e.value)};else if(e instanceof jl)n={delete:nh(t,e.key)};else if(e instanceof mr)n={update:vm(t,e.key,e.data),updateMask:nT(e.fieldMask)};else{if(!(e instanceof PE))return re();n={verify:nh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof rl)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof lo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof uo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof sl)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw re()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:qE(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:re()}(t,e.precondition)),n}function KE(t,e){return t&&t.length>0?(xe(e!==void 0),t.map(n=>function(s,i){let a=s.updateTime?dn(s.updateTime):dn(i);return a.isEqual(se.min())&&(a=dn(i)),new AE(a,s.transformResults||[])}(n,e))):[]}function QE(t,e){return{documents:[W0(t,e.path)]}}function YE(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=W0(t,s);const i=function(d){if(d.length!==0)return Y0(gn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(p=>function(v){return{field:Yr(v.field),direction:ZE(v.dir)}}(p))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=eh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function XE(t){let e=GE(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){xe(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(g){const v=Q0(g);return v instanceof gn&&S0(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(v=>function(A){return new nl(Xr(A.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(v))}(n.orderBy));let l=null;n.limit&&(l=function(g){let v;return v=typeof g=="object"?g.value:g,Sl(v)?null:v}(n.limit));let u=null;n.startAt&&(u=function(g){const v=!!g.before,S=g.values||[];return new tl(S,v)}(n.startAt));let d=null;return n.endAt&&(d=function(g){const v=!g.before,S=g.values||[];return new tl(S,v)}(n.endAt)),mE(e,s,a,i,l,"F",u,d)}function JE(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Q0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Xr(n.unaryFilter.field);return qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Xr(n.unaryFilter.field);return qe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Xr(n.unaryFilter.field);return qe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Xr(n.unaryFilter.field);return qe.create(a,"!=",{nullValue:"NULL_VALUE"});default:return re()}}(t):t.fieldFilter!==void 0?function(n){return qe.create(Xr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return re()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return gn.create(n.compositeFilter.filters.map(r=>Q0(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return re()}}(n.compositeFilter.op))}(t):re()}function ZE(t){return zE[t]}function eT(t){return UE[t]}function tT(t){return BE[t]}function Yr(t){return{fieldPath:t.canonicalString()}}function Xr(t){return et.fromServerFormat(t.fieldPath)}function Y0(t){return t instanceof qe?function(n){if(n.op==="=="){if(sm(n.value))return{unaryFilter:{field:Yr(n.field),op:"IS_NAN"}};if(rm(n.value))return{unaryFilter:{field:Yr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(sm(n.value))return{unaryFilter:{field:Yr(n.field),op:"IS_NOT_NAN"}};if(rm(n.value))return{unaryFilter:{field:Yr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yr(n.field),op:eT(n.op),value:n.value}}}(t):t instanceof gn?function(n){const r=n.getFilters().map(s=>Y0(s));return r.length===1?r[0]:{compositeFilter:{op:tT(n.op),filters:r}}}(t):re()}function nT(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function X0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,n,r,s,i=se.min(),a=se.min(),l=st.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Hn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Hn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e){this.ct=e}}function sT(t){const e=XE({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Zc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(){this.un=new oT}addToCollectionParentIndex(e,n){return this.un.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(ur.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(ur.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class oT{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new nt(be.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new nt(be.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new As(0)}static kn(){return new As(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(){this.changes=new Os(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Mi(r.mutation,s,Dt.empty(),He.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){const s=Sr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=xi();return i.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Sr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=jn();const a=Vi(),l=function(){return Vi()}();return n.forEach((u,d)=>{const p=r.get(d.key);s.has(d.key)&&(p===void 0||p.mutation instanceof mr)?i=i.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),Mi(p.mutation,d,p.mutation.getFieldMask(),He.now())):a.set(d.key,Dt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,p)=>a.set(d,p)),n.forEach((d,p)=>{var g;return l.set(d,new lT(p,(g=a.get(d))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Vi();let s=new Ve((a,l)=>a-l),i=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let p=r.get(u)||Dt.empty();p=l.applyToLocalView(d,p),r.set(u,p);const g=(s.get(l.batchId)||ce()).add(u);s=s.insert(l.batchId,g)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,p=u.value,g=D0();p.forEach(v=>{if(!i.has(v)){const S=z0(n.get(v),r.get(v));S!==null&&g.set(v,S),i=i.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,g))}return z.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return te.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):z.resolve(Sr());let l=-1,u=i;return a.next(d=>z.forEach(d,(p,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),i.get(p)?z.resolve():this.remoteDocumentCache.getEntry(e,p).next(v=>{u=u.insert(p,v)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ce())).next(p=>({batchId:l,changes:j0(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let s=xi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=xi();return this.indexManager.getCollectionParents(e,i).next(l=>z.forEach(l,u=>{const d=function(g,v){return new Cl(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(p=>{p.forEach((g,v)=>{a=a.insert(g,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,d)=>{const p=d.getKey();a.get(p)===null&&(a=a.insert(p,ft.newInvalidDocument(p)))});let l=xi();return a.forEach((u,d)=>{const p=i.get(u);p!==void 0&&Mi(p.mutation,d,Dt.empty(),He.now()),bl(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return z.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:dn(s.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:sT(s.bundledQuery),readTime:dn(s.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(){this.overlays=new Ve(te.comparator),this.Ir=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Sr();return z.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const s=Sr(),i=n.length+1,a=new te(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return z.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ve((d,p)=>d-p);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=i.get(d.largestBatchId);p===null&&(p=Sr(),i=i.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const l=Sr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,p)=>l.set(d,p)),!(l.size()>=s)););return z.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new DE(n,r));let i=this.Ir.get(n);i===void 0&&(i=ce(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(){this.sessionToken=st.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(){this.Tr=new nt(Ke.Er),this.dr=new nt(Ke.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ke(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ke(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new te(new be([])),r=new Ke(n,e),s=new Ke(n,e+1),i=[];return this.dr.forEachInRange([r,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new te(new be([])),r=new Ke(n,e),s=new Ke(n,e+1);let i=ce();return this.dr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new Ke(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ke{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return te.comparator(e.key,n.key)||ye(e.wr,n.wr)}static Ar(e,n){return ye(e.wr,n.wr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new nt(Ke.Er)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new jE(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.br=this.br.add(new Ke(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return z.resolve(a)}lookupMutationBatch(e,n){return z.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return z.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ke(n,0),s=new Ke(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],a=>{const l=this.Dr(a.wr);i.push(l)}),z.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new nt(ye);return n.forEach(s=>{const i=new Ke(s,0),a=new Ke(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],l=>{r=r.add(l.wr)})}),z.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;te.isDocumentKey(i)||(i=i.child(""));const a=new Ke(new te(i),0);let l=new nt(ye);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.wr)),!0)},a),z.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){xe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return z.forEach(n.mutations,s=>{const i=new Ke(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ke(n,0),s=this.br.firstAfterOrEqual(r);return z.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e){this.Mr=e,this.docs=function(){return new Ve(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():ft.newInvalidDocument(n))}getEntries(e,n){let r=jn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ft.newInvalidDocument(s))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=jn();const a=n.path,l=new te(a.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||Y2(Q2(p),r)<=0||(s.has(p.key)||bl(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return z.resolve(i)}getAllFromCollectionGroup(e,n,r,s){re()}Or(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new mT(this)}getSize(e){return z.resolve(this.size)}}class mT extends aT{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e){this.persistence=e,this.Nr=new Os(n=>pd(n),md),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.Lr=0,this.Br=new xd,this.targetCount=0,this.kr=As.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),z.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new As(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Kn(n),z.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),z.waitFor(i).next(()=>s)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),z.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e,n){this.qr={},this.overlays={},this.Qr=new cd(0),this.Kr=!1,this.Kr=!0,this.$r=new dT,this.referenceDelegate=e(this),this.Ur=new gT(this),this.indexManager=new iT,this.remoteDocumentCache=function(s){return new pT(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new rT(n),this.Gr=new cT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new hT,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new fT(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);const s=new vT(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return z.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class vT extends J2{constructor(e){super(),this.currentSequenceNumber=e}}class wd{constructor(e){this.persistence=e,this.Jr=new xd,this.Yr=null}static Zr(e){return new wd(e)}get Xr(){if(this.Yr)return this.Yr;throw re()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),z.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,r=>{const s=te.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,se.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return z.or([()=>z.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ce(),s=ce();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Ed(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return ww()?8:Z2(_w())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new _T;return this.Xi(e,n,a).next(l=>{if(i.result=l,this.zi)return this.es(e,n,a,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(pi()<=pe.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",Qr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(pi()<=pe.DEBUG&&Y("QueryEngine","Query:",Qr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(pi()<=pe.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",Qr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hn(n))):z.resolve())}Yi(e,n){if(lm(n))return z.resolve(null);let r=hn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Zc(n,null,"F"),r=hn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=ce(...i);return this.Ji.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,l);return this.ns(n,d,a,u.readTime)?this.Yi(e,Zc(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return lm(n)||s.isEqual(se.min())?z.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const a=this.ts(n,i);return this.ns(n,a,r,s)?z.resolve(null):(pi()<=pe.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Qr(n)),this.rs(e,a,n,K2(s,-1)).next(l=>l))})}ts(e,n){let r=new nt(R0(e));return n.forEach((s,i)=>{bl(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return pi()<=pe.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",Qr(n)),this.Ji.getDocumentsMatchingQuery(e,n,ur.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ve(ye),this._s=new Os(i=>pd(i),md),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uT(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function ET(t,e,n,r){return new wT(t,e,n,r)}async function J0(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let u=ce();for(const d of s){a.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}for(const d of i){l.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:a,addedBatchIds:l}))})})}function TT(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,p){const g=d.batch,v=g.keys();let S=z.resolve();return v.forEach(A=>{S=S.next(()=>p.getEntry(u,A)).next(b=>{const j=d.docVersions.get(A);xe(j!==null),b.version.compareTo(j)<0&&(g.applyToRemoteDocument(b,d),b.isValidDocument()&&(b.setReadTime(d.commitVersion),p.addEntry(b)))})}),S.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ce();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Z0(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function IT(t,e){const n=ie(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((p,g)=>{const v=s.get(g);if(!v)return;l.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,g)));let S=v.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?S=S.withResumeToken(st.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):p.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(p.resumeToken,r)),s=s.insert(g,S),function(b,j,I){return b.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(v,S,p)&&l.push(n.Ur.updateTargetData(i,S))});let u=jn(),d=ce();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),l.push(kT(i,a,e.documentUpdates).next(p=>{u=p.Ps,d=p.Is})),!r.isEqual(se.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(g=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(p)}return z.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function kT(t,e,n){let r=ce(),s=ce();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=jn();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(se.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):Y("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:a,Is:s}})}function ST(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function CT(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,z.resolve(s)):n.Ur.allocateTargetId(r).next(a=>(s=new Hn(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function sh(t,e,n){const r=ie(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!yo(a))throw a;Y("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function _m(t,e,n){const r=ie(t);let s=se.min(),i=ce();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,p){const g=ie(u),v=g._s.get(p);return v!==void 0?z.resolve(g.os.get(v)):g.Ur.getTargetData(d,p)}(r,a,hn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?s:se.min(),n?i:ce())).next(l=>(NT(r,vE(e),l),{documents:l,Ts:i})))}function NT(t,e,n){let r=t.us.get(e)||se.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class xm{constructor(){this.activeTargetIds=IE()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class AT{constructor(){this.so=new xm,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new xm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Y("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Y("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aa=null;function Fu(){return aa===null?aa=function(){return 268435456+Math.round(2147483648*Math.random())}():aa++,"0x"+aa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct="WebChannelConnection";class jT extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,a){const l=Fu(),u=this.xo(n,r.toUriEncodedString());Y("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,a),this.No(n,u,d,s).then(p=>(Y("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw ks("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",u,"request:",s),p})}Lo(n,r,s,i,a,l){return this.Mo(n,r,s,i,a)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ms}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>n[a]=i),s&&s.headers.forEach((i,a)=>n[a]=i)}xo(n,r){const s=RT[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Fu();return new Promise((a,l)=>{const u=new p0;u.setWithCredentials(!0),u.listenOnce(m0.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case wa.NO_ERROR:const p=u.getResponseJson();Y(ct,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),a(p);break;case wa.TIMEOUT:Y(ct,`RPC '${e}' ${i} timed out`),l(new J(F.DEADLINE_EXCEEDED,"Request time out"));break;case wa.HTTP_ERROR:const g=u.getStatus();if(Y(ct,`RPC '${e}' ${i} failed with status:`,g,"response text:",u.getResponseText()),g>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const S=v==null?void 0:v.error;if(S&&S.status&&S.message){const A=function(j){const I=j.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(I)>=0?I:F.UNKNOWN}(S.status);l(new J(A,S.message))}else l(new J(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new J(F.UNAVAILABLE,"Connection failed."));break;default:re()}}finally{Y(ct,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);Y(ct,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=Fu(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=v0(),l=y0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=i.join("");Y(ct,`Creating RPC '${e}' stream ${s}: ${p}`,u);const g=a.createWebChannel(p,u);let v=!1,S=!1;const A=new PT({Io:j=>{S?Y(ct,`Not sending because RPC '${e}' stream ${s} is closed:`,j):(v||(Y(ct,`Opening RPC '${e}' stream ${s} transport.`),g.open(),v=!0),Y(ct,`RPC '${e}' stream ${s} sending:`,j),g.send(j))},To:()=>g.close()}),b=(j,I,w)=>{j.listen(I,k=>{try{w(k)}catch(P){setTimeout(()=>{throw P},0)}})};return b(g,_i.EventType.OPEN,()=>{S||(Y(ct,`RPC '${e}' stream ${s} transport opened.`),A.yo())}),b(g,_i.EventType.CLOSE,()=>{S||(S=!0,Y(ct,`RPC '${e}' stream ${s} transport closed`),A.So())}),b(g,_i.EventType.ERROR,j=>{S||(S=!0,ks(ct,`RPC '${e}' stream ${s} transport errored:`,j),A.So(new J(F.UNAVAILABLE,"The operation could not be completed")))}),b(g,_i.EventType.MESSAGE,j=>{var I;if(!S){const w=j.data[0];xe(!!w);const k=w,P=k.error||((I=k[0])===null||I===void 0?void 0:I.error);if(P){Y(ct,`RPC '${e}' stream ${s} received error:`,P);const O=P.status;let M=function(T){const E=ze[T];if(E!==void 0)return B0(E)}(O),x=P.message;M===void 0&&(M=F.INTERNAL,x="Unknown error status: "+O+" with message "+P.message),S=!0,A.So(new J(M,x)),g.close()}else Y(ct,`RPC '${e}' stream ${s} received:`,w),A.bo(w)}}),b(l,g0.STAT_EVENT,j=>{j.stat===Kc.PROXY?Y(ct,`RPC '${e}' stream ${s} detected buffering proxy`):j.stat===Kc.NOPROXY&&Y(ct,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{A.wo()},0),A}}function zu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vl(t){return new $E(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Y("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e,n,r,s,i,a,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ev(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Pn(n.toString()),Pn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new J(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Y("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Y("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class DT extends tv{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=HE(this.serializer,e),r=function(i){if(!("targetChange"in i))return se.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?se.min():a.readTime?dn(a.readTime):se.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=rh(this.serializer),n.addTarget=function(i,a){let l;const u=a.target;if(l=Jc(u)?{documents:QE(i,u)}:{query:YE(i,u)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=G0(i,a.resumeToken);const d=eh(i,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(se.min())>0){l.readTime=il(i,a.snapshotVersion.toTimestamp());const d=eh(i,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=JE(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=rh(this.serializer),n.removeTarget=e,this.a_(n)}}class VT extends tv{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return xe(!!e.streamToken),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=KE(e.writeResults,e.commitTime),r=dn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=rh(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>WE(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new J(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,th(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new J(F.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Lo(e,th(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new J(F.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class OT{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Pn(n),this.D_=!1):Y("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{r.enqueueAndForget(async()=>{$r(this)&&(Y("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=ie(u);d.L_.add(4),await xo(d),d.q_.set("Unknown"),d.L_.delete(4),await Ml(d)}(this))})}),this.q_=new OT(r,s)}}async function Ml(t){if($r(t))for(const e of t.B_)await e(!0)}async function xo(t){for(const e of t.B_)await e(!1)}function nv(t,e){const n=ie(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Sd(n)?kd(n):Ls(n).r_()&&Id(n,e))}function Td(t,e){const n=ie(t),r=Ls(n);n.N_.delete(e),r.r_()&&rv(n,e),n.N_.size===0&&(r.r_()?r.o_():$r(n)&&n.q_.set("Unknown"))}function Id(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ls(t).A_(e)}function rv(t,e){t.Q_.xe(e),Ls(t).R_(e)}function kd(t){t.Q_=new FE({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ls(t).start(),t.q_.v_()}function Sd(t){return $r(t)&&!Ls(t).n_()&&t.N_.size>0}function $r(t){return ie(t).L_.size===0}function sv(t){t.Q_=void 0}async function FT(t){t.q_.set("Online")}async function zT(t){t.N_.forEach((e,n)=>{Id(t,e)})}async function UT(t,e){sv(t),Sd(t)?(t.q_.M_(e),kd(t)):t.q_.set("Unknown")}async function BT(t,e,n){if(t.q_.set("Online"),e instanceof q0&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){Y("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ol(t,r)}else if(e instanceof Ia?t.Q_.Ke(e):e instanceof $0?t.Q_.He(e):t.Q_.We(e),!n.isEqual(se.min()))try{const r=await Z0(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Q_.rt(a);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const p=i.N_.get(d);p&&i.N_.set(d,p.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,d)=>{const p=i.N_.get(u);if(!p)return;i.N_.set(u,p.withResumeToken(st.EMPTY_BYTE_STRING,p.snapshotVersion)),rv(i,u);const g=new Hn(p.target,u,d,p.sequenceNumber);Id(i,g)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Y("RemoteStore","Failed to raise snapshot:",r),await ol(t,r)}}async function ol(t,e,n){if(!yo(e))throw e;t.L_.add(1),await xo(t),t.q_.set("Offline"),n||(n=()=>Z0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Ml(t)})}function iv(t,e){return e().catch(n=>ol(t,n,e))}async function Ol(t){const e=ie(t),n=hr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;$T(e);)try{const s=await ST(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,qT(e,s)}catch(s){await ol(e,s)}ov(e)&&av(e)}function $T(t){return $r(t)&&t.O_.length<10}function qT(t,e){t.O_.push(e);const n=hr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function ov(t){return $r(t)&&!hr(t).n_()&&t.O_.length>0}function av(t){hr(t).start()}async function GT(t){hr(t).p_()}async function HT(t){const e=hr(t);for(const n of t.O_)e.m_(n.mutations)}async function WT(t,e,n){const r=t.O_.shift(),s=yd.from(r,e,n);await iv(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Ol(t)}async function KT(t,e){e&&hr(t).V_&&await async function(r,s){if(function(a){return ME(a)&&a!==F.ABORTED}(s.code)){const i=r.O_.shift();hr(r).s_(),await iv(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Ol(r)}}(t,e),ov(t)&&av(t)}async function Em(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),Y("RemoteStore","RemoteStore received new credentials");const r=$r(n);n.L_.add(3),await xo(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Ml(n)}async function QT(t,e){const n=ie(t);e?(n.L_.delete(2),await Ml(n)):e||(n.L_.add(2),await xo(n),n.q_.set("Unknown"))}function Ls(t){return t.K_||(t.K_=function(n,r,s){const i=ie(n);return i.w_(),new DT(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:FT.bind(null,t),Ro:zT.bind(null,t),mo:UT.bind(null,t),d_:BT.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Sd(t)?kd(t):t.q_.set("Unknown")):(await t.K_.stop(),sv(t))})),t.K_}function hr(t){return t.U_||(t.U_=function(n,r,s){const i=ie(n);return i.w_(),new VT(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:GT.bind(null,t),mo:KT.bind(null,t),f_:HT.bind(null,t),g_:WT.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Ol(t)):(await t.U_.stop(),t.O_.length>0&&(Y("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new Cd(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nd(t,e){if(Pn("AsyncQueue",`${e}: ${t}`),yo(t))return new J(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=xi(),this.sortedSet=new Ve(this.comparator)}static emptySet(e){return new ys(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ys)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ys;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(){this.W_=new Ve(te.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):re():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class bs{constructor(e,n,r,s,i,a,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new bs(e,n,ys.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Al(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class XT{constructor(){this.queries=Im(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ie(n),i=s.queries;s.queries=Im(),i.forEach((a,l)=>{for(const u of l.j_)u.onError(r)})})(this,new J(F.ABORTED,"Firestore shutting down"))}}function Im(){return new Os(t=>b0(t),Al)}async function lv(t,e){const n=ie(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new YT,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=Nd(a,`Initialization of query '${Qr(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Ad(n)}async function uv(t,e){const n=ie(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function JT(t,e){const n=ie(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.j_)l.X_(s)&&(r=!0);a.z_=s}}r&&Ad(n)}function ZT(t,e,n){const r=ie(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Ad(t){t.Y_.forEach(e=>{e.next()})}var ih,km;(km=ih||(ih={})).ea="default",km.Cache="cache";class cv{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new bs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=bs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ih.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e){this.key=e}}class dv{constructor(e){this.key=e}}class eI{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ce(),this.mutatedKeys=ce(),this.Aa=R0(e),this.Ra=new ys(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Tm,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,g)=>{const v=s.get(p),S=bl(this.query,g)?g:null,A=!!v&&this.mutatedKeys.has(v.key),b=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let j=!1;v&&S?v.data.isEqual(S.data)?A!==b&&(r.track({type:3,doc:S}),j=!0):this.ga(v,S)||(r.track({type:2,doc:S}),j=!0,(u&&this.Aa(S,u)>0||d&&this.Aa(S,d)<0)&&(l=!0)):!v&&S?(r.track({type:0,doc:S}),j=!0):v&&!S&&(r.track({type:1,doc:v}),j=!0,(u||d)&&(l=!0)),j&&(S?(a=a.add(S),i=b?i.add(p):i.delete(p)):(a=a.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:a,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((p,g)=>function(S,A){const b=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re()}};return b(S)-b(A)}(p.type,g.type)||this.Aa(p.doc,g.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,a.length!==0||d?{snapshot:new bs(this.query,e.Ra,i,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Tm,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ce(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new dv(r))}),this.da.forEach(r=>{e.has(r)||n.push(new hv(r))}),n}ba(e){this.Ta=e.Ts,this.da=ce();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return bs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class tI{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class nI{constructor(e){this.key=e,this.va=!1}}class rI{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Os(l=>b0(l),Al),this.Ma=new Map,this.xa=new Set,this.Oa=new Ve(te.comparator),this.Na=new Map,this.La=new xd,this.Ba={},this.ka=new Map,this.qa=As.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function sI(t,e,n=!0){const r=vv(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await fv(r,e,n,!0),s}async function iI(t,e){const n=vv(t);await fv(n,e,!0,!1)}async function fv(t,e,n,r){const s=await CT(t.localStore,hn(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await oI(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&nv(t.remoteStore,s),l}async function oI(t,e,n,r,s){t.Ka=(g,v,S)=>async function(b,j,I,w){let k=j.view.ma(I);k.ns&&(k=await _m(b.localStore,j.query,!1).then(({documents:x})=>j.view.ma(x,k)));const P=w&&w.targetChanges.get(j.targetId),O=w&&w.targetMismatches.get(j.targetId)!=null,M=j.view.applyChanges(k,b.isPrimaryClient,P,O);return Cm(b,j.targetId,M.wa),M.snapshot}(t,g,v,S);const i=await _m(t.localStore,e,!0),a=new eI(e,i.Ts),l=a.ma(i.documents),u=_o.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(l,t.isPrimaryClient,u);Cm(t,n,d.wa);const p=new tI(e,n,a);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function aI(t,e,n){const r=ie(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(a=>!Al(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await sh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Td(r.remoteStore,s.targetId),oh(r,s.targetId)}).catch(go)):(oh(r,s.targetId),await sh(r.localStore,s.targetId,!0))}async function lI(t,e){const n=ie(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Td(n.remoteStore,r.targetId))}async function uI(t,e,n){const r=gI(t);try{const s=await function(a,l){const u=ie(a),d=He.now(),p=l.reduce((S,A)=>S.add(A.key),ce());let g,v;return u.persistence.runTransaction("Locally write mutations","readwrite",S=>{let A=jn(),b=ce();return u.cs.getEntries(S,p).next(j=>{A=j,A.forEach((I,w)=>{w.isValidDocument()||(b=b.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(S,A)).next(j=>{g=j;const I=[];for(const w of l){const k=RE(w,g.get(w.key).overlayedDocument);k!=null&&I.push(new mr(w.key,k,T0(k.value.mapValue),Mt.exists(!0)))}return u.mutationQueue.addMutationBatch(S,d,I,l)}).next(j=>{v=j;const I=j.applyToLocalDocumentSet(g,b);return u.documentOverlayCache.saveOverlays(S,j.batchId,I)})}).then(()=>({batchId:v.batchId,changes:j0(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let d=a.Ba[a.currentUser.toKey()];d||(d=new Ve(ye)),d=d.insert(l,u),a.Ba[a.currentUser.toKey()]=d}(r,s.batchId,n),await wo(r,s.changes),await Ol(r.remoteStore)}catch(s){const i=Nd(s,"Failed to persist write");n.reject(i)}}async function pv(t,e){const n=ie(t);try{const r=await IT(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Na.get(i);a&&(xe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?xe(a.va):s.removedDocuments.size>0&&(xe(a.va),a.va=!1))}),await wo(n,r,e)}catch(r){await go(r)}}function Sm(t,e,n){const r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,a)=>{const l=a.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=ie(a);u.onlineState=l;let d=!1;u.queries.forEach((p,g)=>{for(const v of g.j_)v.Z_(l)&&(d=!0)}),d&&Ad(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function cI(t,e,n){const r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let a=new Ve(te.comparator);a=a.insert(i,ft.newNoDocument(i,se.min()));const l=ce().add(i),u=new Dl(se.min(),new Map,new Ve(ye),a,l);await pv(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),bd(r)}else await sh(r.localStore,e,!1).then(()=>oh(r,e,n)).catch(go)}async function hI(t,e){const n=ie(t),r=e.batch.batchId;try{const s=await TT(n.localStore,e);gv(n,r,null),mv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await wo(n,s)}catch(s){await go(s)}}async function dI(t,e,n){const r=ie(t);try{const s=await function(a,l){const u=ie(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return u.mutationQueue.lookupMutationBatch(d,l).next(g=>(xe(g!==null),p=g.keys(),u.mutationQueue.removeMutationBatch(d,g))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,p,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>u.localDocuments.getDocuments(d,p))})}(r.localStore,e);gv(r,e,n),mv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await wo(r,s)}catch(s){await go(s)}}function mv(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function gv(t,e,n){const r=ie(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function oh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||yv(t,r)})}function yv(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Td(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),bd(t))}function Cm(t,e,n){for(const r of n)r instanceof hv?(t.La.addReference(r.key,e),fI(t,r)):r instanceof dv?(Y("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||yv(t,r.key)):re()}function fI(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Y("SyncEngine","New document in limbo: "+n),t.xa.add(r),bd(t))}function bd(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new te(be.fromString(e)),r=t.qa.next();t.Na.set(r,new nI(n)),t.Oa=t.Oa.insert(n,r),nv(t.remoteStore,new Hn(hn(Nl(n.path)),r,"TargetPurposeLimboResolution",cd.oe))}}async function wo(t,e,n){const r=ie(t),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{a.push(r.Ka(u,e,n).then(d=>{var p;if((d||n)&&r.isPrimaryClient){const g=d?!d.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(d){s.push(d);const g=Ed.Wi(u.targetId,d);i.push(g)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(u,d){const p=ie(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>z.forEach(d,v=>z.forEach(v.$i,S=>p.persistence.referenceDelegate.addReference(g,v.targetId,S)).next(()=>z.forEach(v.Ui,S=>p.persistence.referenceDelegate.removeReference(g,v.targetId,S)))))}catch(g){if(!yo(g))throw g;Y("LocalStore","Failed to update sequence numbers: "+g)}for(const g of d){const v=g.targetId;if(!g.fromCache){const S=p.os.get(v),A=S.snapshotVersion,b=S.withLastLimboFreeSnapshotVersion(A);p.os=p.os.insert(v,b)}}}(r.localStore,i))}async function pI(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){Y("SyncEngine","User change. New user:",e.toKey());const r=await J0(n.localStore,e);n.currentUser=e,function(i,a){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new J(F.CANCELLED,a))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await wo(n,r.hs)}}function mI(t,e){const n=ie(t),r=n.Na.get(e);if(r&&r.va)return ce().add(r.key);{let s=ce();const i=n.Ma.get(e);if(!i)return s;for(const a of i){const l=n.Fa.get(a);s=s.unionWith(l.view.Va)}return s}}function vv(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=pv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cI.bind(null,e),e.Ca.d_=JT.bind(null,e.eventManager),e.Ca.$a=ZT.bind(null,e.eventManager),e}function gI(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dI.bind(null,e),e}class al{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vl(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return ET(this.persistence,new xT,e.initialUser,this.serializer)}Ga(e){return new yT(wd.Zr,this.serializer)}Wa(e){return new AT}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}al.provider={build:()=>new al};class ah{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Sm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=pI.bind(null,this.syncEngine),await QT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new XT}()}createDatastore(e){const n=Vl(e.databaseInfo.databaseId),r=function(i){return new jT(i)}(e.databaseInfo);return function(i,a,l,u){return new MT(i,a,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new LT(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Sm(this.syncEngine,n,0),function(){return wm.D()?new wm:new bT}())}createSyncEngine(e,n){return function(s,i,a,l,u,d,p){const g=new rI(s,i,a,l,u,d);return p&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ie(s);Y("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await xo(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ah.provider={build:()=>new ah};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Pn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ht.UNAUTHENTICATED,this.clientId=x0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{Y("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Y("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Nd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Uu(t,e){t.asyncQueue.verifyOperationInProgress(),Y("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await J0(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Nm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await vI(t);Y("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Em(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Em(e.remoteStore,s)),t._onlineComponents=e}async function vI(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y("FirestoreClient","Using user provided OfflineComponentProvider");try{await Uu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ks("Error using user provided cache. Falling back to memory cache: "+n),await Uu(t,new al)}}else Y("FirestoreClient","Using default OfflineComponentProvider"),await Uu(t,new al);return t._offlineComponents}async function xv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y("FirestoreClient","Using user provided OnlineComponentProvider"),await Nm(t,t._uninitializedComponentsProvider._online)):(Y("FirestoreClient","Using default OnlineComponentProvider"),await Nm(t,new ah))),t._onlineComponents}function _I(t){return xv(t).then(e=>e.syncEngine)}async function lh(t){const e=await xv(t),n=e.eventManager;return n.onListen=sI.bind(null,e.syncEngine),n.onUnlisten=aI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=iI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=lI.bind(null,e.syncEngine),n}function xI(t,e,n={}){const r=new ir;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,u,d){const p=new _v({next:v=>{p.Za(),a.enqueueAndForget(()=>uv(i,g));const S=v.docs.has(l);!S&&v.fromCache?d.reject(new J(F.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&v.fromCache&&u&&u.source==="server"?d.reject(new J(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),g=new cv(Nl(l.path),p,{includeMetadataChanges:!0,_a:!0});return lv(i,g)}(await lh(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(t,e,n){if(!n)throw new J(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function wI(t,e,n,r){if(e===!0&&r===!0)throw new J(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function bm(t){if(!te.isDocumentKey(t))throw new J(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Rm(t){if(te.isDocumentKey(t))throw new J(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Rd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re()}function fn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Rd(t);throw new J(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new J(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new J(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wv((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new J(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new J(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new J(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ll{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pm(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new F2;switch(r.type){case"firstParty":return new $2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Am.get(n);r&&(Y("ComponentProvider","Removing Datastore"),Am.delete(n),r.terminate())}(this),Promise.resolve()}}function EI(t,e,n,r={}){var s;const i=(t=fn(t,Ll))._getSettings(),a=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&ks("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=ht.MOCK_USER;else{l=vw(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new J(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ht(d)}t._authCredentials=new z2(new _0(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Fl(this.firestore,e,this._query)}}class Nt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new or(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}}class or extends Fl{constructor(e,n,r){super(e,n,Nl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new te(e))}withConverter(e){return new or(this.firestore,e,this._path)}}function Bu(t,e,...n){if(t=pn(t),Ev("collection","path",e),t instanceof Ll){const r=be.fromString(e,...n);return Rm(r),new or(t,null,r)}{if(!(t instanceof Nt||t instanceof or))throw new J(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(be.fromString(e,...n));return Rm(r),new or(t.firestore,null,r)}}function sn(t,e,...n){if(t=pn(t),arguments.length===1&&(e=x0.newId()),Ev("doc","path",e),t instanceof Ll){const r=be.fromString(e,...n);return bm(r),new Nt(t,null,new te(r))}{if(!(t instanceof Nt||t instanceof or))throw new J(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(be.fromString(e,...n));return bm(r),new Nt(t.firestore,t instanceof or?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ev(this,"async_queue_retry"),this.Vu=()=>{const r=zu();r&&Y("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=zu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=zu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new ir;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!yo(e))throw e;Y("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(r);throw Pn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Cd.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&re()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Dm(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Fr extends Ll{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new jm,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jm(e),this._firestoreClient=void 0,await e}}}function TI(t,e){const n=typeof t=="object"?t:c0(),r=typeof t=="string"?t:"(default)",s=T2(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=gw("firestore");i&&EI(s,...i)}return s}function zl(t){if(t._terminated)throw new J(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||II(t),t._firestoreClient}function II(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,d,p){return new nE(l,u,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,wv(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new yI(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rs(st.fromBase64String(e))}catch(n){throw new J(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Rs(st.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new J(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI=/^__.*__$/;class SI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new mr(e,this.data,this.fieldMask,n,this.fieldTransforms):new vo(e,this.data,n,this.fieldTransforms)}}class Tv{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new mr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Iv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re()}}class Vd{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Vd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ll(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Iv(this.Cu)&&kI.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class CI{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Vl(e)}Qu(e,n,r,s=!1){return new Vd({Cu:e,methodName:n,qu:r,path:et.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kv(t){const e=t._freezeSettings(),n=Vl(t._databaseId);return new CI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Sv(t,e,n,r,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Md("Data must be an object, but it was:",a,r);const l=Cv(r,a);let u,d;if(i.merge)u=new Dt(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const p=[];for(const g of i.mergeFields){const v=uh(e,g,n);if(!a.contains(v))throw new J(F.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);Av(p,v)||p.push(v)}u=new Dt(p),d=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,d=a.fieldTransforms;return new SI(new Tt(l),u,d)}class Bl extends Pd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bl}}function NI(t,e,n,r){const s=t.Qu(1,e,n);Md("Data must be an object, but it was:",s,r);const i=[],a=Tt.empty();Br(r,(u,d)=>{const p=Od(e,u,n);d=pn(d);const g=s.Nu(p);if(d instanceof Bl)i.push(p);else{const v=$l(d,g);v!=null&&(i.push(p),a.set(p,v))}});const l=new Dt(i);return new Tv(a,l,s.fieldTransforms)}function AI(t,e,n,r,s,i){const a=t.Qu(1,e,n),l=[uh(e,r,n)],u=[s];if(i.length%2!=0)throw new J(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<i.length;v+=2)l.push(uh(e,i[v])),u.push(i[v+1]);const d=[],p=Tt.empty();for(let v=l.length-1;v>=0;--v)if(!Av(d,l[v])){const S=l[v];let A=u[v];A=pn(A);const b=a.Nu(S);if(A instanceof Bl)d.push(S);else{const j=$l(A,b);j!=null&&(d.push(S),p.set(S,j))}}const g=new Dt(d);return new Tv(p,g,a.fieldTransforms)}function $l(t,e){if(Nv(t=pn(t)))return Md("Unsupported field value:",e,t),Cv(t,e);if(t instanceof Pd)return function(r,s){if(!Iv(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let u=$l(l,s.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=pn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return kE(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=He.fromDate(r);return{timestampValue:il(s.serializer,i)}}if(r instanceof He){const i=new He(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:il(s.serializer,i)}}if(r instanceof jd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rs)return{bytesValue:G0(s.serializer,r._byteString)};if(r instanceof Nt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:_d(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Dd)return function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return gd(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Rd(r)}`)}(t,e)}function Cv(t,e){const n={};return w0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Br(t,(r,s)=>{const i=$l(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Nv(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof He||t instanceof jd||t instanceof Rs||t instanceof Nt||t instanceof Pd||t instanceof Dd)}function Md(t,e,n){if(!Nv(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Rd(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function uh(t,e,n){if((e=pn(e))instanceof Ul)return e._internalPath;if(typeof e=="string")return Od(t,e);throw ll("Field path arguments must be of type string or ",t,!1,void 0,n)}const bI=new RegExp("[~\\*/\\[\\]]");function Od(t,e,n){if(e.search(bI)>=0)throw ll(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ul(...e.split("."))._internalPath}catch{throw ll(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ll(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new J(F.INVALID_ARGUMENT,l+t+u)}function Av(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new RI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Rv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class RI extends bv{data(){return super.data()}}function Rv(t,e){return typeof e=="string"?Od(t,e):e instanceof Ul?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new J(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jI{convertValue(e,n="none"){switch(Lr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Or(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw re()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Br(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>Le(a.doubleValue));return new Dd(i)}convertGeoPoint(e){return new jd(Le(e.latitude),Le(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=dd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(io(e));default:return null}}convertTimestamp(e){const n=cr(e);return new He(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=be.fromString(e);xe(X0(r));const s=new oo(r.get(1),r.get(3)),i=new te(r.popFirst(5));return s.isEqual(n)||Pn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jv extends bv{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ka(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Rv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ka extends jv{data(e={}){return super.data(e)}}class DI{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ei(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ka(this._firestore,this._userDataWriter,r.key,r,new Ei(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new ka(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ei(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new ka(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ei(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,p=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),p=a.indexOf(l.doc.key)),{type:VI(l.type),doc:u,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function VI(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(t){t=fn(t,Nt);const e=fn(t.firestore,Fr);return xI(zl(e),t._key).then(n=>Vv(e,t,n))}class Dv extends jI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}}function qu(t,e,n){t=fn(t,Nt);const r=fn(t.firestore,Fr),s=Pv(t.converter,e,n);return Ld(r,[Sv(kv(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Mt.none())])}function MI(t){return Ld(fn(t.firestore,Fr),[new jl(t._key,Mt.none())])}function la(t,...e){var n,r,s;t=pn(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Dm(e[a])||(i=e[a],a++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Dm(e[a])){const g=e[a];e[a]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[a+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[a+2]=(s=g.complete)===null||s===void 0?void 0:s.bind(g)}let u,d,p;if(t instanceof Nt)d=fn(t.firestore,Fr),p=Nl(t._key.path),u={next:g=>{e[a]&&e[a](Vv(d,t,g))},error:e[a+1],complete:e[a+2]};else{const g=fn(t,Fl);d=fn(g.firestore,Fr),p=g._query;const v=new Dv(d);u={next:S=>{e[a]&&e[a](new DI(d,v,g,S))},error:e[a+1],complete:e[a+2]},PI(t._query)}return function(v,S,A,b){const j=new _v(b),I=new cv(S,j,A);return v.asyncQueue.enqueueAndForget(async()=>lv(await lh(v),I)),()=>{j.Za(),v.asyncQueue.enqueueAndForget(async()=>uv(await lh(v),I))}}(zl(d),p,l,u)}function Ld(t,e){return function(r,s){const i=new ir;return r.asyncQueue.enqueueAndForget(async()=>uI(await _I(r),s,i)),i.promise}(zl(t),e)}function Vv(t,e,n){const r=n.docs.get(e._key),s=new Dv(t);return new jv(t,s,e._key,r,new Ei(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=kv(e)}set(e,n,r){this._verifyNotCommitted();const s=Gu(e,this._firestore),i=Pv(s.converter,n,r),a=Sv(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(a.toMutation(s._key,Mt.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Gu(e,this._firestore);let a;return a=typeof(n=pn(n))=="string"||n instanceof Ul?AI(this._dataReader,"WriteBatch.update",i._key,n,r,s):NI(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(a.toMutation(i._key,Mt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Gu(e,this._firestore);return this._mutations=this._mutations.concat(new jl(n._key,Mt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new J(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Gu(t,e){if((t=pn(t)).firestore!==e)throw new J(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(t){return zl(t=fn(t,Fr)),new OI(t,e=>Ld(t,e))}(function(e,n=!0){(function(s){Ms=s})(S2),Za(new to("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new Fr(new U2(r.getProvider("auth-internal")),new G2(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new J(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oo(d.options.projectId,p)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),gs(Jp,"4.7.3",e),gs(Jp,"4.7.3","esm2017")})();const ne={ITINERARY:"trip_itinerary",BOOKINGS:"trip_bookings",GUIDES:"trip_guides",PACKING:"trip_packing_list",MEMO:"trip_memo_list",WISH:"trip_wish_list",PHOTOS:"trip_photos",FIREBASE_CONFIG:"trip_firebase_config"},on="tokyo_trip_2025_shared",FI="tokyo_trip_2025_bookings",zI="tokyo_trip_2025_photos",UI="tokyo_trip_2025_guides_",BI=["1217","1218","1219","1220","1221","1222","misc"],ql=async t=>new Promise(e=>{const n=new Image;n.src=t,n.onload=()=>{const r=document.createElement("canvas");let s=n.width,i=n.height;const a=1280;s>i?s>a&&(i*=a/s,s=a):i>a&&(s*=a/i,i=a),r.width=s,r.height=i;const l=r.getContext("2d");l==null||l.drawImage(n,0,0,s,i),e(r.toDataURL("image/jpeg",.8))},n.onerror=()=>{e(t)}}),Mv=U.createContext(void 0),$I=({children:t})=>{const[e,n]=U.useState(!0),[r,s]=U.useState(null),[i,a]=U.useState(!1),[l,u]=U.useState(null),[d,p]=U.useState("disconnected"),g=U.useRef(null),v=U.useRef(null),S=U.useRef(null),A=U.useRef(!1),[b,j]=U.useState(zx),[I,w]=U.useState(Fx),[k,P]=U.useState(Qy),[O,M]=U.useState(Ux.map(L=>({id:L,text:L,checked:!1}))),[x,y]=U.useState([]),[T,E]=U.useState([]),[C,N]=U.useState({}),_=L=>JSON.parse(JSON.stringify(L,(B,G)=>G===void 0?null:G)),X=async L=>{console.log("Checking for legacy data migration...");const B=LI(L);let G=!1;try{const ee=sn(L,"trips",FI),we=await $u(ee);if(we.exists()){const Be=we.data();Be.bookings&&Array.isArray(Be.bookings)&&Be.bookings.length>0&&(console.log(`Migrating ${Be.bookings.length} bookings...`),Be.bookings.forEach(We=>{const At=sn(L,"trips",on,"bookings",We.id);B.set(At,We)}),B.delete(ee),G=!0)}}catch(ee){console.warn("Booking migration check failed",ee)}for(const ee of BI)try{const we=sn(L,"trips",`${UI}${ee}`),Be=await $u(we);if(Be.exists()){const We=Be.data();We.guideSpots&&Array.isArray(We.guideSpots)&&We.guideSpots.length>0&&(console.log(`Migrating guides from bucket ${ee}...`),We.guideSpots.forEach(At=>{const Ht=sn(L,"trips",on,"guides",At.id);B.set(Ht,At)}),B.delete(we),G=!0)}}catch(we){console.warn(`Guide bucket ${ee} migration check failed`,we)}try{const ee=sn(L,"trips",zI),we=await $u(ee);if(we.exists()){const Be=we.data();Be.photos&&(console.log("Migrating photos..."),Object.entries(Be.photos).forEach(([We,At])=>{const Ht=sn(L,"trips",on,"memories",We);B.set(Ht,{id:We,data:At})}),B.delete(ee),G=!0)}}catch(ee){console.warn("Photo migration check failed",ee)}G?(await B.commit(),console.log("Migration completed successfully.")):console.log("No migration needed.")},he=L=>{console.error("Firebase Error:",L),L.code==="resource-exhausted"?s(""):L.code==="permission-denied"?s(""):s(`: ${L.message}`),p("error")},q=async L=>{if(!(d==="connected"||d==="connecting")){p("connecting"),console.log("Starting Firebase connection (Sub-collection Mode)...");try{let B;try{C2().length===0?B=u0(L):B=c0(),g.current=B}catch(wt){throw new Error(`: ${wt.message}`)}const G=TI(B);v.current=G,await X(G);const ee=[],we=sn(G,"trips",on),Be=la(we,wt=>{if(A.current){A.current=!1;return}if(wt.exists()){const Re=wt.data();Re.itinerary&&j(Re.itinerary),Re.packingList&&M(Re.packingList),Re.memoList&&y(Re.memoList),Re.wishList&&E(Re.wishList),s(null)}else qu(we,{itinerary:_(b),packingList:O,memoList:x,wishList:T},{merge:!0}).catch(console.error);p("connected"),a(!0),u(L),localStorage.setItem(ne.FIREBASE_CONFIG,JSON.stringify(L))},he);ee.push(Be);const We=Bu(G,"trips",on,"guides"),At=la(We,wt=>{const Re=[];wt.forEach(bt=>{Re.push(bt.data())}),Re.sort((bt,Wt)=>bt.date!==Wt.date?(bt.date||"").localeCompare(Wt.date||""):bt.id.localeCompare(Wt.id)),P(Re),localStorage.setItem(ne.GUIDES,JSON.stringify(Re))},he);ee.push(At);const Ht=Bu(G,"trips",on,"bookings"),Io=la(Ht,wt=>{const Re=[];wt.forEach(bt=>{Re.push(bt.data())}),w(Re),localStorage.setItem(ne.BOOKINGS,JSON.stringify(Re))},he);ee.push(Io);const ko=Bu(G,"trips",on,"memories"),Ws=la(ko,wt=>{const Re={};wt.forEach(bt=>{const Wt=bt.data();Wt.id&&Wt.data&&(Re[Wt.id]=Wt.data)}),N(Re),localStorage.setItem(ne.PHOTOS,JSON.stringify(Re))},he);ee.push(Ws),S.current=()=>{ee.forEach(wt=>wt())}}catch(B){console.error("Firebase Connection Exception:",B),p("error"),s(`: ${B.message}`)}}},ue=()=>{S.current&&(S.current(),S.current=null),p("disconnected"),a(!1)},V=async(L,B,G)=>{if(!(!i||!v.current))try{const ee=sn(v.current,"trips",on,L,B);await qu(ee,_(G))}catch(ee){console.error(`Save to ${L} failed:`,ee),ee.code==="resource-exhausted"&&s("")}},H=async(L,B)=>{if(!(!i||!v.current))try{const G=sn(v.current,"trips",on,L,B);await MI(G)}catch(G){console.error(`Delete from ${L} failed:`,G)}},Q=async(L,B)=>{if(!(!i||!v.current))try{A.current=!0;const G=sn(v.current,"trips",on);await qu(G,{[L]:_(B)},{merge:!0})}catch(G){A.current=!1,console.error(`Save main doc ${L} failed:`,G)}},de=L=>{j(L),localStorage.setItem(ne.ITINERARY,JSON.stringify(L)),Q("itinerary",L)},ve=(L,B)=>{const G=[...b];G[L]={...G[L],items:B},de(G)},Te=L=>{w(L),localStorage.setItem(ne.BOOKINGS,JSON.stringify(L))},Z=L=>{const B=[...I,L];w(B),localStorage.setItem(ne.BOOKINGS,JSON.stringify(B)),V("bookings",L.id,L)},Ne=L=>{const B=I.filter(G=>G.id!==L);w(B),localStorage.setItem(ne.BOOKINGS,JSON.stringify(B)),H("bookings",L)},it=(L,B)=>{const G=I.map(we=>we.id===L?{...we,imageUrl:B}:we);w(G),localStorage.setItem(ne.BOOKINGS,JSON.stringify(G));const ee=G.find(we=>we.id===L);ee&&V("bookings",ee.id,ee)},xt=L=>{const B=[...k,L];P(B),localStorage.setItem(ne.GUIDES,JSON.stringify(B)),V("guides",L.id,L)},zs=L=>{const B=k.filter(G=>G.id!==L);P(B),localStorage.setItem(ne.GUIDES,JSON.stringify(B)),H("guides",L)},Us=L=>{const B=k.map(G=>G.id===L.id?L:G);P(B),localStorage.setItem(ne.GUIDES,JSON.stringify(B)),V("guides",L.id,L)},nn=L=>{M(L),localStorage.setItem(ne.PACKING,JSON.stringify(L)),Q("packingList",L)},yn=L=>{const B=O.map(G=>G.id===L?{...G,checked:!G.checked}:G);nn(B)},vn=L=>{y(L),localStorage.setItem(ne.MEMO,JSON.stringify(L)),Q("memoList",L)},Bs=L=>{const B=[...x,L];vn(B)},$s=L=>{const B=x.filter(G=>G.id!==L);vn(B)},qs=L=>{const B=x.map(G=>G.id===L?{...G,checked:!G.checked}:G);vn(B)},Vn=L=>{E(L),localStorage.setItem(ne.WISH,JSON.stringify(L)),Q("wishList",L)},Gl=L=>{const B=[...T,L];Vn(B)},Hl=L=>{const B=T.filter(G=>G.id!==L);Vn(B)},Eo=L=>{const B=T.map(G=>G.id===L?{...G,checked:!G.checked}:G);Vn(B)},Gs=(L,B)=>{const G={...C,[L]:B};N(G),localStorage.setItem(ne.PHOTOS,JSON.stringify(G)),V("memories",L,{id:L,data:B})},To=L=>{const B={...C};delete B[L],N(B),localStorage.setItem(ne.PHOTOS,JSON.stringify(B)),H("memories",L)},Wl=()=>{const L={[ne.ITINERARY]:b,[ne.BOOKINGS]:I,[ne.GUIDES]:k,[ne.PACKING]:O,[ne.MEMO]:x,[ne.WISH]:T,[ne.PHOTOS]:C},B=new Blob([JSON.stringify(L)],{type:"application/json"}),G=URL.createObjectURL(B),ee=document.createElement("a");ee.href=G,ee.download=`tokyo_trip_backup_${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(ee),ee.click(),document.body.removeChild(ee),URL.revokeObjectURL(G)},Hs=L=>{try{const B=JSON.parse(L);return B[ne.ITINERARY]&&de(B[ne.ITINERARY]),B[ne.BOOKINGS]&&w(B[ne.BOOKINGS]),B[ne.GUIDES]&&P(B[ne.GUIDES]),B[ne.PHOTOS]&&N(B[ne.PHOTOS]),B[ne.PACKING]&&nn(B[ne.PACKING]),B[ne.MEMO]&&vn(B[ne.MEMO]),B[ne.WISH]&&Vn(B[ne.WISH]),Object.keys(B).forEach(G=>{localStorage.setItem(G,JSON.stringify(B[G]))}),!0}catch(B){return console.error("Import Error:",B),!1}};return U.useEffect(()=>{(async()=>{try{const B=localStorage.getItem(ne.ITINERARY);B&&j(JSON.parse(B));const G=localStorage.getItem(ne.BOOKINGS);G&&w(JSON.parse(G));const ee=localStorage.getItem(ne.GUIDES);ee&&P(JSON.parse(ee));const we=localStorage.getItem(ne.PACKING);we&&M(JSON.parse(we));const Be=localStorage.getItem(ne.MEMO);Be&&y(JSON.parse(Be));const We=localStorage.getItem(ne.WISH);We&&E(JSON.parse(We));const At=localStorage.getItem(ne.PHOTOS);At&&N(JSON.parse(At))}catch(B){console.error("Failed to load local data",B)}if(Tn.apiKey&&!Tn.apiKey.includes(""))await q(Tn);else{const B=localStorage.getItem(ne.FIREBASE_CONFIG);if(B)try{await q(JSON.parse(B))}catch{}}n(!1)})()},[]),c.jsx(Mv.Provider,{value:{itinerary:b,setItinerary:de,updateItineraryItem:ve,bookings:I,setBookings:Te,addBooking:Z,deleteBooking:Ne,updateBookingPhoto:it,guideSpots:k,addGuideSpot:xt,deleteGuideSpot:zs,updateGuideSpot:Us,packingList:O,setPackingList:nn,togglePackingItem:yn,memoList:x,setMemoList:vn,addMemoItem:Bs,deleteMemoItem:$s,toggleMemoItem:qs,wishList:T,setWishList:Vn,addWishItem:Gl,deleteWishItem:Hl,toggleWishItem:Eo,photos:C,uploadPhoto:Gs,removePhoto:To,exportData:Wl,importData:Hs,isLoading:e,error:r,isCloudMode:i,cloudConfig:l,connectToCloud:q,disconnectCloud:ue,connectionStatus:d},children:t})},Fs=()=>{const t=U.useContext(Mv);if(t===void 0)throw new Error("useTripContext must be used within a TripProvider");return t},qI="0000",GI=t=>{switch(t){case"flight":return c.jsx(Pi,{size:16});case"transport":return c.jsx(iw,{size:16});case"food":return c.jsx(t0,{size:16});case"hotel":return c.jsx(Fc,{size:16});case"important":return c.jsx(Yy,{size:16});case"activity":return c.jsx(Vr,{size:16});default:return c.jsx(Qx,{size:16})}},HI=(t,e=24,n="")=>{switch(t){case"sunny":return c.jsx(sw,{size:e,className:`text-orange-400 ${n}`});case"rainy":return c.jsx(Kx,{size:e,className:`text-blue-400 ${n}`});default:return c.jsx(Xa,{size:e,className:`text-gray-400 ${n}`})}},WI=t=>{switch(t){case"sunny":return"";case"rainy":return"";case"cloudy":return"";default:return""}},Vm=t=>{switch(t){case"flight":return"border-pink-300 bg-pink-50";case"hotel":return"border-blue-200 bg-blue-50";case"food":return"border-yellow-300 bg-yellow-50";default:return"border-stone-200 bg-white"}},KI=()=>{const[t,e]=U.useState({days:0,hours:0}),n=new Date("2025-12-17T00:00:00");U.useEffect(()=>{const s=()=>{const a=new Date,l=n.getTime()-a.getTime();if(l>0){const u=Math.floor(l/864e5),d=Math.floor(l/(1e3*60*60)%24);e({days:u,hours:d})}else e({days:0,hours:0})};s();const i=setInterval(s,6e4);return()=>clearInterval(i)},[]);const r=new Date>=n;return c.jsxs("div",{className:"mx-4 mb-6 bg-stone-800 rounded-3xl p-6 text-white shadow-lg relative overflow-hidden",children:[c.jsxs("div",{className:"relative z-10 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-stone-400 font-bold uppercase tracking-widest mb-1",children:r?"":""}),c.jsx("div",{className:"text-2xl font-bold",children:r?"":""})]}),c.jsx("div",{className:"text-right",children:r?c.jsx("div",{className:"p-2 bg-muji-highlight rounded-full",children:c.jsx(Pi,{size:24,className:"text-white"})}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-4xl font-mono font-bold text-muji-highlight",children:t.days}),c.jsx("div",{className:"text-xs text-stone-400",children:""})]})})]}),c.jsx("div",{className:"absolute -bottom-10 -right-10 w-32 h-32 bg-stone-700 rounded-full opacity-50"})]})},QI=({item:t,dayDate:e,onClose:n,onNavigate:r})=>{var O,M;const{photos:s,uploadPhoto:i,removePhoto:a,itinerary:l,updateItineraryItem:u}=Fs(),[d,p]=U.useState(!1),[g,v]=U.useState(t.notes||""),S=`photo_${e}_${t.time}`.replace(/[:.]/g,"-"),A=s[S],b=!t.linkTo&&Qy.find(x=>t.activity.includes(x.title)||x.title.includes(t.activity)),j=!t.linkTo&&(t.type==="hotel"||t.type==="food"),I=async x=>{var T;const y=(T=x.target.files)==null?void 0:T[0];if(y){const E=new FileReader;E.onloadend=async()=>{const C=E.result;try{const N=await ql(C);i(S,N)}catch{alert("")}},E.readAsDataURL(y)}},w=()=>{window.confirm("")&&a(S)},k=()=>{const x=l.findIndex(E=>E.date===e.split("-").slice(1).join("/").replace("-","/").replace("2025/","")),y=l.findIndex(E=>E.fullDate===e||E.date===e),T=x!==-1?x:y;if(T!==-1){const C=l[T].items.map(N=>{if(N.id===t.id)return{...N,notes:g};if(N.subItems){const _=N.subItems.map(X=>X.id===t.id?{...X,notes:g}:X);return{...N,subItems:_}}return N});u(T,C),p(!1)}else console.error("Could not find day to update"),alert("")},P=x=>{switch(x){case"flight":return"";case"transport":return"";case"food":return"";case"hotel":return"";case"important":return"";default:return""}};return c.jsxs("div",{className:"fixed inset-0 z-[60] flex items-end sm:items-center justify-center pointer-events-none",children:[c.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm pointer-events-auto transition-opacity",onClick:n}),c.jsxs("div",{className:"bg-white w-full max-w-md rounded-t-3xl sm:rounded-3xl p-6 relative pointer-events-auto animate-in slide-in-from-bottom duration-300 max-h-[90vh] overflow-y-auto",children:[c.jsx("button",{onClick:n,className:"absolute top-4 right-4 p-2 bg-stone-100 rounded-full text-stone-500 hover:bg-stone-200",children:c.jsx(nr,{size:20})}),c.jsxs("div",{className:"mb-6",children:[c.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-bold bg-stone-100 text-stone-600 mb-2",children:P(t.type)}),c.jsx("h3",{className:"text-2xl font-bold text-stone-800",children:t.activity}),c.jsxs("div",{className:"flex items-center gap-2 text-stone-500 mt-1",children:[c.jsx(sd,{size:16}),c.jsx("span",{className:"font-mono",children:t.time})]}),t.location&&c.jsxs("div",{className:"flex items-center gap-2 text-stone-500 mt-1",children:[c.jsx(Vr,{size:16}),c.jsx("span",{children:t.location})]})]}),(t.linkTo||b||j)&&c.jsxs("div",{className:"mb-6 flex gap-3",children:[(((O=t.linkTo)==null?void 0:O.tab)===oe.GUIDE||b)&&c.jsxs("button",{onClick:()=>{var x;return r(oe.GUIDE,(x=t.linkTo)==null?void 0:x.targetId)},className:"flex-1 py-3 bg-emerald-50 text-emerald-700 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-emerald-100 transition-colors",children:[c.jsx(Xy,{size:18})," "]}),(((M=t.linkTo)==null?void 0:M.tab)===oe.BOOKINGS||j)&&c.jsxs("button",{onClick:()=>{var x;return r(oe.BOOKINGS,(x=t.linkTo)==null?void 0:x.targetId)},className:"flex-1 py-3 bg-orange-50 text-orange-700 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-orange-100 transition-colors",children:[c.jsx(e0,{size:18})," "]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("h4",{className:"text-xs font-bold text-stone-400 uppercase tracking-wide",children:""}),d?c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>{p(!1),v(t.notes||"")},className:"text-stone-400 hover:text-red-500 p-1",children:c.jsx(nr,{size:16})}),c.jsx("button",{onClick:k,className:"text-emerald-500 hover:text-emerald-700 p-1",children:c.jsx(Jy,{size:16})})]}):c.jsx("button",{onClick:()=>p(!0),className:"text-stone-400 hover:text-stone-600 p-1",children:c.jsx(Zy,{size:14})})]}),d?c.jsx("textarea",{value:g,onChange:x=>v(x.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50 focus:outline-none focus:ring-2 focus:ring-stone-200 text-sm min-h-[80px]",placeholder:"..."}):t.notes?c.jsx("div",{className:"bg-yellow-50 p-4 rounded-xl border border-yellow-100",children:c.jsx("p",{className:"text-stone-700 text-sm whitespace-pre-wrap",children:t.notes})}):c.jsx("div",{className:"bg-stone-50 p-4 rounded-xl border border-stone-100 text-center",children:c.jsx("p",{className:"text-stone-400 text-sm italic",children:""})})]}),c.jsx("div",{className:"grid grid-cols-1 gap-3 mb-6",children:(t.location||t.activity)&&c.jsxs("a",{href:t.mapsLink||`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(t.location||t.activity)}`,target:"_blank",rel:"noreferrer",className:"flex items-center justify-center gap-2 w-full py-3 bg-blue-50 text-blue-600 rounded-xl font-bold hover:bg-blue-100 transition-colors",children:[c.jsx(Vr,{size:18}),"  Google Maps"]})}),c.jsxs("div",{className:"border-t border-stone-100 pt-6",children:[c.jsxs("h4",{className:"text-sm font-bold text-stone-800 mb-3 flex items-center gap-2",children:[c.jsx(Zx,{size:18}),"  ()"]}),A?c.jsxs("div",{className:"relative rounded-xl overflow-hidden group",children:[c.jsx("img",{src:A,alt:"Memory",className:"w-full h-48 object-cover"}),c.jsx("button",{onClick:w,className:"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(nr,{size:14})})]}):c.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-stone-300 rounded-xl bg-stone-50 cursor-pointer hover:bg-stone-100 transition-colors",children:[c.jsx(kl,{size:24,className:"text-stone-400 mb-2"}),c.jsx("span",{className:"text-sm text-stone-500 font-medium",children:" ()"}),c.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:I})]})]})]})]})},Mm=({onNavigate:t})=>{const{itinerary:e,updateItineraryItem:n}=Fs(),[r,s]=U.useState(0),[i,a]=U.useState(null),[l,u]=U.useState(!1),[d,p]=U.useState(!1),[g,v]=U.useState(""),[S,A]=U.useState(!1),[b,j]=U.useState(null),[I,w]=U.useState(null),[k,P]=U.useState(null),O=e[r],M=U.useRef(null),x=()=>{l?u(!1):(p(!0),v(""))},y=()=>{g===qI?(u(!0),p(!1)):(alert("PIN "),v(""))},T=(_,X)=>{w(_),P(X||null)},E=()=>{if(I){if(k){const _=O.items.find(X=>X.id===k);if(_&&_.subItems){const X=_.subItems.filter(ue=>ue.id!==I),he={..._,subItems:X},q=O.items.map(ue=>ue.id===k?he:ue);n(r,q)}}else{const _=O.items.filter(X=>X.id!==I);n(r,_)}w(null),P(null)}},C=_=>{j(_||null),A(!0)},N=(_,X)=>{if(b){const he=O.items.find(q=>q.id===b);if(he){const ue=[...he.subItems||[],_];ue.sort((Q,de)=>Q.time.localeCompare(de.time));const V={...he,subItems:ue},H=O.items.map(Q=>Q.id===b?V:Q);n(r,H)}}else{const he=X?{..._,subItems:[]}:_,q=[...O.items,he];q.sort((ue,V)=>ue.time.localeCompare(V.time)),n(r,q)}A(!1),j(null)};return c.jsxs("div",{className:"pb-24 pt-4 animate-in fade-in duration-500 relative min-h-screen flex flex-col",children:[c.jsx("div",{className:"px-4 mb-2 flex justify-end",children:c.jsx("button",{onClick:x,className:`p-2 rounded-xl transition-all ${l?"bg-stone-800 text-white shadow-md":"text-stone-300"}`,children:l?c.jsx(od,{size:16}):c.jsx(id,{size:16})})}),c.jsx(KI,{}),c.jsx("div",{className:"sticky top-14 z-30 bg-muji-bg/95 backdrop-blur-sm pb-2 pt-2 border-b border-stone-200/50",children:c.jsxs("div",{ref:M,className:"flex overflow-x-auto no-scrollbar px-4 gap-3 snap-x",children:[e.map((_,X)=>{const he=X===r;return c.jsxs("button",{onClick:()=>s(X),className:`snap-center flex-shrink-0 flex flex-col items-center justify-center w-16 h-20 rounded-2xl transition-all duration-300 border ${he?"bg-stone-800 text-white border-stone-800 shadow-md scale-105":"bg-white text-stone-500 border-stone-200 hover:border-stone-400"}`,children:[c.jsx("span",{className:"text-xs font-medium uppercase",children:_.dayOfWeek}),c.jsx("span",{className:"text-xl font-bold font-mono",children:_.date.split("/")[1]})]},X)}),c.jsx("div",{className:"w-2"})]})}),O&&c.jsxs("div",{className:"flex-1 px-4 pt-6",children:[c.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-stone-100 mb-6 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[HI(O.weather.condition,32),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-lg font-bold text-stone-700",children:WI(O.weather.condition)}),c.jsx("span",{className:"text-xs text-stone-400 font-medium",children:"Tokyo"})]})]}),c.jsx("div",{className:"text-2xl font-mono font-bold text-stone-800 tracking-tight",children:O.weather.temp})]}),c.jsxs("div",{className:"relative pl-4 space-y-6",children:[c.jsx("div",{className:"absolute left-[21px] top-2 bottom-0 w-0.5 bg-stone-200"}),O.items.map(_=>_.subItems?c.jsxs("div",{className:"relative pl-0 mb-8",children:[l&&c.jsx("button",{onClick:X=>{X.stopPropagation(),T(_.id)},className:"absolute -left-2 top-0 bg-red-500 text-white p-1.5 rounded-full shadow-md z-30",children:c.jsx(tr,{size:12})}),c.jsx("div",{className:"relative bg-white rounded-3xl overflow-hidden shadow-lg border-2 border-emerald-100 mb-4 cursor-pointer active:scale-98 transition-transform",onClick:()=>a(_),children:c.jsxs("div",{className:"h-28 bg-emerald-50 relative",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-100/50 to-transparent"}),c.jsx(rw,{className:"absolute top-4 right-4 text-emerald-300 opacity-50",size:48}),c.jsxs("div",{className:"absolute bottom-4 left-6",children:[c.jsx("div",{className:"text-xs font-bold text-emerald-600 uppercase tracking-widest mb-1",children:""}),c.jsx("h3",{className:"text-2xl font-bold text-stone-800",children:_.activity}),c.jsxs("div",{className:"flex items-center gap-2 text-stone-600 mt-1",children:[c.jsx(sd,{size:14})," ",c.jsx("span",{className:"font-mono font-bold",children:_.time}),c.jsx("span",{className:"text-stone-300",children:"|"}),c.jsx(Vr,{size:14})," ",c.jsx("span",{children:_.location})]})]}),l&&c.jsxs("button",{onClick:X=>{X.stopPropagation(),C(_.id)},className:"absolute top-2 right-2 bg-emerald-600 text-white px-3 py-1.5 rounded-full text-xs font-bold shadow-md hover:scale-105 transition-transform flex items-center gap-1",children:[c.jsx(eo,{size:12})," "]})]})}),c.jsxs("div",{className:"pl-4 space-y-3",children:[_.subItems.length===0&&c.jsx("div",{className:"text-xs text-stone-400 italic pl-14",children:""}),_.subItems.map(X=>c.jsxs("div",{className:"flex items-center gap-3 relative group",onClick:()=>a(X),children:[c.jsx("div",{className:"w-14 text-right",children:c.jsx("span",{className:"text-xs font-mono font-bold text-stone-400",children:X.time})}),c.jsxs("div",{className:`flex-1 p-3 rounded-xl border cursor-pointer hover:bg-stone-50 transition-colors flex justify-between items-center ${Vm(X.type)}`,children:[c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-stone-700 text-sm",children:X.activity}),X.notes&&c.jsx("div",{className:"text-xs text-stone-400 mt-0.5",children:X.notes})]}),X.type==="important"&&c.jsx(Yy,{size:14,className:"text-orange-400"})]}),l&&c.jsx("button",{onClick:he=>{he.stopPropagation(),T(X.id,_.id)},className:"absolute -right-2 bg-red-100 text-red-500 p-1.5 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(nr,{size:12})})]},X.id))]})]},_.id):c.jsxs("div",{className:"relative flex gap-4 group",children:[l&&c.jsx("button",{onClick:X=>{X.stopPropagation(),T(_.id)},className:"absolute -left-2 top-0 bg-red-500 text-white p-1.5 rounded-full shadow-md z-30",children:c.jsx(tr,{size:12})}),c.jsxs("div",{className:"z-10 flex-shrink-0 w-14 text-right pt-2",onClick:()=>a(_),children:[c.jsx("span",{className:"text-xs font-mono font-bold text-stone-500 bg-muji-bg px-1 relative z-20",children:_.time}),c.jsx("div",{className:`absolute left-[17px] mt-1.5 w-2.5 h-2.5 rounded-full border-2 border-white shadow-sm z-20 ${_.type==="important"?"bg-muji-highlight":"bg-stone-400"}`})]}),c.jsxs("div",{className:`flex-1 p-4 rounded-xl border-l-4 shadow-sm cursor-pointer hover:shadow-md transition-all active:scale-98 ${Vm(_.type)}`,onClick:()=>a(_),children:[c.jsxs("div",{className:"flex justify-between items-start mb-1",children:[c.jsx("h4",{className:"font-bold leading-tight text-stone-800",children:_.activity}),c.jsx("div",{className:"text-stone-400 opacity-50",children:GI(_.type)})]}),_.location&&c.jsxs("div",{className:"flex items-center gap-1 text-xs mt-1 text-stone-500",children:[c.jsx(Vr,{size:10})," ",_.location]})]})]},_.id)),c.jsx("div",{className:"h-12"})]})]}),i&&c.jsx(QI,{item:i,dayDate:(O==null?void 0:O.date)||"",onClose:()=>a(null),onNavigate:t}),l&&c.jsx("button",{onClick:()=>C(),className:"fixed bottom-24 right-6 bg-stone-800 text-white w-14 h-14 rounded-full shadow-xl flex items-center justify-center animate-in zoom-in hover:scale-105 transition-transform z-40",children:c.jsx(eo,{size:28})}),d&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm px-6",children:c.jsxs("div",{className:"bg-white p-8 rounded-3xl w-full max-w-sm shadow-2xl animate-in zoom-in-95",children:[c.jsx("h3",{className:"text-xl font-bold text-center mb-6 text-stone-800",children:""}),c.jsx("input",{type:"password",value:g,onChange:_=>v(_.target.value),placeholder:" PIN ",maxLength:4,className:"w-full text-center text-4xl font-mono tracking-[0.5em] border-b-2 border-stone-200 focus:border-stone-800 outline-none pb-2 mb-8 bg-transparent",autoFocus:!0}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:()=>p(!1),className:"flex-1 py-3 rounded-xl bg-stone-100 text-stone-500 font-bold",children:""}),c.jsx("button",{onClick:y,className:"flex-1 py-3 rounded-xl bg-stone-800 text-white font-bold",children:""})]})]})}),I&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm px-6",children:c.jsxs("div",{className:"bg-white p-6 rounded-3xl w-full max-w-sm shadow-2xl animate-in zoom-in-95",children:[c.jsx("h3",{className:"text-xl font-bold text-stone-800 mb-4 text-center",children:""}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>w(null),className:"flex-1 py-3 rounded-xl bg-stone-100 text-stone-600 font-bold",children:""}),c.jsx("button",{onClick:E,className:"flex-1 py-3 rounded-xl bg-red-500 text-white font-bold",children:""})]})]})}),S&&c.jsx(YI,{onClose:()=>{A(!1),j(null)},onSave:N,isSubItem:!!b})]})},YI=({onClose:t,onSave:e,isSubItem:n})=>{const[r,s]=U.useState(""),[i,a]=U.useState(""),[l,u]=U.useState(""),[d,p]=U.useState("activity"),[g,v]=U.useState(""),[S,A]=U.useState(!1),[b,j]=U.useState(!1),I=()=>{if(!r||!i)return;if(!b){j(!0);return}const w={id:Date.now().toString(),time:r,activity:i,location:l,type:d,notes:g};e(w,S)};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm px-4",children:c.jsxs("div",{className:"bg-white w-full max-w-md rounded-3xl p-6 shadow-2xl animate-in slide-in-from-bottom-10",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h3",{className:"font-bold text-xl",children:n?"":""}),c.jsx("button",{onClick:t,children:c.jsx(nr,{size:24,className:"text-stone-400"})})]}),b?c.jsxs("div",{className:"text-center py-4",children:[c.jsxs("div",{className:"mb-6 text-stone-600",children:[" ",c.jsx("span",{className:"font-bold text-stone-800",children:i})," "]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>j(!1),className:"flex-1 py-3 bg-stone-100 text-stone-500 font-bold rounded-xl",children:""}),c.jsx("button",{onClick:I,className:"flex-1 py-3 bg-muji-highlight text-white font-bold rounded-xl shadow-md",children:""})]})]}):c.jsxs("div",{className:"space-y-4",children:[!n&&c.jsxs("div",{className:`p-3 rounded-xl border flex items-center gap-3 cursor-pointer transition-all ${S?"bg-emerald-50 border-emerald-300 ring-1 ring-emerald-300":"bg-stone-50 border-stone-200"}`,onClick:()=>A(!S),children:[c.jsx("div",{className:`w-5 h-5 rounded-md flex items-center justify-center border ${S?"bg-emerald-500 border-emerald-500 text-white":"bg-white border-stone-300"}`,children:S&&c.jsx(ew,{size:14})}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-sm text-stone-800",children:""}),c.jsx("div",{className:"text-xs text-stone-500",children:""})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("div",{className:"w-1/3",children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:""}),c.jsx("input",{value:r,onChange:w=>s(w.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:"HH:MM"})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:""}),c.jsx("input",{value:i,onChange:w=>a(w.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:""})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:""}),c.jsx("input",{value:l,onChange:w=>u(w.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:""})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:""}),c.jsxs("select",{value:d,onChange:w=>p(w.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",children:[c.jsx("option",{value:"activity",children:""}),c.jsx("option",{value:"transport",children:""}),c.jsx("option",{value:"food",children:" ()"}),c.jsx("option",{value:"flight",children:""}),c.jsx("option",{value:"hotel",children:""}),c.jsx("option",{value:"important",children:""})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:""}),c.jsx("textarea",{value:g,onChange:w=>v(w.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50 h-20",placeholder:"..."})]}),c.jsx("button",{onClick:I,className:"w-full py-4 bg-stone-800 text-white font-bold rounded-xl mt-2",children:""})]})]})})},XI="0000",JI=({highlightId:t})=>{var ue;const{guideSpots:e,addGuideSpot:n,deleteGuideSpot:r,updateGuideSpot:s,itinerary:i}=Fs(),[a,l]=U.useState(!1),[u,d]=U.useState(!1),[p,g]=U.useState(""),[v,S]=U.useState(!1),[A,b]=U.useState(null),[j,I]=U.useState(null),[w,k]=U.useState(0),P=U.useRef(null),O=i.map(V=>({date:V.date,fullDate:V.fullDate,dayOfWeek:V.dayOfWeek})),M=(ue=O[w])==null?void 0:ue.date,x=e.filter(V=>V.date===M),y=Array.from(new Set(x.map(V=>V.title)));U.useEffect(()=>{if(t){const V=e.find(H=>H.id===t);if(V&&V.date){const H=O.findIndex(Q=>Q.date===V.date);H!==-1&&k(H)}setTimeout(()=>{const H=document.getElementById(t);H&&H.scrollIntoView({behavior:"smooth",block:"center"})},300)}},[t,e]);const T=()=>{a?l(!1):(d(!0),g(""))},E=()=>{p===XI?(l(!0),d(!1)):(alert("PIN "),g(""))},C=V=>{const H=x.find(Q=>Q.title===V);if(H){const Q=document.getElementById(H.id);Q==null||Q.scrollIntoView({behavior:"smooth",block:"start"})}},N=V=>{I(V)},_=()=>{j&&(r(j),I(null))},X=()=>{b(null),S(!0)},he=V=>{b(V),S(!0)},q=V=>{A?s(V):n(V),S(!1),b(null)};return c.jsxs("div",{className:"pb-24 pt-4 animate-in fade-in duration-500 min-h-screen flex flex-col",children:[c.jsxs("div",{className:"px-4 mb-4 flex justify-between items-center sticky top-0 z-30 bg-muji-bg pt-2 pb-2",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold tracking-widest text-stone-800",children:""}),c.jsx("div",{className:"w-10 h-1 bg-emerald-300 mt-1 rounded-full"})]}),c.jsx("button",{onClick:T,className:`p-2 rounded-xl transition-all ${a?"bg-stone-800 text-white shadow-md":"text-stone-300"}`,children:a?c.jsx(od,{size:18}):c.jsx(id,{size:18})})]}),c.jsx("div",{className:"sticky top-14 z-20 bg-muji-bg/95 backdrop-blur-sm pb-2 border-b border-stone-200/50",children:c.jsxs("div",{ref:P,className:"flex overflow-x-auto no-scrollbar px-4 gap-3 snap-x",children:[O.map((V,H)=>{const Q=H===w;return c.jsxs("button",{onClick:()=>k(H),className:`snap-center flex-shrink-0 flex flex-col items-center justify-center min-w-[3.5rem] py-2 rounded-2xl transition-all duration-300 border ${Q?"bg-emerald-600 text-white border-emerald-600 shadow-md scale-105":"bg-white text-stone-500 border-stone-200"}`,children:[c.jsx("span",{className:"text-[10px] font-medium uppercase",children:V.dayOfWeek}),c.jsx("span",{className:"text-sm font-bold font-mono",children:V.date})]},H)}),c.jsx("div",{className:"w-2"})]})}),x.length>0&&c.jsx("div",{className:"px-4 py-4 flex flex-wrap gap-2",children:y.map(V=>c.jsx("button",{onClick:()=>C(V),className:"px-3 py-1.5 bg-emerald-50 text-emerald-700 rounded-full text-xs font-bold border border-emerald-100 hover:bg-emerald-100 active:scale-95 transition-all",children:V},V))}),c.jsx("div",{className:"px-4 space-y-8 mt-2",children:x.length===0?c.jsxs("div",{className:"text-center py-20 text-stone-400",children:[c.jsx("p",{children:""}),a&&c.jsx("button",{onClick:X,className:"mt-4 text-emerald-600 font-bold underline",children:""})]}):x.map(V=>c.jsxs("article",{id:V.id,className:`bg-white rounded-3xl overflow-hidden shadow-sm border transition-all duration-500 scroll-mt-32 ${t===V.id?"ring-4 ring-emerald-200 border-emerald-400 scale-[1.02]":"border-stone-100"}`,children:[c.jsxs("div",{className:"relative h-56 bg-stone-200 group",children:[c.jsx("img",{src:V.imageUrl,alt:V.title,className:"w-full h-full object-cover",onError:H=>{H.target.src="https://images.unsplash.com/photo-1493976040374-85c8e12f0c0e?auto=format&fit=crop&w=800&q=80"}}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/10 to-transparent"}),c.jsxs("div",{className:"absolute bottom-4 left-4 text-white",children:[c.jsx("div",{className:"text-xs font-bold opacity-90 tracking-widest uppercase bg-black/20 backdrop-blur-sm px-2 py-1 rounded w-fit mb-1",children:V.subtitle}),c.jsx("h3",{className:"text-2xl font-bold",children:V.title})]}),a&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:H=>{H.stopPropagation(),N(V.id)},className:"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full shadow-lg opacity-90 hover:opacity-100 hover:scale-110 transition-all",children:c.jsx(tr,{size:16})}),c.jsx("button",{onClick:H=>{H.stopPropagation(),he(V)},className:"absolute top-2 right-12 bg-stone-800 text-white p-2 rounded-full shadow-lg opacity-90 hover:opacity-100 hover:scale-110 transition-all",children:c.jsx(Zy,{size:16})})]})]}),c.jsxs("div",{className:"p-6",children:[c.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:V.tags.map(H=>c.jsxs("span",{className:"text-[10px] font-bold bg-stone-100 text-stone-500 px-2 py-1 rounded-md",children:["#",H]},H))}),c.jsx("p",{className:"text-stone-600 leading-relaxed text-justify text-sm",children:V.description})]})]},V.id))}),a&&c.jsx("button",{onClick:X,className:"fixed bottom-24 right-6 bg-stone-800 text-white w-14 h-14 rounded-full shadow-xl flex items-center justify-center animate-in zoom-in hover:scale-105 transition-transform z-40",children:c.jsx(eo,{size:28})}),u&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm px-6",children:c.jsxs("div",{className:"bg-white p-8 rounded-3xl w-full max-w-sm shadow-2xl animate-in zoom-in-95",children:[c.jsx("h3",{className:"text-xl font-bold text-center mb-6 text-stone-800",children:""}),c.jsx("input",{type:"password",value:p,onChange:V=>g(V.target.value),placeholder:" PIN ",maxLength:4,className:"w-full text-center text-4xl font-mono tracking-[0.5em] border-b-2 border-stone-200 focus:border-stone-800 outline-none pb-2 mb-8 bg-transparent",autoFocus:!0}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:()=>d(!1),className:"flex-1 py-3 rounded-xl bg-stone-100 text-stone-500 font-bold",children:""}),c.jsx("button",{onClick:E,className:"flex-1 py-3 rounded-xl bg-stone-800 text-white font-bold",children:""})]})]})}),j&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm px-6",children:c.jsxs("div",{className:"bg-white p-6 rounded-3xl w-full max-w-sm shadow-2xl animate-in zoom-in-95",children:[c.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[c.jsx("div",{className:"bg-red-100 p-4 rounded-full text-red-500 mb-4",children:c.jsx(tr,{size:32})}),c.jsx("h3",{className:"text-xl font-bold text-stone-800",children:""}),c.jsx("p",{className:"text-sm text-stone-500 mt-2",children:""})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>I(null),className:"flex-1 py-3 rounded-xl bg-stone-100 text-stone-600 font-bold",children:""}),c.jsx("button",{onClick:_,className:"flex-1 py-3 rounded-xl bg-red-500 text-white font-bold",children:""})]})]})}),v&&c.jsx(ZI,{onClose:()=>S(!1),onSave:q,defaultDate:M||"12/17",dates:O.map(V=>V.date),initialData:A})]})},ZI=({onClose:t,onSave:e,defaultDate:n,dates:r,initialData:s})=>{const[i,a]=U.useState((s==null?void 0:s.title)||""),[l,u]=U.useState((s==null?void 0:s.subtitle)||""),[d,p]=U.useState((s==null?void 0:s.description)||""),[g,v]=U.useState((s==null?void 0:s.date)||n),[S,A]=U.useState((s==null?void 0:s.tags.join(", "))||""),[b,j]=U.useState((s==null?void 0:s.imageUrl)||""),[I,w]=U.useState(!1),k=U.useRef(null),P=async M=>{var y;const x=(y=M.target.files)==null?void 0:y[0];if(x){const T=new FileReader;T.onloadend=async()=>{try{const E=T.result,C=await ql(E);j(C)}catch{alert("")}},T.readAsDataURL(x)}},O=()=>{if(!(!i||!d)){if(!I){w(!0);return}e({id:(s==null?void 0:s.id)||Date.now().toString(),date:g,title:i,subtitle:l||"Spot",description:d,tags:S.split(",").map(M=>M.trim()).filter(Boolean),imageUrl:b})}};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm px-4",children:c.jsxs("div",{className:"bg-white w-full max-w-md rounded-3xl p-6 shadow-2xl animate-in slide-in-from-bottom-10 max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h3",{className:"font-bold text-xl",children:s?"":""}),c.jsx("button",{onClick:t,children:c.jsx(nr,{size:24,className:"text-stone-400"})})]}),I?c.jsxs("div",{className:"text-center py-6",children:[c.jsxs("div",{className:"mb-6 text-stone-600",children:["",s?"":""," ",c.jsx("span",{className:"font-bold text-stone-800",children:i})," "]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>w(!1),className:"flex-1 py-3 bg-stone-100 text-stone-500 font-bold rounded-xl",children:""}),c.jsxs("button",{onClick:O,className:"flex-1 py-3 bg-muji-highlight text-white font-bold rounded-xl shadow-md",children:["",s?"":""]})]})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:""}),c.jsx("select",{value:g,onChange:M=>v(M.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",children:r.map(M=>c.jsx("option",{value:M,children:M},M))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:""}),c.jsx("input",{value:i,onChange:M=>a(M.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:""})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:""}),c.jsx("input",{value:l,onChange:M=>u(M.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:""})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:""}),c.jsx("textarea",{value:d,onChange:M=>p(M.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50 h-32",placeholder:"..."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:" ()"}),c.jsx("input",{value:S,onChange:M=>A(M.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:", , "})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-stone-500 block mb-1",children:" ()"}),c.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border border-dashed border-stone-300 bg-stone-50 cursor-pointer hover:bg-stone-100",children:[c.jsx(kl,{size:20,className:"text-stone-400"}),c.jsx("span",{className:"text-sm text-stone-500 truncate",children:b?"":""}),c.jsx("input",{ref:k,type:"file",accept:"image/*",className:"hidden",onChange:P})]}),b&&c.jsx("img",{src:b,alt:"Preview",className:"h-24 w-full object-cover rounded-lg mt-2 border border-stone-200"})]}),c.jsx("button",{onClick:O,className:"w-full py-4 bg-stone-800 text-white font-bold rounded-xl mt-2",children:""})]})]})})},ek=.21,tk=()=>{const[t,e]=U.useState(""),[n,r]=U.useState(null),[s]=U.useState(ek),i=g=>{e(v=>v+g)},a=()=>{e(g=>g.slice(0,-1))},l=()=>{e(""),r(null)},u=()=>{try{if(!/^[0-9+\-*/().\s]+$/.test(t))return;const g=new Function("return "+t)();isFinite(g)&&r(g*s)}catch(g){console.error("Calculation error",g)}};U.useEffect(()=>{if(t.length===0){r(0);return}const g=setTimeout(()=>{try{if(!/^[0-9+\-*/().\s]+$/.test(t))return;const v=new Function("return "+t)();isFinite(v)&&r(v*s)}catch{}},500);return()=>clearTimeout(g)},[t,s]);const d="flex-1 rounded-xl bg-white shadow-sm border border-stone-100 text-lg font-bold text-stone-600 active:bg-stone-100 active:scale-95 transition-all flex items-center justify-center",p="flex-1 rounded-xl bg-stone-100 shadow-sm border border-stone-200 text-lg font-bold text-muji-highlight active:bg-stone-200 active:scale-95 transition-all flex items-center justify-center";return c.jsxs("div",{className:"h-[calc(100vh-140px)] flex flex-col p-4 animate-in zoom-in-95 duration-300",children:[c.jsxs("div",{className:"bg-stone-800 rounded-2xl p-5 text-right mb-4 shadow-md flex-shrink-0",children:[c.jsxs("div",{className:"flex justify-between items-end mb-2",children:[c.jsx("span",{className:"text-stone-400 text-xs",children:" (JPY)"}),c.jsx("div",{className:"text-2xl text-white font-mono break-all",children:t||"0"})]}),c.jsx("div",{className:"h-px bg-stone-600 mb-2"}),c.jsxs("div",{className:"flex justify-between items-end",children:[c.jsx("span",{className:"text-stone-400 text-xs",children:" (TWD)"}),c.jsx("div",{className:"text-3xl text-muji-highlight font-mono font-bold",children:n?Math.round(n).toLocaleString():"0"})]}),c.jsxs("div",{className:"mt-2 text-[10px] text-stone-500 text-right",children:["Rate: ",s]})]}),c.jsxs("div",{className:"grid grid-cols-4 gap-2 flex-1 min-h-0",children:[c.jsx("button",{onClick:l,className:"col-span-1 rounded-xl bg-red-50 text-red-500 font-bold flex items-center justify-center text-lg",children:"AC"}),c.jsx("button",{onClick:a,className:"col-span-1 rounded-xl bg-stone-200 text-stone-600 flex items-center justify-center",children:c.jsx(Yx,{size:20})}),c.jsx("button",{onClick:()=>i("/"),className:p,children:""}),c.jsx("button",{onClick:()=>i("*"),className:p,children:""}),c.jsx("button",{onClick:()=>i("7"),className:d,children:"7"}),c.jsx("button",{onClick:()=>i("8"),className:d,children:"8"}),c.jsx("button",{onClick:()=>i("9"),className:d,children:"9"}),c.jsx("button",{onClick:()=>i("-"),className:p,children:"-"}),c.jsx("button",{onClick:()=>i("4"),className:d,children:"4"}),c.jsx("button",{onClick:()=>i("5"),className:d,children:"5"}),c.jsx("button",{onClick:()=>i("6"),className:d,children:"6"}),c.jsx("button",{onClick:()=>i("+"),className:p,children:"+"}),c.jsx("button",{onClick:()=>i("1"),className:d,children:"1"}),c.jsx("button",{onClick:()=>i("2"),className:d,children:"2"}),c.jsx("button",{onClick:()=>i("3"),className:d,children:"3"}),c.jsx("button",{onClick:u,className:"row-span-2 rounded-xl bg-muji-primary text-white text-xl font-bold flex items-center justify-center shadow-md active:scale-95 transition-transform",children:"="}),c.jsx("button",{onClick:()=>i("0"),className:`${d} col-span-2`,children:"0"}),c.jsx("button",{onClick:()=>i("."),className:d,children:"."})]})]})},nk=()=>{const{packingList:t,togglePackingItem:e,memoList:n,addMemoItem:r,deleteMemoItem:s,toggleMemoItem:i,wishList:a,addWishItem:l,deleteWishItem:u,toggleWishItem:d,exportData:p,importData:g,isCloudMode:v,connectToCloud:S,disconnectCloud:A,connectionStatus:b}=Fs(),[j,I]=U.useState("packing"),[w,k]=U.useState(""),[P,O]=U.useState(null),[M,x]=U.useState(!1),[y,T]=U.useState(!1),E=U.useRef(null),C=Tn.apiKey&&!Tn.apiKey.includes(""),N=(Z,Ne)=>{Ne==="memo"?i(Z):d(Z)},_=Z=>{Z.preventDefault(),w.trim()&&x(!0)},X=()=>{if(!w.trim())return;const Z={id:Date.now().toString(),text:w.trim(),checked:!1};j==="memo"?r(Z):j==="wish"&&l(Z),k(""),x(!1)},he=()=>{x(!1)},q=(Z,Ne,it)=>{Ne.stopPropagation(),O({id:Z,type:it})},ue=()=>{if(!P)return;const{id:Z,type:Ne}=P;Ne==="memo"?s(Z):u(Z),O(null)},V=Z=>{var xt;const Ne=(xt=Z.target.files)==null?void 0:xt[0];if(!Ne)return;if(!window.confirm("")){Z.target.value="";return}const it=new FileReader;it.onload=zs=>{var yn;const Us=(yn=zs.target)==null?void 0:yn.result,nn=g(Us);alert(nn?"":"")},it.readAsText(Ne)},H=async()=>{try{await S(Tn)}catch{alert(" Config ")}},Q=async()=>{if(Tn.apiKey.includes("")||!Tn.apiKey){alert(" `constants.ts`  Firebase Config \n\n");return}H()},de=()=>{window.confirm(`


()`)&&(localStorage.clear(),window.location.reload())},ve=Z=>/^(http|https):\/\/[^ "]+$/.test(Z),Te=()=>j==="memo"?n:j==="wish"?a:[];return c.jsxs("div",{className:"pb-24 pt-4 px-4 h-full flex flex-col relative",children:[c.jsxs("div",{className:"flex p-1 bg-stone-200 rounded-2xl mb-6 flex-shrink-0",children:[c.jsx("button",{onClick:()=>I("packing"),className:`flex-1 py-2.5 rounded-xl text-sm font-bold transition-all ${j==="packing"?"bg-white shadow-sm text-stone-800":"text-stone-500"}`,children:""}),c.jsx("button",{onClick:()=>I("memo"),className:`flex-1 py-2.5 rounded-xl text-sm font-bold transition-all ${j==="memo"?"bg-white shadow-sm text-stone-800":"text-stone-500"}`,children:""}),c.jsx("button",{onClick:()=>I("wish"),className:`flex-1 py-2.5 rounded-xl text-sm font-bold transition-all ${j==="wish"?"bg-white shadow-sm text-stone-800":"text-stone-500"}`,children:""})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar pb-20",children:[j==="packing"?c.jsxs("div",{className:"space-y-3 animate-in fade-in duration-300",children:[t.map(Z=>c.jsxs("div",{onClick:()=>e(Z.id),className:`flex items-center gap-4 p-4 rounded-2xl border transition-all cursor-pointer ${Z.checked?"bg-stone-100 border-stone-100 opacity-60":"bg-white border-stone-100 shadow-sm"}`,children:[c.jsx("div",{className:`${Z.checked?"text-stone-400":"text-muji-highlight"}`,children:Z.checked?c.jsx(zc,{size:24}):c.jsx(zp,{size:24})}),c.jsx("span",{className:`text-lg ${Z.checked?"line-through text-stone-400":"text-stone-800"}`,children:Z.text})]},Z.id)),c.jsxs("div",{className:"text-center text-xs text-stone-400 mt-8",children:["Progress: ",t.filter(Z=>Z.checked).length," / ",t.length]})]}):c.jsxs("div",{className:"space-y-3 animate-in fade-in duration-300",children:[c.jsxs("form",{onSubmit:_,className:"flex gap-2 mb-6 relative",children:[c.jsx("input",{type:"text",value:w,onChange:Z=>k(Z.target.value),placeholder:j==="wish"?"...":"...",className:`flex-1 p-4 rounded-2xl border transition-all focus:outline-none focus:ring-2 focus:ring-muji-accent bg-white ${M?"border-muji-highlight":"border-stone-200"}`,disabled:M}),M?c.jsxs("div",{className:"flex gap-2 animate-in slide-in-from-right",children:[c.jsx("button",{type:"button",onClick:he,className:"bg-stone-200 text-stone-600 p-4 rounded-2xl hover:bg-stone-300 transition-colors",children:c.jsx(nr,{size:24})}),c.jsx("button",{type:"button",onClick:X,className:"bg-muji-highlight text-white p-4 rounded-2xl shadow-md hover:bg-amber-600 transition-colors",children:c.jsx(Jy,{size:24})})]}):c.jsx("button",{type:"submit",disabled:!w.trim(),className:"bg-stone-800 text-white p-4 rounded-2xl disabled:opacity-50 disabled:cursor-not-allowed shadow-sm active:scale-95 transition-all",children:c.jsx(eo,{size:24})})]}),M&&c.jsx("div",{className:"text-center text-xs text-muji-highlight font-bold mb-4 animate-in fade-in",children:""}),Te().length===0&&c.jsx("div",{className:"text-center text-stone-400 py-10",children:c.jsx("p",{children:j==="wish"?"":""})}),Te().map(Z=>c.jsxs("div",{onClick:()=>N(Z.id,j),className:`relative group flex items-center gap-4 p-4 rounded-2xl border transition-all cursor-pointer ${Z.checked?"bg-stone-100 border-stone-100 opacity-60":"bg-white border-stone-100 shadow-sm"}`,children:[c.jsx("div",{className:`${Z.checked?"text-stone-400":"text-muji-highlight"} flex-shrink-0`,children:Z.checked?c.jsx(zc,{size:24}):c.jsx(zp,{size:24})}),c.jsx("div",{className:`flex-1 overflow-hidden ${Z.checked?"line-through text-stone-400":"text-stone-800"}`,children:ve(Z.text)?c.jsxs("a",{href:Z.text,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 text-blue-600 hover:underline truncate w-full",onClick:Ne=>Ne.stopPropagation(),children:[c.jsx(tw,{size:16}),c.jsx("span",{className:"truncate",children:Z.text})]}):c.jsx("span",{className:"break-words",children:Z.text})}),c.jsx("button",{onClick:Ne=>q(Z.id,Ne,j),className:"p-2 text-stone-300 hover:text-red-400 transition-colors",children:c.jsx(tr,{size:18})})]},Z.id))]}),c.jsxs("div",{className:"mt-8 pt-8 border-t border-stone-200",children:[c.jsx("h4",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest mb-4 text-center",children:"Data Management"}),c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("button",{onClick:p,className:"flex-1 py-2 bg-white border border-stone-300 text-stone-600 rounded-xl text-xs font-bold flex items-center justify-center gap-2 active:scale-95 transition-transform",children:[c.jsx(Xx,{size:14})," "]}),c.jsxs("label",{className:"flex-1 py-2 bg-stone-100 text-stone-600 rounded-xl text-xs font-bold flex items-center justify-center gap-2 cursor-pointer active:scale-95 transition-transform hover:bg-stone-200",children:[c.jsx(kl,{size:14})," ",c.jsx("input",{ref:E,type:"file",accept:".json",className:"hidden",onChange:V})]})]}),C?c.jsxs("div",{className:`w-full py-2 border rounded-xl text-xs font-bold flex items-center justify-center gap-2 ${b==="connected"?"bg-sky-50 border-sky-200 text-sky-600":b==="error"?"bg-red-50 border-red-200 text-red-500":"bg-stone-50 border-stone-200 text-stone-400"}`,children:[b==="connecting"?c.jsx(Uc,{className:"animate-spin",size:14}):b==="connected"?c.jsx(Xa,{size:14}):c.jsx(Ya,{size:14}),b==="connecting"?"...":b==="connected"?" (Auto)":c.jsx("button",{onClick:H,className:"underline hover:text-red-700",children:""})]}):c.jsxs("button",{onClick:Q,disabled:b==="connecting",className:`w-full py-2 border rounded-xl text-xs font-bold flex items-center justify-center gap-2 active:scale-95 transition-transform ${v?"bg-sky-50 border-sky-200 text-sky-600":"bg-white border-stone-200 text-stone-400 hover:bg-stone-50 hover:text-stone-600"}`,children:[b==="connecting"?c.jsx(Uc,{className:"animate-spin",size:14}):v?c.jsx(Wx,{size:14}):c.jsx(Xa,{size:14}),b==="connecting"?"...":v?" ()":""]}),c.jsxs("button",{onClick:de,className:"w-full py-3 bg-red-50 text-red-500 rounded-xl text-xs font-bold flex items-center justify-center gap-2 active:scale-95 transition-transform border border-red-100 hover:bg-red-100 mt-2",children:[c.jsx(nw,{size:14}),"  ()"]}),v&&C&&c.jsxs("p",{className:"text-[10px] text-sky-400 text-center px-2",children:["",Tn.projectId]})]})]})]}),P&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm px-6",children:c.jsxs("div",{className:"bg-white p-6 rounded-3xl w-full max-w-sm shadow-2xl animate-in zoom-in-95",children:[c.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[c.jsx("div",{className:"bg-red-100 p-4 rounded-full text-red-500 mb-4",children:c.jsx(Ya,{size:32})}),c.jsx("h3",{className:"text-xl font-bold text-stone-800",children:""}),c.jsx("p",{className:"text-sm text-stone-500 mt-2",children:""})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>O(null),className:"flex-1 py-3 rounded-xl bg-stone-100 text-stone-600 font-bold hover:bg-stone-200 transition-colors",children:""}),c.jsx("button",{onClick:ue,className:"flex-1 py-3 rounded-xl bg-red-500 text-white font-bold hover:bg-red-600 transition-colors shadow-sm",children:""})]})]})})]})},rk="0000",sk=({highlightId:t})=>{const{bookings:e,addBooking:n,deleteBooking:r,updateBookingPhoto:s}=Fs(),[i,a]=U.useState(!1),[l,u]=U.useState(!1),[d,p]=U.useState(""),[g,v]=U.useState(!1),[S,A]=U.useState(null),[b,j]=U.useState(null),I=U.useRef(null),w=U.useRef(null),k=U.useRef(null),P=U.useRef(null);U.useEffect(()=>{t&&e.length>0&&setTimeout(()=>{const q=document.getElementById(t);q&&q.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},[t,e]);const O=()=>{i?a(!1):(u(!0),p(""))},M=()=>{d===rk?(a(!0),u(!1)):(alert("PIN "),p(""))},x=q=>{A(q)},y=()=>{S&&(r(S),A(null))},T=q=>{j(q),setTimeout(()=>{var ue;(ue=I.current)==null||ue.click()},0)},E=q=>{var V;const ue=(V=q.target.files)==null?void 0:V[0];if(ue&&b){const H=new FileReader;H.onloadend=async()=>{const Q=H.result;try{const de=await ql(Q);s(b,de),j(null),I.current&&(I.current.value="")}catch{alert("")}},H.readAsDataURL(ue)}},C=q=>{n(q),v(!1)},N=q=>{q.current&&q.current.scrollIntoView({behavior:"smooth",block:"start"})},_=e.filter(q=>q.type==="flight"),X=e.filter(q=>q.type==="hotel"),he=e.filter(q=>q.type==="dining");return c.jsxs("div",{className:"pt-4 px-4 relative animate-in fade-in duration-500 min-h-screen",children:[c.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:I,onChange:E}),c.jsxs("div",{className:"flex justify-between items-center mb-4 px-1 sticky top-0 bg-muji-bg z-30 pt-2 pb-2",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-stone-800 tracking-wider",children:""}),c.jsx("div",{className:"w-10 h-1 bg-muji-highlight mt-1 rounded-full"})]}),c.jsx("button",{onClick:O,className:`p-3 rounded-2xl transition-all ${i?"bg-stone-800 text-white shadow-md":"bg-stone-100 text-stone-500"}`,children:i?c.jsx(od,{size:20}):c.jsx(id,{size:20})})]}),c.jsxs("div",{className:"flex gap-2 mb-6 overflow-x-auto no-scrollbar",children:[c.jsxs("button",{onClick:()=>N(w),className:"flex items-center gap-2 px-4 py-2 bg-white border border-stone-200 rounded-full text-stone-600 font-bold text-sm shadow-sm active:bg-stone-100 whitespace-nowrap",children:[c.jsx(Pi,{size:16})," "]}),c.jsxs("button",{onClick:()=>N(k),className:"flex items-center gap-2 px-4 py-2 bg-white border border-stone-200 rounded-full text-stone-600 font-bold text-sm shadow-sm active:bg-stone-100 whitespace-nowrap",children:[c.jsx(Fc,{size:16})," "]}),c.jsxs("button",{onClick:()=>N(P),className:"flex items-center gap-2 px-4 py-2 bg-white border border-stone-200 rounded-full text-stone-600 font-bold text-sm shadow-sm active:bg-stone-100 whitespace-nowrap",children:[c.jsx(t0,{size:16})," "]})]}),c.jsxs("div",{className:"space-y-10",children:[_.length>0&&c.jsxs("div",{ref:w,children:[c.jsx("h3",{className:"text-sm font-bold text-stone-400 uppercase tracking-widest mb-3 ml-1",children:""}),c.jsx("div",{className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 no-scrollbar",children:_.map(q=>c.jsxs("div",{id:q.id,className:"snap-center min-w-[90vw] sm:min-w-[350px] relative group scroll-m-24",children:[c.jsx("div",{className:`absolute -inset-1 rounded-[2rem] transition-opacity duration-500 bg-gradient-to-r from-orange-200 to-orange-100 -z-10 ${t===q.id?"opacity-100":"opacity-0"}`}),i&&c.jsx("button",{onClick:()=>x(q.id),className:"absolute -top-2 -right-2 z-20 bg-red-500 text-white p-2 rounded-full shadow-lg hover:bg-red-600 transition-colors",children:c.jsx(tr,{size:16})}),c.jsxs("div",{className:"bg-white rounded-3xl overflow-hidden shadow-sm border border-stone-200 relative h-full flex flex-col",children:[c.jsx("div",{className:"absolute top-[65%] -left-3 w-6 h-6 bg-muji-bg rounded-full z-10 border-r border-stone-200"}),c.jsx("div",{className:"absolute top-[65%] -right-3 w-6 h-6 bg-muji-bg rounded-full z-10 border-l border-stone-200"}),c.jsxs("div",{className:"p-6 flex-1",children:[c.jsxs("div",{className:"flex justify-between items-start mb-6",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2.5 bg-stone-100 rounded-full text-stone-600",children:c.jsx(Pi,{size:24})}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-xl text-stone-800",children:q.title}),c.jsx("div",{className:"text-xs text-stone-400 font-mono tracking-wider",children:q.date})]})]}),c.jsx("div",{className:"text-2xl font-mono font-bold text-stone-800",children:q.subTitle})]}),c.jsxs("div",{className:"flex justify-between items-center px-2 mb-2",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-4xl font-black text-stone-800 font-mono",children:q.details.from}),q.details.terminal&&c.jsx("div",{className:"text-[10px] font-bold bg-stone-100 text-stone-500 rounded px-1 mt-1 inline-block",children:q.details.terminal}),c.jsx("div",{className:"text-sm font-bold text-stone-500 mt-1",children:q.details.departTime})]}),c.jsx("div",{className:"flex-1 border-b-2 border-dashed border-stone-300 mx-4 relative top-[-10px]",children:c.jsx(Pi,{size:16,className:"absolute -top-[9px] left-1/2 -translate-x-1/2 text-stone-300 rotate-90"})}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-4xl font-black text-stone-800 font-mono",children:q.details.to}),c.jsx("div",{className:"text-sm font-bold text-stone-500 mt-1",children:q.details.arriveTime})]})]})]}),c.jsx("div",{className:"border-b-2 border-dashed border-stone-200 w-full relative"}),c.jsxs("div",{className:"bg-stone-50 p-4 grid grid-cols-3 gap-2 text-center",children:[c.jsxs("div",{className:"border-r border-stone-200 last:border-0",children:[c.jsx("span",{className:"text-[10px] text-stone-400 block uppercase font-bold",children:""}),c.jsx("span",{className:"font-bold font-mono text-lg text-stone-800",children:q.details.counter||"--"})]}),c.jsxs("div",{className:"border-r border-stone-200 last:border-0",children:[c.jsx("span",{className:"text-[10px] text-stone-400 block uppercase font-bold",children:""}),c.jsx("span",{className:"font-bold font-mono text-lg text-muji-highlight",children:q.details.gate||"--"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-[10px] text-stone-400 block uppercase font-bold",children:""}),c.jsx("span",{className:"font-bold font-mono text-lg text-stone-800",children:q.details.baggage||"--"})]})]})]})]},q.id))})]}),X.length>0&&c.jsxs("div",{ref:k,className:"scroll-mt-24",children:[c.jsx("h3",{className:"text-sm font-bold text-stone-400 uppercase tracking-widest mb-3 ml-1",children:""}),c.jsx("div",{className:"space-y-4",children:X.map(q=>c.jsxs("div",{id:q.id,className:`relative group bg-white rounded-3xl overflow-hidden shadow-sm border transition-all duration-500 ${t===q.id?"ring-4 ring-orange-200 border-orange-400 scale-[1.02]":"border-stone-200"}`,children:[i&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>x(q.id),className:"absolute top-2 right-2 z-20 bg-red-500 text-white p-2 rounded-full shadow-lg hover:bg-red-600 transition-colors",children:c.jsx(tr,{size:16})}),c.jsx("button",{onClick:()=>T(q.id),className:"absolute top-2 right-12 z-20 bg-stone-800/80 backdrop-blur-sm text-white p-2 rounded-full shadow-lg hover:bg-stone-900 transition-colors",title:"",children:c.jsx(Fp,{size:16})})]}),c.jsxs("div",{className:"relative h-48",children:[c.jsx("img",{src:q.imageUrl||"https://via.placeholder.com/400x200?text=No+Image",alt:q.title,className:"w-full h-full object-cover",onError:ue=>{ue.target.src="https://images.unsplash.com/photo-1566073771259-6a8506099945?auto=format&fit=crop&w=800&q=80"}}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"}),c.jsxs("div",{className:"absolute bottom-4 left-4 text-white",children:[c.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold bg-white/20 backdrop-blur-md px-2 py-1 rounded-md w-fit mb-2",children:[c.jsx(Fc,{size:12})," ",q.subTitle]}),c.jsx("h3",{className:"font-bold text-2xl leading-tight",children:q.title})]})]}),c.jsxs("div",{className:"p-5",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4 pb-4 border-b border-stone-100",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-stone-400 uppercase",children:""}),c.jsx("div",{className:"font-bold text-stone-800 font-mono text-xl",children:q.details.checkIn})]}),c.jsx("div",{className:"text-stone-300 text-2xl font-light",children:"/"}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-xs text-stone-400 uppercase",children:""}),c.jsx("div",{className:"font-bold text-stone-800 font-mono text-xl",children:q.details.checkOut})]})]}),c.jsxs("div",{className:"flex items-center justify-between gap-2",children:[c.jsxs("div",{className:"flex items-start gap-2 text-sm text-stone-600 flex-1",children:[c.jsx(Vr,{size:16,className:"mt-0.5 flex-shrink-0 text-muji-highlight"}),c.jsx("span",{className:"line-clamp-2",children:q.details.address})]}),c.jsx("a",{href:q.details.mapLink||`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(q.title+" "+(q.details.address||""))}`,target:"_blank",rel:"noreferrer",className:"p-3 bg-stone-100 rounded-xl text-stone-600 hover:bg-stone-200 transition-colors",children:c.jsx(Jx,{size:20})})]})]})]},q.id))})]}),he.length>0&&c.jsxs("div",{ref:P,className:"scroll-mt-24",children:[c.jsx("h3",{className:"text-sm font-bold text-stone-400 uppercase tracking-widest mb-3 ml-1",children:""}),c.jsx("div",{className:"space-y-4",children:he.map(q=>c.jsxs("div",{id:q.id,className:`relative group bg-white rounded-3xl overflow-hidden shadow-sm border flex flex-col sm:flex-row transition-all duration-500 ${t===q.id?"ring-4 ring-orange-200 border-orange-400 scale-[1.02]":"border-stone-200"}`,children:[i&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>x(q.id),className:"absolute top-2 right-2 z-20 bg-red-500 text-white p-2 rounded-full shadow-lg hover:bg-red-600 transition-colors",children:c.jsx(tr,{size:16})}),c.jsx("button",{onClick:()=>T(q.id),className:"absolute top-2 right-12 z-20 bg-stone-800/80 backdrop-blur-sm text-white p-2 rounded-full shadow-lg hover:bg-stone-900 transition-colors",title:"",children:c.jsx(Fp,{size:16})})]}),c.jsx("div",{className:"w-full sm:w-1/3 h-40 sm:h-auto relative",children:c.jsx("img",{src:q.imageUrl||"https://via.placeholder.com/150x200?text=Food",alt:q.title,className:"w-full h-full object-cover absolute inset-0",onError:ue=>{ue.target.src="https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?auto=format&fit=crop&w=800&q=80"}})}),c.jsxs("div",{className:"flex-1 p-5 flex flex-col justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"flex items-center gap-2 mb-2",children:c.jsx("span",{className:"text-[10px] font-bold bg-orange-100 text-orange-600 px-2 py-0.5 rounded-full uppercase",children:""})}),c.jsx("h3",{className:"font-bold text-xl text-stone-800 leading-tight mb-1",children:q.title}),c.jsx("div",{className:"text-xs text-stone-500 mb-4",children:q.subTitle}),c.jsxs("div",{className:"space-y-2 text-sm text-stone-700 mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Hx,{size:14,className:"text-stone-400"}),c.jsx("span",{className:"font-mono",children:q.date})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(sd,{size:14,className:"text-stone-400"}),c.jsx("span",{className:"font-mono font-bold text-muji-highlight text-lg",children:q.time})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(ow,{size:14,className:"text-stone-400"}),c.jsxs("span",{children:[q.details.pax," "]})]})]})]}),c.jsxs("a",{href:q.details.mapLink||`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(q.title)}`,target:"_blank",rel:"noreferrer",className:"w-full bg-stone-800 hover:bg-stone-700 text-white text-sm font-bold py-3 rounded-xl flex items-center justify-center gap-2 transition-colors",children:[c.jsx(Vr,{size:16})," "]})]})]},q.id))})]}),i&&c.jsx("button",{onClick:()=>v(!0),className:"fixed bottom-24 right-6 bg-stone-800 text-white w-14 h-14 rounded-full shadow-xl flex items-center justify-center animate-in zoom-in hover:scale-105 transition-transform z-40",children:c.jsx(eo,{size:28})}),c.jsx("div",{className:"h-32 w-full"})]}),S&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm px-6",children:c.jsxs("div",{className:"bg-white p-6 rounded-3xl w-full max-w-sm shadow-2xl animate-in zoom-in-95",children:[c.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[c.jsx("div",{className:"bg-red-100 p-4 rounded-full text-red-500 mb-4",children:c.jsx(Ya,{size:32})}),c.jsx("h3",{className:"text-xl font-bold text-stone-800",children:""}),c.jsx("p",{className:"text-sm text-stone-500 mt-2",children:""})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>A(null),className:"flex-1 py-3 rounded-xl bg-stone-100 text-stone-600 font-bold hover:bg-stone-200 transition-colors",children:""}),c.jsx("button",{onClick:y,className:"flex-1 py-3 rounded-xl bg-red-500 text-white font-bold hover:bg-red-600 transition-colors shadow-sm",children:""})]})]})}),l&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm px-6",children:c.jsxs("div",{className:"bg-white p-8 rounded-3xl w-full max-w-sm shadow-2xl animate-in zoom-in-95",children:[c.jsx("h3",{className:"text-xl font-bold text-center mb-6 text-stone-800",children:""}),c.jsx("input",{type:"password",value:d,onChange:q=>p(q.target.value),placeholder:" PIN ",maxLength:4,className:"w-full text-center text-4xl font-mono tracking-[0.5em] border-b-2 border-stone-200 focus:border-stone-800 outline-none pb-2 mb-8 bg-transparent",autoFocus:!0}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:()=>u(!1),className:"flex-1 py-3 rounded-xl bg-stone-100 text-stone-500 font-bold",children:""}),c.jsx("button",{onClick:M,className:"flex-1 py-3 rounded-xl bg-stone-800 text-white font-bold",children:""})]})]})}),g&&c.jsx(ik,{onClose:()=>v(!1),onSave:C})]})},ik=({onClose:t,onSave:e})=>{const[n,r]=U.useState("dining"),[s,i]=U.useState(""),[a,l]=U.useState(""),[u,d]=U.useState(""),[p,g]=U.useState(""),[v,S]=U.useState(""),[A,b]=U.useState(""),[j,I]=U.useState(""),[w,k]=U.useState(""),[P,O]=U.useState(""),[M,x]=U.useState(!1),y=async E=>{var N;const C=(N=E.target.files)==null?void 0:N[0];if(C){const _=new FileReader;_.onloadend=async()=>{const X=_.result;try{const he=await ql(X);b(he)}catch{alert("")}},_.readAsDataURL(C)}},T=()=>{if(!s||!u)return;if(!M){x(!0);return}const E={id:Date.now().toString(),type:n,title:s,subTitle:a||(n==="flight"?"Flight #":n==="hotel"?"1 Night":"Reservation"),date:u,time:p,imageUrl:A,details:n==="flight"?{from:j||"AAA",to:w||"BBB",departTime:p,arriveTime:"--",gate:P||"--",terminal:"--",counter:"--",baggage:"--"}:n==="hotel"?{checkIn:p,checkOut:"--",address:v||"Tokyo",mapLink:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(v||s)}`}:{pax:2,mapLink:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(v||s)}`}};e(E)};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm px-4",children:c.jsxs("div",{className:"bg-white w-full max-w-md rounded-3xl p-6 shadow-2xl animate-in slide-in-from-bottom-10 max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h3",{className:"font-bold text-xl",children:""}),c.jsx("button",{onClick:t,children:c.jsx(nr,{size:24,className:"text-stone-400"})})]}),M?c.jsxs("div",{className:"text-center py-6",children:[c.jsxs("div",{className:"mb-8 text-stone-600",children:[" ",c.jsx("span",{className:"font-bold text-stone-800",children:s})," "]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>x(!1),className:"flex-1 py-3 bg-stone-100 text-stone-500 font-bold rounded-xl",children:""}),c.jsx("button",{onClick:T,className:"flex-1 py-3 bg-muji-highlight text-white font-bold rounded-xl shadow-md",children:""})]})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-stone-500 mb-1",children:""}),c.jsx("div",{className:"flex gap-2",children:[{id:"flight",label:""},{id:"hotel",label:""},{id:"dining",label:""}].map(E=>c.jsx("button",{onClick:()=>r(E.id),className:`flex-1 py-2 rounded-xl text-sm font-bold border ${n===E.id?"bg-stone-800 text-white border-stone-800":"bg-white text-stone-500 border-stone-200"}`,children:E.label},E.id))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-stone-500 mb-1",children:" ()"}),c.jsx("input",{value:s,onChange:E=>i(E.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:" / "})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-stone-500 mb-1",children:" ()"}),c.jsx("input",{value:a,onChange:E=>l(E.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:"JX804 / 3"})]}),n==="flight"&&c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-xs font-bold text-stone-500 mb-1",children:""}),c.jsx("input",{value:j,onChange:E=>I(E.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50 uppercase",placeholder:"TPE"})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-xs font-bold text-stone-500 mb-1",children:""}),c.jsx("input",{value:w,onChange:E=>k(E.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50 uppercase",placeholder:"NRT"})]})]}),n!=="flight"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-stone-500 mb-1",children:" / "}),c.jsx("input",{value:v,onChange:E=>S(E.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:""})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-xs font-bold text-stone-500 mb-1",children:""}),c.jsx("input",{value:u,onChange:E=>d(E.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:"YYYY/MM/DD"})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-xs font-bold text-stone-500 mb-1",children:""}),c.jsx("input",{value:p,onChange:E=>g(E.target.value),className:"w-full p-3 rounded-xl border border-stone-200 bg-stone-50",placeholder:"HH:MM"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-stone-500 mb-1",children:" ()"}),c.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border border-dashed border-stone-300 bg-stone-50 cursor-pointer hover:bg-stone-100",children:[c.jsx(kl,{size:20,className:"text-stone-400"}),c.jsx("span",{className:"text-sm text-stone-500 truncate",children:A?"":""}),c.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:y})]}),A&&c.jsx("img",{src:A,alt:"Preview",className:"h-20 rounded-lg mt-2 object-cover border border-stone-200"})]}),c.jsx("button",{onClick:T,className:"w-full py-4 bg-stone-800 text-white font-bold rounded-xl mt-4 shadow-md active:scale-95 transition-transform",children:""})]})]})})},ok=({currentTab:t,onTabChange:e})=>{const n=[{id:oe.RATE,label:"",icon:c.jsx(qx,{size:20})},{id:oe.GUIDE,label:"",icon:c.jsx(Xy,{size:20})},{id:oe.PLAN,label:"",icon:c.jsx(Gx,{size:28}),isCenter:!0},{id:oe.BOOKINGS,label:"",icon:c.jsx(e0,{size:20})},{id:oe.LISTS,label:"",icon:c.jsx(zc,{size:20})}];return c.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-md border-t border-stone-200 pb-safe pt-2 px-1 z-50",children:c.jsx("div",{className:"flex justify-around items-end pb-2 relative",children:n.map(r=>{const s=t===r.id;return r.isCenter?c.jsxs("button",{onClick:()=>e(r.id),className:"flex flex-col items-center justify-end -mt-6 transition-all duration-300",children:[c.jsx("div",{className:`p-4 rounded-full shadow-lg transition-all ${s?"bg-stone-800 text-white scale-110":"bg-white text-stone-400 border border-stone-100"}`,children:r.icon}),c.jsx("span",{className:`text-[10px] font-bold tracking-wide mt-1 ${s?"text-stone-800":"text-stone-400"}`,children:r.label})]},r.id):c.jsxs("button",{onClick:()=>e(r.id),className:`flex flex-col items-center gap-1 min-w-[50px] w-full transition-all duration-300 ${s?"text-stone-800 -translate-y-1":"text-stone-400 hover:text-stone-600"}`,children:[c.jsx("div",{className:`p-2 rounded-2xl transition-all ${s?"bg-stone-100 shadow-sm":""}`,children:r.icon}),c.jsx("span",{className:`text-[10px] font-bold tracking-wide ${s?"opacity-100":"opacity-0 h-0 overflow-hidden"}`,children:r.label})]},r.id)})})})};class Ov extends U.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Uncaught error:",e,n)}render(){var e;return this.state.hasError?c.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-6 bg-stone-100 text-stone-600 text-center",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4 text-stone-800",children:""}),c.jsx("p",{className:"mb-4 text-sm",children:""}),c.jsx("pre",{className:"bg-white p-4 rounded-lg text-xs text-left overflow-auto w-full max-w-sm mb-6 border border-red-200 text-red-500",children:(e=this.state.error)==null?void 0:e.toString()}),c.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-stone-800 text-white rounded-xl font-bold",children:""})]}):this.props.children}}const ak=()=>{const{isLoading:t,error:e,isCloudMode:n}=Fs(),[r,s]=U.useState(oe.PLAN),[i,a]=U.useState(null);if(t)return c.jsxs("div",{className:"min-h-screen bg-muji-bg flex flex-col items-center justify-center text-stone-400",children:[c.jsx(Uc,{className:"animate-spin mb-2",size:32}),c.jsx("p",{className:"text-sm font-medium tracking-widest",children:"..."})]});const l=(p,g)=>{s(p),g&&a(g)},u=p=>{s(p),a(null)},d=()=>{switch(r){case oe.PLAN:return c.jsx(Mm,{onNavigate:l});case oe.GUIDE:return c.jsx(JI,{highlightId:i});case oe.RATE:return c.jsx(tk,{});case oe.BOOKINGS:return c.jsx(sk,{highlightId:i});case oe.LISTS:return c.jsx(nk,{});default:return c.jsx(Mm,{onNavigate:l})}};return c.jsxs("div",{className:"min-h-screen bg-muji-bg font-sans text-muji-text selection:bg-stone-200",children:[c.jsx("header",{className:"sticky top-0 bg-muji-bg/80 backdrop-blur-sm z-40 px-6 pt-12 pb-2",children:c.jsx("div",{className:"flex justify-between items-center",children:c.jsxs("div",{children:[c.jsxs("h1",{className:"text-xl font-bold tracking-widest text-stone-700 flex items-center gap-2",children:["Tokyo Trip 2025",n&&c.jsx("div",{className:"w-2 h-2 rounded-full bg-sky-500 animate-pulse",title:""})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[n&&c.jsxs("span",{className:"text-[10px] text-sky-600 font-bold bg-sky-100 px-2 py-0.5 rounded flex items-center gap-1",children:[c.jsx(Xa,{size:10})," "]}),e&&c.jsxs("span",{className:"text-[10px] text-red-500 font-bold bg-red-100 px-2 py-0.5 rounded flex items-center gap-1",children:[c.jsx(Ya,{size:10})," "]})]})]})})}),c.jsx("main",{className:"max-w-md mx-auto min-h-screen relative",children:c.jsx(Ov,{children:d()})}),c.jsx(ok,{currentTab:r,onTabChange:u}),c.jsx("div",{className:"h-safe-bottom"})]})},lk=()=>c.jsx(Ov,{children:c.jsx($I,{children:c.jsx(ak,{})})}),uk=()=>{if(document.getElementById("tailwind-cdn"))return;const t=document.createElement("script");t.innerHTML=`
    const initTailwind = () => {
      if (window.tailwind) {
        window.tailwind.config = {
          theme: {
            extend: {
              fontFamily: {
                sans: ['"Zen Maru Gothic"', 'sans-serif'],
              },
              colors: {
                muji: {
                  bg: '#f9f9f6',
                  card: '#ffffff',
                  text: '#4a4a4a',
                  muted: '#9ca3af',
                  accent: '#78716c',
                  highlight: '#d97706',
                  primary: '#57534e',
                }
              }
            }
          }
        };
      } else {
        setTimeout(initTailwind, 20);
      }
    };
    initTailwind();
  `,document.head.appendChild(t);const e=document.createElement("script");e.id="tailwind-cdn",e.src="https://cdn.tailwindcss.com",document.head.appendChild(e)};uk();const Lv=document.getElementById("root");if(!Lv)throw new Error("Could not find root element to mount to");const ck=Hu.createRoot(Lv);ck.render(c.jsx(I_.StrictMode,{children:c.jsx(lk,{})}));
